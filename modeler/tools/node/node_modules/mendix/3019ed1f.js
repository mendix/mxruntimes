var DP=20,RM=1,MAX_DP=1e6,NE=-7,PE=21,NAME="[big.js] ",INVALID=NAME+"Invalid ",INVALID_DP=INVALID+"decimal places",INVALID_RM=INVALID+"rounding mode",P={},UNDEFINED=void 0,NUMERIC=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function round(x,dp,rm,more){var xc=x.c,i=x.e+dp+1;if(i<xc.length){if(1===rm)more=xc[i]>=5;else if(2===rm)more=xc[i]>5||5==xc[i]&&(more||i<0||xc[i+1]!==UNDEFINED||1&xc[i-1]);else if(3===rm)more=more||!!xc[0];else if(more=!1,0!==rm)throw Error(INVALID_RM);if(i<1)xc.length=1,more?(x.e=-dp,xc[0]=1):xc[0]=x.e=0;else{if(xc.length=i--,more)for(;++xc[i]>9;)xc[i]=0,i--||(++x.e,xc.unshift(1));for(i=xc.length;!xc[--i];)xc.pop()}}else if(rm<0||rm>3||rm!==~~rm)throw Error(INVALID_RM);return x}function stringify(x,id,n,k){var e,s,Big=x.constructor,z=!x.c[0];if(n!==UNDEFINED){if(n!==~~n||n<(3==id)||n>MAX_DP)throw Error(3==id?INVALID+"precision":INVALID_DP);for(n=k-(x=new Big(x)).e,x.c.length>++k&&round(x,n,Big.RM),2==id&&(k=x.e+n+1);x.c.length<k;)x.c.push(0)}if(e=x.e,n=(s=x.c.join("")).length,2!=id&&(1==id||3==id&&k<=e||e<=Big.NE||e>=Big.PE))s=s.charAt(0)+(n>1?"."+s.slice(1):"")+(e<0?"e":"e+")+e;else if(e<0){for(;++e;)s="0"+s;s="0."+s}else if(e>0)if(++e>n)for(e-=n;e--;)s+="0";else e<n&&(s=s.slice(0,e)+"."+s.slice(e));else n>1&&(s=s.charAt(0)+"."+s.slice(1));return x.s<0&&(!z||4==id)?"-"+s:s}P.abs=function(){var x=new this.constructor(this);return x.s=1,x},P.cmp=function(y){var isneg,x=this,xc=x.c,yc=(y=new x.constructor(y)).c,i=x.s,j=y.s,k=x.e,l=y.e;if(!xc[0]||!yc[0])return xc[0]?i:yc[0]?-j:0;if(i!=j)return i;if(isneg=i<0,k!=l)return k>l^isneg?1:-1;for(j=(k=xc.length)<(l=yc.length)?k:l,i=-1;++i<j;)if(xc[i]!=yc[i])return xc[i]>yc[i]^isneg?1:-1;return k==l?0:k>l^isneg?1:-1},P.div=function(y){var x=this,Big=x.constructor,a=x.c,b=(y=new Big(y)).c,k=x.s==y.s?1:-1,dp=Big.DP;if(dp!==~~dp||dp<0||dp>MAX_DP)throw Error(INVALID_DP);if(!b[0])throw Error("[big.js] Division by zero");if(!a[0])return new Big(0*k);var bl,bt,n,cmp,ri,bz=b.slice(),ai=bl=b.length,al=a.length,r=a.slice(0,bl),rl=r.length,q=y,qc=q.c=[],qi=0,d=dp+(q.e=x.e-y.e)+1;for(q.s=k,k=d<0?0:d,bz.unshift(0);rl++<bl;)r.push(0);do{for(n=0;n<10;n++){if(bl!=(rl=r.length))cmp=bl>rl?1:-1;else for(ri=-1,cmp=0;++ri<bl;)if(b[ri]!=r[ri]){cmp=b[ri]>r[ri]?1:-1;break}if(!(cmp<0))break;for(bt=rl==bl?b:bz;rl;){if(r[--rl]<bt[rl]){for(ri=rl;ri&&!r[--ri];)r[ri]=9;--r[ri],r[rl]+=10}r[rl]-=bt[rl]}for(;!r[0];)r.shift()}qc[qi++]=cmp?n:++n,r[0]&&cmp?r[rl]=a[ai]||0:r=[a[ai]]}while((ai++<al||r[0]!==UNDEFINED)&&k--);return qc[0]||1==qi||(qc.shift(),q.e--),qi>d&&round(q,dp,Big.RM,r[0]!==UNDEFINED),q},P.eq=function(y){return!this.cmp(y)},P.gt=function(y){return this.cmp(y)>0},P.gte=function(y){return this.cmp(y)>-1},P.lt=function(y){return this.cmp(y)<0},P.lte=function(y){return this.cmp(y)<1},P.minus=P.sub=function(y){var i,j,t,xlty,x=this,Big=x.constructor,a=x.s,b=(y=new Big(y)).s;if(a!=b)return y.s=-b,x.plus(y);var xc=x.c.slice(),xe=x.e,yc=y.c,ye=y.e;if(!xc[0]||!yc[0])return yc[0]?(y.s=-b,y):new Big(xc[0]?x:0);if(a=xe-ye){for((xlty=a<0)?(a=-a,t=xc):(ye=xe,t=yc),t.reverse(),b=a;b--;)t.push(0);t.reverse()}else for(j=((xlty=xc.length<yc.length)?xc:yc).length,a=b=0;b<j;b++)if(xc[b]!=yc[b]){xlty=xc[b]<yc[b];break}if(xlty&&(t=xc,xc=yc,yc=t,y.s=-y.s),(b=(j=yc.length)-(i=xc.length))>0)for(;b--;)xc[i++]=0;for(b=i;j>a;){if(xc[--j]<yc[j]){for(i=j;i&&!xc[--i];)xc[i]=9;--xc[i],xc[j]+=10}xc[j]-=yc[j]}for(;0===xc[--b];)xc.pop();for(;0===xc[0];)xc.shift(),--ye;return xc[0]||(y.s=1,xc=[ye=0]),y.c=xc,y.e=ye,y},P.mod=function(y){var ygtx,x=this,Big=x.constructor,a=x.s,b=(y=new Big(y)).s;if(!y.c[0])throw Error("[big.js] Division by zero");return x.s=y.s=1,ygtx=1==y.cmp(x),x.s=a,y.s=b,ygtx?new Big(x):(a=Big.DP,b=Big.RM,Big.DP=Big.RM=0,x=x.div(y),Big.DP=a,Big.RM=b,this.minus(x.times(y)))},P.plus=P.add=function(y){var t,x=this,Big=x.constructor,a=x.s,b=(y=new Big(y)).s;if(a!=b)return y.s=-b,x.minus(y);var xe=x.e,xc=x.c,ye=y.e,yc=y.c;if(!xc[0]||!yc[0])return yc[0]?y:new Big(xc[0]?x:0*a);if(xc=xc.slice(),a=xe-ye){for(a>0?(ye=xe,t=yc):(a=-a,t=xc),t.reverse();a--;)t.push(0);t.reverse()}for(xc.length-yc.length<0&&(t=yc,yc=xc,xc=t),a=yc.length,b=0;a;xc[a]%=10)b=(xc[--a]=xc[a]+yc[a]+b)/10|0;for(b&&(xc.unshift(b),++ye),a=xc.length;0===xc[--a];)xc.pop();return y.c=xc,y.e=ye,y},P.pow=function(n){var x=this,one=new x.constructor(1),y=one,isneg=n<0;if(n!==~~n||n<-1e6||n>1e6)throw Error(INVALID+"exponent");for(isneg&&(n=-n);1&n&&(y=y.times(x)),n>>=1;)x=x.times(x);return isneg?one.div(y):y},P.round=function(dp,rm){var Big=this.constructor;if(dp===UNDEFINED)dp=0;else if(dp!==~~dp||dp<-MAX_DP||dp>MAX_DP)throw Error(INVALID_DP);return round(new Big(this),dp,rm===UNDEFINED?Big.RM:rm)},P.sqrt=function(){var r,c,t,x=this,Big=x.constructor,s=x.s,e=x.e,half=new Big(.5);if(!x.c[0])return new Big(x);if(s<0)throw Error(NAME+"No square root");0===(s=Math.sqrt(x+""))||s===1/0?((c=x.c.join("")).length+e&1||(c+="0"),e=((e+1)/2|0)-(e<0||1&e),r=new Big(((s=Math.sqrt(c))==1/0?"1e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+e)):r=new Big(s),e=r.e+(Big.DP+=4);do{t=r,r=half.times(t.plus(x.div(t)))}while(t.c.slice(0,e).join("")!==r.c.slice(0,e).join(""));return round(r,Big.DP-=4,Big.RM)},P.times=P.mul=function(y){var c,x=this,Big=x.constructor,xc=x.c,yc=(y=new Big(y)).c,a=xc.length,b=yc.length,i=x.e,j=y.e;if(y.s=x.s==y.s?1:-1,!xc[0]||!yc[0])return new Big(0*y.s);for(y.e=i+j,a<b&&(c=xc,xc=yc,yc=c,j=a,a=b,b=j),c=new Array(j=a+b);j--;)c[j]=0;for(i=b;i--;){for(b=0,j=a+i;j>i;)b=c[j]+yc[i]*xc[j-i-1]+b,c[j--]=b%10,b=b/10|0;c[j]=(c[j]+b)%10}for(b?++y.e:c.shift(),i=c.length;!c[--i];)c.pop();return y.c=c,y},P.toExponential=function(dp){return stringify(this,1,dp,dp)},P.toFixed=function(dp){return stringify(this,2,dp,this.e+dp)},P.toPrecision=function(sd){return stringify(this,3,sd,sd-1)},P.toString=function(){return stringify(this)},P.valueOf=P.toJSON=function(){return stringify(this,4)};var Big=function _Big_(){function Big(n){var x=this;if(!(x instanceof Big))return n===UNDEFINED?_Big_():new Big(n);n instanceof Big?(x.s=n.s,x.e=n.e,x.c=n.c.slice()):function(x,n){var e,i,nl;if(0===n&&1/n<0)n="-0";else if(!NUMERIC.test(n+=""))throw Error(INVALID+"number");for(x.s="-"==n.charAt(0)?(n=n.slice(1),-1):1,(e=n.indexOf("."))>-1&&(n=n.replace(".","")),(i=n.search(/e/i))>0?(e<0&&(e=i),e+=+n.slice(i+1),n=n.substring(0,i)):e<0&&(e=n.length),nl=n.length,i=0;i<nl&&"0"==n.charAt(i);)++i;if(i==nl)x.c=[x.e=0];else{for(;nl>0&&"0"==n.charAt(--nl););for(x.e=e-i-1,x.c=[],e=0;i<=nl;)x.c[e++]=+n.charAt(i++)}}(x,n),x.constructor=Big}return Big.prototype=P,Big.DP=DP,Big.RM=RM,Big.NE=NE,Big.PE=PE,Big.version="5.2.2",Big}();export{Big as a,Big as b};
