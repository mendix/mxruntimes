import{StyleSheet,Image as Image$1}from"react-native";import{useMemo,createElement}from"react";import{SvgXml}from"react-native-svg";const extractorRegExps={height:/\sheight=(['"])([^%]+?)\1/,root:/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},units={cm:96/2.54,em:16,ex:8,m:96/2.54*100,mm:96/2.54/10,pc:96/72/12,pt:96/72};function parseLength(len){const m=/([0-9.]+)([a-z]*)/.exec(len);if(m)return Math.round(parseFloat(m[1])*(units[m[2]]||1))}function parseViewbox(viewbox){const bounds=viewbox.split(" ");return{height:parseLength(bounds[3]),width:parseLength(bounds[2])}}function calculateSvgDimensions(xml){const root=extractorRegExps.root.exec(xml);if(root){const attrs=function(root){const width=extractorRegExps.width.exec(root),height=extractorRegExps.height.exec(root),viewbox=extractorRegExps.viewbox.exec(root);return{height:height?parseLength(height[2]):void 0,viewbox:viewbox?parseViewbox(viewbox[2]):void 0,width:width?parseLength(width[2]):void 0}}(root[0]);if(attrs.width&&attrs.height)return{width:attrs.width,height:attrs.height};if(attrs.viewbox)return function(attrs,viewbox){const ratio=viewbox.width/viewbox.height;return attrs.width?{height:Math.floor(attrs.width/ratio),width:attrs.width}:attrs.height?{height:attrs.height,width:Math.floor(attrs.height*ratio)}:{height:viewbox.height,width:viewbox.width}}(attrs,attrs.viewbox)}return{width:0,height:0}}function Image({testID:testID,source:source,style:style,color:color}){if("string"==typeof source){const dimensions=useMemo(()=>calculateSvgDimensions(source),[source]);return createElement(SvgXml,Object.assign({xml:source,style:StyleSheet.flatten([{width:dimensions.width,height:dimensions.height},style]),width:void 0,height:void 0,testID:testID},void 0!==color?{fill:color,color:color}:{color:"black"}))}return createElement(Image$1,{source:source,style:style,fadeDuration:0,testID:testID})}export{Image};
