module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=104)}([function(t,e){t.exports=require("react")},function(t,e){t.exports=require("react-native")},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t="Unexpected error occurred, please contact your system administrator."){super(t),Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"g",function(){return a}),n.d(e,"f",function(){return c}),n.d(e,"e",function(){return u}),n.d(e,"h",function(){return l}),n.d(e,"j",function(){return h}),n.d(e,"l",function(){return f}),n.d(e,"k",function(){return p}),n.d(e,"i",function(){return d}),n.d(e,"m",function(){return g}),n.d(e,"a",function(){return m});var r=n(2);function i(t){if(null==t)throw new Error("Did not expect an argument to be undefined");return t}function o(){throw new r.a}function s(t){return t.displayName||t.name||"<component>"}function a(t){return"string"==typeof t}function c(t){return null!=t&&"object"==typeof t&&t.constructor==={}.constructor}function u(t,e){return e instanceof Array&&e.every(e=>void 0===e||e instanceof t)}function l(t){return t instanceof Array&&t.every(t=>void 0===t||"string"==typeof t)}function h(t){const e=t.split("/");return e.length>1&&e.shift(),{attribute:e.pop(),entityPath:e.length?e.join("/"):void 0}}function f(t){const e=[];return t.forEach(t=>{-1===e.indexOf(t)&&e.push(t)}),e}function p(...t){return t}function d(t,e){const n={};return Object.keys(t).forEach(r=>n[r]=e(t[r])),n}function g(t,e){const n=[],r={};return t.forEach(t=>{const i=e(t);Object.prototype.hasOwnProperty.call(r,i)||(r[i]=!0,n.push(t))}),n}function m(t){return[].concat(...t)}},function(t,e,n){n.d(e,"a",function(){return u});var r=n(6),i=n(32),o=36e5,s=6e4,a=2,c={dateTimeDelimeter:/[T ]/,plainTime:/:/,timeZoneDelimeter:/[Z ]/i,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-])(\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function u(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===t)return new Date(NaN);var n=e||{},u=null==n.additionalDigits?a:Object(r.a)(n.additionalDigits);if(2!==u&&1!==u&&0!==u)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))return new Date(t.getTime());if("number"==typeof t||"[object Number]"===Object.prototype.toString.call(t))return new Date(t);if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var h=function(t){var e,n={},r=t.split(c.dateTimeDelimeter);c.plainTime.test(r[0])?(n.date=null,e=r[0]):(n.date=r[0],e=r[1],c.timeZoneDelimeter.test(n.date)&&(n.date=t.split(c.timeZoneDelimeter)[0],e=t.substr(n.date.length,t.length)));if(e){var i=c.timezone.exec(e);i?(n.time=e.replace(i[1],""),n.timezone=i[1]):n.time=e}return n}(t),f=function(t,e){var n,r=c.YYY[e],i=c.YYYYY[e];if(n=c.YYYY.exec(t)||i.exec(t)){var o=n[1];return{year:parseInt(o,10),restDateString:t.slice(o.length)}}if(n=c.YY.exec(t)||r.exec(t)){var s=n[1];return{year:100*parseInt(s,10),restDateString:t.slice(s.length)}}return{year:null}}(h.date,u),y=f.year,w=function(t,e){if(null===e)return null;var n,r,i,o;if(0===t.length)return(r=new Date(0)).setUTCFullYear(e),r;if(n=c.MM.exec(t))return r=new Date(0),i=parseInt(n[1],10)-1,d(e,i)?(r.setUTCFullYear(e,i),r):new Date(NaN);if(n=c.DDD.exec(t)){r=new Date(0);var s=parseInt(n[1],10);return function(t,e){if(e<1)return!1;var n=p(t);if(n&&e>366)return!1;if(!n&&e>365)return!1;return!0}(e,s)?(r.setUTCFullYear(e,0,s),r):new Date(NaN)}if(n=c.MMDD.exec(t)){r=new Date(0),i=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return d(e,i,a)?(r.setUTCFullYear(e,i,a),r):new Date(NaN)}if(n=c.Www.exec(t))return o=parseInt(n[1],10)-1,g(e,o)?l(e,o):new Date(NaN);if(n=c.WwwD.exec(t)){o=parseInt(n[1],10)-1;var u=parseInt(n[2],10)-1;return g(e,o,u)?l(e,o,u):new Date(NaN)}return null}(f.restDateString,y);if(isNaN(w))return new Date(NaN);if(w){var v,j=w.getTime(),O=0;if(h.time&&(O=function(t){var e,n,r;if(e=c.HH.exec(t))return m(n=parseFloat(e[1].replace(",",".")))?n%24*o:NaN;if(e=c.HHMM.exec(t))return n=parseInt(e[1],10),r=parseFloat(e[2].replace(",",".")),m(n,r)?n%24*o+r*s:NaN;if(e=c.HHMMSS.exec(t)){n=parseInt(e[1],10),r=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return m(n,r,i)?n%24*o+r*s+1e3*i:NaN}return null}(h.time),isNaN(O)))return new Date(NaN);if(h.timezone){if(v=function(t){var e,n,r;if(e=c.timezoneZ.exec(t))return 0;if(e=c.timezoneHH.exec(t))return b(r=parseInt(e[2],10))?(n=r*o,"+"===e[1]?-n:n):NaN;if(e=c.timezoneHHMM.exec(t)){r=parseInt(e[2],10);var i=parseInt(e[3],10);return b(r,i)?(n=r*o+i*s,"+"===e[1]?-n:n):NaN}return 0}(h.timezone),isNaN(v))return new Date(NaN)}else v=Object(i.a)(new Date(j+O)),v=Object(i.a)(new Date(j+O+v));return new Date(j+O+v)}return new Date(NaN)}function l(t,e,n){e=e||0,n=n||0;var r=new Date(0);r.setUTCFullYear(t,0,4);var i=7*e+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}var h=[31,28,31,30,31,30,31,31,30,31,30,31],f=[31,29,31,30,31,30,31,31,30,31,30,31];function p(t){return t%400==0||t%4==0&&t%100!=0}function d(t,e,n){if(e<0||e>11)return!1;if(null!=n){if(n<1)return!1;var r=p(t);if(r&&n>f[e])return!1;if(!r&&n>h[e])return!1}return!0}function g(t,e,n){return!(e<0||e>52)&&(null==n||!(n<0||n>6))}function m(t,e,n){return(null==t||!(t<0||t>=25))&&((null==e||!(e<0||e>=60))&&(null==n||!(n<0||n>=60)))}function b(t,e){return null==e||!(e<0||e>59)}},function(t,e,n){var r;!function(i){var o,s=20,a=1,c=-7,u=21,l={},h=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function f(t,e,n){var r=t.constructor,i=e-(t=new r(t)).e,o=t.c;for(o.length>++e&&p(t,i,r.RM),o[0]?n?i=e:(o=t.c,i=t.e+i+1):++i;o.length<i;o.push(0));return i=t.e,1===n||n&&(e<=i||i<=c)?(t.s<0&&o[0]?"-":"")+(o.length>1?o[0]+"."+o.join("").slice(1):o[0])+(i<0?"e":"e+")+i:t.toString()}function p(t,e,n,r){var i,o=t.c,s=t.e+e+1;if(1===n?r=o[s]>=5:2===n?r=o[s]>5||5==o[s]&&(r||s<0||o[s+1]!==i||1&o[s-1]):3===n?r=r||o[s]!==i||s<0:(r=!1,0!==n&&d("!Big.RM!")),s<1||!o[0])r?(t.e=-e,t.c=[1]):t.c=[t.e=0];else{if(o.length=s--,r)for(;++o[s]>9;)o[s]=0,s--||(++t.e,o.unshift(1));for(s=o.length;!o[--s];o.pop());}return t}function d(t){var e=new Error(t);throw e.name="BigError",e}l.abs=function(){var t=new this.constructor(this);return t.s=1,t},l.cmp=function(t){var e,n=this,r=n.c,i=(t=new n.constructor(t)).c,o=n.s,s=t.s,a=n.e,c=t.e;if(!r[0]||!i[0])return r[0]?o:i[0]?-s:0;if(o!=s)return o;if(e=o<0,a!=c)return a>c^e?1:-1;for(o=-1,s=(a=r.length)<(c=i.length)?a:c;++o<s;)if(r[o]!=i[o])return r[o]>i[o]^e?1:-1;return a==c?0:a>c^e?1:-1},l.div=function(t){var e=this,n=e.constructor,r=e.c,i=(t=new n(t)).c,o=e.s==t.s?1:-1,s=n.DP;if((s!==~~s||s<0||s>1e6)&&d("!Big.DP!"),!r[0]||!i[0])return r[0]==i[0]&&d(NaN),i[0]||d(o/0),new n(0*o);var a,c,u,l,h,f,g=i.slice(),m=a=i.length,b=r.length,y=r.slice(0,a),w=y.length,v=t,j=v.c=[],O=0,x=s+(v.e=e.e-t.e)+1;for(v.s=o,o=x<0?0:x,g.unshift(0);w++<a;y.push(0));do{for(u=0;u<10;u++){if(a!=(w=y.length))l=a>w?1:-1;else for(h=-1,l=0;++h<a;)if(i[h]!=y[h]){l=i[h]>y[h]?1:-1;break}if(!(l<0))break;for(c=w==a?i:g;w;){if(y[--w]<c[w]){for(h=w;h&&!y[--h];y[h]=9);--y[h],y[w]+=10}y[w]-=c[w]}for(;!y[0];y.shift());}j[O++]=l?u:++u,y[0]&&l?y[w]=r[m]||0:y=[r[m]]}while((m++<b||y[0]!==f)&&o--);return j[0]||1==O||(j.shift(),v.e--),O>x&&p(v,s,n.RM,y[0]!==f),v},l.eq=function(t){return!this.cmp(t)},l.gt=function(t){return this.cmp(t)>0},l.gte=function(t){return this.cmp(t)>-1},l.lt=function(t){return this.cmp(t)<0},l.lte=function(t){return this.cmp(t)<1},l.minus=function(t){var e,n,r,i,o=this,s=o.constructor,a=o.s,c=(t=new s(t)).s;if(a!=c)return t.s=-c,o.plus(t);var u=o.c.slice(),l=o.e,h=t.c,f=t.e;if(!u[0]||!h[0])return h[0]?(t.s=-c,t):new s(u[0]?o:0);if(a=l-f){for((i=a<0)?(a=-a,r=u):(f=l,r=h),r.reverse(),c=a;c--;r.push(0));r.reverse()}else for(n=((i=u.length<h.length)?u:h).length,a=c=0;c<n;c++)if(u[c]!=h[c]){i=u[c]<h[c];break}if(i&&(r=u,u=h,h=r,t.s=-t.s),(c=(n=h.length)-(e=u.length))>0)for(;c--;u[e++]=0);for(c=e;n>a;){if(u[--n]<h[n]){for(e=n;e&&!u[--e];u[e]=9);--u[e],u[n]+=10}u[n]-=h[n]}for(;0==u[--c];u.pop());for(;0==u[0];)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t},l.mod=function(t){var e,n=this,r=n.constructor,i=n.s,o=(t=new r(t)).s;return t.c[0]||d(NaN),n.s=t.s=1,e=1==t.cmp(n),n.s=i,t.s=o,e?new r(n):(i=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=i,r.RM=o,this.minus(n.times(t)))},l.plus=function(t){var e,n=this,r=n.constructor,i=n.s,o=(t=new r(t)).s;if(i!=o)return t.s=-o,n.minus(t);var s=n.e,a=n.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]?t:new r(a[0]?n:0*i);if(a=a.slice(),i=s-c){for(i>0?(c=s,e=u):(i=-i,e=a),e.reverse();i--;e.push(0));e.reverse()}for(a.length-u.length<0&&(e=u,u=a,a=e),i=u.length,o=0;i;)o=(a[--i]=a[i]+u[i]+o)/10|0,a[i]%=10;for(o&&(a.unshift(o),++c),i=a.length;0==a[--i];a.pop());return t.c=a,t.e=c,t},l.pow=function(t){var e=this,n=new e.constructor(1),r=n,i=t<0;for((t!==~~t||t<-1e6||t>1e6)&&d("!pow!"),t=i?-t:t;1&t&&(r=r.times(e)),t>>=1;)e=e.times(e);return i?n.div(r):r},l.round=function(t,e){var n=this,r=n.constructor;return null==t?t=0:(t!==~~t||t<0||t>1e6)&&d("!round!"),p(n=new r(n),t,null==e?r.RM:e),n},l.sqrt=function(){var t,e,n,r=this,i=r.constructor,o=r.c,s=r.s,a=r.e,c=new i("0.5");if(!o[0])return new i(r);s<0&&d(NaN),0==(s=Math.sqrt(r.toString()))||s==1/0?((t=o.join("")).length+a&1||(t+="0"),(e=new i(Math.sqrt(t).toString())).e=((a+1)/2|0)-(a<0||1&a)):e=new i(s.toString()),s=e.e+(i.DP+=4);do{n=e,e=c.times(n.plus(r.div(n)))}while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return p(e,i.DP-=4,i.RM),e},l.times=function(t){var e,n=this,r=n.constructor,i=n.c,o=(t=new r(t)).c,s=i.length,a=o.length,c=n.e,u=t.e;if(t.s=n.s==t.s?1:-1,!i[0]||!o[0])return new r(0*t.s);for(t.e=c+u,s<a&&(e=i,i=o,o=e,u=s,s=a,a=u),e=new Array(u=s+a);u--;e[u]=0);for(c=a;c--;){for(a=0,u=s+c;u>c;)a=e[u]+o[c]*i[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=(e[u]+a)%10}for(a&&++t.e,e[0]||e.shift(),c=e.length;!e[--c];e.pop());return t.c=e,t},l.toString=l.valueOf=l.toJSON=function(){var t=this,e=t.e,n=t.c.join(""),r=n.length;if(e<=c||e>=u)n=n.charAt(0)+(r>1?"."+n.slice(1):"")+(e<0?"e":"e+")+e;else if(e<0){for(;++e;n="0"+n);n="0."+n}else if(e>0)if(++e>r)for(e-=r;e--;n+="0");else e<r&&(n=n.slice(0,e)+"."+n.slice(e));else r>1&&(n=n.charAt(0)+"."+n.slice(1));return t.s<0&&t.c[0]?"-"+n:n},l.toExponential=function(t){return null==t?t=this.c.length-1:(t!==~~t||t<0||t>1e6)&&d("!toExp!"),f(this,t,1)},l.toFixed=function(t){var e,n=this,r=c,i=u;return c=-(u=1/0),null==t?e=n.toString():t===~~t&&t>=0&&t<=1e6&&(e=f(n,n.e+t),n.s<0&&n.c[0]&&e.indexOf("-")<0&&(e="-"+e)),c=r,u=i,e||d("!toFix!"),e},l.toPrecision=function(t){return null==t?this.toString():((t!==~~t||t<1||t>1e6)&&d("!toPre!"),f(this,t-1,2))},o=function t(){function e(n){var r=this;if(!(r instanceof e))return void 0===n?t():new e(n);n instanceof e?(r.s=n.s,r.e=n.e,r.c=n.c.slice()):function(t,e){var n,r,i;for(0===e&&1/e<0?e="-0":h.test(e+="")||d(NaN),t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;"0"==e.charAt(r);r++);if(r==(i=e.length))t.c=[t.e=0];else{for(;"0"==e.charAt(--i););for(t.e=n-r-1,t.c=[],n=0;r<=i;t.c[n++]=+e.charAt(r++));}}(r,n),r.constructor=e}return e.prototype=l,e.DP=s,e.RM=a,e}(),void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){function r(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}n.d(e,"a",function(){return r})},function(t,e,n){n.r(e),n.d(e,"MxObject",function(){return h});var r=n(2),i=n(5),o=n.n(i),s=n(10),a=n.n(s),c=n(17),u=n.n(c);const l=Symbol("snapshot");class h{constructor(t){if(this._guid="0",this._deleted=!1,this.metaData=null,this.jsonData=null,this.id="mendix.lib.MxObject",!(t.meta&&t.json&&t.json.objectType)){var e=this.metaData&&this.metaData.getEntity();throw new Error("new MxObject(): cannot create Mendix object.  Check entity access"+(e?" for entity "+e:""))}this.metaData=t.meta,this._setJsonData(t.json),this.id+="("+this.jsonData.objectType+":"+this._guid+")"}resetFromJSON(t){this._setJsonData(t)}markDeleted(){this._setJsonData({guid:this._guid,attributes:{}}),this._deleted=!0}_setJsonData(t){for(var e in this.jsonData=t,this._guid=t.guid,t.attributes)this._setAttributeValue(e,this._getAttributeValue(e))}getGuid(){return this._guid}hasChanges(){return!a.a.objectIsEmpty(window.mx.data.getChanges(this._guid))}snapshot(){return this[l]||(this[l]=new(n(88).MxObjectSnapshot)(this))}isDeleted(){return this._deleted}set(t,e){this._setContent(t,e)}isReadonlyAttr(t){return this.has(t)?!!this.jsonData.attributes[t].readonly:!this.metaData.has(t)}fetch(t,e,n){let i;i=t?t instanceof Array?t.slice():t.split("/"):[],this.isA(i[0])&&i.shift();let o=this;const s=()=>{if(0===i.length)e(o);else if(1===i.length)e(o.get(i[0]));else{const t=i.shift(),n=i.shift();o._fetchReference(t,n,t=>{void 0===t?e(null):Array.isArray(t)?0===i.length?e(t):a(new r.a(this.id+".fetch : "+o+" reference set should be last reference in path")):(o=t,s())},a)}};function a(t){n?n(t):window.mx.onError(t)}s()}_fetchReference(t,e,n,r){const i=this.getReferences(t);0!==i.length?window.mx.data.get({guids:i,callback:r=>{if(this.isObjectReferenceSet(t))0===r.length||r[0].isA(e)?n(r):n(void 0);else{const t=r[0];t&&t.isA(e)?n(t):n(void 0)}},error:r}):n(void 0)}get(t){if("string"!=typeof t)throw new r.a("parameter attr "+t+" is not of type String");return this.has(t)?this._convertToClientValue(t,this._getRawValue(t)):null}getOriginalValue(t){if("string"!=typeof t)throw new r.a("parameter attr "+t+" is not of type String");return this.has(t)?this._convertToClientValue(t,this._getRawOriginalValue(t)):null}has(t){if("string"!=typeof t)throw new r.a("attribute parameter is not a string");return Object.prototype.hasOwnProperty.call(this.jsonData.attributes,t)}getReferences(t){if("string"!=typeof t)throw new r.a("parameter attr "+t+" is not of type String.");if(!this.has(t))return[];if(!this.isReference(t))throw new r.a("attribute "+t+" is not an ObjectReference(Set).");const e=this._getRawValue(t);return this.isObjectReference(t)?null==e?[]:[e]:null==e?[]:e.slice()}getOriginalReferences(t){if("string"!=typeof t)throw new r.a("parameter attr "+t+" is not of type String.");if(!this.has(t))return[];if(!this.isReference(t))throw new r.a("attribute "+t+" is not an ObjectReference(Set).");const e=this._getRawOriginalValue(t);return this.isObjectReference(t)?null==e?[]:[e]:null==e?[]:e.slice()}getReference(t){return this.get(t)}isEnum(t){return this.metaData.isEnum(t)}isNumeric(t){return this.metaData.isNumeric(t)}isCurrency(t){return this.metaData.isCurrency(t)}isPassword(t){return this.metaData.isPassword(t)}isDate(t){return this.metaData.isDate(t)}isLocalizedDate(t){return this.metaData.isLocalizedDate(t)}isBoolean(t){return this.metaData.isBoolean(t)}isReference(t){return this.metaData.isReference(t)}isObjectReference(t){return this.metaData.isObjectReference(t)}isObjectReferenceSet(t){return this.metaData.isObjectReferenceSet(t)}getOptions(t){return this.metaData.getOptions(t)}getEnumMap(t){return this.metaData.getEnumMap(t)}getEnumKVPairs(t){return this.metaData.getEnumKVPairs(t)}getEnumCaption(t){return this.metaData.getEnumCaption(t,this.get(t))}hasChildren(t){if("string"!=typeof t)throw new r.a("parameter attr ("+t+") is not of type String.");return!this._attributeChanged(t)&&this._hasChildren(t)}getChildren(t){if("string"!=typeof t)throw new r.a("parameter attr ("+t+") is not of type String.");if(!this.has(t))return[];if(!this.isReference(t))throw new r.a("attribute "+t+" is not an ObjectReference(Set).");return this._attributeChanged(t)?[]:this._hasChildren(t)?this._getChildren(t):[]}getChild(t){if("string"!=typeof t)throw new r.a("parameter attr("+t+") is not of type String.");if(!this.has(t))return;if(!this.isObjectReference(t))throw new r.a("attribute "+t+" is not an ObjectReference.");const e=this.getChildren(t);return 0===e.length?null:e[0]}removeReferences(t,e){if("string"!=typeof t)throw new r.a("parameter attr is not of type String.");if(!this.has(t))return!1;if(!this.isReference(t))throw new r.a("attempt to remove Reference from non-Reference attribute : "+t);if(Array.isArray(e)||(e=[e]),this._attributeChanged(t)||!this._hasChildren(t))this.isObjectReference(t)?this._setContent(t,null):this._setContent(t,a.a.arraySubtract(this.getReferences(t),e));else{if(!this.isObjectReference(t)){for(var n=0;n<e.length;n++)delete this.jsonData.attributes[t].value[e[n]];var i=a.a.arraySubtract(this.getReferences(t),e);return this._makeChange(t,i)}this._setContent(t,null)}return!0}addReference(t,e){if("string"!=typeof t)throw new r.a("parameter attr is not of type String.");if(!e)throw new r.a("parameter guid is not set.");if(!this.has(t))return!1;if(!this.isReference(t))throw new r.a("attempt to add Reference to non-Reference attribute : "+t);if(this.isObjectReference(t))this._setContent(t,e);else{var n=this.getReferences(t);n.join(";").match(e)||(n.push(e),this._setContent(t,n))}return!0}addReferences(t,e){if("string"!=typeof t)throw new r.a("parameter attr is not of type String.");if(!Array.isArray(e))throw new r.a("parameter guids is not an Array.");if(!this.has(t))return!1;if(!this.isObjectReferenceSet(t))throw new r.a("attempt to add References to non-ReferenceSet attribute : "+t);const n=this.getReferences(t),i=e.filter(t=>!n.includes(t));return i.length>0&&this._setContent(t,n.concat(i)),!0}getReferenceAttributes(){return this.metaData.getReferenceAttributes().filter(t=>this.has(t))}getAttributes(){return this.metaData.getAttributes().filter(t=>this.has(t))}getPrimitives(){return this.metaData.getAttributesWithoutReferences().filter(t=>this.has(t))}getAttributeType(t){return!!this.has(t)&&this.metaData.getAttributeType(t)}getSelectorEntity(t){return this.has(t)?this.metaData.getSelectorEntity(t):null}getEntity(){return this.metaData.getEntity()}isPersistable(){return this.metaData.isPersistable()}isNew(){return window.mx.data.isNew(this._guid)}isA(t){return this.metaData.isA(t)}hasSuperEntities(){return this.metaData.hasSuperEntities()}getSuperEntities(){return this.metaData.getSuperEntities()}hasSubEntities(){return this.metaData.hasSubEntities()}getSubEntities(){return this.metaData.getSubEntities()}inheritsFrom(t){return this.metaData.inheritsFrom(t)}toJSON(){return this.jsonData}toString(){return this.getGuid()}_getRawValue(t){if(this._attributeChanged(t)){return window.mx.data.getChanges(this._guid)[t].value}return this._getRawOriginalValue(t)}_getRawOriginalValue(t){return this._hasChildren(t)?this._getChildValue(t):this._getAttributeValue(t)}_attributeChanged(t){const e=window.mx.data.getChanges(this._guid);return Object.prototype.hasOwnProperty.call(e,t)}_getChildren(t){return(this.isObjectReference(t)?[this._getAttributeValue(t)]:Object.values(this._getAttributeValue(t))).map(t=>h.fromJson(t))}_getChildValue(t){const e=this._getChildren(t).map(t=>t.getGuid());return this.isObjectReference(t)?0===e.length?null:e[0]:e}_convertToRuntimeValue(t,e){if("String"!==this.getAttributeType(t)&&""===e)return this.isObjectReferenceSet(t)?[]:null;if(null==e)return null;if(this.isNumeric(t)){const n=o()(e);if(u.a.validate(n,this.metaData.getAttributeType(t))!==u.a.validation.OK)throw new Error(`Cannot set invalid value '${n}' to MxObject attribute '${t}'`);return String(n)}if(this.isDate(t))return this.isLocalizedDate(t)?Number(e):window.mx.parser.delocalizeEpoch(Number(e));if(this.isPassword(t))return e.replace(/[\s\t]+$/,"").replace(/^[\s\t]+/,"");if(this.isBoolean(t))return Boolean(e);if(this.isObjectReference(t)){if(Array.isArray(e))throw new Error("Trying to set single object reference to multiple values");return e}if(this.isObjectReferenceSet(t)){if(!Array.isArray(e))throw new Error("Trying to set object reference set to single value");return e}return String(e)}_convertToClientValue(t,e){return null==e?"":this.isNumeric(t)?o()(e):this.isDate(t)?this.isLocalizedDate(t)?e:window.mx.parser.localizeEpoch(e):this.isBoolean(t)?e:this.isObjectReferenceSet(t)?0===e.length?"":e:String(e)}_setContent(t,e){if("string"!=typeof t)throw new r.a("parameter attr ("+t+") is not of type String.");if(!this.metaData.has(t))return;const n=this._convertToRuntimeValue(t,e),i=this._getRawValue(t);n!==i&&(this._makeChange(t,n),this.metaData.isBidirectionalReference(t)&&(f(this.isObjectReference(t)?[i]:a.a.arraySubtract(i,n)).filter(e=>!e.isReadonlyAttr(t)&&e.getReferences(t).includes(this._guid)).forEach(e=>e.removeReferences(t,[this._guid])),f(this.isObjectReference(t)?[n]:a.a.arraySubtract(n,i)).filter(e=>!e.isReadonlyAttr(t)&&!e.getReferences(t).includes(this._guid)).forEach(e=>e.addReference(t,this._guid))))}_hasChildren(t){if(!this.isReference(t))return!1;const e=this._getAttributeValue(t);return e&&"object"==typeof e&&null==e.length}_getAttributeValue(t){var e=this.jsonData.attributes[t];return void 0===e&&(e=null),e&&"object"==typeof e&&"value"in e?e.value:e}_setAttributeValue(t,e){var n=this.jsonData.attributes[t];void 0===e&&(e=null),n&&"object"==typeof n&&"value"in n?n.value=e:this.jsonData.attributes[t]=e}_makeChange(t,e){if(this.isDeleted())throw new r.a(`Cannot modify attribute ${t} of a deleted object.`);window.mx.data.makeChange(this._guid,t,e),window.mx.data.updateMxObjectSubscribers(this._guid,t,this.get(t))}static fromJson(t){return new h({json:t,meta:window.mx.meta.getEntity(t.objectType)})}}function f(t){return t.map(t=>window.mx.data.getCachedObject(t)).filter(t=>null!=t)}},function(t,e,n){function r(){return new Promise(()=>{})}function i(t=0){return new Promise(e=>{setTimeout(()=>{e()},t)})}function o(t,e,n){const r=Array.from(arguments).slice(2);return new Promise((n,i)=>t[e](...r,n,i))}n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o})},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,"a",function(){return get}),__webpack_require__.d(__webpack_exports__,"b",function(){return post});var _exceptions_AssertionError__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_errors_ConnectionError__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16),_errors_DescribedServerError__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(44),_errors_ServerError__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(24),_errors_UnauthorizedError__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(20),_errors_ValidationError__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(18),_middleware__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(15);async function get(url,handleAs){const request={url:url,init:{method:"get",headers:new Headers,cache:"force-cache",credentials:"include"}},response=await Object(_middleware__WEBPACK_IMPORTED_MODULE_7__.a)(request,doFetch);if(!response.ok)throw new _errors_ServerError__WEBPACK_IMPORTED_MODULE_4__.a(response.status,response.statusText);switch(handleAs){case"text":return response.text();case"json":return response.json();case"blob":return response.blob();case"javascript":return void eval(await response.text())}}async function post(t,e){const n={url:t,body:e,init:{method:"post",headers:new Headers(Object.assign({Accept:"application/json"},Object(_util__WEBPACK_IMPORTED_MODULE_1__.f)(e)?{"Content-Type":"application/json"}:{})),redirect:"error",credentials:"include"}};return(await Object(_middleware__WEBPACK_IMPORTED_MODULE_7__.a)(n,doFetch)).json()}async function doFetch(t){if(t.init.body)throw new _exceptions_AssertionError__WEBPACK_IMPORTED_MODULE_0__.a;let e;t.init.body=Object(_util__WEBPACK_IMPORTED_MODULE_1__.f)(t.body)?JSON.stringify(t.body):t.body;try{e=await window.fetch(t.url,t.init)}catch(t){throw new _errors_ConnectionError__WEBPACK_IMPORTED_MODULE_2__.a(t.message)}switch(e.status){case 200:return e;case 400:case 401:case 402:case 403:case 460:throw new _errors_UnauthorizedError__WEBPACK_IMPORTED_MODULE_5__.a(e.status);case 502:case 504:throw new _errors_ServerError__WEBPACK_IMPORTED_MODULE_4__.a(e.status,e.statusText);case 551:throw new _errors_ValidationError__WEBPACK_IMPORTED_MODULE_6__.a(await e.json());case 560:const t=await getXasErrorDescription(e);throw t?new _errors_DescribedServerError__WEBPACK_IMPORTED_MODULE_3__.DescribedServerError(t):new _errors_ServerError__WEBPACK_IMPORTED_MODULE_4__.a(e.status);case 12029:throw new _errors_ConnectionError__WEBPACK_IMPORTED_MODULE_2__.a("No connection");default:throw new _errors_ServerError__WEBPACK_IMPORTED_MODULE_4__.a(e.status,await getXasErrorDescription(e))}}async function getXasErrorDescription(t){const e=await t.json();return e&&"description"in e?e.description:void 0}},function(t,e,n){const{DescribedServerError:r}=n(44);var i=0;function o(t,e,n){return function(...r){const i=e.concat(r);return i.length>=t?n.apply(this,i.slice(0,t)):o(t,i,n)}}t.exports.map=function(e,n,r){var i=[];return t.exports.forEach(e,function(){i.push(n.apply(this,arguments))},r),i},t.exports.mapObject=function(t,e,n=null){return Object.keys(t).reduce(function(r,i){return r[i]=e.call(n,t[i],i),r},{})},t.exports.forEach=function(t,e,n){if(null!=t)if(t.length===+t.length)for(var r=0;r<t.length;r++)e.call(n,t[r],r,t);else for(var i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)},e.curry=function(t){return o(t.length,[],t)},e.curryN=function(t,e){return o(t,[],e)},t.exports.sequence=function(t,e,n){if(e&&"object"==typeof e&&(n=e,e=null),!(t instanceof Array))throw new Error("mendix/lang.sequence: sequence is not an array");var r,i,o,s=0,a=function(){r=!0,i&&o()};(o=function(){for(;s<t.length;){r=!1,i=!1;var o=t[s++];if("function"==typeof o)o.call(n,a);else{if(!n||"function"!=typeof n[o])throw new Error("mendix/lang.sequence: #"+s+" is not a function");n[o](a)}if(!r)return void(i=!0)}e&&e.call(n)})()},t.exports.collect=function(t,e,n){if(e&&"object"==typeof e&&(n=e,e=null),!(t instanceof Array))throw new Error("mendix/lang.collect: collection is not an array");for(var r=0,i=t.length+1,o=function(){0==--i&&e&&e.call(n)};r<t.length;){var s=t[r++];if("function"==typeof s)s.call(n,o);else{if(!n||"function"!=typeof n[s])throw new Error("mendix/lang.collect: #"+r+" is not a function");n[s](o)}}o()},t.exports.find=function(t,e,n){for(var r=0;r<t.length;r++)if(e.call(n,t[r],r,t))return t[r]},t.exports.findLast=function(t,e,n){for(var r=t.length-1;r>=0;r--)if(e.call(n,t[r],r,t))return t[r]},t.exports.findIndex=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return n;return-1},t.exports.flatten=function(t){const e=[];return t.forEach(t=>{e.push.apply(e,t)}),e},t.exports.toArray=function(t){return[].slice.call(t)},t.exports.objectToArray=function(t){var e=[];for(var n in t)e.push(n);return e},t.exports.arrayFromObject=function(t){return Object.keys(t).map(function(e){return[e,t[e]]})},t.exports.objectFromArray=function(t){return t.reduce(function(t,e){return t[e[0]]=e[1],t},{})},t.exports.groupBy=function(t,e){return t.map(t=>[e(t),t]).reduce((t,[e,n])=>(t[e]||(t[e]=[]),t[e].push(n),t),{})},t.exports.partition=function(t,e){for(var n=[],r=[],i=0;i<e.length;++i)t(e[i])?n.push(e[i]):r.push(e[i]);return[n,r]},t.exports.clone=function(t){return JSON.parse(JSON.stringify(t))},t.exports.delay=function(t,e,n){return setTimeout(function r(){e()?t():setTimeout(r,n||500)},n||500)},t.exports.runOrDelay=function(t,e,n){return n||(n=500),e()?t():setTimeout(function r(){e()?t():setTimeout(r,n)},n)},t.exports.waitUntilPredicateHolds=function(e,n,r){if(0===r.length||e())n();else{var i=r.shift();setTimeout(function(){t.exports.waitUntilPredicateHolds(e,n,r)},i)}},t.exports.arraySubtract=function(t,e){for(var n=0;n<e.length;n++)for(var r=t.length-1;0<=r;r--)t[r].toString()===e[n].toString()&&t.splice(r,1);return t},t.exports.objectIsEmpty=function(t){for(var e in t)return!1;return!0},t.exports.firstKey=function(t){for(var e in t)return e;return null},t.exports.inArray=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},t.exports.unique=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})},t.exports.startsWith=function(t,e){return 0===t.indexOf(e)},t.exports.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},t.exports.trim=function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},t.exports.capitalize=function(t){return t.length>0?t[0].toUpperCase()+t.slice(1):""},t.exports.getUniqueId=function(){return+new Date+"-"+i++},t.exports.getFileError=function(t){var e,n,i=null;return(e=t.getElementsByTagName("textarea")[0])&&(n=JSON.parse(e.value)).type&&"exception"===n.type&&((i=new r(n.description))._type="exception"),i},t.exports.registerInDojo=function(t,e){window.dojoDynamicRequire.cache[t]=function(){window.define([],function(){return e})}}},function(t,e,n){n.d(e,"e",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return l});var r=n(5),i=n(3),o=n(2);function s(t,e){switch(e){case"DateTime":return""!==t?new Date(t):void 0;case"String":return t;default:return""!==t?t:void 0}}function a(t){return void 0===t?"":t instanceof Date?t.getTime():t}function c(t,e,n){const r=mx.meta.getEntity(e),i=r.getAttributeType(n);return"Enum"===i?void 0===t||r.getEnumMap(n).find(e=>e.key===t)?t:function(){throw new o.a(`Value ${t} is not assignable to the attribute of type ${i}.`)}():u(t,i)}function u(t,e){switch(e){case"String":case"ObjectReference":return"string"==typeof t||void 0===t?t:n();case"ObjectReferenceSet":return Array.isArray(t)&&t.every(t=>"string"==typeof t)?t:n();case"Boolean":return"boolean"==typeof t?t:n();case"DateTime":return void 0===t||t instanceof Date&&!isNaN(t.getTime())?t:n();case"Float":case"Currency":case"Integer":case"Long":case"Decimal":return t instanceof r||void 0===t?t:n();default:throw new o.a(`Attribute type ${e} is not supported.`)}function n(){throw new o.a(`Value ${t} is not assignable to the attribute of type ${e}.`)}}function l(t){return Object(i.h)(t)?t.map(t=>Object(i.c)(mx.data.getCachedObject(t))):t}},,function(t,e,n){n.d(e,"g",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"a",function(){return l}),n.d(e,"e",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return d});var r,i=n(64),o=n(9);function s(t,e={},n=!1){return Object(o.b)(g(),{action:"retrieve_by_xpath",params:{xpath:t,schema:e,count:n}})}function a(t){return Object(o.b)(g(),{action:"poll_background_job",params:{asyncid:t}})}function c(t,e,n){return Object(o.b)(g(),{action:"instantiate",params:{objecttype:t},changes:e,objects:n})}function u(t,e,n){return Object(o.b)(g(),{action:"login",params:{username:t,password:e,shouldgeneratetoken:n}})}function l(t){return Object(o.b)(g(),{action:"get_session_data",params:t})}function h(t){return Object(o.b)(g(),{action:"logout",params:t?{authtoken:t}:{}})}function f(){return Object(o.b)(g(),{action:"keepalive",params:{}})}function p(t,e,n,r){return Object(o.b)(g(),{action:"synchronize",params:{guids:t,fileGuidMapping:e},changes:n,objects:r})}function d(t,e,n,r,s,a){const c=mx.remoteUrl+"file?"+Object(i.stringify)(Object.assign({},n,{guid:t})),u=new FormData;return u.append("data",JSON.stringify({changes:s,objects:a})),e?u.append("blob",r,e):u.append("blob",r),Object(o.b)(c,u)}function g(){return mx.remoteUrl+"xas/"}!function(t){t[t.Sunday=0]="Sunday",t[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday"}(r||(r={}))},,function(t,e,n){n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s});const r=[];function i(t){r.push(t)}function o(){r.splice(0,r.length)}function s(t,e){return function t(n,i){if(n===r.length)return e(i);return r[n](i,e=>t(n+1,e))}(0,t)}},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t){super(t),Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){const r=n(5);var i=new r("1e20"),o=new r(2).pow(31).times(-1),s=new r(2).pow(31).minus(1),a=new r(2).pow(63).times(-1),c=new r(2).pow(63).minus(1),u=new r(2).pow(53);function l(t,e,n){return t.gte(e)&&t.lte(n)}var h={validation:{OK:0,NOT_INTEGER:1,RANGE_INTEGER:2,RANGE_LONG:3,RANGE_DECIMAL:4,RANGE_NUMBER:5},validate:function(t,e){if(/^(Integer|Long|Decimal|Float|Currency)$/.test(e)){if(""===t)return h.validation.OK;if(t instanceof r||(t=new r(t)),("Integer"===e||"Long"===e)&&function(t){return!t.mod(1).eq(0)}(t))return h.validation.NOT_INTEGER;if("Integer"===e&&!l(t,o,s))return h.validation.RANGE_INTEGER;if("Long"===e&&!l(t,a,c))return h.validation.RANGE_LONG;if("Decimal"===e&&t.abs().gte(i))return h.validation.RANGE_DECIMAL;if("Decimal"===e&&!t.mod(1e-8).eq(0))return h.validation.RANGE_DECIMAL;if(/^(Float|Currency)$/.test(e)&&t.abs().gt(u))return h.validation.RANGE_NUMBER}return h.validation.OK}};t.exports=h},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t){super(),this.original=t,Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t){super(t),Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){n.d(e,"a",function(){return i});var r=n(24);class i extends r.a{constructor(t){super(t),Object.setPrototypeOf(this,i.prototype)}}},function(t,e){t.exports=require("react-native-navigation")},function(t,e,n){var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var s,a,c,u=r(e),l=r(n);if(u&&l){if((a=e.length)!=n.length)return!1;for(s=a;0!=s--;)if(!t(e[s],n[s]))return!1;return!0}if(u!=l)return!1;var h=e instanceof Date,f=n instanceof Date;if(h!=f)return!1;if(h&&f)return e.getTime()==n.getTime();var p=e instanceof RegExp,d=n instanceof RegExp;if(p!=d)return!1;if(p&&d)return e.toString()==n.toString();var g=i(e);if((a=g.length)!==i(n).length)return!1;for(s=a;0!=s--;)if(!o.call(n,g[s]))return!1;for(s=a;0!=s--;)if(!t(e[c=g[s]],n[c]))return!1;return!0}return e!=e&&n!=n}},function(t,e,n){n.d(e,"a",function(){return u});var r=n(7),i=n(2),o=n(3),s=n(11),a=n(39),c=n(40);class u{constructor(t){this.variables=t,this.dependencies=[]}resolve(t,e){return void 0!==e?this.resolveAttribute(t,e):this.resolveVariable(t)}getDependencies(){return this.dependencies.slice()}resolveVariable(t){if(!(t in this.variables))throw new i.a;const e=this.variables[t]();if(e instanceof r.MxObject)return this.addDependency({guid:e.getGuid()}),e.getGuid();if(Object(o.e)(r.MxObject,e)){const t=e.map(t=>t.getGuid());return t.forEach(t=>this.addDependency({guid:t})),t}return e}resolveAttribute(t,e){if(!(t in this.variables))throw new i.a;const n=this.variables[t]();if(void 0===n)throw new c.a(t);if(!(n instanceof r.MxObject))throw new i.a;if(!n.has(e))throw new a.a(t,n.getEntity(),e);return this.addDependency({guid:n.getGuid()}),this.addDependency({guid:n.getGuid(),attr:e}),Object(s.e)(n.get(e),n.getAttributeType(e))}addDependency(t){this.dependencies.find(e=>e.guid===t.guid&&t.attr===e.attr)||this.dependencies.push(t)}}},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t,e){super(e),this.status=t,Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){n.d(e,"a",function(){return r});class r{constructor(t,e){this._guid=t,this._fields=e}getGuid(){return this._guid}getAttributes(){return Object.keys(this._fields).map(t=>({name:t,reason:this._fields[t]}))}getFields(){return this.getAttributes()}static describe(t){const e=[];for(let n=0;void 0!==t[n];n++){const r=t[n].getFields();for(let t=0;void 0!==r[t];t++)e.push(r[t].reason)}return e.join("\n")}addAttribute(t,e){return!(t in this._fields)&&(this._fields[t]=e,!0)}addField(...t){return this.addAttribute(...t)}removeAttribute(t){return t in this._fields&&(delete this._fields[t],!0)}removeField(...t){return this.removeAttribute(...t)}getErrorReason(t){return this._fields[t]}getReasonByAttribute(...t){return this.getErrorReason(...t)}clone(){return new r(this._guid,Object.assign({},this._fields))}toString(){return Object.keys(this._fields).map(t=>`${t} ${this._fields[t]}`).join("; ")}}r.fromResponse=function(t){return t.map(({guid:t,errorFields:e})=>{const n={};return e.forEach(({name:t,message:e})=>{n[t]=e}),new r(t,n)})}},function(t,e,n){n.d(e,"a",function(){return i});var r=n(5);class i{constructor(t,e){this.expressionFunctions=t,this.expressionTokens=e}evaluate(t,e){switch(t.type){case"function":if(!this.expressionFunctions[t.name])throw new Error(`Function ${t.name} is not known`);const n=t.parameters.map(t=>this.evaluate(t,e));return this.expressionFunctions[t.name].apply(null,n);case"literal":return"number"==typeof t.value?new r(t.value):null===t.value?void 0:t.value;case"variable":return void 0!==t.path?e.resolve(t.variable,t.path):e.resolve(t.variable);case"conditional":return this.evaluate(t.condition,e)?this.evaluate(t.then,e):this.evaluate(t.else,e);case"token":if(!this.expressionTokens[t.name])throw new Error(`Token ${t.name} is not known`);return this.expressionTokens[t.name]()}}}},function(t,e,n){n.d(e,"a",function(){return o});var r=n(5),i=n(3);const o={not:t=>!t,"=":(t,e)=>t instanceof r&&e instanceof r?t.eq(e):t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():"string"==typeof t||"string"==typeof e?(t||"")===(e||""):t instanceof Array&&e instanceof Array?t.length===e.length&&t.every(t=>e.indexOf(t)>-1):t instanceof Array&&void 0===e?0===t.length:void 0===t&&e instanceof Array?0===e.length:t===e,"!=":(t,e)=>!o["="](t,e),">"(t,e){if(t instanceof r&&e instanceof r)return t.gt(e);if(t instanceof Date&&e instanceof Date)return t.getTime()>e.getTime();if(void 0===t||void 0===e)throw new Error(s(">",t,e));return t>e},">=":(t,e)=>o["="](t,e)||o[">"](t,e),"<"(t,e){if(t instanceof r&&e instanceof r)return t.lt(e);if(t instanceof Date&&e instanceof Date)return t.getTime()<e.getTime();if(void 0===t||void 0===e)throw new Error(s("<",t,e));return t<e},"<=":(t,e)=>o["="](t,e)||o["<"](t,e),"+"(t,e){if(t instanceof r&&e instanceof r)return t.plus(e);if("string"==typeof t)return t+(void 0!==e?e.toString():"");if("string"==typeof e)return(void 0!==t?t.toString():"")+e;throw new Error(s("+",t,e))},"-"(t,e){if(1===arguments.length&&void 0!==t)return t.times(-1);if(void 0!==t&&void 0!==e)return t.minus(e);throw new Error(s("-",t,e))},"*"(t,e){if(void 0!==t&&void 0!==e)return t.times(e);throw new Error(s("*",t,e))},div(t,e){if(void 0!==t&&void 0!==e)return t.div(e);throw new Error(s("div",t,e))},mod(t,e){if(void 0!==t&&void 0!==e)return t.mod(e);throw new Error(s("mod",t,e))},":":(t,e)=>o.div(t,e),max(...t){if(t[0]instanceof r)return t.reduce((t,e)=>t.gt(e)?t:e);if(t[0]instanceof Date)return t.reduce((t,e)=>t.getTime()>e.getTime()?t:e);throw new Error(s("max",...t))},min(...t){if(t[0]instanceof r)return t.reduce((t,e)=>t.lt(e)?t:e);if(t[0]instanceof Date)return t.reduce((t,e)=>t.getTime()<e.getTime()?t:e);throw new Error(s("min",...t))},round(t,e){if(t instanceof r)return t.round(void 0===e?0:Number(e));throw new Error(s("round",t))},random:()=>new r(Math.random()),floor(t){if(t instanceof r){const e=t,n=e.mod(1);return n.eq(0)?e.eq(-0)?e.abs():e:e.minus(n).minus(e.lt(0)?1:0)}throw new Error(s("floor",t))},ceil(t){if(t instanceof r){const e=t,n=o.floor(e.times(-1));return n.eq(0)?n:n.times(-1)}throw new Error(s("ceil",t))},pow(t,e){if(t instanceof r&&e instanceof r)return t.pow(Number(e));throw new Error(s("pow",t))},abs(t){if(t instanceof r)return t.abs();throw new Error(s("abs",t))},parseInteger(t,e){if("string"==typeof t){if(/^-?\d+$/.test(t)){const e=r(t);return e.eq(-0)?e.abs():e}if(void 0===e)throw new Error(`Not parsable to Integer: ${t}`);return e}throw new Error(s("parseInteger",t))},parseDecimal(t,e){if("string"==typeof t){const n=mx.parser.parseValue(t,"Decimal");if(null===n&&void 0===e)throw new Error(`Not parsable to Decimal: ${t}`);return null===n?e:n}throw new Error(s("parseDecimal",t))},formatDecimal(t){if(t instanceof r)return mx.parser.formatValue(Number(t),"Decimal");throw new Error(s("formatDecimal",t))},isNew(t){if(void 0!==t)return mx.data.isNew(t);throw new Error(s("isNew",t))},isSynced(t){if(void 0!==t)return!mx.data.isDirty(t);throw new Error(s("isSynced",t))},toUpperCase:t=>a(t).toUpperCase(),toLowerCase:t=>a(t).toLowerCase(),trim:t=>a(t).trim(),contains:(t,e)=>a(t).indexOf(a(e))>-1,startsWith:(t,e)=>(t=a(t),e=a(e),t.substr(0,e.length)===e),endsWith:(t,e)=>(t=a(t),e=a(e),t.substr(t.length-e.length)===e),substring(t,e,n){if(t=a(t),n=n,void 0!==(e=e)&&e.gte(0)){if(2===arguments.length)return t.substr(Number(e));if(void 0!==n&&n.gte(0))return t.substr(Number(e),Number(n))}throw new Error(s("substring",t,e,n))},find(t,e,n){if(t=a(t),e=a(e),2===arguments.length)return new r(t.indexOf(e));if(void 0!==n)return new r(t.indexOf(e,Number(n)));throw new Error(s("find",t,e,n))},findLast(t,e,n){if(t=a(t),e=a(e),2===arguments.length)return new r(t.lastIndexOf(e));if(void 0!==n)return new r(t.lastIndexOf(e,Number(n)));throw new Error(s("findLast",t,e,n))},length:t=>new r(a(t).length),urlEncode:t=>encodeURIComponent(a(t)).replace("%20","+"),urlDecode:t=>decodeURIComponent(a(t).replace("+","%20")),isMatch(t,e){if(void 0!==e)return new RegExp(`^(${e})$`).test(a(t));throw new Error(s("isMatch",t,e))},replaceFirst(t,e,n){if(void 0!==e&&void 0!==n){const r=n.replace(/\$/g,"$$$$");return a(t).replace(new RegExp(e),r)}throw new Error(s("replaceFirst",t,e))},replaceAll(t,e,n){if(void 0!==e&&void 0!==n){const r=n.replace(/\$/g,"$$$$");return a(t).replace(new RegExp(e,"g"),r)}throw new Error(s("replaceAll",t,e))},_newList:()=>[],_toList(t){if(t instanceof Array)return t;if(Object(i.g)(t))return t.length>0?[t]:[];if(void 0===t)return[];throw new Error(s("_toList",t))},_addToList(t,e){if(t instanceof Array&&e instanceof Array)return t.concat(e.filter(e=>!t.includes(e)));if(t instanceof Array&&Object(i.g)(e))return t.includes(e)?t:t.concat([e]);if(t instanceof Array&&void 0===e)return t;if(void 0===t&&e instanceof Array)return e.slice(0);if(void 0===t&&Object(i.g)(e))return[e];if(void 0===t&&void 0===e)return[];throw new Error(s("_addToList",t,e))},_removeFromList(t,e){if(t instanceof Array&&e instanceof Array)return t.filter(t=>!e.includes(t));if(t instanceof Array&&Object(i.g)(e))return t.filter(t=>t!==e);if(t instanceof Array&&void 0===e)return t;if(void 0===t)return[];throw new Error(s("_removeFromList",t,e))},_hasSomeRole:(...t)=>mx.session.hasSomeRole(t)};function s(t,...e){return`Operator ${t} not supported in expression ${t}(${e.join(", ")})`}function a(t){return void 0===t?"":t}},function(t,e,n){var r=n(4);var i=n(6);n.d(e,"a",function(){return s});const o={beginOfCurrentMinute:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setSeconds(0,0),n},endOfCurrentMinute:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setSeconds(59,999),n},beginOfCurrentHour:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setMinutes(0,0,0),n},endOfCurrentHour:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setMinutes(59,59,999),n},beginOfCurrentDay:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setHours(0,0,0,0),n},endOfCurrentDay:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setHours(23,59,59,999),n},beginOfCurrentWeek:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},o=n.locale,s=o&&o.options&&o.options.weekStartsOn,a=null==s?0:Object(i.a)(s),c=null==n.weekStartsOn?a:Object(i.a)(n.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Object(r.a)(t,n),l=u.getDay(),h=(l<c?7:0)+l-c;return u.setDate(u.getDate()-h),u.setHours(0,0,0,0),u},endOfCurrentWeek:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},o=n.locale,s=o&&o.options&&o.options.weekStartsOn,a=null==s?0:Object(i.a)(s),c=null==n.weekStartsOn?a:Object(i.a)(n.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Object(r.a)(t,n),l=u.getDay(),h=6+(l<c?-7:0)-(l-c);return u.setDate(u.getDate()+h),u.setHours(23,59,59,999),u},beginOfCurrentMonth:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setDate(1),n.setHours(0,0,0,0),n},endOfCurrentMonth:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n},beginOfCurrentYear:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e),i=new Date(0);return i.setFullYear(n.getFullYear(),0,1),i.setHours(0,0,0,0),i},endOfCurrentYear:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e),i=n.getFullYear();return n.setFullYear(i+1,0,0),n.setHours(23,59,59,999),n}};function s(t){const e={currentUser:()=>mx.session.getUserId(),currentDateTime:t};return Object.keys(o).forEach(n=>{const r=o[n];e[n]=(()=>r(t(),{weekStartsOn:mx.session.getConfig("locale.firstDayOfWeek")})),e[n+"UTC"]=(()=>(function(t){const e=new Date(t.getTime());return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e})(r(function(t){const e=new Date(t.getTime());return e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),e}(t()))))}),e}},function(t,e,n){n.r(e);const r=n(94);class i{constructor(){this.__labels=[],this.__labelMap={},this.__graph=[]}addEdge(t,e){const n=this._getOrCreateLabelIndex(t),r=this._getOrCreateLabelIndex(e),i=this.__graph[n];i.includes(r)||i.push(r)}neighborsOf(t){const e=this._getOrCreateLabelIndex(t);return this.__graph[e].map(this._indexToLabel,this)}reachableLabels(t){const e=t.map(this._getOrCreateLabelIndex,this);return r.reachability(this.__graph,e).map(this._indexToLabel,this)}_indexToLabel(t){return this.__labels[t]}_getOrCreateLabelIndex(t){let e=t in this.__labelMap?this.__labelMap[t]:-1;return-1===e&&(this.__labels.push(t),this.__graph.push([]),e=this.__labels.length-1,this.__labelMap[t]=e),e}}function o(t,e){return a(t,e).reachableLabels(e)}function s(t,e,n){const r=h(t);return l(null!=n?function(t,e){const n=[];return t.forEach(t=>{e.forEach(e=>{if(!t.has(e.association))return;const r=window.mx.meta.getAttributeOwner(t.getEntity(),e.association),i=t.getSelectorEntity(e.association);e.fromEntity===r&&u(t,e.association).forEach(e=>n.push({from:t.getGuid(),to:e})),e.fromEntity===i&&u(t,e.association).forEach(e=>n.push({from:e,to:t.getGuid()}))})}),n}(t,n):c(t)).reachableLabels(e).filter(t=>r[t])}function a(t,e){const n=h(t=t.filter(t=>!t.isPersistable()||t.hasChanges()||t.isNew()));return l(c(t).filter(({from:t,to:e})=>r(t)&&r(e)));function r(t){return e.includes(t)||t in n}}function c(t){const e=[];return t.forEach(t=>{t.getReferenceAttributes().filter(t=>!function(t){return"System.owner"===t||"System.changedBy"===t}(t)).forEach(n=>{u(t,n).forEach(n=>e.push({from:n,to:t.getGuid()},{from:t.getGuid(),to:n}))})}),e}function u(t,e){return t.getReferences(e).concat(t.getOriginalReferences(e))}function l(t){const e=new i;return t.forEach(({from:t,to:n})=>e.addEdge(t,n)),e}function h(t){const e={};return t.forEach(t=>{e[t.getGuid()]=t}),e}n.d(e,"findReachableGuidsToRetain",function(){return o}),n.d(e,"findReachableGuidsForRequest",function(){return s}),n.d(e,"buildRetainmentGraph",function(){return a})},function(t,e,n){n.r(e);var r=n(26),i=n(27),o=n(28),s=n(23);const a=new r.a(i.a,Object(o.a)(()=>new Date)),c=(t,e)=>{const n={};return e.all().forEach(t=>n[t]=(()=>e.get(t))),a.evaluate(t,new s.a(n))};var u=n(2);var l=n(7);var h=n(5),f=n(11);class p extends Error{constructor(t){super(t),Object.setPrototypeOf(this,p.prototype)}}function d(t){return new Promise((e,n)=>mx.data.commit({mxobjs:t,callback:e,error:n}))}function g(t){return new Promise((e,n)=>mx.data.rollback({mxobjs:t,callback:e,error:n}))}var m=n(8);var b=n(25);const y=Symbol("validations");n.d(e,"executors",function(){return w});const w=[new class{constructor(){this.instructionType="jump"}async execute(t,e){return{goto:t.target}}},new class{constructor(t){this.exprEvaluator=t,this.instructionType="switch"}async execute(t,e){const n=this.exprEvaluator(t.condition,e),r=void 0!==n?n.toString():"";if(!(r in t.targets))throw new u.a;return{goto:t.targets[r]}}}(c),new class{constructor(){this.instructionType="loop"}async execute(t,e){const n=e.get(t.listVar);if(!Array.isArray(n))throw new u.a;for(const r of n)if(e.set(t.iteratorVar,r),await e.executeNanoflow(t.body))break}},new class{constructor(t){this.evaluateExp=t,this.instructionType="return"}async execute(t,e){const n=this.evaluateExp(t.result,e);return void 0===n?{result:void 0}:Array.isArray(n)?{result:e.mapGuidsToObjects(n)}:"string"==typeof n?{result:e.mapGuidsToObjects([n])[0]}:{result:n}}}(c),new class{constructor(){this.instructionType="createObject"}async execute(t,e){const n=await new Promise((e,n)=>mx.data.create({entity:t.objectType,callback:e,error:n}));e.set(t.outputVar,n)}},new class{constructor(t){this.evaluateExp=t,this.instructionType="changeObject"}async execute(t,e){const n=e.get(t.inputVar);if(void 0===n)throw new p(`Cannot change $${t.inputVar} as it is empty`);if(!(n instanceof l.MxObject))throw new u.a;const r=this.evaluateExp(t.value,e);let i=Object(f.c)(r);i instanceof h&&(i=i.round(8)),n.set(t.member,i)}}(c),new class{constructor(){this.instructionType="commitObjects"}async execute(t,e){const n=e.get(t.inputVar);if(n instanceof l.MxObject)await d([n]);else{if(!Array.isArray(n))throw void 0===n?new p(`Cannot commit $${t.inputVar} as it is empty`):new u.a;await d(n)}}},new class{constructor(){this.instructionType="rollbackObjects"}async execute(t,e){const n=e.get(t.inputVar);if(n instanceof l.MxObject)await g([n]);else{if(!Array.isArray(n))throw void 0===n?new p(`Cannot rollback $${t.inputVar} as it is empty`):new u.a;await g(n)}}},new class{constructor(t){this.evaluateExp=t,this.instructionType="setVariable"}async execute(t,e){const n=this.evaluateExp(t.value,e);if(Array.isArray(n)){const r=e.mapGuidsToObjects(n);e.set(t.outputVar,r)}else e.set(t.outputVar,n)}}(c),new class{constructor(){this.instructionType="openForm"}async execute(t,e){const n=t.inputVar?e.get(t.inputVar):void 0;await mx.ui.openForm2(t.path,n?n.getGuid():void 0,t.title,e.currentForm,t.params)}},new class{constructor(){this.instructionType="closeForm"}async execute(t,e){await Object(m.a)(e.currentForm,"close")}},new class{constructor(t){this.evaluateExp=t,this.instructionType="showValidation"}async execute(t,e){const n=e.get(t.inputVar);if(void 0===n)throw new p(`Cannot refresh $${t.inputVar} as it is empty`);if(!(n instanceof l.MxObject))throw new u.a;const r=this.evaluateExp(t.text,e),i=void 0===r?"":r,o=function(t,e){const n=t[y]||(t[y]={});return n[e]||(n[e]={})}(e,n.getGuid());o[t.member]=i;const s=new b.a(n.getGuid(),o);mx.data.sendValidationUpdates([s])}}(c),new class{constructor(t){this.evaluateExp=t,this.instructionType="databaseRetrieve"}async execute(t,e){const{entity:n,limitExpr:r,offsetExpr:i,takeFirst:o,sort:s,outputVar:a}=t,c=r?this.evaluateExp(r,e):void 0,u=i?this.evaluateExp(i,e):void 0,l=await function(t,e){return new Promise((n,r)=>{mx.data.get({entity:t,filter:e,callback:n,error:r})})}(n,{offset:u?Number(u):void 0,amount:c?Number(c):void 0,sort:s});e.set(a,o?l[0]:l)}}(c),new class{constructor(){this.instructionType="associationRetrieve"}async execute(t,e){const{inputVar:n,association:r,entity:i,retrieveSingleObject:o,direction:s,outputVar:a}=t,c=e.get(n);if(void 0===c)return void e.set(a,void 0);if(!(c instanceof l.MxObject))throw new u.a;const h=await function(t,e,n,r){return new Promise((i,o)=>{mx.data.get({guid:t.getGuid(),path:e,entity:n,direction:r,callback:i,error:o})})}(c,r,i,s);e.set(a,o?h[0]:h)}},new class{constructor(t){this.evaluateExp=t,this.instructionType="writeLog"}async execute(t,e){const n=this.evaluateExp(t.message,e);mx.logger.log(t.level,n)}}(c)]},function(t,e,n){n.r(e);var r=n(2),i=n(7),o=n(3);class s{constructor(t,e){this.currentForm=t,this.executeNanoflow=e,this.map={}}set(t,e){this.map[t]=e}get(t){if(!(t in this.map))throw new r.a;return this.map[t]}all(){return Object.keys(this.map)}mapGuidsToObjects(t){const e={};return this.all().map(t=>this.get(t)).map(t=>t instanceof i.MxObject?[t]:Array.isArray(t)?t:[]).reduce((t,e)=>t.concat(e),[]).forEach(t=>{e[t.getGuid()]=t}),t.map(t=>Object(o.c)(e[t]))}}n.d(e,"NanoflowEngine",function(){return a});class a{constructor(t){this.executors=t}execute(t,e,n){const r=new s(n,t=>this.executeWithScope(t,r));return e.forEach(({name:t,value:e})=>r.set(t,e)),this.executeWithScope(t,r)}async executeWithScope(t,e){let n=0;for(;n<t.length;){const o=t[n],s=this.executors.find(t=>t.instructionType===o.type);if(void 0===s)throw new r.a;const a=await s.execute(o,e);if(void 0!==(i=a)&&"object"==typeof i&&"goto"in i){if(-1===(n=t.findIndex(t=>t.label===a.goto)))throw new r.a}else{if(c(a))return a.result;n++}}var i;throw new r.a}}function c(t){return void 0!==t&&"object"==typeof t&&"result"in t}},function(t,e,n){n.d(e,"a",function(){return i});var r=6e4;function i(t){var e=new Date(t.getTime()),n=e.getTimezoneOffset();e.setSeconds(0,0);var i=e.getTime()%r;return n*r+i}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(51)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports={LIKE_ESCAPE_CHAR:"~",QUOTE_CHAR:'"'}},function(t,e){function n(t){this.fork=t}n.of=function(t){return new n(function(e,n){n(t)})},n.prototype.chain=function(t){var e=this;return new n(function(n,r){e.fork(n,function(e){t(e).fork(n,r)})})},n.prototype.orElse=function(t){var e=this;return new n(function(n,r){e.fork(function(e){t(e).fork(n,r)},r)})},n.prototype.ap=function(t){var e,r,i,o=this,s=2;return new n(function(n,a){function c(){0==--s&&a(e(r))}function u(t){void 0===i&&n(i=t)}o.fork(u,function(t){e=t,c()}),t.fork(u,function(t){r=t,c()})})},n.prototype.map=function(t){return this.chain(function(e){return n.of(t(e))})},n.rejected=n.prototype.rejected=function(t){return new n(function(e,n){e(t)})},n.parallel=function(t){return new n(function(e,n){var r,i=t.length,o=new Array(t.length);0!==t.length?t.forEach(function(t,s){t.fork(function(t){void 0===r&&(r=t,e(t))},function(t){return function(e){o[t]=e,void 0===r&&0==--i&&n(o)}}(s))}):n(o)})},n.sequence=function(t){return t.reduce(function(t,e){return t.chain(function(t){return e})},n.of(null))},t.exports=n},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t,e,n){super(`Unable to get a member from variable $${t}, because you do not have sufficient permissions to "${e}.${n}".`),this.variableName=t,this.entityName=e,this.attributeName=n,Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t){super(`Unable to get a member from an empty variable $${t}.`),this.variableName=t,Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){t.exports=n(103)},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){const r=n(100),i=n(38),o=new r(i);o.rejected=function(t){return new o(function(e){return i.rejected(t)})},o.parallel=function(t){return new o(e=>new i((n,r)=>{if(0===t.length)return void r([]);const i=new Array(t.length);let o=t.length,s=!1;t.forEach((t,a)=>{t.run(e).fork(t=>{s||(s=!0,n(t))},t=>{i[a]=t,s||0!=--o||r(i)})})}))},o.sequence=function(t){return t.reduce((t,e)=>t.chain(t=>e.map(e=>t.concat([e]))),o.of([]))},t.exports=o},function(t,e,n){n.r(e),n.d(e,"DescribedServerError",function(){return i});var r=n(19);class i extends r.a{constructor(t){super(t),Object.setPrototypeOf(this,i.prototype)}}},function(t,e,n){n.r(e),n.d(e,"getAllStateForMicroflow",function(){return c}),n.d(e,"getRequestDataForMicroflow",function(){return u}),n.d(e,"getRequestDataForObjectAction",function(){return l}),n.d(e,"getRequestDataForGuidsReachableFrom",function(){return h}),n.d(e,"getRequestData",function(){return f}),n.d(e,"handleUncachedObjects",function(){return p}),n.d(e,"uploadWithRetries",function(){return d}),n.d(e,"executeAsync",function(){return m});var r=n(13),i=n(2),o=n(29),s=n(10),a=n(8);function c(t){const e=t.getAllObjects().map(t=>t.getGuid());return[window.mx.session.getUserId(),window.mx.session.getSessionObjectId()].filter(t=>!e.includes(t)).forEach(t=>e.push(t)),f(t,e)}function u(t,e,n){const r=window.mx.session.getMicroflowInfo(e),i=n.concat([window.mx.session.getUserId(),window.mx.session.getSessionObjectId()]),s=t.getAllObjects(),a=void 0!==r?Object(o.findReachableGuidsForRequest)(s,i,r.followedAssociations):s.map(t=>t.getGuid());return i.filter(t=>!a.includes(t)).forEach(t=>a.push(t)),f(t,a)}function l(t,e,n){let r=[];const i=t.getAllObjects(),[a,c]=Object(s.partition)(e=>{const r=t.getObject(e);return r&&r.metaData&&r.metaData.needsReachableState(n)},e);if(0!==a.length){const t=[window.mx.session.getUserId(),window.mx.session.getSessionObjectId()];r=r.concat(Object(o.findReachableGuidsForRequest)(i,a.concat(t)))}const[u,l]=Object(s.partition)(e=>t.isNew(e),c),h=i.filter(e=>t.isNew(e.getGuid()));return r=(r=r.concat(Object(o.findReachableGuidsForRequest)(h,u))).concat(l),f(t,r)}function h(t,e){const n=[window.mx.session.getUserId(),window.mx.session.getSessionObjectId()],r=t.getAllObjects();return f(t,Object(o.findReachableGuidsForRequest)(r,e.concat(n)))}function f(t,e){const n={};e.filter(e=>t.hasChanges(e)).forEach(e=>{n[e]=t.getChanges(e)});const r=e.filter(e=>t.has(e)).map(t.getObject,t).filter(e=>!e.isPersistable()||t.isNew(e.getGuid())).map(t=>t.jsonData);return[n,r]}function p(t,e,n){const{commits:r=[],rollbacks:i=[],deletes:o=[]}=n;e.forEach(e=>{const n=e.getGuid();if(r.includes(n)||i.indexOf(n)>=0){const r=t.getObject(n);if(!r)throw new Error("inconsistent response: committed or rolled back object is missing from response and cache");e.resetFromJSON(r.jsonData)}else o.includes(n)&&e.markDeleted()})}async function d(t,e,n,o){for(let i=0;i<=o;i++)try{return await Object(r.i)(t,e,{},n,{},[])}catch(t){if(!(i<o))throw t;{const t=Math.pow(2,i);await Object(a.c)(t)}}throw new i.a}let g=(new Date).getTime();async function m(t){const e=g++;await t(e);let n=500;for(;;){const t=await Object(r.f)(e);if(t.response.finished)return t;await Object(a.c)(n),n=Math.min(n+500,8e3)}}},,function(t,e,n){var r=n(33),i=n(34),o=n(48),s=n(70),a=n(55),c=function(t,e,n){var u,l,h,f,p=t&c.F,d=t&c.G,g=t&c.S,m=t&c.P,b=t&c.B,y=d?r:g?r[e]||(r[e]={}):(r[e]||{}).prototype,w=d?i:i[e]||(i[e]={}),v=w.prototype||(w.prototype={});for(u in d&&(n=e),n)h=((l=!p&&y&&void 0!==y[u])?y:n)[u],f=b&&l?a(h,r):m&&"function"==typeof h?a(Function.call,h):h,y&&s(y,u,h,t&c.U),w[u]!=h&&o(w,u,f),m&&v[u]!=h&&(v[u]=h)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(68),i=n(53);t.exports=n(36)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(35);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(36)&&!n(51)(function(){return 7!=Object.defineProperty(n(69)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(35);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(72);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},function(t,e,n){const r=n(38);var i={promiseFromTask:function(t){return new Promise(function(e,n){t.fork(n,e)})},callbackFromTask:function(t,e,n){t.fork(function(t){n&&n(t)},function(t){e&&e(t)})},taskFromPromise:function(t){return new r(function(e,n){t.then(n,e)})}};t.exports=i},function(t,e,n){var r=n(85),i=n(86),o=i;o.v1=r,o.v4=i,t.exports=o},function(t,e){t.exports=require("react-native-vector-icons")},function(t,e,n){const r=n(87);t.exports=function(){const t={},e={};this.startup=function(){window.mx.session.getConfig("metadata").forEach(function(e){const n=new r({json:e});t[n.getEntity()]=n})},this.getMap=function(){return t},this.getEntity=function(e){const n=t[e];return n||window.mx.logger.error("No permission to read or write entity "+e+", check security!"),n},this.getAttributeOwner=function(t,n){const r=t+"."+n,i=e[r];if(null!=i)return i;const o=this.getEntity(t);if(!o||!o.has(n))return null;const[s]=[t].concat(o.getSuperEntities()).filter(t=>this.getEntity(t).has(n)).slice(-1);return e[r]=s,s}}},function(t,e){t.exports=require("react-native-sqlite-storage")},function(t,e,n){var r=n(91),i=n(92),o=n(93);function s(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function a(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function c(t,e){var n=function(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return function(t,n,r){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e=i({arrayFormat:"none"},e)),r=Object.create(null);return"string"!=typeof t?r:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),i=e.shift(),s=e.length>0?e.join("="):void 0;s=void 0===s?null:o(s),n(o(i),s,r)}),Object.keys(r).sort().reduce(function(t,e){var n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(n):t[e]=n,t},Object.create(null))):r}e.extract=a,e.parse=c,e.stringify=function(t,e){!1===(e=i({encode:!0,strict:!0,arrayFormat:"none"},e)).sort&&(e.sort=function(){});var n=function(t){switch(t.arrayFormat){case"index":return function(e,n,r){return null===n?[s(e,t),"[",r,"]"].join(""):[s(e,t),"[",s(r,t),"]=",s(n,t)].join("")};case"bracket":return function(e,n){return null===n?s(e,t):[s(e,t),"[]=",s(n,t)].join("")};default:return function(e,n){return null===n?s(e,t):[s(e,t),"=",s(n,t)].join("")}}}(e);return t?Object.keys(t).sort(e.sort).map(function(r){var i=t[r];if(void 0===i)return"";if(null===i)return s(r,e);if(Array.isArray(i)){var o=[];return i.slice().forEach(function(t){void 0!==t&&o.push(n(r,t,o.length))}),o.join("&")}return s(r,e)+"="+s(i,e)}).filter(function(t){return t.length>0}).join("&"):""},e.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:c(a(t),e)}}},function(t,e,n){const r=n(96),i=n(101),o=n(102),s=n(43),a=n(59);function c(){return window.openDatabase("MendixDatabase","1","Mendix Database",10485760)}function u(t,e){o.call(this),e=e||c,this._tableNames=t;const n=e();this._databasePromise=this._initialize(n)}u.prototype=Object.create(o.prototype),u.prototype._getDatabase=function(){return this._databasePromise},u.prototype._initialize=function(t){var e=r.createCreateTransaction(this._tableNames);return a.promiseFromTask(i.runWriteTransaction(t,e)).then(()=>t)},u.prototype._fetch=function(t){return function(e){var n=r.createFetchByGuidTransaction(t);return a.promiseFromTask(i.runReadTransaction(e,n))}},u.prototype._fetchSlice=function(t,e,n){return function(o){var s=r.createFetchSliceTransaction(t,e,n.offset,n.limit,n.sort);return a.promiseFromTask(i.runReadTransaction(o,s))}},u.prototype._rebuildDb=function(t){return s.ask().chain(function(e){var n=r.createRebuildTransaction(this._tableNames,t);return new s(function(t){return i.runWriteTransaction(e,n)})}.bind(this))},u.prototype._insertOrReplace=function(t){return function(e){var n=r.createInsertOrReplaceTransaction(t);return a.promiseFromTask(i.runWriteTransaction(e,n))}},u.prototype._cleanDatabase=function(){return t=>{var e=r.createCleanTransaction(this._tableNames);return a.promiseFromTask(i.runWriteTransaction(t,e))}},u.prototype._fetchDirty=function(){return s.ask().chain(function(t){var e=r.createFetchDirtyObjectsTransaction();return new s(function(n){return i.runWriteTransaction(t,e)})})},u.prototype._makeClean=function(t){return s.ask().chain(function(e){var n=r.createMakeCleanTransaction(t);return new s(function(t){return i.runWriteTransaction(e,n)})})},u.prototype._cleanupDirtyObjects=function(){return function(t){var e=r.createDirtyCleanupTransaction();return a.promiseFromTask(i.runWriteTransaction(t,e))}},t.exports=u},function(t,e,n){n(67),t.exports=n(34).Object.setPrototypeOf},function(t,e,n){var r=n(47);r(r.S,"Object",{setPrototypeOf:n(73).set})},function(t,e,n){var r=n(49),i=n(50),o=n(52),s=Object.defineProperty;e.f=n(36)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(35),i=n(33).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(33),i=n(48),o=n(54),s=n(71)("src"),a=Function.toString,c=(""+a).split("toString");n(34).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||i(n,s,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(35),i=n(49),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(55)(Function.call,n(74).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){var r=n(75),i=n(53),o=n(76),s=n(52),a=n(54),c=n(50),u=Object.getOwnPropertyDescriptor;e.f=n(36)?u:function(t,e){if(t=o(t),e=s(e,!0),c)try{return u(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(77),i=n(42);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(78);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){n(80),t.exports=n(34).String.padEnd},function(t,e,n){var r=n(47),i=n(81),o=n(84);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){var r=n(82),i=n(83),o=n(42);t.exports=function(t,e,n,s){var a=String(o(t)),c=a.length,u=void 0===n?" ":String(n),l=r(e);if(l<=c||""==u)return a;var h=l-c,f=i.call(u,Math.ceil(h/u.length));return f.length>h&&(f=f.slice(0,h)),s?f+a:a+f}},function(t,e,n){var r=n(56),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(56),i=n(42);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){var r=n(33).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var r,i,o=n(57),s=n(58),a=0,c=0;t.exports=function(t,e,n){var u=e&&n||0,l=e||[],h=(t=t||{}).node||r,f=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==f){var p=o();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,m=d-a+(g-c)/1e4;if(m<0&&void 0===t.clockseq&&(f=f+1&16383),(m<0||d>a)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,c=g,i=f;var b=(1e4*(268435455&(d+=122192928e5))+g)%4294967296;l[u++]=b>>>24&255,l[u++]=b>>>16&255,l[u++]=b>>>8&255,l[u++]=255&b;var y=d/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var w=0;w<6;++w)l[u+w]=h[w];return e||s(l)}},function(t,e,n){var r=n(57),i=n(58);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[o+a]=s[a];return e||i(s)}},function(t,e){t.exports=function(t){var e=t.json;if(!(e&&e.attributes&&e.objectType&&e.properties))throw new Error("MxMetaObject: invalid initialization");this.has=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.has: parameter attr is not of type String.");return Object.prototype.hasOwnProperty.call(e.attributes,t)},this.isEnum=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isEnum : parameter attr is not of type String.");return/^(Enum|EnumSet)$/.test(this.getAttributeType(t))},this.isNumeric=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isNumeric : parameter attr is not of type String.");return/^(Integer|Long|Decimal|Float|Currency)$/.test(this.getAttributeType(t))},this.isPassword=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isDate : parameter attr is not of type String.");return"HashString"===this.getAttributeType(t)},this.isCurrency=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isCurrency : parameter attr is not of type String.");return"Currency"===this.getAttributeType(t)},this.isDate=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isDate : parameter attr is not of type String.");return/^(Date|DateTime)$/.test(this.getAttributeType(t))},this.isLocalizedDate=function(t){return this.isDate(t)?/true/.test(e.attributes[t].localize):null},this.isBoolean=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isBoolean : parameter attr is not of type String.");return"Boolean"===this.getAttributeType(t)},this.isReference=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isReference : parameter attr is not of type String.");return/^(ObjectReference|ObjectReferenceSet)$/.test(this.getAttributeType(t))},this.isObjectReference=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isObjectReference : parameter attr is not of type String.");return"ObjectReference"===this.getAttributeType(t)},this.isObjectReferenceSet=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isObjectReferenceSet : parameter attr is not of type String.");return"ObjectReferenceSet"===this.getAttributeType(t)},this.isBidirectionalReference=function(t){return this.isReference(t)&&Boolean(e.attributes[t].both)},this.getOptions=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.getOptions : parameter attr is not of type String.");if(!this.isEnum(t))throw new Error("mendix/lib/MxMetaObject.getOptions : attribute '"+t+"' is not an Enumeration.");try{var n=[];if(this.has(t)){var r=e.attributes[t].options;if(r&&r.length){n=[];for(var i=0;i<r.length;i++)for(var o in r[i])n.push(r[i][o])}}return n}catch(t){return[]}},this.getEnumMap=function(t){if(!this.isEnum(t))return null;for(var n=[],r=e.attributes[t].options,i=0;i<r.length;i++)for(var o in r[i]){n.push({key:o,caption:r[i][o]});break}return n},this.getEnumKVPairs=function(t){if(!this.isEnum(t))return null;for(var n={},r=e.attributes[t].options,i=0;i<r.length;i++)for(var o in r[i])n[o]=r[i][o];return n},this.getEnumCaption=function(t,n){if(!this.isEnum(t))return null;for(var r=e.attributes[t].options,i=0;i<r.length;i++){var o=r[i];for(var s in o)if(s===n)return o[s]}return n},this.getReferenceAttributes=function(){var t=[];for(var n in e.attributes)this.isReference(n)&&t.push(n);return t},this.getAttributes=function(){var t=[];for(var n in e.attributes)t.push(n);return t},this.getAttributesWithoutReferences=function(){var t=[];for(var n in e.attributes)this.isReference(n)||t.push(n);return t},this.getAttributeType=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.getAttributeType : parameter attr is not of type String.");return!!this.has(t)&&e.attributes[t].type},this.getSelectorEntity=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.getSelectorEntity : parameter attr is not of type String.");return!!this.has(t)&&e.attributes[t].klass},this.getEntity=function(){return e.objectType},this.isPersistable=function(){return e.persistable},this.needsReachableState=function(t){return!(t in e.needsReachableState)||e.needsReachableState[t]},this.isA=function(t){return this.getEntity()===t||this.inheritsFrom(t)},this.hasSuperEntities=function(){return 0!==e.properties.superclasses.length},this.getSuperEntities=function(){var t=e.properties.superclasses;return"string"==typeof t?[t]:t},this.hasSubEntities=function(){return 0!==e.properties.subclasses.length},this.getSubEntities=function(){var t=e.properties.subclasses;return"string"==typeof t?[t]:t},this.inheritsFrom=function(t){return(this.getSuperEntities()||[]).includes(t)},this.isSyncable=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isObjectReferenceSet : parameter attr is not of type String.");return!!this.has(t)&&(void 0===e.attributes[t].sync||e.attributes[t].sync)}}},function(t,e,n){n.r(e),n.d(e,"MxObjectSnapshot",function(){return o});var r=n(2),i=n(7);class o extends i.MxObject{constructor(t){super({meta:t.metaData,json:{guid:t.getGuid(),objectType:t.getEntity()}}),this._mxObject=t}resetFromJSON(t){super.resetFromJSON(t),this._mxObject.resetFromJSON(t)}markDeleted(){super.markDeleted(),this._mxObject.markDeleted()}hasChanges(){return!1}snapshot(){return this}isReadonlyAttr(t){return!0}_fetchReference(t,e,n,r){super._fetchReference(t,e,t=>{t instanceof i.MxObject?n(t.snapshot()):Array.isArray(t)?n(t.map(t=>t.snapshot())):n(t)},r)}has(t){return this._mxObject.has(t)}toJSON(){return this._mxObject.toJSON()}_attributeChanged(t){return!1}_getAttributeValue(t){return this._mxObject._getAttributeValue(t)}_makeChange(t,e){throw new r.a(`Cannot modify attribute ${t} of a read-only object.`)}_getChildren(t){return this._mxObject._getChildren(t).map(t=>t.snapshot())}convertToEditable(){return window.mx.data.removeChanges(this.getGuid()),this._mxObject}}},function(t,e,n){n.r(e),n.d(e,"MxContext",function(){return a});var r=n(7),i=n(10),o=n.n(i);let s=0;class a{constructor(t){this.id=this.ident=++s,this.trackId="",this.trackEntity="",this.trackObject=null,this.localParams={},this.constraintby=[],this._entityToGuid={},this._mxidToObject={},t&&(t.mxcontext&&this.dupFrom(t.mxcontext),t.classname&&t.mendixguid?this.setContext(t.classname,t.mendixguid):t.entity&&t.guid&&this.setContext(t.entity,t.guid))}hasTrackEntity(){return""!==this.trackEntity}hasTrackId(){return!!this.trackId}hasTrackObject(){return!!this.trackObject}getTrackEntity(){return this.trackEntity}getTrackId(){return this.trackId}getTrackObject(){return this.trackObject}setTrackObject(t){t&&this.setContext(t.getEntity(),t.getGuid()),this.trackObject=t}getObject(){return this.trackObject}setConstraints(t){null!=t&&""!==t&&0!==t.length&&(this.constraintby="string"==typeof t?t.split(","):t)}getConstraints(){for(var t=[],e=0;e<this.constraintby.length;e++)t.push(this.constraintby[e]);return t}hasBacktrack(){return 0!==this.constraintby.length}getEntities(){return Object.keys(this._entityToGuid).filter(t=>void 0!==t&&""!==this._entityToGuid[t])}setContext(t,e){if(1===arguments.length&&arguments[0]instanceof r.MxObject){var n=arguments[0];t=n.getEntity(),e=n.getGuid()}this.trackEntity=null==t?"":t,this.trackId=null==e?"":e,this.trackObject=null,this._entityToGuid[this.trackEntity]=this.trackId}unsetContext(t){if("string"!=typeof t)throw new Error("mendix/lib/MxContext.unsetContext: parameter entity is not of type String");delete this._entityToGuid[t]}getContext(t){if("string"!=typeof t)throw new Error("mendix/lib/MxContext.getContext: parameter entity is not of type String");if(t in this._entityToGuid)return this._entityToGuid[t];var e=window.mx.meta.getEntity(t),n=null;return e.getSubEntities().some(t=>t in this._entityToGuid&&(n=this._entityToGuid[t],!0)),n}hasContext(t){if("string"!=typeof t)throw new Error("mendix/lib/MxContext.hasContext: parameter entity is not of type String");return null!=this.getContext(t)}reset(){this._entityToGuid={},this._mxidToObject={},this.trackId=null,this.trackEntity="",this.trackObject=null}dupFrom(t){this.reset(),this.mixin(t)}mixin(t){if(t)t.getEntities().forEach(e=>this.setContext(e,t.getContext(e))),t.getWidgetIds().forEach(e=>this.setWidgetObject(e,t.getWidgetObject(e))),this.setParams(t.getParams()),this.setConstraints(t.getConstraints()),this.setContext(t.getTrackEntity(),t.getTrackId()),this.setTrackObject(t.getTrackObject());else{const t=this.getTrackEntity();t&&this.unsetContext(t),this.setContext(null,null)}}hasParam(t){return t in this.localParams}getParam(t){return this.hasParam(t)?this.localParams[t]:null}getParams(){return this.localParams}setParam(t,e){if(null==t)throw new Error("mendix/lib/MxContext["+this.ident+"].setParam key is null");this.localParams[t]=e}setParams(t){if("object"!=typeof t)throw new Error("mendix/lib/MxContext["+this.ident+"].setParams requires an Object.");for(var e in t)this.localParams[e]=t[e]}unsetParam(t){delete this.localParams[t]}resetParams(){this.localParams={}}isEmpty(){for(var t in this._entityToGuid)return!0;return!1}getGuids(){for(var t=this.getEntities(),e=this.getTrackId(),n=e?[e]:[],r=0,i=t.length;r<i;r++){var o=t[r];if("System.owner"!==o&&"System.changedBy"!==o){var s=this.getContext(o);s!==e&&n.push(s)}}return n}getWidgetIds(){return Object.keys(this._mxidToObject)}getWidgetObject(t){return this._mxidToObject[t]}setWidgetObject(t,e){this.setTrackObject(e),this._mxidToObject[t]=e}getWidgetObjectMap(){return o.a.clone(this._mxidToObject)}freeze(){this.setTrackObject=this.setConstraints=this.setContext=this.unsetContext=this.reset=this.dupFrom=this.setParam=this.setParams=this.unsetParam=this.setWidgetObject=this.resetParams=function(){return window.mx.logger.error("mendix/lib/MxContext["+this.ident+"].freeze: context is readonly"),!1}}}},function(t,e,n){const{executors:r}=n(30),{handleRuntimeError:i}=n(105),{handleUncachedObjects:o}=n(45),{MxObject:s}=n(7),{NanoflowEngine:a}=n(31),c=n(5);function u(t,e,n){this._backend=t,this._objectCache=e,this._shouldRemoveObjectImmediately=n,this._nanoflowEngine=new a(r)}function l(t){return t.getGuid()}function h(t,e){return t.isObjectReference(e)?t.getReference(e):t.isObjectReferenceSet(e)?t.getReferences(e):t.get(e)}u.prototype.getByGuid=function(t,e){e=e||{};var n=t.map(this._objectCache.getObject,this._objectCache).filter(function(t){return null!=t});if(t.every(function(t){return this._objectCache.has(t)},this)){var r=n;e.sort&&e.sort.forEach(function(t){var e=t[0],n=t[1];r=r.sort(function(t,r){return(t=t.get(e))<(r=r.get(e))?"asc"===n?-1:1:t>r?"asc"===n?1:-1:0})});var i=e.offset;if(i){var o=e.amount;r=o?r.slice(i,i+o):r.slice(i)}return Promise.resolve({mxobjs:r,count:n.length})}var a=null==e.attributes;return this._backend.getByGuid(t,e).then(function(t){var e,n=t.mxobjects||[],r=n.map(t=>t.guid);a?(this._objectCache.setMxObjects(n),e=r.map(this._objectCache.getObject,this._objectCache)):(r.forEach(this._removeObjectKeepChanges,this),e=n.map(s.fromJson));return{mxobjs:e,count:e.length}}.bind(this))},u.prototype.getByXPath=function(t,e,n){return this._backend.getByXPath(t,e,n).then(function(t){var e=t.mxobjects||[],n=t.count||0,r=t.aggregates||[];e.map(t=>t.guid).forEach(this._removeObjectKeepChanges,this);var i=e.map(s.fromJson),o=r.map(function(t){return null==t?"":new c(t)});return{mxobjs:i,count:n,aggregates:o}}.bind(this))},u.prototype.getByPath=function(t,e,n,r){return this._backend.getByPath(t,e,n,r).then(function(t){var e=t.mxobjects||[];this._objectCache.setMxObjects(e);var n=e.map(function(t){return this._objectCache.getObject(t.guid)},this);return{mxobjs:n,count:n.length}}.bind(this))},u.prototype.getSlice=function(t,e,n,r){return this._backend.getSlice(t,e,n).then(({mxobjects:t=[],count:e=0})=>{let n=null;return r?(this._objectCache.setMxObjects(t),n=t.map(t=>this._objectCache.getObject(t.guid))):n=t.map(s.fromJson),[n,e]})},u.prototype.fetch=function(t,e,n,r,i,o){var s;s=(r=r||{}).schema?e.splice(-2,e.length):[],this._performFetch(t,e,s,n,r,i,o)},u.prototype.action=async function(t,e,n,r,i){const{actionResult:o}=await this._backend.action(t,e,n,r,i);let s;return o instanceof Array?(this._objectCache.setMxObjects(o),s=o.map(t=>this._objectCache.getObject(t.guid))):o&&"object"==typeof o&&o.guid?(this._objectCache.setMxObjects([o]),s=[this._objectCache.getObject(o.guid)]):s=o,s},u.prototype.runNanoflow=async function(t,e,n){try{const r=await this._nanoflowEngine.execute(t,e,n),o=Array.isArray(r)?r:"object"==typeof r&&r instanceof s?[r]:void 0;return o?(this._objectCache.setMxObjects(o.map(t=>t.jsonData)),o.map(t=>this._objectCache.getObject(t.getGuid()))):r}catch(t){throw await i(this._objectCache,t),t}},u.prototype.create=async function(t){const{actionResult:e}=await this._backend.create(t);return this._objectCache.getObject(e)},u.prototype.validate=async function(t){await this._backend.validate(t)},u.prototype.commit=async function(t,e,n,r){const i=t.map(l),s=await this._backend.commit(i,e);o(this._objectCache,t,s)},u.prototype.rollback=async function(t){const e=t.map(l),n=await this._backend.rollback(e);o(this._objectCache,t,n)},u.prototype.remove=function(t){return this._backend.remove(t)},u.prototype.saveDocument=async function(t,e,n,r){await this._backend.saveDocument(t,e,n,r),await this.getByGuid([t],{})},u.prototype.generateReport=async function(t,e,n,r){const{report:i}=await this._backend.generateReport(t,e,n,r);return i},u.prototype.generateExcelReport=async function(t,e){const{mxobject:n}=await this._backend.generateExcelReport(t,e);return s.fromJson(n)},u.prototype._removeObjectKeepChanges=function(t){this._shouldRemoveObjectImmediately(t)&&this._objectCache.removeObjectKeepChanges(t)},u.prototype._performFetch=function(t,e,n,r,i,o,s){var a,c,u,l;if(e.length+n.length===0)o(null==t?null:r?h(t,r):t);else if(0===e.length&&n.length>0)a=n[0],c=n[1],t.isObjectReferenceSet(a)?this._fetchReferenceSet(t,a,c,o,s):this._fetchReference(t,e,n.slice(2),r,i,a,c,i.schema,o,s);else if(a=e[0],c=e[1],t.isObjectReferenceSet(a))e.length>2||n.length>2?s&&s(new Error("reference set should be at end of path")):this._fetchReferenceSet(t,a,c,o,s);else if(t.isObjectReference(a))if(u=t.getChild(a))u.isA(c)?this._performFetch(u,e.slice(2),n,r,i,o,s):o&&o(null);else if(l=t.getReference(a))if(this._objectCache.has(l)){var f=this._objectCache.getObject(l);f.isA(c)?this._performFetch(f,e.slice(2),n,r,i,o,s):o&&o(null)}else i.usexpath&&e.length>2?this._fetchXPath(t,e.slice(2),n,r,i,l,c,o,s):this._fetchReference(t,e.slice(2),n,r,i,a,c,null,o,s);else o(null);else s&&s(new Error("attribute "+a+" is not a reference type"))},u.prototype._fetchReference=function(t,e,n,r,i,o,s,a,c,u){var l=this,h=t.getReference(o);h?this.getByGuid([h],{id:a}).then(({mxobjs:t,count:o})=>{var f,p=1===(f=a?t.filter(function(t){return t.getGuid()===h}):t).length?f[0]:null;p&&p.isA(s)?l._performFetch(p,e,n,r,i,c,u):c(null)},u):c(null)},u.prototype._fetchReferenceSet=function(t,e,n,r,i){0===t.getReferences(e).length?r([]):t.hasChildren(e)?r(t.getChildren(e).filter(function(t){return t.isA(n)})):this.getByGuid(t.getReferences(e)).then(({mxobjs:t,count:e})=>{var i=t.reduce(function(t,e){return e.isA(n)?t.matching.push(e):t.releasing.push(e),t},{matching:[],releasing:[]});r(i.matching)},i)},u.prototype._fetchXPath=function(t,e,n,r,i,o,s,a,c){var u=this,l=["//"+s+"[id="+o+"]"].concat(e).join("/");this.getByXPath(l).then(({mxobjs:t})=>{0===t.length?a(null):r&&1===t.length?a(h(t[0],r)):r?c&&c(new Error(r+" is not a reference type")):!function(t,e){var n,r,i=[t].concat(e);if(e.length<2)return!1;return n=window.mx.meta.getEntity(i.slice(-3)[0]),r=e.slice(-2)[0],n.isObjectReferenceSet(r)}(s,e)?u._performFetch(t[0],[],n,r,i,a,c):a(t)},c)},t.exports=u},function(t,e,n){t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e,n){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))i.call(n,u)&&(a[u]=n[u]);if(r){s=r(n);for(var l=0;l<s.length;l++)o.call(n,s[l])&&(a[s[l]]=n[s[l]])}}return a}},function(t,e,n){var r=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function o(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],o(n),o(r))}function s(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(r),n=1;n<e.length;n++)e=(t=o(e,n).join("")).match(r);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"","%FF%FE":""},n=i.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=s(n[0]);r!==n[0]&&(e[n[0]]=r)}n=i.exec(t)}e["%C2"]="";for(var o=Object.keys(e),a=0;a<o.length;a++){var c=o[a];t=t.replace(new RegExp(c,"g"),e[c])}return t}(t)}}},function(t,e){e.reachability=function(t,e){var n=new Array(t.length);return function e(r){for(var i=0;i<r.length;++i){var o=r[i];if(o<0||o>=n.length)throw new Error("graph: index "+o+" out of bounds in graph of size "+t.length);n[o]||(n[o]=!0,e(t[o]))}}(e),function(){for(var t=[],e=0;e<n.length;++e)n[e]&&t.push(e);return t}()}},function(t,e){function n(t){for(var e in this.__values={},t)this.__values[e+""]=!0}n.of=n.prototype.of=function(t){return n.fromArray([t])},n.fromArray=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=!0;return new n(e)},n.empty=n.prototype.empty=function(){return n.fromArray([])},n.prototype.contains=function(t){return this.__values[t]||!1},n.prototype.union=n.prototype.concat=function(t){var e={};for(var r in this.__values)e[r]=!0;for(var i in t.__values)e[i]=!0;return new n(e)},n.prototype.intersection=function(t){var e={};for(var r in this.__values)t.contains(r)&&(e[r]=!0);return new n(e)},n.prototype.difference=function(t){var e={};for(var r in this.__values)t.contains(r)||(e[r]=!0);return new n(e)},n.prototype.length=function(){return this.values().length},n.prototype.reduce=function(t,e){return this.values().reduce(t,e)},n.prototype.chain=function(t){return this.reduce(function(e,n){return e.concat(t(n))},this.empty())},n.prototype.map=function(t){return this.chain(function(e){return this.of(t(e))}.bind(this))},n.prototype.values=function(){return Object.keys(this.__values)},n.prototype.toString=function(){return"StringSet("+this.values()+")"},t.exports=n},function(t,e,n){const r=n(37),{SqlSelectBuilder:i,constraintBuilder:o}=n(97),s=n(98),a=n(99),c=n(43),u=n(38),l=n(5),h="_guidToTable",f={String:"text",Integer:"text",Long:"text",Decimal:"text",Float:"text",Currency:"text",Enum:"text",HashString:"text",ObjectReference:"text",DateTime:"integer",Boolean:"integer",AutoNumber:"integer",Binary:"blob"},p={String:O,Integer:j,Long:j,Decimal:j,Float:j,Currency:j,Enum:O,HashString:O,ObjectReference:O,DateTime:function(t){return null!=t?Number(t):null},Boolean:Number,AutoNumber:O,Binary:O},d={String:O,Integer:O,Long:O,Decimal:O,Float:O,Currency:O,Enum:O,HashString:O,ObjectReference:O,DateTime:x,Boolean:Boolean,AutoNumber:O,Binary:O},g={String:x,Integer:x,Long:x,Decimal:x,Float:x,Currency:x,Enum:x,HashString:x,ObjectReference:x,DateTime:function(t){return t?Number(t):null},Boolean:function(t){return"false"!==t},AutoNumber:x,Binary:x};var m={createCreateTransaction:b,createCleanTransaction:function(t){var e=[h].concat(t).map(E).map(t=>`DELETE FROM '${t}'`).map(t=>D(t,[]));return c.parallel(e).map(t=>void 0)},createFetchByGuidTransaction:function(t){return D((new i).from(h).where(o.equals("guid")).select(),[t]).chain(function(e){if(0===e.rows.length)return c.of(null);if(1!==e.rows.length)return c.rejected(new Error("db consistency error"));const n=e.rows.item(0),r=n.tableName,s=Boolean(n.dirty),a=n.readonlyAttrs;return D((new i).from(E(r)).where(o.equals("guid")).select(),[t]).chain(function(t){return 0===t.rows.length?c.rejected(new Error("entity not found")):1!==t.rows.length?c.rejected(new Error("db consistency error")):c.of(C(window.mx.meta.getEntity(r),s,a,t.rows.item(0)))})})},createFetchSliceTransaction:function(t,e,n,s,a){e=e||[],a=a||[];const u=window.mx.meta.getEntity(t),l=function(t,e){const n=[];return{builder:(new i).where(e.map(function e(i){if(i.constraints)return o[i.operator](i.constraints.map(e).filter(t=>null!==t));if(null==i.value)switch(i.operator){case"contains":return null;case"equals":return o.isNull(E(i.attribute),i.negate)}const s=t.getAttributeType(i.attribute);const a=g[s];const c=p[s];const u=c(a(i.value));n.push("contains"===i.operator?(l=u,h=r.LIKE_ESCAPE_CHAR,l.replace(new RegExp(h,"g"),h+h).replace(/%/g,h+"%").replace(/_/g,h+"_")):u);var l,h;return o[i.operator](E(i.attribute),i.negate)}).filter(t=>null!==t)),args:n}}(u,e),f=l.builder.from(E(t)),d=l.args;let m=f.offset(n).limit(s).join(h,"guid",["dirty","readonlyAttrs"]);var b=D((m=a.reduce(function(t,e){return t.order(e[0],e[1])},m)).select(),d).map(function(t){const e=[];for(let n=0;n<t.rows.length;++n){const r=t.rows.item(n),i=Boolean(r[`${h}.dirty`]),o=T(r,"readonlyAttrs");e.push(C(u,i,o,r))}return e}),y=D(f.selectCount("cnt"),d).map(function(t){return t.rows.item(0).cnt});return c.parallel([b,y])},createInsertOrReplaceTransaction:function(t){return c.parallel(t.map(t=>{const e=t.$objectType,n=w(),r=v(e,t);return[D(n.insertOrReplace(),[t.guid,e,1,JSON.stringify(t.$readonlyAttrs)]),D(r.builder.insertOrReplace(),r.values)]}).reduce((t,e)=>t.concat(e),[])).map(t=>void 0)},createFetchDirtyObjectsTransaction:function(){return y().chain(function(t){const e=_(t.rows).map(({tableName:t})=>{const e=(new i).from(E(t)).join(h,"guid",["dirty","readonlyAttrs"]).where(o.equals(`${h}.dirty`)).select(),n=window.mx.meta.getEntity(t);return D(e,[1]).map(t=>_(t.rows).map(t=>C(n,!0,T(t,"readonlyAttrs"),t)))});return c.parallel(e)}).map(t=>t.reduce((t,e)=>t.concat(e),[]))},createMakeCleanTransaction:function(t){var e=t.map(t=>D(`UPDATE ${h} set dirty = 0 where guid = ?`,[t.guid]));return c.parallel(e).map(t=>void 0)},createDirtyCleanupTransaction:function(){return y().chain(function(t){var e=_(t.rows).map(function(t){var e=t.tableName;return D(`DELETE FROM ${E(e)} WHERE guid IN (\n                            SELECT guid FROM ${h} WHERE tableName = ? AND dirty = 1)`,[e])});return c.sequence([c.parallel(e),D(`DELETE FROM ${h} WHERE dirty = 1`)]).map(t=>void 0)})},createRebuildTransaction:function(t,e){const n=function(t){var e=[h].concat(t).map(E).map(function(t){return"DROP TABLE IF EXISTS '"+t+"'"}).map(function(t){return D(t,[])});return c.sequence([c.parallel(e),b(t)])}(t),r=t.map(t=>{const n=e.filter(e=>e.$objectType===t);return function(t,e){var n=e.reduce(function(e,n){var r=w(),i=v(t,n);return e.concat([D(r.insert(),[n.guid,t,0,JSON.stringify(n.$readonlyAttrs)]),D(i.builder.insert(),i.values)])},[]);return c.parallel(n).map(t=>void 0)}(t,n)});return c.sequence([n,c.parallel(r)]).map(t=>void 0)}};function b(t){var e=[D((new s).table(h).primaryKeyColumn("guid","text").column("tableName","text").column("dirty","boolean").column("readonlyAttrs","text").createIfNotExists(),[])].concat(t.map(function(t){return D(function(t){var e=window.mx.meta.getEntity(t);return e.getAttributes().map(function(t){var n=e.getAttributeType(t);return{attr:t,type:f[n]}})}(t).reduce(function(t,e){return t.column(E(e.attr),e.type)},(new s).table(E(t)).primaryKeyColumn("guid","text")).createIfNotExists(),[])}));return c.parallel(e).map(t=>void 0)}function y(){return D((new i).from(h).where(o.equals("dirty")).selectDistinct("tableName"),[1])}function w(){return(new a).into(h).column("guid").column("tableName").column("dirty").column("readonlyAttrs")}function v(t,e){var n=window.mx.meta.getEntity(t),r=n.getAttributes().reduce(function(t,r){var i=n.getAttributeType(r),o=p[i];if(!o)return t;var s=o(e[r]);return{attrs:t.attrs.concat([r]),values:t.values.concat([s])}},{attrs:["guid"],values:[e.guid]});return{builder:r.attrs.reduce(function(t,e){return t.column(E(e))},(new a).into(E(t))),values:r.values}}function j(t){if(null==t)return null;var e=new l(t),n=20-Math.max(0,e.e)-1;return(e.s<0?"-":"")+new Array(n+1).join("0")+e.abs().toFixed()}function O(t){return null!=t?String(t):null}function x(t){return t}function _(t){for(var e=[],n=0;n<t.length;++n)e.push(t.item(n));return e}function E(t){return t.replace(".","$")}function S(t){return t.replace("$",".")}function C(t,e,n,r){const i={guid:r.guid,$objectType:t.getEntity(),$dirty:e,$readonlyAttrs:JSON.parse(n)};for(const e in r){if("guid"===(o=e)||o.indexOf(".")>-1)continue;const n=S(e),s=t.getAttributeType(n),a=d[s];a&&(i[n]=a(r[e]))}var o;return i}function T(t,e){return t[`${h}.${e}`]}function D(t,e){return e=e||[],new c(function(n){return new u(function(r,i){n.executeSql(t,e,(t,e)=>i(e),(t,e)=>r(e))})})}t.exports=m},function(t,e,n){n.r(e),n.d(e,"SqlSelectBuilder",function(){return i}),n.d(e,"constraintBuilder",function(){return u});const r=n(37);class i{constructor(t,e){this._select=e&&e.select||t&&t._select||null,this._from=e&&e.from||t&&t._from||null,this._join=e&&e.join||t&&t._join||null,this._constraints=e&&e.constraints||t&&t._constraints||[],this._orderBy=e&&e.orderBy||t&&t._orderBy||[],this._limit=e&&e.limit||t&&t._limit||null,this._offset=e&&e.offset||t&&t._offset||null}from(t){return new i(this,{from:t})}join(t,e,n){return new i(this,{join:{tableName:t,joinOnColumn:e,selectedColumns:n}})}where(t){return new i(this,{constraints:this._constraints.concat(t)})}order(t,e){return new i(this,{orderBy:this._orderBy.concat([[t,e]])})}limit(t){return new i(this,{limit:t})}offset(t){return new i(this,{offset:t})}selectDistinct(t){return Array.isArray(t)&&(t=t.join(", ")),`SELECT DISTINCT ${t} ${this._buildSql()}`}selectCount(t){return`SELECT COUNT(*) AS ${t}`+this._buildSql()}select(){let t=`SELECT ${this._from}.*`;return this._join&&this._join.selectedColumns.forEach(e=>{t+=`, ${this._join.tableName}.[${e}] as "${this._join.tableName}.${e}"`}),t+this._buildSql()}_buildSql(){let t=` FROM ${this._from} AS ${this._from}`;return this._join&&(t+=` JOIN ${this._join.tableName} AS ${this._join.tableName} USING (${this._join.joinOnColumn})`),this._constraints.length>0&&(t+=" WHERE "+this._constraints.map(t=>t.build(this._from)).join(" AND ")),this._orderBy.length>0&&(t+=" ORDER BY "+this._orderBy.map(t=>`${this._from}.[${t[0]}] ${t[1]}`).join(", ")),this._limit&&(t+=" LIMIT "+this._limit),this._offset&&(t+=" OFFSET "+this._offset),t}}const o={equals:l("="),lessThan:l("<"),lessThanOrEquals:l("<="),greaterThan:l(">"),greaterThanOrEquals:l(">="),contains:function(t){let e="";return e+=t,e+=" LIKE '%' || ? || '%'",e+=" ESCAPE '"+r.LIKE_ESCAPE_CHAR+"'"}};class s{constructor(t,e,n){this._column=t,this._operator=e,this._negate=!!n}build(t){const e=o[this._operator],n=this._column.indexOf(".")>-1?this._column:`${t}.[${this._column}]`;return(this._negate?"NOT ":"")+e(n)}}class a{constructor(t,e){this._column=t,this._negate=!!e}build(t){return(this._column.indexOf(".")>-1?this._column:`${t}.[${this._column}]`)+" IS "+(this._negate?"NOT ":"")+"NULL"}}class c{constructor(t,e){this.group=t,this.constraints=e||[]}add(t){this.constraints.push(t)}build(t){return"("+this.constraints.map(e=>e.build(t)).join(` ${this.group} `)+")"}}const u={and:t=>new c("and",t),or:t=>new c("or",t),equals:(t,e)=>new s(t,"equals",e),isNull:(t,e)=>new a(t,e),lessThan:(t,e)=>new s(t,"lessThan",e),lessThanOrEquals:(t,e)=>new s(t,"lessThanOrEquals",e),greaterThan:(t,e)=>new s(t,"greaterThan",e),greaterThanOrEquals:(t,e)=>new s(t,"greaterThanOrEquals",e),contains:(t,e)=>new s(t,"contains",e)};function l(t){return function(e){return e+" "+t+" ?"}}},function(t,e,n){const r=n(37);function i(t,e){this._tableName=e&&e.tableName||t&&t._tableName||null,this._columns=e&&e.columns||t&&t._columns||[]}function o(t){var e=r.QUOTE_CHAR;return e+t+e}i.prototype.table=function(t){return new i(this,{tableName:t})},i.prototype.column=function(t,e){return new i(this,{columns:this._columns.concat({columnName:t,columnType:e,isPrimary:!1})})},i.prototype.primaryKeyColumn=function(t,e){return new i(this,{columns:this._columns.concat({columnName:t,columnType:e,isPrimary:!0})})},i.prototype.createIfNotExists=function(){var t="";return t+="CREATE TABLE IF NOT EXISTS "+o(this._tableName),t+=this._buildSql()},i.prototype._buildSql=function(){var t="";return this._columns.length>0&&(t+=" (",t+=this._columns.map(function(t){return[o(t.columnName),t.columnType,"text"===t.columnType?" COLLATE NOCASE ":"",t.isPrimary?"PRIMARY KEY ":""].join(" ").slice(0,-1)},this).join(", "),t+=")"),t},t.exports=i},function(t,e,n){const r=n(37);function i(t,e){if(!(this instanceof i))return new i;this._tableName=e&&e.tableName||t&&t._tableName||null,this._columnNames=e&&e.columnNames||t&&t._columnNames||[]}function o(t){var e=r.QUOTE_CHAR;return e+t+e}i.prototype.into=function(t){return new i(this,{tableName:t})},i.prototype.column=function(t){return new i(this,{columnNames:this._columnNames.concat(t)})},i.prototype.insert=function(){var t="";return t+="INSERT INTO "+o(this._tableName),t+=this._buildSql()},i.prototype.insertOrReplace=function(){var t="";return t+="INSERT OR REPLACE INTO "+o(this._tableName),t+=this._buildSql()},i.prototype._buildSql=function(){var t="";return this._columnNames.length>0&&(t+=" (",t+=this._columnNames.map(o).join(", "),t+=")"),t+=" VALUES (",t+="?"+new Array(this._columnNames.length).join(", ?"),t+=")"},t.exports=i},function(t,e){t.exports=function(t){function e(t){this.run=t}return e.prototype.chain=function(t){return new e(function(e){return this.run(e).chain(function(n){return t(n).run(e)})}.bind(this))},e.prototype.ap=function(t){return new e(function(e){return this.run(e).ap(t.run(e))}.bind(this))},e.prototype.map=function(t){return this.chain(function(n){return e.of(t(n))})},e.of=function(n){return new e(function(e){return t.of(n)})},e.ask=function(){return new e(t.of)},e}},function(t,e,n){const r=n(38);function i(t){return function(e,n){return new r(function(r,i){var o,s=2;e[t](function(t){n.run(t).fork(r,function(t){o=t,0==--s&&i(o)})},r,function(){0==--s&&i(o)})})}}t.exports={runReadTransaction:i("readTransaction"),runWriteTransaction:i("transaction")}},function(t,e,n){const r=n(59),i=n(43);function o(){}o.prototype.getSlice=function(t,e,n={}){return this._getDatabase().then(this._fetchSlice(t,e,n))},o.prototype.getByGuid=function(t){return this._getDatabase().then(this._fetch(t))},o.prototype.insertOrReplace=function(t){return this._getDatabase().then(this._insertOrReplace(t))},o.prototype.cleanDatabase=function(){return this._getDatabase().then(this._cleanDatabase())},o.prototype.rebuildDatabase=function(t){return this._getDatabase().then(e=>r.promiseFromTask(this._rebuildDb(t).run(e)))},o.prototype.fetchDirty=function(){return this._getDatabase().then(t=>r.promiseFromTask(this._fetchDirty().run(t)))},o.prototype.makeClean=function(t){return this._getDatabase().then(e=>r.promiseFromTask(this._makeClean(t).run(e)))},o.prototype.cleanupDirtyObjects=function(){return this._getDatabase().then(this._cleanupDirtyObjects())},o.prototype._getDatabase=function(){return Promise.reject(new Error("not implemented"))},o.prototype._initialize=function(){return Promise.reject(new Error("not implemented"))},o.prototype._fetch=function(t){return function(t){return Promise.reject(new Error("not implemented"))}},o.prototype._fetchSlice=function(t,e,n){return function(t){return Promise.reject(new Error("not implemented"))}},o.prototype._insertOrReplace=function(t){return function(t){return Promise.reject(new Error("not implemented"))}},o.prototype._cleanDatabase=function(){return function(t){return Promise.reject(new Error("not implemented"))}},o.prototype._rebuildDb=function(t){return i.rejected(new Error("not implemented"))},o.prototype._fetchDirty=function(){return i.rejected(new Error("not implemented"))},o.prototype._makeClean=function(){return i.rejected(new Error("not implemented"))},o.prototype._cleanupDirtyObjects=function(){return function(t){return Promise.reject(new Error("not implemented"))}},t.exports=o},function(t,e){var n={parse:function(t){for(var e,n,r=/^\s*at (?:(?:(?:Anonymous function)?|((?:\[object object\])?\S+(?: \[as \S+\])?)) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,i=/^(?:\s*([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i,o=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i,s=t.split("\n"),a=[],c=0,u=s.length;c<u;++c){if(e=i.exec(s[c]))n={file:e[3],methodName:e[1]||"<unknown>",lineNumber:+e[4],column:e[5]?+e[5]:null};else if(e=r.exec(s[c]))n={file:e[2],methodName:e[1]||"<unknown>",lineNumber:+e[3],column:e[4]?+e[4]:null};else{if(!(e=o.exec(s[c])))continue;n={file:e[2],methodName:e[1]||"<unknown>",lineNumber:+e[3],column:e[4]?+e[4]:null}}a.push(n)}return a}};t.exports=n},function(t,e,n){n.r(e);n(66),n(79);var r=n(0),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function s(t){return"function"==typeof t}var a=!1,c={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;a=t},get useDeprecatedSynchronousErrorHandling(){return a}};function u(t){setTimeout(function(){throw t})}var l={closed:!0,next:function(t){},error:function(t){if(c.useDeprecatedSynchronousErrorHandling)throw t;u(t)},complete:function(){}},h=Array.isArray||function(t){return t&&"number"==typeof t.length};function f(t){return null!=t&&"object"==typeof t}var p,d={e:{}};function g(){try{return p.apply(this,arguments)}catch(t){return d.e=t,d}}function m(t){return p=t,g}function b(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}b.prototype=Object.create(Error.prototype);var y=b,w=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,c=r?r.length:0;n;)n.remove(this),n=++a<c&&r[a]||null;if(s(i))m(i).call(this)===d&&(e=!0,t=t||(d.e instanceof y?v(d.e.errors):[d.e]));if(h(o))for(a=-1,c=o.length;++a<c;){var u=o[a];if(f(u))if(m(u.unsubscribe).call(u)===d){e=!0,t=t||[];var l=d.e;l instanceof y?t=t.concat(v(l.errors)):t.push(l)}}if(e)throw new y(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function v(t){return t.reduce(function(t,e){return t.concat(e instanceof y?e.errors:e)},[])}var j="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),O=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,o._parentSubscription=null,arguments.length){case 0:o.destination=l;break;case 1:if(!n){o.destination=l;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new x(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new x(o,n,r,i)}return o}return o(e,t),e.prototype[j]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(w),x=function(t){function e(e,n,r,i){var o,a=t.call(this)||this;a._parentSubscriber=e;var c=a;return s(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==l&&(s((c=Object.create(n)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=o,a._error=r,a._complete=i,a}return o(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=c.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):u(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;u(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};c.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),c.useDeprecatedSynchronousErrorHandling)throw t;u(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!c.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return c.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(u(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(O);var _="function"==typeof Symbol&&Symbol.observable||"@@observable";function E(){}function S(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:E}var C=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof O)return t;if(t[j])return t[j]()}return t||e||n?new O(t,e,n):new O(l)}(t,e,n);if(r?r.call(i,this.source):i.add(this.source||c.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),c.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof O?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=T(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[_]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:S(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=T(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function T(t){if(t||(t=c.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function D(t){return!!t&&(t instanceof C||"function"==typeof t.lift&&"function"==typeof t.subscribe)}function k(t){return t&&"function"==typeof t.schedule}var P=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}};function M(t,e){return new C(e?function(n){var r=new w,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:P(t))}var A=new C(function(t){return t.complete()});function N(t){return t?function(t){return new C(function(e){return t.schedule(function(){return e.complete()})})}(t):A}function I(t){var e=new C(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}function R(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(k(n)?t.pop():n=void 0,t.length){case 0:return N(n);case 1:return n?M(t,n):I(t[0]);default:return M(t,n)}}var V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(O),F=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return o(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(O),$=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,u),e}};function G(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var B=G(),U=function(t){return function(e){for(var n=t[B]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},q=function(t){return function(e){var n=t[_]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},W=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function L(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var H=function(t){if(t instanceof C)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[_])return q(t);if(W(t))return P(t);if(L(t))return $(t);if(t&&"function"==typeof t[B])return U(t);var e=f(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function z(t,e,n,r,i){if(void 0===i&&(i=new F(t,n,r)),!i.closed)return H(e)(i)}var Y={};function J(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return k(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&h(t[0])&&(t=t[0]),M(t,r).lift(new K(n))}var K=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new X(t,this.resultSelector))},t}(),X=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return o(e,t),e.prototype._next=function(t){this.values.push(Y),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(z(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===Y?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(V),Q=n(3),Z=n(22);function tt(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}tt.prototype=Object.create(Error.prototype);var et=tt,nt=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return o(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(w),rt=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return o(e,t),e}(O),it=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return o(e,t),e.prototype[j]=function(){return new rt(this)},e.prototype.lift=function(t){var e=new ot(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new et;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new et;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new et;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new et;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new et;return this.hasError?(t.error(this.thrownError),w.EMPTY):this.isStopped?(t.complete(),w.EMPTY):(this.observers.push(t),new nt(this,t))},e.prototype.asObservable=function(){var t=new C;return t.source=this,t},e.create=function(t,e){return new ot(t,e)},e}(C),ot=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return o(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):w.EMPTY},e}(it),st=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return o(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return o(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(w)),at=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return o(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(st),ct=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),ut=function(t){function e(n,r){void 0===r&&(r=ct.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return o(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(ct),lt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(ut))(at);function ht(t){var e=t.error;t.subscriber.error(e)}var ft=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){var t,e;switch(this.kind){case"N":return R(this.value);case"E":return t=this.error,new C(e?function(n){return e.schedule(ht,0,{error:t,subscriber:n})}:function(e){return e.error(t)});case"C":return N()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var pt=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return o(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new dt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(ft.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(ft.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(ft.createComplete()),this.unsubscribe()},e}(O),dt=function(){return function(t,e){this.notification=t,this.destination=e}}(),gt=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return o(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new mt(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new et;if(this.isStopped||this.hasError?e=w.EMPTY:(this.observers.push(t),e=new nt(this,t)),i&&t.add(t=new pt(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||lt).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(it),mt=function(){return function(t,e){this.time=t,this.value=e}}();function bt(t,e){if(!e)return t instanceof C?t:new C(H(t));if(null!=t){if(function(t){return t&&"function"==typeof t[_]}(t))return function(t,e){return new C(e?function(n){var r=new w;return r.add(e.schedule(function(){var i=t[_]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:q(t))}(t,e);if(L(t))return function(t,e){return new C(e?function(n){var r=new w;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:$(t))}(t,e);if(W(t))return M(t,e);if(function(t){return t&&"function"==typeof t[B]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new C(e?function(n){var r,i=new w;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[B](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:U(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function yt(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new wt(t,e))}}var wt=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new vt(t,this.project,this.thisArg))},t}(),vt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return o(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(O);var jt=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Ot(t,this.project,this.concurrent))},t}(),Ot=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return o(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new F(this,void 0,void 0);this.destination.add(r),z(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(V);function xt(t){return t}function _t(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t(function(t,r){return bt(e(t,r)).pipe(yt(function(e,i){return n(t,e,r,i)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new jt(e,r))})}(xt,t)}function Et(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&k(t[1])?bt(t[0]):_t(1)(R.apply(void 0,t))}var St=new C(E);function Ct(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return k(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof C?t[0]:_t(n)(M(t,r))}var Tt=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new et;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(it);function Dt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new kt(r,n))}}var kt=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new Pt(t,this.observables,this.project))},t}(),Pt=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var o=n.length;i.values=new Array(o);for(var s=0;s<o;s++)i.toRespond.push(s);for(s=0;s<o;s++){var a=n[s];i.add(z(i,a,a,s))}return i}return o(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(V);function Mt(){return function(t){return t.lift(new At(t))}}var At=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new Nt(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),Nt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return o(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(O),It=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return o(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new w).add(this.source.subscribe(new Vt(this.getSubject(),this))),t.closed?(this._connection=null,t=w.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return Mt()(this)},e}(C).prototype,Rt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:It._subscribe},_isComplete:{value:It._isComplete,writable:!0},getSubject:{value:It.getSubject},connect:{value:It.connect},refCount:{value:It.refCount}},Vt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return o(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(rt);var Ft=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}();var $t=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Gt(t,this.compare,this.keySelector))},t}(),Gt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return o(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=m(this.keySelector)(t))===d)return this.destination.error(d.e);var n=!1;if(this.hasKey){if((n=m(this.compare)(this.key,e))===d)return this.destination.error(d.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=e,this.destination.next(t))},e}(O);var Bt=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new Ut(t,this.predicate))},t}(),Ut=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.index=0,r}return o(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(O);function qt(t,e){return function(n){return n.lift(new Wt(t,e))}}var Wt=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Lt(t,this.predicate,this.thisArg))},t}(),Lt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return o(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(O);function Ht(t){return function(e){return e.lift(new zt(t))}}var zt=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new Yt(t,this.predicate))},t}(),Yt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return o(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(O);function Jt(t){return new C(e=>{const n=mx.data.subscribe(Object.assign({},t,{callback:t=>e.next(t)}));return()=>mx.data.unsubscribe(n)})}function Kt(t){return e=>t.pipe(Dt(e),yt(([t,e])=>e))}function Xt(){const t=new gt(1);return e=>Mt()(function(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new Ft(r,e));var i=Object.create(n,Rt);return i.source=n,i.subjectFactory=r,i}}(t)(e))}function Qt(t){return Et(R(t),St)}function Zt(){return t=Z,function(n){return n.lift(new $t(t,e))};var t,e}function te(t){return e=>Ct(e,t)}function ee(t){return t.length>0?J(...t):Qt([])}let ne=!1;const re=new Tt(0);function ie(t){oe(t)()}function oe(t){return(...e)=>{if(ne)return t(...e);ne=!0;try{return t(...e)}finally{ne=!1,re.next(re.value+1)}}}function se(t){const e={};return J(Et(t,Promise.resolve(e)).pipe(yt(t=>({value:t,emittedInTransaction:ne,transaction:re.value+1}))),re).pipe((n=(([{value:t}])=>t!==e),function(t){return t.lift(new Bt(n))}),qt(([{emittedInTransaction:t,transaction:e},n])=>t?e===n:e===n+1),yt(([{value:t}])=>t));var n}function ae(t){return e=>Et(R(t),e.pipe(Ht(e=>Z(t,e))))}function ce(t){return J(Object.keys(t).map(e=>t[e].pipe(yt(t=>Object(Q.k)(e,t))))).pipe(yt(t=>{const e={};return t.forEach(([t,n])=>e[t]=n),e}))}var ue=n(2);function le(t,e){return class extends e{componentDidUpdate(n,r,i){if(this.props[t]!==n[t])throw new ue.a(`Parent of component ${Object(Q.d)(e)} did not correctly assign keys.`);super.componentDidUpdate&&super.componentDidUpdate(n,r,i)}}}function he(t){return e=>pe((n,r)=>t(e,n,r))}const fe=Symbol("isProperty");function pe(t){const e=t;return e[fe]=!0,e}const{Provider:de,Consumer:ge}=Object(r.createContext)(void 0),me=t=>Object(r.createElement)(de,{value:Object(Q.c)(t.store)},t.children);function be(t){const e=le("$store",t);return t=>Object(r.createElement)(ge,null,n=>Object(r.createElement)(e,Object.assign({},t,{$store:Object(Q.c)(n)}),t.children))}const ye=new Map;function we(t){const e=ye.get(t);if(void 0!==e)return e;const n=be(le("$widgetId",class extends r.Component{constructor(t){super(t);const e=function(t){const e=Object.assign({},t);delete e.$widgetId,delete e.$store;const n=Object(Q.i)(e,function e(n){if(function(t){const e=t;return e&&e.props&&e.props.$widgetId}(n))return n;if(function(t){return null!=t&&Boolean(t[fe])}(n))return n(t.$store,t.$widgetId);if(Array.isArray(n)){const t=n.map(e);return t.some(D)?J(t.map(ve)):t}if(Object(Q.f)(n)){const t=Object(Q.i)(n,e);return Object.values(t).some(D)?ce(Object(Q.i)(t,ve)):t}return n});return Object.values(n).some(D)?se(ce(Object(Q.i)(n,ve))):R(n)}(t);let n;this.subscription=e.subscribe({next:t=>{void 0===n?n=t:this.setState(t)},error:t=>mx.onError(t)}),void 0===n&&ne&&(ne=!1,re.next(re.value+1),ne=!0),this.state=Object(Q.c)(n)}componentWillUnmount(){this.subscription.unsubscribe()}render(){return Object(r.createElement)(t,this.state,this.props.children)}}));return n.displayName=`pluginWidget(${Object(Q.d)(t)})`,ye.set(t,n),n}function ve(t){return D(t)?t:R(t)}var je=n(1),Oe=n(21),xe=n(60);class _e extends Error{constructor(t=""){super("Not implemented"+(""!==t?": "+t:"")),Object.setPrototypeOf(this,_e.prototype)}}var Ee=n(61);const Se=Object(Ee.createIconSet)({"glyphicon-asterisk":42,"glyphicon-plus":43,"glyphicon-euro":8364,"glyphicon-eur":8364,"glyphicon-minus":8722,"glyphicon-cloud":9729,"glyphicon-envelope":9993,"glyphicon-pencil":9999,"glyphicon-glass":57345,"glyphicon-music":57346,"glyphicon-search":57347,"glyphicon-heart":57349,"glyphicon-star":57350,"glyphicon-star-empty":57351,"glyphicon-user":57352,"glyphicon-film":57353,"glyphicon-th-large":57360,"glyphicon-th":57361,"glyphicon-th-list":57362,"glyphicon-ok":57363,"glyphicon-remove":57364,"glyphicon-zoom-in":57365,"glyphicon-zoom-out":57366,"glyphicon-off":57367,"glyphicon-signal":57368,"glyphicon-cog":57369,"glyphicon-trash":57376,"glyphicon-home":57377,"glyphicon-file":57378,"glyphicon-time":57379,"glyphicon-road":57380,"glyphicon-download-alt":57381,"glyphicon-download":57382,"glyphicon-upload":57383,"glyphicon-inbox":57384,"glyphicon-play-circle":57385,"glyphicon-repeat":57392,"glyphicon-refresh":57393,"glyphicon-list-alt":57394,"glyphicon-lock":57395,"glyphicon-flag":57396,"glyphicon-headphones":57397,"glyphicon-volume-off":57398,"glyphicon-volume-down":57399,"glyphicon-volume-up":57400,"glyphicon-qrcode":57401,"glyphicon-barcode":57408,"glyphicon-tag":57409,"glyphicon-tags":57410,"glyphicon-book":57411,"glyphicon-bookmark":57412,"glyphicon-print":57413,"glyphicon-camera":57414,"glyphicon-font":57415,"glyphicon-bold":57416,"glyphicon-italic":57417,"glyphicon-text-height":57424,"glyphicon-text-width":57425,"glyphicon-align-left":57426,"glyphicon-align-center":57427,"glyphicon-align-right":57428,"glyphicon-align-justify":57429,"glyphicon-list":57430,"glyphicon-indent-left":57431,"glyphicon-indent-right":57432,"glyphicon-facetime-video":57433,"glyphicon-picture":57440,"glyphicon-map-marker":57442,"glyphicon-adjust":57443,"glyphicon-tint":57444,"glyphicon-edit":57445,"glyphicon-share":57446,"glyphicon-check":57447,"glyphicon-move":57448,"glyphicon-step-backward":57449,"glyphicon-fast-backward":57456,"glyphicon-backward":57457,"glyphicon-play":57458,"glyphicon-pause":57459,"glyphicon-stop":57460,"glyphicon-forward":57461,"glyphicon-fast-forward":57462,"glyphicon-step-forward":57463,"glyphicon-eject":57464,"glyphicon-chevron-left":57465,"glyphicon-chevron-right":57472,"glyphicon-plus-sign":57473,"glyphicon-minus-sign":57474,"glyphicon-remove-sign":57475,"glyphicon-ok-sign":57476,"glyphicon-question-sign":57477,"glyphicon-info-sign":57478,"glyphicon-screenshot":57479,"glyphicon-remove-circle":57480,"glyphicon-ok-circle":57481,"glyphicon-ban-circle":57488,"glyphicon-arrow-left":57489,"glyphicon-arrow-right":57490,"glyphicon-arrow-up":57491,"glyphicon-arrow-down":57492,"glyphicon-share-alt":57493,"glyphicon-resize-full":57494,"glyphicon-resize-small":57495,"glyphicon-exclamation-sign":57601,"glyphicon-gift":57602,"glyphicon-leaf":57603,"glyphicon-fire":57604,"glyphicon-eye-open":57605,"glyphicon-eye-close":57606,"glyphicon-warning-sign":57607,"glyphicon-plane":57608,"glyphicon-calendar":57609,"glyphicon-random":57616,"glyphicon-comment":57617,"glyphicon-magnet":57618,"glyphicon-chevron-up":57619,"glyphicon-chevron-down":57620,"glyphicon-retweet":57621,"glyphicon-shopping-cart":57622,"glyphicon-folder-close":57623,"glyphicon-folder-open":57624,"glyphicon-resize-vertical":57625,"glyphicon-resize-horizontal":57632,"glyphicon-hdd":57633,"glyphicon-bullhorn":57634,"glyphicon-bell":57635,"glyphicon-certificate":57636,"glyphicon-thumbs-up":57637,"glyphicon-thumbs-down":57638,"glyphicon-hand-right":57639,"glyphicon-hand-left":57640,"glyphicon-hand-up":57641,"glyphicon-hand-down":57648,"glyphicon-circle-arrow-right":57649,"glyphicon-circle-arrow-left":57650,"glyphicon-circle-arrow-up":57651,"glyphicon-circle-arrow-down":57652,"glyphicon-globe":57653,"glyphicon-wrench":57654,"glyphicon-tasks":57655,"glyphicon-filter":57656,"glyphicon-briefcase":57657,"glyphicon-fullscreen":57664,"glyphicon-dashboard":57665,"glyphicon-paperclip":57666,"glyphicon-heart-empty":57667,"glyphicon-link":57668,"glyphicon-phone":57669,"glyphicon-pushpin":57670,"glyphicon-usd":57672,"glyphicon-gbp":57673,"glyphicon-sort":57680,"glyphicon-sort-by-alphabet":57681,"glyphicon-sort-by-alphabet-alt":57682,"glyphicon-sort-by-order":57683,"glyphicon-sort-by-order-alt":57684,"glyphicon-sort-by-attributes":57685,"glyphicon-sort-by-attributes-alt":57686,"glyphicon-unchecked":57687,"glyphicon-expand":57688,"glyphicon-collapse-down":57689,"glyphicon-collapse-up":57696,"glyphicon-log-in":57697,"glyphicon-flash":57698,"glyphicon-log-out":57699,"glyphicon-new-window":57700,"glyphicon-record":57701,"glyphicon-save":57702,"glyphicon-open":57703,"glyphicon-saved":57704,"glyphicon-import":57705,"glyphicon-export":57712,"glyphicon-send":57713,"glyphicon-floppy-disk":57714,"glyphicon-floppy-saved":57715,"glyphicon-floppy-remove":57716,"glyphicon-floppy-save":57717,"glyphicon-floppy-open":57718,"glyphicon-credit-card":57719,"glyphicon-transfer":57720,"glyphicon-cutlery":57721,"glyphicon-header":57728,"glyphicon-compressed":57729,"glyphicon-earphone":57730,"glyphicon-phone-alt":57731,"glyphicon-tower":57732,"glyphicon-stats":57733,"glyphicon-sd-video":57734,"glyphicon-hd-video":57735,"glyphicon-subtitles":57736,"glyphicon-sound-stereo":57737,"glyphicon-sound-dolby":57744,"glyphicon-sound-5-1":57745,"glyphicon-sound-6-1":57746,"glyphicon-sound-7-1":57747,"glyphicon-copyright-mark":57748,"glyphicon-registration-mark":57749,"glyphicon-cloud-download":57751,"glyphicon-cloud-upload":57752,"glyphicon-tree-conifer":57753,"glyphicon-tree-deciduous":57856,"glyphicon-cd":57857,"glyphicon-save-file":57858,"glyphicon-open-file":57859,"glyphicon-level-up":57860,"glyphicon-copy":57861,"glyphicon-paste":57862,"glyphicon-alert":57865,"glyphicon-equalizer":57872,"glyphicon-king":57873,"glyphicon-queen":57874,"glyphicon-pawn":57875,"glyphicon-bishop":57876,"glyphicon-knight":57877,"glyphicon-baby-formula":57878,"glyphicon-tent":9978,"glyphicon-blackboard":57880,"glyphicon-bed":57881,"glyphicon-apple":63743,"glyphicon-erase":57889,"glyphicon-hourglass":8987,"glyphicon-lamp":57891,"glyphicon-duplicate":57892,"glyphicon-piggy-bank":57893,"glyphicon-scissors":57894,"glyphicon-bitcoin":57895,"glyphicon-btc":57895,"glyphicon-xbt":57895,"glyphicon-yen":165,"glyphicon-jpy":165,"glyphicon-ruble":8381,"glyphicon-rub":8381,"glyphicon-scale":57904,"glyphicon-ice-lolly":57905,"glyphicon-ice-lolly-tasted":57906,"glyphicon-education":57907,"glyphicon-option-horizontal":57908,"glyphicon-option-vertical":57909,"glyphicon-menu-hamburger":57910,"glyphicon-modal-window":57911,"glyphicon-oil":57912,"glyphicon-grain":57913,"glyphicon-sunglasses":57920,"glyphicon-text-size":57921,"glyphicon-text-color":57922,"glyphicon-text-background":57923,"glyphicon-object-align-top":57924,"glyphicon-object-align-bottom":57925,"glyphicon-object-align-horizontal":57926,"glyphicon-object-align-left":57927,"glyphicon-object-align-vertical":57928,"glyphicon-object-align-right":57929,"glyphicon-triangle-right":57936,"glyphicon-triangle-left":57937,"glyphicon-triangle-bottom":57938,"glyphicon-triangle-top":57939,"glyphicon-console":57940,"glyphicon-superscript":57941,"glyphicon-subscript":57942,"glyphicon-menu-left":57943,"glyphicon-menu-right":57944,"glyphicon-menu-down":57945,"glyphicon-menu-up":57952},"GLYPHICONS Halflings","glyphicons-halflings-regular.ttf"),Ce=async t=>Promise.all(t.map(t=>(async t=>Se.getImageSource(t,20,"black"))(t))).then(e=>t.reduce(Te(e),{})),Te=t=>(e,n,r)=>(e[n]=t[r],e);class De{constructor(t){this.key=t}get(){return new Promise((t,e)=>je.AsyncStorage.getItem(this.key,(n,r)=>{n?e(n):t(r)}))}set(t){return new Promise((e,n)=>je.AsyncStorage.setItem(this.key,t,t=>{t?n(t):e()}))}remove(){return new Promise((t,e)=>je.AsyncStorage.removeItem(this.key,n=>{n?e(n):t()}))}}var ke=n(5);const Pe=["amount","offset","selection"],Me="$pageParameter",Ae="unavailable";class Ne{constructor(t){this.parentStore=t,this.stateMap={}}set(t,e,n){const r=this.getSubject(t,e,!1);Z(r.value,n)||ie(()=>r.next(n))}get(t,e){return this.getSubject(t,e,!0).value}get$(t,e){return this.getSubject(t,e,!0)}dehydrate(){return Object.keys(this.stateMap).map(t=>JSON.parse(t)).filter(({slot:t})=>Pe.includes(t)).map(({widgetId:t,slot:e})=>({widgetId:t,slot:e,value:this.get(t,e)}))}hydrate(t){t.forEach(({widgetId:t,slot:e,value:n})=>{if(!Pe.includes(e))throw new ue.a(`Invalid slot for restoring the state: ${e}`);switch(e){case"amount":case"offset":this.set(t,e,n instanceof ke?n:ke(n.toString()));break;default:this.set(t,e,n)}})}getSubject(t,e,n){const r=JSON.stringify({widgetId:t,slot:e});if(r in this.stateMap)return this.stateMap[r];if(n&&this.parentStore){const t=this.parentStore.findSubject(r);if(t)return t}return this.stateMap[r]=new Tt(void 0)}findSubject(t){return t in this.stateMap?this.stateMap[t]:this.parentStore?this.parentStore.findSubject(t):void 0}}class Ie{constructor(t,e,n,r){this.componentId=t,this.name=e,this.title=n,this.formParameterGuid=r,this.store=new Ne,this.place="content",this.store.set(Me,"form",[this,""]),this.store.set(Me,"applyContextCount",1),r&&mx.data.get({guid:r,callback:this.setFormParameter.bind(this),error:mx.onError})}setFormParameter(t){this.pageObject=t,this.store.set(Me,"object",t)}getComponentId(){return this.componentId}getTitle(){return this.title}getName(){return this.name}getGuid(){return this.formParameterGuid}getSubmitObjects(){return void 0!==this.pageObject?[this.pageObject]:[]}setSuspend(t){}close(t){Oe.Navigation.pop(this.componentId,{}).then(t,mx.onError)}publish(t,e){e()}}const Re=new De("pageState"),Ve={},Fe={},$e={};let Ge,Be,Ue={};class qe{async openForm2(t,e,n,r,i){const o=t.replace("/",".").replace(".page.xml",""),s=Ve[o],a=void 0!==n?n:s.title,c=qe.createLayoutConfig(s.layout,o,a,e);return await Oe.Navigation.push(r.getComponentId(),c),Object(Q.c)(Be)}static createLayoutConfig(t,e,n,r){const i=Object(xe.v4)();return{component:{name:t.main,passProps:{pageName:e,title:n,formParameterGuid:r,pageUuid:i},options:{topBar:Object.assign({visible:!!t.topBar},t.topBar?Object.assign({title:{text:n}},qe.createTopBarButtonConfiguration(i,t.topBar,"left"),qe.createTopBarButtonConfiguration(i,t.topBar,"right")):{_height:0,drawBehind:!0})}}}}static createTopBarButtonConfiguration(t,e,n){if(e&&e[n])return{[`${n}Buttons`]:[{id:e[n],component:{name:e[n],passProps:{pageUuid:t}}}]}}reload(){throw new _e("reload")}confirmation(t){t.handler()}showLogin(){throw new _e("showLogin")}showProgress(){return 0}hideProgress(){}downloadFile(){}info(t,e){}warning(t,e){}error(t,e){}static savePageState(){if(!Be)return Promise.resolve();const t={name:Be.getName(),title:Be.getTitle(),formParameterGuid:Be.getGuid(),cache:mx.data.dehydrateCache()};return Re.set(JSON.stringify(t))}static async loadPageState(){const t=await Re.get();let e=null;try{e=JSON.parse(t)}catch(t){}return e}static registerPage(t,e){Ve[t]=e}static registerComponent(t,e){Oe.Navigation.registerComponent(t,t.endsWith(":main")?()=>(function(t){return class extends r.Component{constructor(t){super(t),Oe.Navigation.events().bindComponent(this)}componentWillMount(){let t=Fe[this.props.pageUuid];t||(t=new Ie(this.props.componentId,this.props.pageName,this.props.title,this.props.formParameterGuid),Fe[this.props.pageUuid]=t),this.setState({form:t})}componentWillUnmount(){delete Fe[this.props.pageUuid]}componentDidAppear(){Be=this.state.form}render(){return Object(r.createElement)(je.SafeAreaView,{style:{flex:1,backgroundColor:"white"}},Object(r.createElement)(me,{store:this.state.form.store},t()))}}})(e):()=>(function(t){return class extends r.Component{componentWillMount(){const t=this.props.pageUuid||$e[this.props.componentId];$e[this.props.componentId]=t;const e=Fe[t];this.setState({form:e})}render(){return Object(r.createElement)(me,{store:this.state.form.store},t())}}})(e))}static setTabBar(t){const e=t.filter(t=>t.icon).map(t=>t.icon);Ge=Ce(e).then(e=>{return{bottomTabs:{children:t.map((t,n)=>{const r=Ve[t.pageName],i=void 0!==t.title?t.title:r.title,o=this.createLayoutConfig(r.layout,t.pageName,i);return{stack:{children:[Object.assign({},o)],options:{bottomTab:{text:t.caption,icon:e[t.icon],testID:`bottomTab$item${n}`}}}}})}}})}static setHomePage(t){const e=Ve[t],n=e.title,r=this.createLayoutConfig(e.layout,t,n);Ge=Promise.resolve({stack:{children:[Object.assign({},r)]}})}static setDefaultStyling(t={}){const e=t.topBar?t.topBar:{},n=t.bottomBar?t.bottomBar:{};Ue=Object.assign({},Ue,{bottomTab:{fontFamily:n.fontFamily,fontSize:n.fontSize,iconColor:n.iconColor,selectedIconColor:n.selectedIconColor,selectedTextColor:n.selectedTextColor,textColor:n.textColor},bottomTabs:{backgroundColor:n.backgroundColor},topBar:{backButton:{color:e.backButtonColor,fontFamily:e.backButtonFontFamily,fontSize:e.backButtonFontSize},background:{color:e.backgroundColor},title:{color:e.titleColor,fontFamily:e.titleFontFamily,fontSize:e.titleFontSize,component:{alignment:e.titleAlignment}}}})}static async startApp(){if(!Ge)throw new Error("Navigation not configured");Oe.Navigation.setDefaultOptions(Ue);const t=await Ge,e=await qe.restorePreviousPageState(t);return Oe.Navigation.setRoot({root:e})}static async restorePreviousPageState(t){const e=await this.loadPageState();let n=t;if(e&&e.name){n=Object.assign({},t);const r=Ve[e.name];mx.data.hydrateCache(e.cache);const i=qe.createLayoutConfig(r.layout,e.name,e.title,e.formParameterGuid);n.bottomTabs?n.bottomTabs.children[0].stack.children.push(i):n.stack&&n.stack.children.push(i),await Re.remove()}return n}}var We=n(62),Le=n(63),He=n(15),ze=n(16),Ye=n(19);class Je extends Ye.a{constructor(t){super(t),Object.setPrototypeOf(this,Je.prototype)}}var Ke=n(25);const{MxObject:Xe}=n(7),{MxContext:Qe}=n(89),Ze=n(10),tn=n(90),en=n(95),nn=n(29);function rn(t,e){t=t||{};var n=this;const r=[];let i,o,s;const a=Ze.curryN(3,p),c=Ze.curry(d);async function u(){try{await o.upload()}catch(t){throw[ze.a,Je].some(e=>t instanceof e)||await o.cleanupDirtyObjects(),t}}function l(t){if("object"!=typeof t)throw new ue.a("args is not an object");if("function"!=typeof t.callback)throw new ue.a("callback is not a function");if(t.mxobj&&!(t.mxobj instanceof Xe))throw new ue.a("mxobj is not a MxObject");if(t.mxobjs&&!(t.mxobjs instanceof Array))throw new ue.a("mxobjs is not an Array");if(!t.mxobj&&!t.mxobjs||t.mxobj&&t.mxobjs)throw new ue.a("one of mxobj or mxobjs should be passed");return t.mxobj?[t.mxobj]:t.mxobjs}function h(){const n=e.getAllObjects(),i=en.fromArray(n.map(t=>t.getGuid())),o=i.difference(en.fromArray(function(){const t=window.mx.session.getUserId(),e=window.mx.session.getSessionObjectId(),i=[t,e],o=Ze.unique([].concat(r.filter(t=>void 0!==t.guid).map(t=>t.guid))).concat(i);return nn.findReachableGuidsToRetain(n,o)}())).values();t.logCleanupStatistics&&window.mx.logger.debug(function(){const t=Ze.groupBy(o,t=>e.getObject(t).getEntity()),n=Ze.arrayFromObject(t).map(([t,e])=>t+": "+e.join(", ")).join("\n");return`Garbage collecting ${o.length} of ${i.length()}\n${n}`}()),e.removeObjects(o)}function f(t,e){return function(){p(t,e)}}function p(t,e,...n){try{t&&t.apply(e,n)}catch(t){window.mx.onError(t)}}function d(t,e,n){t?t.call(e,n):window.mx.onError(n)}function g(t){return e.has(t.getGuid())}function m(t){return t.getGuid()}function b(t){return t.getEntity()}this.getBacktrack=function(t,e,r,i,o){if("function"!=typeof i&&(o=i,i=null),e&&0!==e.length){var s=null,a=[],u=0,l=!0,h=function(){var t=e[u++];t?function(t,e,r,i){var o=e.split("/"),s=function(t){var e,n=o.shift(),i=o.shift();if(null!=t&&null!=t.length&&0!==t.length){for(var s=[],a=0;a<t.length;a++)null!=t[a]&&s.push("id='"+t[a].getGuid()+"'");s.length?(e="["+i+"/"+n+"["+s.join(" or ")+"]]",1===o.length?r(e):(n=o.shift(),i=o.shift(),r("["+i+"/"+n+e+"]"))):r(null)}else r(null)};!function(){var e=o.shift(),a=o.shift();if(1===o.length){var c="["+a+"='"+t.getGuid()+"']";return void r(c)}const u=window.mx.meta.getEntity(e);null!=u?t.isA(e)?u.isReference(a)?""!==t.get(a)?n.get({guids:t.getReferences(a),callback:s,error:i}):r(null):d(i,null,new Error(`Reference ${a} not found in entity ${e}`)):d(i,null,new ue.a(`Entity ${t.getEntity()} is not a ${e} or one of its subclasses`)):d(i,null,new Error(`Entity ${e} does not exist`))}()}(s,t,function(t){t?a.push(t):l=!1,h()},c(i,o)):r.call(o,a.join(""),l)};t?n.get({guid:t,callback:function(t){t?(s=t,h()):r.call(o,"",!1)},error:c(i,o)}):r.call(o,"",!1)}else r.call(o,"",!0)},this.toString=function(){return"mendix.sys.Data"},this.startup=function(n){o=n,i=new tn(n,e,function(t){return!function(t){return r.some(e=>e.guid!==t&&!e.val)}(t)});const a=null!=t.garbageCollectionInterval?Number(t.garbageCollectionInterval):1e4;0!==a&&(s=window.setInterval(h,a))},this.subscribe=function(t,e){const n=Object.assign({},t,{callback(...n){t.callback&&t.callback.call(e,...n)}});return r.push(n),()=>{const t=r.indexOf(n);-1!==t?r.splice(t,1):window.mx.logger.warn(`mx.data.unsubscribe: attempting to unsubscribe already unsubscribed subscription ${n}`)}},this.unsubscribe=function(t){if("function"!=typeof t)throw new ue.a("Trying to unsubscribe using an invalid subscription handle");t()},this.update=function({entity:t,attr:e,guid:n,callback:r}){this.update2({entity:t,attr:e,guid:n}).then(r,window.mx.onError)},this.update2=oe(function({topic:t,entity:n,attr:i,guid:o}){if(t){return s(r.filter(e=>e.topic===t),()=>[])}if(n){const t=function(t){const e=window.mx.meta.getEntity(t);if(!e)throw new Error(`No permission to read or write entity ${t}, check security!`);return[t].concat(e.getSuperEntities())}(n);return s(r.filter(e=>null!=e.entity&&t.includes(e.entity)),t=>[t.entity])}if(i){const t=r.filter(t=>!t.val&&t.guid===o&&t.attr===i),n=e.getObject(o),a=null!=n?n.get(i):null;return s(t,t=>[t.guid,t.attr,null!=a?a:""])}if(o){return s(r.filter(t=>!t.val&&t.guid===o&&null==t.attr),t=>[t.guid])}return Promise.reject(new ue.a("no 'entity' or 'guid' parameter found"));function s(t,e){const n=t.map(t=>new Promise(n=>{t.async?t.callback(...e(t),n):(t.callback(...e(t)),n())}));return Promise.all(n)}}),this.sendValidationUpdates=oe(function(t){const e=[];if(t.forEach(t=>{const n=t.clone(),i=t.getAttributes().map(t=>t.name);r.filter(({val:e,guid:n,attr:r})=>e&&null!=r&&n===t.getGuid()&&i.includes(r)).forEach(({attr:e,callback:r})=>{r(t.getErrorReason(e)),n.removeAttribute(e)}),r.filter(({val:e,guid:n,attr:r})=>e&&null==r&&n===t.getGuid()).forEach(({callback:e})=>{const r=t.clone();e([r]);const i=r.getAttributes().map(t=>t.name);n.getAttributes().forEach(({name:t})=>{i.includes(t)||n.removeAttribute(t)})}),n.getAttributes().length>0&&e.push(n)}),e.length){const t=Ke.a.describe(e);window.mx.ui.error(t,!1)}}),this.updateInCache=function(t){return e.removeAllChanges([t.guid]),e.setMxObjects([t]),e.getObject(t.guid)},this.removeChanges=function(t){e.removeAllChanges([t])},this.action=function(t){i.action(t.params,t.context||new Qe,t.origin,!!t.async,t.onValidation).then(t.callback,c(t.error,null))},this.callNanoflow=function({nanoflow:{nanoflow:t,paramsSpec:e},context:r,origin:o,callback:s,error:u}){const l=Object.keys(e).map(t=>({name:t,guid:r.getContext(e[t])||void 0})),h=l.map(t=>t.guid).filter(t=>Boolean(t));var f;(f=h,new Promise((t,e)=>{n.get({guids:f,callback:t,error:e})})).then(e=>{const n=l.map(({name:t,guid:n})=>({name:t,value:e.find(t=>t.getGuid()===n)}));return i.runNanoflow(t,n,o)}).then(a(s,null),c(u,null))},this.get=function(t,e){var r=t.xpath,o=t.path,s=t.guid,u="guids"in t||!s?""===t.guids?[]:t.guids:[s],l=t.entity,h=t.direction||"reverse",f=t.callback,g=t.error,m=!!t.count,b=t.filter,y=t.context||new Qe,w=t.microflow;if("guid"in t&&null==s)p(f,e,null);else{if(!(r||u||w||l))throw new ue.a("xpath, guid|guids and microflow arguments are undefined");if(o&&1!==u.length)throw new ue.a("path can only be used with a single guid");if("function"!=typeof f)throw new ue.a("callback is not a function");if(g&&"function"!=typeof g)throw new ue.a("error is not a function");b&&b.limit&&(b.amount=b.limit,delete b.limit);var v=function(t,e,n){if(!e)return t;for(var r in n)r in e&&null!=e[r]&&(t[r]=e[r]);return t}({},b,s?{id:null}:{id:null,attributes:null,offset:null,sort:null,amount:null,distinct:null,references:null}),j=c(g,e);if(v.id&&u&&!s&&delete v.id,v.id&&(delete v.attributes,delete v.distinct),w){var O=u?"selection":r?"set":"none",x={actionname:w,applyto:O};"selection"===O?x.guids=u:"set"===O&&(x.xpath=r,v.sort&&(x.sort=v.sort)),n.action({params:x,context:y,callback:a(f,e),error:j})}else if(o&&u)i.getByPath(u[0],o,l,h).then(({mxobjs:t,count:n})=>{p(f,e,t,{count:n})},c(g,e));else if(u){if(0===u.length)return void p(f,e,s?null:[],{count:0});i.getByGuid(u,v).then(({mxobjs:t,count:n})=>{var r;if(s)if(v.id){if(void 0===(r=t.filter(t=>t.getGuid()===s)[0]))return void d(g,e,new Error("Returned objects do not contain requested one"))}else r=t[0]||null;else r=t;p(f,e,r,{count:n})},j)}else if(l)if(window.mx.isOffline()){const{amount:t,offset:n,sort:r}=v;i.getSlice(l,[],{limit:t,offset:n,sort:r},!1).then(([t,n])=>{p(f,e,t,{count:n})})}else{const{amount:t,offset:n,sort:r}=v;i.getByXPath(`//${l}`,{amount:t,offset:n,sort:r},m).then(({mxobjs:t,count:n})=>{p(f,e,t,{count:n})},j)}else i.getByXPath(r,v,m).then(({mxobjs:t,count:n,aggregates:r})=>{p(f,e,t,{count:n,aggregates:r})},j)}},this.getOffline=function(t,e,n,r,i){return this.getSlice(t,e,n,!1,r,i)},this.getSlice=function(t,e,n,r,o,s){i.getSlice(t,e,n,r).then(([t,e])=>{p(o,null,t,e)}).catch(c(s,null))},this.fetch=function(t,e,n,r,o){var s,a;"function"==typeof n&&(o=r,r=n),s=e?e instanceof Array?e.slice():e.split("/"):[],t&&t.isA(s[0])&&s.shift(),a=s.length%2==1?s.pop():"",i.fetch(t,s,a,n,r,c(o,null))},this.create=function(t,e){if("function"!=typeof t.callback)throw new ue.a("callback is not a function");if(t.error&&"function"!=typeof t.error)throw new ue.a("error is not a function");if("string"!=typeof t.entity)throw new ue.a("entity is not a string");i.create(t.entity).then(function(r){t.context&&n.setObjectToContext(r,t.context);p(t.callback,e,r)},c(t.error,e))},this.remove=function(t){const e="guid"in t?[t.guid]:""===t.guids?[]:t.guids;if("guids"in t&&!(t.guids instanceof Array))throw new ue.a("parameter guids set but not of type Array");if(t.error&&"function"!=typeof t.error)throw new ue.a("parameter error set but not of type Function");if(t.callback&&"function"!=typeof t.callback)throw new ue.a("parameter callback set but not of type Function");i.remove(e).then(f(t.callback),c(t.error,null))},this.validate=function(t,e,n){0!==t.length?i.validate(t.map(m)).then(f(e),c(n,null)):p(e)},this.commit=function(t,e){const r=f(t.callback,e),o=c(t.error,e),s=l(t);0===s.length&&t.callback?r():i.commit(s,t.context||new Qe,t.store,t.onValidation).then(function(){const t=Ze.unique(s.filter(g).map(b)).map(t=>({entity:t})),e=Ze.unique(s.map(m)).map(t=>({guid:t})),i=t.concat(e);Promise.all(i.map(t=>n.update2(t))).then(r,o)},o)},this.rollback=function(t,e){const r=c(t.error,e),o=l(t);if(0===o.length)return void p(t.callback,e);const s=Ze.unique(o.map(b)).map(t=>({entity:t}));i.rollback(o).then(function(){const i=Ze.unique(o.filter(g).map(m)).map(t=>({guid:t})),c=s.concat(i);Promise.all(c.map(t=>n.update2(t))).then(a(t.callback,e),r)},r)},this.uploadOfflineObjectsAndFiles=function(t,e){u().then(f(t),c(e,null))},this.downloadOfflineObjectsAndFiles=function(t,e){this.downloadObjects().then(()=>this.downloadFiles()).then(f(t),c(e,null))},this.synchronizeOffline=function({fast:t},n,r){u().then(()=>t?null:e.clear()).then(()=>this.downloadObjects()).then(()=>t?null:this.downloadFiles()).then(f(n),c(r,null))},this.downloadObjects=function(){const t=window.mx.session.getConfig("sync_config.fetch")||[];return o.downloadObjects(t)},this.downloadFiles=function(){const t=(window.mx.session.getConfig("sync_config.fetch")||[]).map(t=>t.store).filter(t=>window.mx.meta.getEntity(t).isA("System.FileDocument"));return o.downloadFiles(t)},this.saveDocument=function(t,e,n,r,o,s){i.saveDocument(t,e,n,r).then(o,c(s,null))},this.generateReport=function(t,e,n,r,o,s){i.generateReport(t,e,n,r).then(o,c(s,null))},this.generateExcelReport=function(t,e,n,r){i.generateExcelReport(t,e).then(n,c(r,null))},this.getReportParameters=function(t,e,n){o.getReportParameters(t).then(e,c(n,null))},this.setObjectToContext=function(t,e){if("object"!=typeof t)throw new ue.a("parameter mxObj is not of type Object");if("object"!=typeof e)throw new ue.a("parameter context is not of type Object");for(var n=t.getAttributes(),r=0;r<n.length;r++)if(t.isReference(n[r])){var i=t.getSelectorEntity(n[r]);if("System.owner"===n[r]||"System.changedBy"===n[r])continue;e.hasContext(i)&&t.addReference(n[r],e.getContext(i));var o=window.mx.meta.getEntity(i);if(o&&o.hasSubEntities())for(var s=o.getSubEntities(),a=0;a<s.length;a++)e.hasContext(s[a])&&t.addReference(n[r],e.getContext(s[a]))}},this.getObjectFromContext=function(t,e){var n=t.getObject(),r=t.getTrackId();n?e(n):r?window.mx.data.get({guid:r,callback:function(t){t||window.mx.onError("Error while fetching object with guid "+r),e(t)},error:function(t){window.mx.onError(t),e(null)}},this):e(null)},this.isDirty=function(t){return o.isDirty(t)},this.isNew=function(t){return e.isNew(t)},this.makeChange=function(t,n,r){e.makeChange(t,n,r)},this.getChanges=function(t){return e.getChanges(t)},this.getCachedObject=function(t){return e.getObject(t)},this.dehydrateCache=function(){return e.dehydrate()},this.hydrateCache=function(t){return e.hydrate(t)},this.updateMxObjectSubscribers=function(t,e,n){this.update({guid:t,attr:e,value:n})},this.getDocumentUrl=function(t,e,n){return o.getDocumentUrl(t,e,n)},this.getImageUrl=function(t,e,n){o.getImageUrl(t).then(e,n)},this.clear=function(t){e.clear(),o.cleanup().then(t)},this.uninitialize=function(){s&&window.clearInterval(s)},this.getObjectsStatistics=function(){return e.getAllObjects().map(t=>({object:t,changes:e.getChanges(t.getGuid()),uncommitted:e.isNew(t.getGuid()),subscriptions:function(t){return r.filter(e=>e.guid===t)}(t.getGuid()).map(t=>t.tag)}))}}class on{constructor(t){this.url=t,this.reloadHandlers=[],this.connectHandlers=[]}isConnected(){return void 0!==this.socket&&this.socket.readyState===WebSocket.OPEN}onConnect(t){this.isConnected()?t():this.connectHandlers.push(t)}onReloadMessage(t){this.reloadHandlers.push(t)}sendLog(t,e){if(this.isConnected()){const n=6e4;for(let r=0;r<e.length;r+=n){const i=e.substr(r,n);Object(Q.c)(this.socket).send(`log:${t}:${i}`)}}}connect(){try{this.socket=new WebSocket(this.url),this.socket.onopen=(()=>{this.connectHandlers.forEach(t=>t()),this.connectHandlers.splice(0)}),this.socket.onmessage=(t=>{if("MENDIX_RELOAD"!==t.data)throw new ue.a(`Unexpected command received from the runtime: ${t.data}`);this.reloadHandlers.forEach(t=>t())}),this.socket.onclose=(()=>this.reconnect())}catch(t){this.reconnect()}}reconnect(){this.socket=void 0,setTimeout(()=>this.connect(),1e3)}}class sn{constructor(t){this.connection=new on(t.replace(/^http/,"ws")+"reload/")}connect(){this.connection.connect()}addOnReload(t){this.connection.onReloadMessage(t)}log(t,...e){const n=e.map(an);this.connection.onConnect(()=>this.connection.sendLog(t,n.join("\n")))}}function an(t){return"string"==typeof t?t:t instanceof Error?`${t.message} ${t.stack}`:t&&void 0!==t.outerHTML?t.outerHTML:JSON.stringify(t)}class cn{constructor({handleErrors:t=!0,isQuiet:e=!1}={}){this.logHandlers=[],e||this.addHandler(this.createConsoleLogHandler()),t&&"function"==typeof window.addEventListener&&(window.addEventListener("error",t=>this.error(t.error)),window.addEventListener("unhandledrejection",t=>this.error(t.reason)))}addHandler(t){this.logHandlers.push(t)}trace(...t){this.log("trace",...t)}debug(...t){this.log("debug",...t)}info(...t){this.log("info",...t)}warn(...t){this.log("warning",...t)}error(...t){this.log("error",...t)}critical(...t){this.log("critical",...t)}log(t,...e){this.logHandlers.forEach(n=>n(t,...e))}createConsoleLogHandler(){const t={};return["debug","info","log","warn","error"].forEach(e=>{t[e]=console[e];const n=function(t){switch(t){case"warn":return"warning";case"log":return"debug";default:return t}}(e);console[e]=((...t)=>this.log(n,...t))}),(e,...n)=>{const r=function(t){switch(t){case"trace":return;case"critical":return"error";case"warning":return"warn";default:return t}}(e);void 0!==r&&t[r].call(console,...n)}}}const un=n(10),{MxObject:ln}=n(7);function hn(){this._objectCache={},this._newGuids={},this._changes={}}hn.prototype.getAllObjects=function(){return Object.values(this._objectCache)},hn.prototype.dehydrate=function(){return un.clone({data:this.getAllObjects(),newGuids:this._newGuids,changes:this._changes})},hn.prototype.hydrate=function({data:t,newGuids:e,changes:n}){this._objectCache={},t.map(t=>ln.fromJson(t)).forEach(t=>{this._objectCache[t.getGuid()]=t}),this._newGuids=un.clone(e),this._changes=un.clone(n)},hn.prototype.getObject=function(t){return this._objectCache[t]||null},hn.prototype.removeObjectKeepChanges=function(t){delete this._objectCache[t],delete this._newGuids[t]},hn.prototype.setMxObjects=function(t){t.forEach(function(t){var e=t.guid,n=this._objectCache[e];n?n.resetFromJSON(t):this._objectCache[e]=new ln({json:t,meta:window.mx.meta.getEntity(t.objectType)})},this)},hn.prototype.has=function(t){return!!this.getObject(t)},hn.prototype.isNew=function(t){return this.has(t)&&Boolean(this._newGuids[t])},hn.prototype.clear=function(){this._objectCache={},this._newGuids={},this._changes={}},hn.prototype.hasChanges=function(t){return t in this._changes},hn.prototype.getChanges=function(t){return un.clone(this._changes[t]||{})},hn.prototype.makeChange=function(t,e,n){this._changes[t]=this._changes[t]||{},this._changes[t][e]={value:n}},hn.prototype.removeAllChanges=function(t){t.forEach(function(t){delete this._changes[t]},this)},hn.prototype.removeChanges=function(t){Object.keys(t).forEach(e=>{const n=this._changes[e];n&&(t[e].forEach(t=>delete n[t]),0===Object.keys(n).length&&delete this._changes[e])})},hn.prototype.onCreate=function(t){t.forEach(t=>{this._newGuids[t]=!0})},hn.prototype.onCommit=function(t){t.forEach(t=>delete this._newGuids[t])},hn.prototype.onDelete=function(t){for(const e of t)e in this._objectCache&&this._objectCache[e].markDeleted();this.removeObjects(t)},hn.prototype.addChanges=function(t){for(const e in t){const n=t[e];null==this._changes[e]&&(this._changes[e]={});const r=this._changes[e];for(const t in n)r[t]=n[t]}},hn.prototype.removeObjects=function(t){t.forEach(t=>{delete this._objectCache[t],delete this._newGuids[t],delete this._changes[t]})};var fn=n(9);const pn=je.NativeModules.NativeFsModule.DocumentDirectoryPath,dn={};class gn{async readFile(t){const e=await je.NativeModules.NativeFsModule.read(gn.toAbsolutePath(t)),n=new Blob;return n.data=e,n}async storeFile(t,e){await je.NativeModules.NativeFsModule.save(t,e),t.close()}moveFile(t,e){return je.NativeModules.NativeFsModule.move(gn.toAbsolutePath(t),gn.toAbsolutePath(e))}async downloadFile(t,e){return dn[e]=Object(fn.a)(t,"blob").then(async t=>(await je.NativeModules.NativeFsModule.save(t.data,gn.toAbsolutePath(e)),t.close(),t)).then(t=>(delete dn[e],t))}removeDir(t){return je.NativeModules.NativeFsModule.remove(gn.toAbsolutePath(t))}readAsDataURL(t){return(dn[t]?dn[t]:Promise.resolve({})).then(()=>je.NativeModules.NativeFsModule.readAsDataURL(gn.toAbsolutePath(t)))}static toAbsolutePath(t){return[pn,t].join("/")}}var mn=n(6),bn=n(32),yn=n(4);var wn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function vn(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var jn={date:vn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:vn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:vn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},On={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function xn(t){return function(e,n){var r=n||{},i=r.width?String(r.width):t.defaultWidth;return("formatting"===(r.context?String(r.context):"standalone")&&t.formattingValues?t.formattingValues[i]||t.formattingValues[t.defaultFormattingWidth]:t.values[i]||t.values[t.defaultWidth])[t.argumentCallback?t.argumentCallback(e):e]}}function _n(t){return function(e,n){var r=String(e),i=n||{},o=i.width,s=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],a=r.match(s);if(!a)return null;var c,u=a[0],l=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth];return c="[object Array]"===Object.prototype.toString.call(l)?l.findIndex(function(t){return t.test(r)}):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}(l,function(t){return t.test(r)}),c=t.valueCallback?t.valueCallback(c):c,{value:c=i.valueCallback?i.valueCallback(c):c,rest:r.slice(u.length)}}}var En,Sn={formatDistance:function(t,e,n){var r;return n=n||{},r="string"==typeof wn[t]?wn[t]:1===e?wn[t].one:wn[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:jn,formatRelative:function(t,e,n,r){return On[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:xn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:xn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:xn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:xn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:xn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaulFormattingWidth:"wide"})},match:{ordinalNumber:(En={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t,e){var n=String(t),r=e||{},i=n.match(En.matchPattern);if(!i)return null;var o=i[0],s=n.match(En.parsePattern);if(!s)return null;var a=En.valueCallback?En.valueCallback(s[0]):s[0];return{value:a=r.valueCallback?r.valueCallback(a):a,rest:n.slice(o.length)}}),era:_n({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:_n({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:_n({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:_n({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:_n({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},Cn=864e5;function Tn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(yn.a)(t,e),r=n.getUTCDay(),i=(r<1?7:0)+r-1;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Dn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(yn.a)(t,e),r=n.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(r+1,0,4),i.setUTCHours(0,0,0,0);var o=Tn(i,e),s=new Date(0);s.setUTCFullYear(r,0,4),s.setUTCHours(0,0,0,0);var a=Tn(s,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}var kn=6048e5;function Pn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(yn.a)(t,e),r=Tn(n,e).getTime()-function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Dn(t,e),r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),Tn(r,e)}(n,e).getTime();return Math.round(r/kn)+1}function Mn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:Object(mn.a)(i),s=null==n.weekStartsOn?o:Object(mn.a)(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var a=Object(yn.a)(t,n),c=a.getUTCDay(),u=(c<s?7:0)+c-s;return a.setUTCDate(a.getUTCDate()-u),a.setUTCHours(0,0,0,0),a}function An(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(yn.a)(t,e),r=n.getUTCFullYear(),i=e||{},o=i.locale,s=o&&o.options&&o.options.firstWeekContainsDate,a=null==s?1:Object(mn.a)(s),c=null==i.firstWeekContainsDate?a:Object(mn.a)(i.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,c),u.setUTCHours(0,0,0,0);var l=Mn(u,e),h=new Date(0);h.setUTCFullYear(r,0,c),h.setUTCHours(0,0,0,0);var f=Mn(h,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}var Nn=6048e5;function In(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(yn.a)(t,e),r=Mn(n,e).getTime()-function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:Object(mn.a)(i),s=null==n.firstWeekContainsDate?o:Object(mn.a)(n.firstWeekContainsDate),a=An(t,e),c=new Date(0);return c.setUTCFullYear(a,0,s),c.setUTCHours(0,0,0,0),Mn(c,e)}(n,e).getTime();return Math.round(r/Nn)+1}var Rn="midnight",Vn="noon",Fn="morning",$n="afternoon",Gn="evening",Bn="night";function Un(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}function qn(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+Un(Math.floor(i/60),2)+n+Un(i%60,2)}function Wn(t,e){return t%60==0?(t>0?"-":"+")+Un(Math.abs(t)/60,2):qn(t,e)}function Ln(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var s=e||"";return n+String(i)+s+Un(o,2)}var Hn={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n,r){var i=t.getUTCFullYear(),o=i>0?i:1-i;return"yy"===e?Un(o%100,2):"yo"===e?n.ordinalNumber(o,{unit:"year"}):Un(o,e.length)},Y:function(t,e,n,r){var i=An(t,r),o=i>0?i:1-i;return"YY"===e?Un(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):Un(o,e.length)},R:function(t,e,n,r){return Un(Dn(t,r),e.length)},u:function(t,e,n,r){return Un(t.getUTCFullYear(),e.length)},Q:function(t,e,n,r){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Un(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n,r){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Un(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n,r){var i=t.getUTCMonth();switch(e){case"M":return String(i+1);case"MM":return Un(i+1,2);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n,r){var i=t.getUTCMonth();switch(e){case"L":return String(i+1);case"LL":return Un(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=In(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):Un(i,e.length)},I:function(t,e,n,r){var i=Pn(t,r);return"Io"===e?n.ordinalNumber(i,{unit:"week"}):Un(i,e.length)},d:function(t,e,n,r){var i=t.getUTCDate();return"do"===e?n.ordinalNumber(i,{unit:"date"}):Un(i,e.length)},D:function(t,e,n,r){var i=function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(yn.a)(t,e),r=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var i=r-n.getTime();return Math.floor(i/Cn)+1}(t,r);return"Do"===e?n.ordinalNumber(i,{unit:"dayOfYear"}):Un(i,e.length)},E:function(t,e,n,r){var i=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Un(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Un(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n,r){var i=t.getUTCDay(),o=0===i?7:i;switch(e){case"i":return String(o);case"ii":return Un(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?Vn:0===i?Rn:i/12>=1?"pm":"am",e){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?Gn:i>=12?$n:i>=4?Fn:Bn,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n,r){var i=t.getUTCHours()%12;return 0===i&&(i=12),"ho"===e?n.ordinalNumber(i,{unit:"hour"}):Un(i,e.length)},H:function(t,e,n,r){var i=t.getUTCHours();return"Ho"===e?n.ordinalNumber(i,{unit:"hour"}):Un(i,e.length)},K:function(t,e,n,r){var i=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(i,{unit:"hour"}):Un(i,e.length)},k:function(t,e,n,r){var i=t.getUTCHours();return 0===i&&(i=24),"ko"===e?n.ordinalNumber(i,{unit:"hour"}):Un(i,e.length)},m:function(t,e,n,r){var i=t.getUTCMinutes();return"mo"===e?n.ordinalNumber(i,{unit:"minute"}):Un(i,e.length)},s:function(t,e,n,r){var i=t.getUTCSeconds();return"so"===e?n.ordinalNumber(i,{unit:"second"}):Un(i,e.length)},S:function(t,e,n,r){var i=e.length,o=t.getUTCMilliseconds();return Un(Math.floor(o*Math.pow(10,i-3)),i)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return Wn(i);case"XXXX":case"XX":return qn(i);case"XXXXX":case"XXX":default:return qn(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return Wn(i);case"xxxx":case"xx":return qn(i);case"xxxxx":case"xxx":default:return qn(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ln(i,":");case"OOOO":default:return"GMT"+qn(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ln(i,":");case"zzzz":default:return"GMT"+qn(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return Un(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return Un((r._originalDate||t).getTime(),e.length)}};function zn(t,e,n){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function Yn(t,e,n){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}var Jn={p:Yn,P:function(t,e,n){var r,i=t.match(/(P+)(p+)?/),o=i[1],s=i[2];if(!s)return zn(t,e);switch(o){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"})}return r.replace("{{date}}",zn(o,e)).replace("{{time}}",Yn(s,e))}};function Kn(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(yn.a)(t,n).getTime(),i=Object(mn.a)(e);return new Date(r+i)}(t,-Object(mn.a)(e),n)}var Xn=["D","DD","YY","YYYY"];var Qn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Zn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tr=/^'(.*?)'?$/,er=/''/g;function nr(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(e),i=n||{},o=i.locale||Sn,s=o.options&&o.options.firstWeekContainsDate,a=null==s?1:Object(mn.a)(s),c=null==i.firstWeekContainsDate?a:Object(mn.a)(i.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=o.options&&o.options.weekStartsOn,l=null==u?0:Object(mn.a)(u),h=null==i.weekStartsOn?l:Object(mn.a)(i.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=Object(yn.a)(t,i);if(!function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(yn.a)(t,e);return!isNaN(n)}(f,i))return"Invalid Date";var p=Kn(f,Object(bn.a)(f),i),d={firstWeekContainsDate:c,weekStartsOn:h,locale:o,_originalDate:f};return r.match(Zn).map(function(t){var e=t[0];return"p"===e||"P"===e?(0,Jn[e])(t,o.formatLong,d):t}).join("").match(Qn).map(function(t){if("''"===t)return"'";var e=t[0];if("'"===e)return t.match(tr)[1].replace(er,"'");var n,r=Hn[e];return r?(i.awareOfUnicodeTokens||(n=t,-1===Xn.indexOf(n))||function(t){throw new RangeError("`options.awareOfUnicodeTokens` must be set to `true` to use `"+t+"` token; see: https://git.io/fxCyr")}(t),r(p,t,o.localize,d)):t}).join("")}var rr,ir,or,sr,ar,cr=n(17);!function(t){t.Month="months",t.DayOfWeek="days"}(rr||(rr={})),function(t){t.Long="wide",t.Short="abbr",t.Narrow="narrow"}(ir||(ir={})),function(t){t.Date="date",t.Time="time",t.DateTime="datetime"}(or||(or={})),function(t){t.Short="short",t.Medium="medium",t.Long="long",t.Full="full"}(sr||(sr={})),function(t){t.Gregorian="gregorian",t.ThaiBuddhist="thai-buddhist"}(ar||(ar={}));class ur{constructor(t,e,n,r){this.year=t,this.monthOfYear=e,this.dayOfMonth=n,this.chronology=r}isSameDate(t){return this.chronology===t.chronology&&this.getYear()===t.getYear()&&this.getMonthOfYear()===t.getMonthOfYear()&&this.getDayOfMonth()===t.getDayOfMonth()}getChronology(){return this.chronology}getYear(){return this.year}getMonthOfYear(){return this.monthOfYear}getDayOfMonth(){return this.dayOfMonth}getDayOfWeek(){return this.chronology.getDayOfWeek(this)}lengthOfYearInMonths(){return this.chronology.lengthOfYearInMonths(this.year)}plusYears(t){return this.chronology.plusYears(this,t)}plusMonths(t){return this.chronology.plusMonths(this,t)}plusDays(t){return this.chronology.plusDays(this,t)}minusYears(t){return this.chronology.minusYears(this,t)}minusMonths(t){return this.chronology.minusMonths(this,t)}minusDays(t){return this.chronology.minusDays(this,t)}withDayOfMonth(t){return this.chronology.withDayOfMonth(this,t)}withMonthOfYear(t){return this.chronology.withMonthOfYear(this,t)}withYear(t){return this.chronology.withYear(this,t)}toJsDate(){return this.chronology.toJsDate(this)}toString(){const t=lr(this.monthOfYear,2),e=lr(this.dayOfMonth,2),n=hr[this.getDayOfWeek()],r=this.getChronology().getCalendarSystem();return`${this.year}-${t}-${e} ${n} (${r})`}}function lr(t,e){const n=t.toString();return new Array(e-n.length+1).join("0")+n}const hr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];class fr{constructor(t=0,e=0,n=0,r=0){this.hour=t,this.minute=e,this.second=n,this.millisecond=r}getHour(){return this.hour}getMinute(){return this.minute}getSecond(){return this.second}getMillisecond(){return this.millisecond}isSameTime(t){return this.hour===t.hour&&this.minute===t.minute&&this.second===t.second&&this.millisecond===t.millisecond}toString(){return pr(this.hour,2)+":"+pr(this.minute,2)+":"+pr(this.second,2)+"."+pr(this.millisecond,3)}}function pr(t,e){const n=t.toString();return new Array(e-n.length+1).join("0")+n}class dr{constructor(t){this.calendarSystem=t}getCalendarSystem(){return this.calendarSystem}convertInput(t){if(t.getChronology()!==this)throw new Error(`Incompatible chronology: LocalDate should be ${this.getCalendarSystem()} but was ${t.getChronology().getCalendarSystem()}`);return{localDate:t instanceof ur?t:t.getDate(),localTime:t instanceof ur?new fr:t.getTime()}}static getInstance(){return this.instance}}function gr(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(yn.a)(t,e),r=n.getFullYear(),i=n.getMonth(),o=new Date(0);return o.setFullYear(r,i+1,0),o.setHours(0,0,0,0),o.getDate()}function mr(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(yn.a)(t,n),i=Object(mn.a)(e),o=r.getMonth()+i,s=new Date(0);s.setFullYear(r.getFullYear(),o,1),s.setHours(0,0,0,0);var a=gr(s,n);return r.setMonth(o,Math.min(a,r.getDate())),r}function br(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return mr(t,12*Object(mn.a)(e),n)}function yr(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(yn.a)(t,n),i=Object(mn.a)(e);return r.setDate(r.getDate()+i),r}class wr{constructor(t,e=new fr){this.date=t,this.time=e}getDate(){return this.date}getTime(){return this.time}withDate(t){return new wr(t,this.time)}withTime(t){return new wr(this.date,t)}toJsDate(){return this.date.getChronology().toJsDate(this)}isSameDateTime(t){return this.date.isSameDate(t.date)&&this.time.isSameTime(t.time)}getChronology(){return this.date.getChronology()}toString(){return this.date.toString()+" "+this.time.toString()}}class vr extends dr{constructor(t=ar.Gregorian,e=0){super(t),this.yearOffset=e}getDayOfWeek(t){return function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(yn.a)(t,e).getDay()}(this.toJsDate(t))}lengthOfMonthInDays(t,e){return gr(new Date(t,e-1,1))}lengthOfYearInMonths(t){return 12}plusYears(t,e){return jr(this.fromJsDate(br(this.toJsDate(t),e)),t)}minusYears(t,e){return jr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return br(t,-Object(mn.a)(e),n)}(this.toJsDate(t),e)),t)}plusMonths(t,e){return jr(this.fromJsDate(mr(this.toJsDate(t),e)),t)}minusMonths(t,e){return jr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return mr(t,-Object(mn.a)(e),n)}(this.toJsDate(t),e)),t)}plusDays(t,e){return jr(this.fromJsDate(yr(this.toJsDate(t),e)),t)}minusDays(t,e){return jr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return yr(t,-Object(mn.a)(e),n)}(this.toJsDate(t),e)),t)}withDayOfMonth(t,e){return jr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(yn.a)(t,n),i=Object(mn.a)(e);return r.setDate(i),r}(this.toJsDate(t),e)),t)}withMonthOfYear(t,e){return jr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(yn.a)(t,n),i=Object(mn.a)(e),o=r.getFullYear(),s=r.getDate(),a=new Date(0);a.setFullYear(o,i,15),a.setHours(0,0,0,0);var c=gr(a,n);return r.setMonth(i,Math.min(s,c)),r}(this.toJsDate(t),e-1)),t)}withYear(t,e){return jr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(yn.a)(t,n),i=Object(mn.a)(e);return isNaN(r)?new Date(NaN):(r.setFullYear(i),r)}(this.toJsDate(t),e)),t)}fromJsDate(t){const e=new ur(t.getFullYear()+this.yearOffset,t.getMonth()+1,t.getDate(),this),n=new fr(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());return new wr(e,n)}toJsDate(t){const{localDate:e,localTime:n}=this.convertInput(t);return new Date(e.getYear()-this.yearOffset,e.getMonthOfYear()-1,e.getDayOfMonth(),n.getHour(),n.getMinute(),n.getSecond(),n.getMillisecond())}}function jr(t,e){return e instanceof ur?t.getDate():t}vr.instance=new vr;class Or extends vr{}Or.instance=new Or(ar.ThaiBuddhist,543);var xr=n(13);const _r={[cr.validation.NOT_INTEGER]:"invalid_number",[cr.validation.RANGE_INTEGER]:"range_integer",[cr.validation.RANGE_LONG]:"range_long",[cr.validation.RANGE_DECIMAL]:"range_decimal",[cr.validation.RANGE_NUMBER]:"range_number"},Er="[No translation]";function Sr(t,e,...n){if(!mx.session.isValid())return Er;return(mx.session.getConfig("uiconfig.translations")[`${t}.${e}`]||Er).replace(/\{(\d+)\}/g,(t,e)=>n.length>=e?n[e-1]:t)}class Cr{constructor(t){this.defaultPatterns=t}formatValue(t,e,n){if(""===t||null===t)return"";switch(e){case"Decimal":case"Float":case"Currency":case"Integer":case"Long":if(!(t instanceof ke))throw new Error(`Value '${t}' cannot be formatted as a numeric value.`);return function(t,e){const n=t.lt(0);let[r,i=""]=t.toFixed().split(".");n&&(r=r.slice(1));void 0!==e&&(i=i.padEnd(e,"0"));return(n?"-":"")+r+(i?"."+i:"")}(t,"Decimal"===e||"Float"===e?void 0:"Currency"===e?2:0);case"DateTime":if("number"!=typeof t)throw new Error(`Value '${t}' cannot be formatted as Date.`);const r=n,i=function(t){return"custom"===t.type}(r)?r.pattern:this.defaultPatterns[r.type];return nr(new Date(t),function(t,e){const n=t.match(/(.)\1*/g)||[];return e.reduce((t,{existing:e,replacement:n})=>t.map(t=>t===e?n:t),n).join("")}(i,[{existing:"yyy",replacement:"yyyy"},{existing:"E",replacement:"e"},{existing:"EE",replacement:"ee"},{existing:"YYY",replacement:"YYYY"}]));case"Boolean":if("boolean"!=typeof t)throw new Error(`Value '${t}' cannot be formatted as boolean.`);return Sr("mxui.common",t.toString());default:if("string"!=typeof t)throw new Error(`Value '${t}' cannot be formatted as ${e}.`);return t}}parseValue(t,e,n){if(""===t)return"";switch(e.toLowerCase()){case"float":case"currency":case"integer":case"long":case"decimal":return function(t,e){let n;try{n=new ke(t)}catch(t){return null}return e&&e>=0?n.round(e):n}(t,n.decimalPrecision);case"enum":return t;case"boolean":return t===Sr("mxui.common","true");default:return t}}getDateFormatPlaceholder(t){return""}getI18nBundle(){}getDecimalSeparator(){return""}}var Tr=n(7),Dr=n(20);function kr(t){const e=["get_session_data","login","logout"];let n,r=0;return async(i,o)=>{const s=r;try{return await o(i)}catch(a){const c=Object(Q.f)(i.body)?i.body.action:void 0;if(!(a instanceof Dr.a)||void 0!==c&&e.includes(c))throw a;if(s!==r)return o(i);if(n)return await n,o(i);n=t();try{await n}finally{n=void 0}return++r,o(i)}}}const Pr=t=>{if(null===t||"object"!=typeof t)return t;const e=Array.isArray(t)?[]:{};return Object.keys(t).forEach(n=>e[n]=Pr(t[n])),e};var Mr=n(8);function Ar(t){if(t.startsWith("data:"))return t;var e;/^\w+:\/\//.test(t)||(t=(e=t).startsWith("data:")?e:mx.appUrl+e);const n=mx.session.getConfig("cachebust");return t.startsWith(mx.appUrl)&&!t.endsWith(n)&&(t+=(/\?/.test(t)?"&":"?")+n),t}class Nr{constructor(t,e,n){this.sessionStore=t,this.tokenStore=e,this.config=n,this.clientMetadata={}}isValid(){return void 0!==this.sessionData}getConfig(t){if(void 0===this.sessionData)throw new Error("Session is not available");if(!t)return Pr(this.sessionData);const e=t.split(".");let n=this.sessionData;for(let t=0;t<e.length&&n;t++)n=n[e[t]];return Pr(n)}getUserObject(){return this.userObject||(this.userObject=Tr.MxObject.fromJson(this.getConfig("user"))),this.userObject}isGuest(){return this.getUserObject().get("IsAnonymous")}getSessionObjectId(){return this.getConfig("sessionObjectId")}getUserId(){return this.getUserObject().getGuid()}getUserRoleNames(){return this.getConfig("roles")}hasSomeRole(t){if(void 0===t)return!0;const e=this.getUserRoleNames();return t.some(t=>e.indexOf(t)>-1)}getMicroflowInfo(t){return this.clientMetadata[t]}async login(t){const e=await Object(xr.d)(t.username,t.password,this.config.shouldGenerateToken);e.authtoken&&await this.tokenStore.set(e.authtoken)}destroySession(t){t()}async logout(){try{const t=await this.tokenStore.get();await Object(xr.e)(t)}catch(t){if(!(t instanceof ze.a))throw t}finally{await this.tokenStore.remove(),await this.sessionStore.remove()}}async startup(t){const e=await this.tokenStore.get();this.sessionParams=e?Object.assign({authtoken:e},t):t;const{sessionData:n,fromCache:r}=await this.loadSessionData();this.sessionData=n;const i=Boolean(n.sync_config);var o,s;return i&&await this.sessionStore.set(JSON.stringify(n)),e&&i?Object(He.c)(kr(this.restoreSessionOnUnauthorized.bind(this))):e?Object(He.c)(kr(async()=>mx.reload())):Object(He.c)((o=this.failOnUnauthorized.bind(this),async(t,e)=>{try{return await e(t)}catch(e){const n=Object(Q.f)(t.body)&&t.body.action;if(e instanceof Dr.a&&"login"!==n)return await o(e);throw e}})),!n.sync_config&&n.keepalive&&setInterval(xr.c,n.keepalive),Object(He.c)((s=(()=>Object(Q.c)(this.sessionData).csrftoken),(t,e)=>{const n={url:t.url,init:Object.assign({},t.init,{headers:new Headers(t.init.headers)}),body:t.body};return n.init.headers.append("X-Csrf-Token",s()),e(n)})),await this.loadClientMetadata(),!r}onUnauthorized(t){return t}async loadSessionData(){const t=await this.sessionStore.get(),e=void 0!==t?JSON.parse(t):void 0;if(e&&e.cachebust===this.config.currentCacheBust)return{fromCache:!0,sessionData:e};try{return{fromCache:!1,sessionData:await Object(xr.a)(Object(Q.c)(this.sessionParams))}}catch(t){if(401===t.status)throw await this.sessionStore.remove(),await this.tokenStore.remove(),t;if(460!==t.status&&e)return{fromCache:!0,sessionData:e};throw t}}async loadClientMetadata(){const t=await Object(fn.a)(Ar("metamodel.json"),"json");Object.keys(t).forEach(e=>{const n=t[e];this.clientMetadata[e]={parameters:n.p},n.a&&(this.clientMetadata[e].followedAssociations=n.a.map(([t,e])=>({association:t,fromEntity:e})))})}async restoreSessionOnUnauthorized(){try{const{csrftoken:t}=await Object(xr.a)(Object(Q.c)(this.sessionParams));Object(Q.c)(this.sessionData).csrftoken=t,await this.sessionStore.set(JSON.stringify(this.sessionData))}catch(t){if(!(t instanceof Dr.a))throw t;await this.failOnUnauthorized(t)}}async failOnUnauthorized(t){return await this.sessionStore.remove(),await this.tokenStore.remove(),this.onUnauthorized(t.status),Object(Mr.b)()}}var Ir=n(65);const Rr=n(10),Vr="files/documents/",Fr="files/thumbnails/";function $r(t){return t.replace(/:/g,"_")}const Gr="GUID:",Br=new RegExp("^"+Gr);function Ur(t){return!Br.test(t)}function qr(t){return"guid"===t||"$"===t[0]}function Wr(t,e){return t.$readonlyAttrs.includes(e)}function Lr(t){const e=Object.keys(t).filter(t=>!qr(t)).reduce((e,n)=>(e[n]={value:t[n]},Wr(t,n)&&(e[n].readonly=!0),e),{});return{guid:t.guid,objectType:t.$objectType,attributes:e}}function Hr(t){const e={guid:t.guid,$objectType:t.objectType,$readonlyAttrs:[]};for(const n in t.attributes)e[n]=t.attributes[n].value,t.attributes[n].readonly&&e.$readonlyAttrs.push(n);return e}class zr{getByGuid(t,e){return Promise.reject(new _e("getByGuid"))}getByPath(t,e,n,r){return Promise.reject(new _e("getByPath"))}getByXPath(t,e,n){return Promise.reject(new _e("getByXPath"))}getSlice(t,e,n){return Promise.reject(new _e("getSlice"))}action(t,e,n,r,i){return Promise.reject(new _e("action"))}create(t){return Promise.reject(new _e("create"))}commit(t,e,n,r){return Promise.reject(new _e("commit"))}rollback(t){return Promise.reject(new _e("rollback"))}remove(t){return Promise.reject(new _e("remove"))}validate(t){return Promise.reject(new _e("validate"))}saveDocument(t,e,n,r){return Promise.reject(new _e("saveDocument"))}generateReport(t,e,n,r){return Promise.reject(new _e("generateReport"))}generateExcelReport(t,e){return Promise.reject(new _e("generateExcelReport"))}getReportParameters(t){return Promise.reject(new _e("getReportParameters"))}getDocumentUrl(t,e,n){throw new _e("getDocumentUrl")}getImageUrl(t){return Promise.reject(new _e("getImageUrl"))}upload(){return Promise.reject(new _e("upload"))}downloadObjects(t){return Promise.reject(new _e("downloadObjects"))}downloadFiles(t){return Promise.reject(new _e("downloadFiles"))}cleanupDirtyObjects(){return Promise.reject(new _e("cleanupDirtyObjects"))}isDirty(t){throw new _e("isDirty")}cleanup(){return Promise.reject(new _e("cleanup"))}}const Yr=n(10),Jr={String:null,Integer:"0",Long:"0",Decimal:"0",Float:"0",Currency:"0",Enum:null,HashString:null,ObjectReference:null,DateTime:null,Boolean:!1,AutoNumber:"0",Binary:null};class Kr extends zr{constructor(t,e,n,r,i){super(),t=t||{},this._store=n,this._getDocumentUrl=t.getDocumentUrlFn||Qr,this._objectCache=e,this._fileBackend=r,this._synchronizer=i,this._dirtyGuids=[]}async initialize(){const t=await this._store.fetchDirty();this._dirtyGuids=t.map(t=>t.guid)}getByGuid(t,e){return Promise.all(t.map(this._getByGuid,this)).then(t=>{return{mxobjects:t.filter(t=>null!=t).map(Lr)}})}async getByPath(t,e,n,r){if("reverse"===r){const r=this._objectCache.getAllObjects().filter(n=>n.getReferences(e).includes(t)).map(t=>t.jsonData),{mxobjects:i}=await this.getSlice(n,[{attribute:e,operator:"equals",value:t}]),o=i.map(t=>Tr.MxObject.fromJson(t)).filter(n=>n.getReferences(e).includes(t)).filter(t=>!r.some(e=>e.guid===t.getGuid())).map(t=>t.jsonData);return{mxobjects:r.concat(o)}}{let n=this._objectCache.getObject(t);if(!n){const{mxobjects:[e]}=await this.getByGuid([t]);e&&(n=Tr.MxObject.fromJson(e))}if(!n)return{mxobjects:[]};const r=n.getReferences(e),i=r.map(t=>this._objectCache.getObject(t)).filter(t=>null!==t).map(t=>t.jsonData),o=r.filter(t=>!this._objectCache.has(t)),{mxobjects:s}=await this.getByGuid(o);return{mxobjects:s.concat(i)}}}getSlice(t,e,n){const r=window.mx.meta.getEntity(t),i=(e||[]).map(t=>(t.attribute&&r.isReference(t.attribute)&&(t.value=this._synchronizer.getInternalGuid(t.value)),t));return this._store.getSlice(t,i,n).then(([t,e])=>{return{mxobjects:t.map(this._synchronizer.makeObjectExternal,this._synchronizer).map(Lr),count:e}})}create(t){const e=Gr+Rr.getUniqueId();return this._objectCache.onCreate([e]),this._objectCache.setMxObjects([function(t,e){const n={guid:t,objectType:e,attributes:{}},r=window.mx.meta.getEntity(e);return r.getAttributes().forEach(t=>{n.attributes[t]={value:Jr[r.getAttributeType(t)]}}),n}(e,t)]),Promise.resolve({actionResult:e})}async commit(t,e){const n=Yr.objectFromArray(t.map(t=>[t,Yr.clone(this._objectCache.getChanges(t))])),[r,i]=Yr.partition(t=>this._objectCache.has(t),t),o=r.map(t=>this._objectCache.getObject(t)).map(Xr),s=(await Promise.all(i.map(this._getByGuid,this))).concat(o).map(function(t){return Object.assign({},t,Yr.mapObject(n[t.guid],t=>t.value))});return await this._store.insertOrReplace(s.map(this._synchronizer.makeObjectInternal,this._synchronizer)),this._dirtyGuids.push(...t),this._objectCache.onCommit(t),this._objectCache.setMxObjects(s.map(t=>Lr(Object.assign(t,{$dirty:!0})))),this._objectCache.removeChanges(function(t){const e={};return Object.keys(t).forEach(n=>{e[n]=Object.keys(t[n])}),e}(n)),{}}rollback(t){this._objectCache.removeAllChanges(t);const e=t.filter(t=>this._objectCache.isNew(t));return this._objectCache.removeObjects(e),Promise.resolve({})}validate(t){return Promise.resolve({})}saveDocument(t,e,n,r){if(r.size/1048576>n.maxFileSize)return Promise.reject(new Ye.a("File too large"));const i=$r(this._synchronizer.getInternalGuid(t));return this._fileBackend.storeFile(r,Vr+i).then(()=>(this._objectCache.makeChange(t,"HasContents",!0),this.commit([t],null)))}getDocumentUrl(t,e,n){return this._getDocumentUrl($r(this._synchronizer.getInternalGuid(t)),e,n)}getImageUrl(t){return Promise.resolve(t)}upload(){return this._synchronizer.upload()}async downloadObjects(t){await this._synchronizer.downloadObjects(t),this._dirtyGuids=[]}downloadFiles(t){return this._synchronizer.downloadFiles(t)}cleanupDirtyObjects(){return this._store.cleanupDirtyObjects()}isDirty(t){return this._dirtyGuids.includes(t)}async cleanup(){await this._store.cleanDatabase(),await this._fileBackend.removeDir(Vr),await this._fileBackend.removeDir(Fr),this._dirtyGuids=[]}_getByGuid(t){return this._store.getByGuid(this._synchronizer.getInternalGuid(t)).then(t=>this._synchronizer.makeObjectExternal(t))}}function Xr(t){return Hr(t.jsonData)}function Qr(t,e,n){var r=n?"thumbnails":"documents";return"filesystem:"+window.mx.appUrl+"temporary/files/"+r+"/"+t+"?"+ +new Date}var Zr=n(10),ti=n.n(Zr),ei=n(45);class ni{constructor(t,e,n){this._store=t,this._fileBackend=e,this._objectCache=n,this._internalToExternal={}}async upload(){const t=this._fileBackend,e=await this._store.fetchDirty();if(0===e.length)return{};!function(t){const e=t.map(t=>t.guid),n=ti.a.unique(t.map(t=>p(t).map(([t,e])=>e)).reduce((t,e)=>t.concat(e),[])).filter(t=>!Ur(t)).filter(t=>!e.includes(t));if(n.length>0){const e=ti.a.unique(t.map(t=>p(t).filter(([t,e])=>n.includes(e)).map(([e,n])=>`object of type ${t.$objectType} (reference ${e})`)).reduce((t,e)=>t.concat(e),[])).join(", "),r=`Sync has failed due to a modeling error. Your database contains objects that reference uncommitted objects:\n${e}.`;throw new Je(r)}}(e);const[n,r]=ti.a.partition(t=>Ur(t.guid),e),i=r.filter(d),o=n.filter(d),[s,a]=await Promise.all([Promise.all(i.concat(o).map(async function(e){const n=Vr+$r(e.guid),r=await t.readFile(n);return{tempGuid:(await Object(ei.uploadWithRetries)("__sync__","",r,2)).commits[0],fileObjGuid:e.guid}})),Promise.all(r.map(function(t){return Object(xr.b)(t.$objectType).then(e=>{const n=e.objects.find(t=>t.guid===e.actionResult);return{internalObj:t,remoteJson:n}})}))]),c=ti.a.objectFromArray(a.map(({internalObj:t,remoteJson:e})=>[t.guid,e.guid])),u=ti.a.objectFromArray(s.map(({tempGuid:t,fileObjGuid:e})=>Ur(e)?[t,e]:[t,c[e]])),l=n.map(t=>t.guid).concat(a.map(({remoteJson:t})=>t.guid)),h=a.map(({remoteJson:t})=>t),f=ti.a.objectFromArray(e.map(t=>(function(t,e){const n=window.mx.meta.getEntity(t.$objectType),r=Object.keys(t).filter(function(e){return!qr(e)&&n.isSyncable(e)&&!Wr(t,e)}).map(r=>{const i=t[r],o=n.isObjectReference(r)&&null!=i&&!Ur(i)?e[i]:i;return[r,{value:o}]});return[Ur(t.guid)?t.guid:e[t.guid],ti.a.objectFromArray(r)]})(t,c)));return await Object(xr.h)(l,u,f,h),await this._store.makeClean(e),await Promise.all(i.map(async e=>{const n=Vr+$r(e.guid),r=Vr+$r(c[e.guid]);await t.moveFile(n,r)})),ti.a.arrayFromObject(c).forEach(([t,e])=>this._mapInternalGuid(t,e)),{};function p(t){const e=window.mx.meta.getEntity(t.$objectType);return ti.a.arrayFromObject(t).filter(([t,n])=>"guid"===t||!qr(t)&&e.isReference(t))}function d(t){return window.mx.meta.getEntity(t.$objectType).isA("System.FileDocument")&&t.HasContents}}async downloadObjects(t){const e=ti.a.flatten(await Promise.all(t.map(t=>(function(t,e){return Object(xr.g)(e).then(e=>e.mxobjects.map(Hr).map(e=>Object.assign({},e,{$objectType:t})))})(t.store,t.xpath))));await this._store.rebuildDatabase(e);const n=e.map(this.makeObjectExternal,this).filter(t=>this._objectCache.has(t.guid));return this._objectCache.setMxObjects(n.map(Lr)),{}}async downloadFiles(t){const e=this._store,n=this._fileBackend,r=ti.a.flatten(await Promise.all(t.map(t=>(function(t){return e.getSlice(t,[{attribute:"HasContents",operator:"equals",value:"true"}]).then(([t,e])=>t)})(t)))),i=r.map(t=>s(t,!1)),o=r.filter(t=>window.mx.meta.getEntity(t.$objectType).isA("System.Image")).map(t=>s(t,!0));return await Promise.all(i.concat(o)),{};function s(t,e){const r=function(t,e,n){return mx.remoteUrl+function(t,e,n){let r="file?"+["guid="+t,"changedDate="+e].join("&");return n&&(r+="&thumb=true"),r}(t,e,n)}(t.guid,t.changedDate,e),i=(e?Fr:Vr)+$r(t.guid);return n.downloadFile(r,i)}}getExternalGuid(t){return this._internalToExternal[t]||t}getInternalGuid(t){for(const e in this._internalToExternal)if(this._internalToExternal[e]===t)return e;return t}makeObjectExternal(t){return ri(t,this.getExternalGuid.bind(this))}makeObjectInternal(t){return ri(t,this.getInternalGuid.bind(this))}_mapInternalGuid(t,e){this._internalToExternal[e]=t}}function ri(t,e){if(null===t)return null;const n=window.mx.meta.getEntity(t.$objectType);return ti.a.mapObject(t,(t,r)=>{return("guid"===r||!qr(r)&&n.isReference(r))&&null!=t?e(t):t})}function ii(t,...e){return new Promise((n,r)=>{const i=e.concat([n,r]);t(...i)})}function oi(t){return(e,n)=>{const r=n(e),i=new Promise((n,r)=>{setTimeout(()=>r(new ze.a(`Request ${function(t){return(t.init.method||"get").toUpperCase()+" "+t.url+(Object(Q.f)(t.body)&&t.body.action?`(${t.body.action})`:"")}(e)} timed out after ${t} ms.`)),t)});return Promise.race([r,i])}}var si,ai=n(41);async function ci(t,e,n,r){Object(He.b)(),Object(He.c)(oi(3e4));const i=new hn,o=new Nr(new De("session"),new De("token"),{currentCacheBust:e,shouldGenerateToken:!0}),s=new We,a=new rn({garbageCollectionInterval:1e4,logCleanupStatistics:!1},i),c=new Cr(r),u=new cn;window.mx={version:"{{mendix-version}}",appUrl:"resources://",homeUrl:"not-supported",remoteUrl:t,ui:new qe,onError:t=>je.NativeModules.NativeErrorHandler.handle(t.message,Object(ai.parse)(t.stack)),isOffline:()=>!0,reload:()=>je.NativeModules.NativeReloadHandler.reload(),logout:()=>{throw new _e},logger:u,session:o,meta:s,data:a,parser:c},function(t){Object(He.c)((e,n)=>{if(!e.url.startsWith(window.mx.appUrl))return n(e);let r;if((r=-1===e.url.indexOf("?")?e.url.substring(window.mx.appUrl.length):e.url.substring(window.mx.appUrl.length,e.url.indexOf("?")))in t){const e=t[r]();return Promise.resolve(new Response(JSON.stringify(e),{status:200,statusText:"OK"}))}return Promise.reject(new Error(`Failed to locate resource ${r}`))})}(n);const l=await o.startup({hybrid:!0,offline:!0,profile:"hybridPhoneOffline",timezoneoffset:(new Date).getTimezoneOffset()});if(o.getConfig("isDevModeEnabled")){const e=new sn(t);e.connect(),e.addOnReload(qe.savePageState),e.addOnReload(je.NativeModules.NativeReloadHandler.reload),u.addHandler((t,...n)=>{e.log(t,...n)})}s.startup();const h=await async function(t,e,{createStoreFn:n,getStorageDirFn:r,downloadFileFn:i,getDocumentUrlFn:o}){const s=new Ir(window.mx.session.getConfig("sync_config.schema"),n),a=new e({downloadFileFn:i,getStorageDirFn:r}),c=new ni(s,a,t),u=new Kr({getDocumentUrlFn:o},t,s,a,c);return await u.initialize(),u}(i,gn,{createStoreFn:()=>Le.openDatabase("MendixDatabase","1","Mendix Database",-1)});a.startup(h),l&&(await ii(a.uploadOfflineObjectsAndFiles.bind(a)),await a.downloadObjects(),a.downloadFiles())}async function ui({cacheBust:t,resourcesMap:e,defaultPatterns:n}){try{const r=je.NativeModules.MxConfiguration.RUNTIME_URL;await ci(r,t,e,n),await qe.startApp()}catch(t){je.NativeModules.NativeErrorHandler.handle(t.message,Object(ai.parse)(t.stack))}}function li(t){const e={testID:t.name,style:t.style};return t.text.status!==si.Loading?Object(r.createElement)(je.Text,e,t.text.value):null}function hi(t,e){return Object.keys(t).filter(t=>!e.includes(t)).reduce((e,n)=>Object.assign({},e,{[n]:t[n]}),{})}function fi(t,e){return e.filter(e=>void 0!==t[e]).reduce((e,n)=>Object.assign({},e,{[n]:t[n]}),{})}function pi(t,e){return t.filter(t=>void 0!==t&&void 0!==t[e]).map(t=>t[e])}function di(t,e){const n=pi(t,e);return n.length>0?n[n.length-1]:null}!function(t){t.Loading="loading",t.Unavailable="unavailable",t.Available="available"}(si||(si={}));const gi=12;function mi(t){const{buttonStyles:e,captionStyles:n,iconStyles:i}=function(t){const e=pi(t,"button"),n=pi(t,"caption"),r=pi(t,"icon");return{buttonStyles:e,captionStyles:n,iconStyles:r}}(t.style),o="android"===je.Platform.OS,s=o?je.TouchableNativeFeedback:je.TouchableOpacity,a={background:je.TouchableNativeFeedback.SelectableBackgroundBorderless()},c=t.caption.value||"",u=o&&c?c.toUpperCase():c,l=i&&Number(di(i,"size")||gi),h=i&&di(i,"color"),f={name:`${t.name}$icon`,color:h,size:l};return Object(r.createElement)(je.View,{style:e},Object(r.createElement)(s,Object.assign({testID:t.name,onPress:()=>t.onClick.execute(),disabled:!t.onClick||!t.onClick.canExecute},a,{accessible:!1}),Object(r.createElement)(je.View,{style:{flexDirection:"row",alignItems:"center"}},Object(r.createElement)(je.View,{testID:`${t.name}$iconWrapper`},t.icon&&t.icon(f)),Object(r.createElement)(je.Text,{testID:`${t.name}$caption`,style:n},u))))}const bi=Symbol("mxObject");function yi(t,e){return{id:t.getGuid(),[bi]:{obj:t,scope:e}}}const wi=be(class extends r.Component{constructor(t){super(t),this.store=new Ne(t.$store);const{obj:e,scope:n}=function(t){const e=t[bi];if(void 0===e)throw new Error("Arbitrary object is used as a ListItem. This is not allowed.");return e}(t.scope);this.store.set(n,"object",e)}render(){return Object(r.createElement)(me,{store:this.store},this.props.children)}});function vi(t){const e={testID:t.name,refreshing:t.listInfo.status===si.Loading,style:t.style,data:t.listInfo.value?t.listInfo.value.items:[],horizontal:t.horizontal,keyExtractor:t=>t.id,renderItem:({item:e,index:n})=>Object(r.createElement)(wi,{scope:e},Object(r.createElement)(je.View,{testID:`${t.name}$item${n}`},t.itemTemplate())),onEndReached:()=>{const e=Object(Q.c)(t.amount.value).plus(t.pageSize);t.amount.setValue(e)}};return Object(r.createElement)(je.FlatList,Object.assign({},e))}function ji(t){const e={testID:t.name,style:t.style};return Object(r.createElement)(je.View,e,t.content)}class Oi extends r.Component{constructor(){super(...arguments),this.onPressHandler=this.onPress.bind(this)}onPress(){this.props.onClick&&this.props.onClick.canExecute&&this.props.onClick.execute()}render(){return Object(r.createElement)(je.TouchableWithoutFeedback,{testID:this.props.name,onPress:this.onPressHandler},Object(r.createElement)(je.Image,{source:this.props.source,style:this.props.style}))}}class xi extends r.Component{constructor(t){super(t),this.state={selectedValue:t.selectedValue},this.onValueChanged=this.onValueChanged.bind(this)}render(){const{name:t,inline:e,style:n,items:i,disabled:o}=this.props,{selectedValue:s}=this.state,a=e?"dropdown":"dialog";return Object(r.createElement)(je.Picker,{testID:t,selectedValue:s,mode:a,style:n,onValueChange:this.onValueChanged,key:`${t}$picker`,enabled:!o},i.map(xi.renderItem))}onValueChanged(t){this.setState({selectedValue:t}),this.props.onValueChanged&&this.props.onValueChanged(t)}static renderItem(t,e){const{value:n,label:i}=t;return Object(r.createElement)(je.Picker.Item,{label:i,value:n,key:n,testID:`dropDownItem${e}`})}}class _i extends r.Component{constructor(t){super(t),this.state={pickerVisible:!1},this.togglePicker=this.togglePicker.bind(this)}render(){const{selectedValue:t,valueStyle:e,style:n,disabled:i,items:o}=this.props,{pickerVisible:s}=this.state,a=Object.assign({},this.props,{onClose:this.props.onClose||this.togglePicker}),c=this.props.inline?Object(r.createElement)(Ei,Object.assign({},a)):Si(Ei,a);return Object(r.createElement)(je.View,{style:n},Object(r.createElement)(je.TouchableOpacity,{onPress:()=>this.togglePicker(),key:"button",disabled:i,testID:`${this.props.name}$openButton`,accessible:!1},Object(r.createElement)(je.Text,{style:e},t||o[0].label)),s?c:null)}togglePicker(){this.setState({pickerVisible:!this.state.pickerVisible})}}class Ei extends r.Component{constructor(t){super(t),this.state={selectedValue:this.props.selectedValue},this.onValueChanged=this.onValueChanged.bind(this)}render(){const{valueStyle:t,items:e,pickerStyle:n,name:i}=this.props,{selectedValue:o}=this.state;return Object(r.createElement)(je.PickerIOS,{selectedValue:o,itemStyle:t,onValueChange:this.onValueChanged,style:n,key:`picker${i}`},e.map(Ei.renderItem))}onValueChanged(t){this.setState({selectedValue:t}),this.props.onValueChanged&&this.props.onValueChanged(t)}static renderItem(t){const{value:e,label:n}=t;return Object(r.createElement)(je.PickerIOS.Item,{label:n,value:e,key:e})}}const Si=(t,e)=>Object(r.createElement)(je.Modal,{animationType:"fade",key:"modal",transparent:!0},Object(r.createElement)(je.TouchableWithoutFeedback,{accessible:!1,onPress:e.onClose},Object(r.createElement)(je.View,{style:Ci.modalWrapper},Object(r.createElement)(je.View,{style:[...e.backdropStyle||[],{position:"absolute",height:"100%",width:"100%"}]}),Object(r.createElement)(je.View,{style:Ci.container},Object(r.createElement)(je.View,{style:[Ci.topWrapper,...e.topStyle||[]]},Object(r.createElement)(je.Button,{testID:`${e.name}$closeButton`,title:Sr("mxui.widget.native","ModalDialog.close"),onPress:e.onClose})),Object(r.createElement)(t,Object.assign({},e)))))),Ci=je.StyleSheet.create({modalWrapper:{backgroundColor:"rgba(0, 0, 0, 0.3)",flex:1,flexDirection:"row",alignItems:"flex-end"},container:{backgroundColor:"#FFFFFF",flex:1},topWrapper:{alignItems:"flex-end"}});var Ti=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};const Di=t=>{const{error:e}=t,n=Ti(t,["error"]);return e?Object(r.createElement)(je.Text,n,e):null},ki=({name:t,label:e,style:n})=>e&&e.status!==si.Loading?Object(r.createElement)(je.Text,{testID:t,style:n},e.value):null;class Pi extends r.Component{constructor(t){super(t),this.state={pickerVisible:!1},this.onValueChange=this.onValueChange.bind(this)}render(){const{name:t,inline:e,inputValue:n,style:i,label:o}=this.props,s=[...pi(this.props.style,"label"),"horizontal"===this.props.formOrientation?{flex:this.props.labelWidth}:void 0],a=pi(this.props.style,"validationMessage"),c="horizontal"===this.props.formOrientation?{flexDirection:"row",alignItems:"center"}:void 0,u="horizontal"===this.props.formOrientation?{flex:12-this.props.labelWidth}:void 0,l=n.readOnly||n.status!==si.Available,h=this.props.inputValue.validation&&this.props.inputValue.validation[0],f={name:t,inline:e,disabled:l,key:t,items:this.makeItems(),selectedValue:n.value,onValueChanged:this.onValueChange};return[Object(r.createElement)(je.View,{key:"inputGroup",style:c},Object(r.createElement)(ki,{name:`${t}$label`,key:`${t}$label`,label:o,style:s}),"android"===je.Platform.OS?Object(r.createElement)(xi,Object.assign({},f,{style:[...pi(i,"value")||[],u]})):Object(r.createElement)(_i,Object.assign({},f,{style:[u],pickerStyle:pi(this.props.style,"pickerIOS"),topStyle:pi(i,"pickerTopIOS"),backdropStyle:pi(i,"pickerBackdropIOS"),valueStyle:pi(i,"value")||[]}))),Object(r.createElement)(Di,{key:"error",testID:`${t}$alert`,error:h,style:a})]}onValueChange(t){const e=t!==this.props.emptyOptionCaption.value?String(t):void 0;e!==this.props.inputValue.value&&this.props.inputValue.setValue(e)}makeItems(){const{inputValue:{universe:t,formatter:e},emptyOptionCaption:n}=this.props;return[n.value,...t||[]].map(t=>({value:t||"",label:e.format(t)}))}}class Mi extends r.Component{constructor(t){super(t),this.onChange=this.onChange.bind(this)}onChange(t){this.props.value.status!==si.Available||this.props.value.readOnly||this.props.value.setValue(t)}render(){const{inputStyles:t,inputErrorStyles:e,labelStyles:n,validationMessageStyles:i,inputSwitchStyleProps:o,inputErrorSwitchStyleProps:s,inputDirectionStyle:a}=this.processStyles(),c="horizontal"===this.props.formOrientation?{flexDirection:"row",alignItems:"center"}:void 0,u=this.props.value.validation&&this.props.value.validation[0],l=this.props.caption?Object(r.createElement)(je.Text,{testID:`${this.props.name}$label`,key:"label",style:n},this.props.caption.value):null,h=Object.assign({testID:this.props.name,style:u?e:t,onValueChange:this.onChange,value:this.props.value.value||!1,disabled:this.props.value.readOnly},u?s:o);return[Object(r.createElement)(je.View,{key:"inputGroup",style:c},l,Object(r.createElement)(je.Switch,Object.assign({key:"input"},h))),Object(r.createElement)(Di,{key:"alert",testID:`${this.props.name}$alert`,error:u,style:[...i,a]})]}processStyles(){const t=["tintColor","thumbTintColor"],e=pi(this.props.style,"input").map(e=>hi(e,t)),n=pi(this.props.style,"inputError").map(e=>hi(e,t)),r=pi(this.props.style,"input").map(e=>fi(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),i=pi(this.props.style,"inputError").map(e=>fi(e,t)).reduce((t,e)=>Object.assign({},t,e),{});return{inputStyles:e,inputErrorStyles:n,labelStyles:[...pi(this.props.style,"label"),"horizontal"===this.props.formOrientation?{flex:this.props.labelWidth}:void 0],validationMessageStyles:pi(this.props.style,"validationMessage"),inputSwitchStyleProps:r,inputErrorSwitchStyleProps:i,inputDirectionStyle:"horizontal"===this.props.formOrientation?{flex:12-this.props.labelWidth}:void 0}}}const Ai={default:{android:"default",iOS:"default"},"number-pad":{android:"numeric",iOS:"number-pad"},"decimal-pad":{android:"numeric",iOS:"decimal-pad"},"phone-pad":{android:"phone-pad",iOS:"phone-pad"},url:{android:"default",iOS:"url"},"email-address":{android:"email-address",iOS:"email-address"}};class Ni extends r.Component{constructor(t){super(t),this.state={focused:!1,displayValue:t.inputValue.displayValue},this.onChangeText=this.onChangeText.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}componentDidUpdate(){this.state.focused||this.props.inputValue.displayValue===this.state.displayValue||this.setState({displayValue:this.props.inputValue.displayValue})}render(){const{inputStyles:t,inputErrorStyles:e,labelStyles:n,validationMessageStyles:i,inputTextInputStyleProps:o,inputErrorTextInputStyleProps:s,inputGroupWrapperStyle:a,inputDirectionStyle:c}=this.processStyles(),u=this.props.inputValue.validation&&this.props.inputValue.validation[0],l=Object.assign({maxLength:this.props.maxLength,testID:this.props.name,style:[...u?[t,e]:[t],c],editable:!this.props.inputValue.readOnly&&this.props.inputValue.status===si.Available,onChangeText:this.onChangeText,onFocus:this.onFocus,onBlur:this.onBlur,placeholder:this.props.placeholder.value||void 0,value:this.state.displayValue,keyboardType:Ni.getPlatformKeyboardType(this.props.keyboardType),clearButtonMode:"always",secureTextEntry:this.props.isPassword},u?s:o);return[Object(r.createElement)(je.View,{key:"inputGroup",style:a},this.props.label&&Object(r.createElement)(je.Text,{testID:`${this.props.name}$label`,key:"label",style:n},this.props.label.value),Object(r.createElement)(je.TextInput,Object.assign({key:"input"},l))),Object(r.createElement)(Di,{key:"alert",testID:`${this.props.name}$alert`,style:i,error:u})]}onChangeText(t){this.setState({displayValue:t})}onFocus(){this.setState({focused:!0,displayValue:this.props.inputValue.displayValue}),this.dispatchAction("onEnter")}onBlur(){this.submitValue(),this.dispatchAction("onLeave"),this.setState({focused:!1})}submitValue(){this.state.displayValue!==this.props.inputValue.displayValue&&this.props.inputValue.setTextValue(this.state.displayValue)}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===si.Available&&e&&e.execute()}static getPlatformKeyboardType(t){const e=Ai[t];return"android"===je.Platform.OS?e.android:e.iOS}processStyles(){const t=["placeholderTextColor","selectionColor","underlineColorAndroid"],e=pi(this.props.style,"input").map(e=>hi(e,t)),n=pi(this.props.style,"inputError").map(e=>hi(e,t)),r=pi(this.props.style,"input").map(e=>fi(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),i=pi(this.props.style,"inputError").map(e=>fi(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),o="horizontal"===this.props.formOrientation?{flex:this.props.labelWidth}:void 0,s=pi(this.props.style,"label"),a=pi(this.props.style,"validationMessage"),c="horizontal"===this.props.formOrientation?{flexDirection:"row",alignItems:"center"}:void 0,u="horizontal"===this.props.formOrientation?{flex:12-this.props.labelWidth}:void 0;let l=Array();return o&&(l=[...l,o]),s&&(l=[...l,...s]),{inputStyles:e,inputErrorStyles:n,labelStyles:l,validationMessageStyles:a,inputTextInputStyleProps:r,inputErrorTextInputStyleProps:i,inputGroupWrapperStyle:c,inputDirectionStyle:u}}}class Ii extends r.Component{constructor(){super(...arguments),this.state={internalValue:this.props.inputValue.displayValue||""},this.onChangeTextHandler=this.onChangeText.bind(this),this.onFocusHandler=this.onFocus.bind(this),this.onBlurHandler=this.onBlur.bind(this)}componentDidUpdate(t){this.props.inputValue.displayValue!==t.inputValue.displayValue&&this.setState({internalValue:this.props.inputValue.displayValue})}onChangeText(t){this.setState({internalValue:t})}onFocus(){this.dispatchAction("onEnter")}onBlur(){this.state.internalValue!==this.props.inputValue.displayValue&&this.props.inputValue.setValue(this.state.internalValue),this.dispatchAction("onLeave")}render(){const{inputStyles:t,inputErrorStyles:e,labelStyles:n,validationMessageStyles:i,inputTextInputStyleProps:o,inputErrorTextInputStyleProps:s,inputGroupWrapperStyle:a,inputDirectionStyle:c}=this.processStyles(),u=this.props.inputValue.validation[0],l=this.props.label?Object(r.createElement)(je.Text,{testID:`${this.props.name}$label`,key:"label",style:n},this.props.label.value):null,h=Object.assign({multiline:!0,numberOfLines:this.props.numberOfLines,testID:this.props.name,style:[...u?[t,e]:[t],c],editable:!this.props.inputValue.readOnly&&this.props.inputValue.status===si.Available,onChangeText:this.onChangeTextHandler,onFocus:this.onFocusHandler,onBlur:this.onBlurHandler,maxLength:this.props.maxLength,placeholder:this.props.placeholder.value||void 0,value:this.state.internalValue},u?s:o);return[Object(r.createElement)(je.View,{key:"inputGroup",style:a},l,Object(r.createElement)(je.TextInput,Object.assign({key:"input"},h))),Object(r.createElement)(Di,{key:"alert",testID:`${this.props.name}$alert`,style:i,error:u})]}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===si.Available&&e&&e.execute()}processStyles(){const t=["placeholderTextColor","selectionColor","underlineColorAndroid"],e=pi(this.props.style,"input").map(e=>hi(e,t)),n=pi(this.props.style,"inputError").map(e=>hi(e,t)),r=pi(this.props.style,"input").map(e=>fi(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),i=pi(this.props.style,"inputError").map(e=>fi(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),o="horizontal"===this.props.formOrientation?{flex:this.props.labelWidth}:void 0;return{inputStyles:e,inputErrorStyles:n,labelStyles:[...pi(this.props.style,"label"),o],validationMessageStyles:pi(this.props.style,"validationMessage"),inputTextInputStyleProps:r,inputErrorTextInputStyleProps:i,inputGroupWrapperStyle:"horizontal"===this.props.formOrientation?{flexDirection:"row",alignItems:"center"}:void 0,inputDirectionStyle:"horizontal"===this.props.formOrientation?{flex:12-this.props.labelWidth}:void 0}}}const Ri=t=>Object(r.createElement)(je.ScrollView,{style:[t.style]},t.content);class Vi extends r.Component{constructor(){super(...arguments),this.onDatePressHandler=this.onDatePress.bind(this)}async onDatePress(){if(this.props.inputValue.readOnly)return;this.dispatchAction("onEnter");const t=this.props.inputValue.status===si.Available&&void 0===this.props.inputValue.value?new Date:this.props.inputValue.value;try{const e=await this.selectDate(t).then(this.selectTime.bind(this));this.props.inputValue.setValue(e)}catch(t){}finally{this.dispatchAction("onLeave")}}render(){const t=Li(this.props.style,this.props),e=this.props.inputValue.validation&&this.props.inputValue.validation[0];return[Object(r.createElement)(je.View,{key:"inputGroup",style:t.inputGroupWrapperStyle},Object(r.createElement)(Ui,{key:"label",name:this.props.name,label:this.props.label,style:t.label}),Object(r.createElement)(qi,{key:"value",name:this.props.name,inputValue:this.props.inputValue,placeholder:this.props.placeholder,onPress:this.onDatePressHandler,style:t.value})),Object(r.createElement)(Di,{key:"error",testID:`${this.props.name}$alert`,error:e,style:t.validationMessage})]}async selectDate(t){if("date"===this.props.mode||"datetime"===this.props.mode){const{action:e,year:n,month:r,day:i}=await je.DatePickerAndroid.open({date:t});return e===je.DatePickerAndroid.dateSetAction&&n&&r&&i?new Date(n,r,i):Promise.reject()}return t}async selectTime(t){if("time"===this.props.mode||"datetime"===this.props.mode){const{action:e,hour:n,minute:r}=await je.TimePickerAndroid.open({hour:t.getHours(),minute:t.getMinutes()});if(e===je.TimePickerAndroid.timeSetAction){const e=new Date(t);return e.setHours(n,r),e}return Promise.reject()}return t}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===si.Available&&e&&e.execute()}}class Fi extends r.Component{constructor(t){super(t),this.onDateChangeHandler=this.onDateChange.bind(this),this.onDatePressHandler=this.onDatePress.bind(this),this.toggleVisibilityHandler=this.toggleVisibility.bind(this),this.state={visible:!1}}onDateChange(t){const e=this.props.inputValue;e.status!==si.Available||e.readOnly||this.props.inputValue.setValue(t)}onDatePress(){this.props.inputValue.readOnly||(this.props.inputValue.status===si.Available&&void 0===this.props.inputValue.value?(this.dispatchAction("onEnter"),this.onDateChange(new Date),this.toggleVisibility(!1)):this.toggleVisibility())}toggleVisibility(t=!0){this.setState({visible:!this.state.visible},()=>t&&this.dispatchAction(this.state.visible?"onEnter":"onLeave"))}render(){const t=Li(this.props.style,this.props),e=this.props.inputValue.validation&&this.props.inputValue.validation[0];return[Object(r.createElement)(je.View,{key:"inputGroup",style:t.inputGroupWrapperStyle},Object(r.createElement)(Ui,{key:"label",name:this.props.name,label:this.props.label,style:t.label}),Object(r.createElement)(qi,{key:"value",name:this.props.name,inputValue:this.props.inputValue,placeholder:this.props.placeholder,onPress:this.onDatePressHandler,style:t.value})),this.renderDatePicker(),Object(r.createElement)(Di,{key:"error",testID:`${this.props.name}$alert`,error:e,style:t.validationMessage})]}renderDatePicker(){if(!this.state.visible)return null;const t=Object(r.createElement)(je.DatePickerIOS,{key:"datePicker",date:this.props.inputValue.value,onDateChange:this.onDateChangeHandler,mode:this.props.mode});return this.props.inline?t:this.renderModal(t)}renderModal(t){return Object(r.createElement)(je.Modal,{key:"modal",transparent:!0,onRequestClose:()=>{}},Object(r.createElement)(je.TouchableWithoutFeedback,{accessible:!1,onPress:this.toggleVisibilityHandler},Object(r.createElement)(je.View,{style:$i.backdropWrapper},Object(r.createElement)(je.View,{style:$i.container},Object(r.createElement)(je.View,{style:$i.topWrapper},Object(r.createElement)(je.Button,{testID:`${this.props.name}$closeButton`,title:Sr("mxui.widget.native","ModalDialog.close"),onPress:this.toggleVisibilityHandler})),t))))}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===si.Available&&e&&e.execute()}}const $i=je.StyleSheet.create({backdropWrapper:{backgroundColor:"rgba(0, 0, 0, 0.3)",flex:1,flexDirection:"row",alignItems:"flex-end"},container:{backgroundColor:"#FFFFFF",flex:1},topWrapper:{alignItems:"flex-end"}});var Gi=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};const Bi=t=>Object(r.createElement)("android"===je.Platform.OS?Vi:Fi,t),Ui=({name:t,label:e,style:n})=>e&&void 0!==e.value?Object(r.createElement)(je.Text,{testID:`${t}$label`,style:n},e.value):null,qi=t=>{const e="android"===je.Platform.OS?je.TouchableNativeFeedback:je.TouchableOpacity,n=Wi(t.inputValue,t.placeholder);return Object(r.createElement)(n=>{var{children:i}=n,o=Gi(n,["children"]);return t.inputValue.readOnly?r.Children.only(i):Object(r.createElement)(e,Object.assign({onPress:()=>t.onPress()},o,{style:t.style}),i)},{key:"touchable",testID:`${t.name}$value`,accessible:!0,accessibilityLabel:n,style:t.style},Object(r.createElement)(je.Text,{key:"value",testID:`${t.name}$value`,style:t.style},n))},Wi=(t,e)=>t.value?t.displayValue:e.value||" ",Li=(t,e)=>({label:[...pi(t,"label").filter(t=>!!t),"horizontal"===e.formOrientation?{flex:e.labelWidth}:void 0],value:[...pi(t,"value").filter(t=>!!t),"horizontal"===e.formOrientation?{flex:12-e.labelWidth}:void 0],validationMessage:pi(t,"validationMessage").filter(t=>!!t),inputGroupWrapperStyle:"horizontal"===e.formOrientation?{flexDirection:"row",alignItems:"center"}:void 0});const Hi=t=>{const e={testID:t.name,style:[{minWidth:t.width||100,minHeight:t.height||100},...t.style||[]]},n=t.placeholder?Object(r.createElement)(je.Image,Object.assign({source:t.placeholder},e)):null;return t.source.value?t.source.value(e):n},zi=(Yi=Hi,Ji=Hi,Ki=300,class extends r.Component{constructor(t){super(t),this.placeHolderElement=Object(r.createElement)(Yi,t),this.state={ignoreUpdates:!0}}componentDidMount(){this.timeoutId=window.setTimeout(()=>this.setState({ignoreUpdates:!1}),Ki)}componentWillUnmount(){window.clearTimeout(this.timeoutId)}render(){return this.state.ignoreUpdates?this.placeHolderElement:Object(r.createElement)(Ji,Object.assign({},this.props))}});var Yi,Ji,Ki;const Xi=t=>Object(r.createElement)(zi,Object.assign({},t)),Qi=t=>t.caption.status===si.Available?Object(r.createElement)(je.Text,{testID:t.name,style:t.style},t.caption.value):null;function Zi(t){const e=Object(r.createElement)(je.View,null,t.content),n="android"===je.Platform.OS?je.TouchableNativeFeedback:je.TouchableOpacity,i={onPress:()=>t.onClick.canExecute&&t.onClick.execute(),accessible:!1};return t.onClick?Object(r.createElement)(n,i,e):e}const to=t=>{return!(void 0===t.visible||Boolean(t.visible.value))||t.needsNamedUser&&mx.session.isGuest()?null:t.contents};function eo(t,e){return"function"==typeof e?function(n){return n.pipe(eo(function(n,r){return bt(t(n,r)).pipe(yt(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new no(t))}}var no=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new ro(t,this.project))},t}(),ro=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return o(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new F(this,void 0,void 0);this.destination.add(i),this.innerSubscription=z(this,t,e,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(V),io=new ut(st);function oo(t,e){var n;return void 0===t&&(t=0),void 0===e&&(e=io),(h(n=t)||!(n-parseFloat(n)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=io),new C(function(n){return n.add(e.schedule(so,t,{subscriber:n,counter:0,period:t})),n})}function so(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}function ao(t,e){return new C(function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?bt(i):A).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}function co(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}co.prototype=Object.create(Error.prototype);var uo=co;function lo(t){return function(e){return 0===t?N():e.lift(new ho(t))}}var ho=function(){function t(t){if(this.total=t,this.total<0)throw new uo}return t.prototype.call=function(t,e){return e.subscribe(new fo(t,this.total))},t}(),fo=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return o(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(O);function po(t){return function(e){return e.lift(new go(t))}}var go=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new mo(t,this.value))},t}(),mo=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return o(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(O);function bo(t){return function(e){return e.lift(new yo(t))}}var yo=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new wo(t,this.total))},t}(),wo=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return o(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(O);function vo(t,e,n){return function(r){return r.lift(new jo(t,e,n))}}var jo=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Oo(t,this.nextOrObserver,this.error,this.complete))},t}(),Oo=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=E,o._tapError=E,o._tapComplete=E,o._tapError=r||E,o._tapComplete=i||E,s(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||E,o._tapError=n.error||E,o._tapComplete=n.complete||E),o}return o(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(O);function xo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];k(n)?t.pop():n=null;var r=t.length;return Et(1!==r||n?r>0?M(t,n):N(n):I(t[0]),e)}}function _o(){return{status:si.Loading}}function Eo(){return{status:si.Unavailable}}function So(t){return{status:si.Available,value:t}}function Co(t){return e=>Do(e,t)}function To(t){return e=>ko(e,t)}function Do(t,e){return ko(t,t=>So(e(t)))}function ko(t,e){return t.status===si.Available?e(t.value):t}function Po(t){return bt(t).pipe(yt(So),xo(_o()))}function Mo(t){return{status:t.status,value:t.status===si.Available?t.value:void 0}}function Ao(t,e,n,r){return se(Et(Vo(t).pipe(lo(1),po({forceReload:!1,resetOffset:!1})),Ct(void 0!==r?r.pipe(po({forceReload:!0,resetOffset:!1})):A,void 0!==n?n.pipe(po({forceReload:!1,resetOffset:!1})):A,(i=e.entity,Jt({entity:i})).pipe(po({forceReload:!0,resetOffset:!1})),void 0!==e.refreshTime?oo(1e3*e.refreshTime).pipe(po({forceReload:!0,resetOffset:!1})):A,Vo(t).pipe(bo(1),po({forceReload:!0,resetOffset:!0})))));var i}function No(t,e){return t(e).pipe(eo(n=>n.status===si.Available&&0===n.value.items.length&&e.offset>0&&e.amount>0?t(Object.assign({},e,{offset:0})).pipe(qt(t=>t.status!==si.Loading)):R(n)))}class Io{constructor(t,e,n){this.store=e,this.widgetId=n,this.initiatedPageChange=!1;const r={offset:0,amount:t.defaultAmount||Number.POSITIVE_INFINITY};this.value$=J(Ro(n,"offset",e,r.offset),Ro(n,"amount",e,r.amount)).pipe(yt(([t,e])=>({offset:t,amount:e}))),this.externalChange$=this.value$.pipe(qt(()=>!this.hasInitiatedPageChange()),Xt(),po(void 0))}updateFrom(t){ie(()=>{if(t.status===si.Available){const{totalCount:e,hasMoreItems:n,offset:r,items:i}=t.value;this.store.set(this.widgetId,"total",void 0!==e?ke(e):void 0),this.store.set(this.widgetId,"hasMoreItems",n),this.store.set(this.widgetId,"pageGuids",i.map(t=>t.id)),this.store.set(this.widgetId,"count",ke(i.length));const o=this.store.get(this.widgetId,"offset");void 0!==o&&o.eq(r)||(this.initiatedPageChange=!0,this.store.set(this.widgetId,"offset",ke(r)))}})}hasInitiatedPageChange(){const t=this.initiatedPageChange;return this.initiatedPageChange=!1,t}}function Ro(t,e,n,r){return n.get$(t,e).pipe(yt(t=>{if(void 0!==t){const e=Number(t);if(isNaN(e))throw new ue.a;return e}return r}),Zt())}function Vo(t){return t.get$(Me,"applyContextCount").pipe(qt(t=>void 0!==t),po(void 0))}var Fo=n(30),$o=n(31);function Go(t,e){return 0===Object.keys(t).length?Qt({}):ee(Object.keys(t).map(n=>{const r=t[n].source;return e.get$(t[n].widget,"allpages"===r?"allGuids":r).pipe(eo(t=>(function(t,e){if("unavailable"===t)return R(void 0);if(void 0===t)return R("selection"===e?{objects:[]}:void 0);if(t instanceof Tr.MxObject)return Jt({guid:t.getGuid()}).pipe(xo(void 0),po({object:t}));return Et(R([]),new Promise((e,n)=>{mx.data.get({guids:t,callback:e,error:n})})).pipe(eo(t=>Ct(...t.map(t=>Jt({guid:t.getGuid()}))).pipe(xo(void 0),yt(()=>({objects:t})))))})(t,r)),yt(t=>({[n]:t})))})).pipe(yt(t=>Object.assign({},...t)))}const Bo=new $o.NanoflowEngine(Fo.executors);const Uo=he(function(t,e,n){const r=t.source.allowedRoles;if(void 0!==r&&!mx.session.hasSomeRole(r))return mx.logger.debug("Unable to execute nanoflow because you do not have sufficient permissions."),R(Mo(Eo()));const i=Go(t.argMap,e);return function(t,e,n,r,i){const o=new Io(t,e,n),s=Ao(e,t,void 0,r).pipe(Dt(r),eo(([{resetOffset:t},e],n)=>i(e).pipe(yt(Co(e=>({objects:e,version:n,resetOffset:t}))))),vo(t=>Do(t,({objects:t})=>e.set(n,"allGuids",t.map(t=>t.getGuid())))),ae(_o()),Xt());return Ct(s.pipe(Kt(o.externalChange$),yt(Co(t=>Object.assign({},t,{resetOffset:!1})))),s).pipe(Dt(o.value$),yt(([t,{offset:e,amount:r}])=>Do(t,({objects:t,version:i,resetOffset:o})=>{const s=t.length<=e||o?0:e;return{items:t.slice(s,s+r).map(t=>yi(t,n)),offset:s,totalCount:t.length,hasMoreItems:s+r<t.length,version:i}})),yt(Mo),vo(t=>o.updateFrom(t)))}(t,e,n,i,function(n){const r=Object(Q.c)(e.get(Me,"form"))[0];return Po(Bo.execute(t.source.nanoflow,function(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];r&&e.push({name:n,value:"object"in r?r.object:Object(Q.b)()})}),e}(n),r)).pipe(eo(t=>t.status===si.Available?function(t,e){const n=Ct(...t.concat(e).map(t=>Jt({guid:t.getGuid()})));return ao(()=>n.subscribe(),()=>Qt(t))}(void 0!==t.value?t.value:[],[]).pipe(yt(So)):R(_o())))})});const qo=he(function(t,e,n){let r=-1;const i=new Io(t,e,n);return Ao(e,t,i.externalChange$).pipe(Dt(i.value$),(o=((t,[{forceReload:e,resetOffset:i},o])=>{const s=i?Object.assign({},o,{offset:0}):o;if(e||t.status!==si.Available){const t=++r;return No(e=>a(e,t,n),s)}return No(e=>(function(t,e,n){const r={offset:t.offset,amount:t.items.length};if(function(t,e){return e.offset>=t.offset&&e.offset+e.amount<=t.offset+t.amount}(r,e))return R(So({totalCount:t.totalCount,hasMoreItems:e.offset+e.amount<t.totalCount,offset:Math.max(t.offset,e.offset),version:t.version,items:t.items.slice(e.offset-t.offset,e.offset-t.offset+e.amount)}));if(function(t,e){return e.offset===t.offset&&e.amount>t.amount||e.offset+e.amount===t.offset+t.amount&&e.offset<t.offset}(r,e)){const i=function(t,e){return{offset:t.offset===e.offset?e.offset+e.amount:t.offset,amount:t.amount-e.amount}}(e,r);return a(i,t.version,n).pipe(yt(Co(n=>({totalCount:n.totalCount,hasMoreItems:e.offset+e.amount<n.totalCount,offset:e.offset,version:n.version,items:e.offset<r.offset?n.items.concat(t.items):t.items.concat(n.items)}))),qt(t=>t.status!==si.Loading))}return a(e,t.version,n)})(t.value,e,n),s)}),s=_o(),t=>new C(e=>{let n,r=s,i=!1,a=!1;return t.subscribe({next(t){if(a)return;let s;n&&(n.unsubscribe(),n=void 0);try{s=o(r,t)}catch(t){return e.error(t),void(a=!0)}n=s.subscribe({next(t){r=t,e.next(t)},error(t){e.error(t),a=!0},complete(){n=void 0,i&&e.complete()}})},error(t){e.error(t),n&&(n.unsubscribe(),n=void 0)},complete(){i=!0,n&&!n.closed||e.complete()}})})),ae(_o()),yt(Mo),vo(t=>i.updateFrom(t)));var o,s;function a({offset:e,amount:n},r,i){const o=t.sort?{sort:t.sort.map(t=>[t.attributePath,t.sortDirection])}:{},s=n!==Number.POSITIVE_INFINITY?{limit:n}:{};return Po(new Promise((a,c)=>mx.data.getSlice(t.entity,[],Object.assign({offset:e},s,o),!0,(t,o)=>a({items:t.map(t=>yi(t,i)),totalCount:o,hasMoreItems:e+n<o,offset:e,version:r}),c)))}});var Wo=n(18);async function Lo(t,e,n){const r=t.confirmation;if(r){if(!await new Promise(t=>mx.ui.confirmation({cancel:r.cancel,proceed:r.proceed,content:r.question,handler:()=>t(!0),onCancel:()=>t(!1)})))return}if(e.beforeExecuteAction&&e.beforeExecuteAction(),e.abortOnClientValidations)switch(t.validate){case"node":if(!e.widgetIsValid)throw new Wo.a({});break;case"view":await Object(Mr.a)(e.currentForm,"publish","validate")}const i=t.progress?mx.ui.showProgress(t.progress.message,t.progress.modal):void 0;try{await Object(Mr.a)(e.currentForm,"publish","submit");const r=e.abortOnServerValidations?e.currentForm.getSubmitObjects().map(t=>t.getGuid()):[];await mx.onlineData.executeMicroflow(t.name,function(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];r&&(e[n]="objects"in r?{guids:r.objects.map(t=>t.getGuid())}:"object"in r?{guid:r.object.getGuid()}:r)}),e}(n),e.currentForm,r,Boolean(t.async))}finally{void 0!==i&&mx.ui.hideProgress(i)}}const Ho=new $o.NanoflowEngine(Fo.executors);async function zo(t,e,n){let r;if(n)if("object"in n)r=[n.object];else{if(!("objects"in n))throw new ue.a;r=n.objects}else r=void 0;if(e.abortOnClientValidations&&await Object(Mr.a)(e.currentForm,"publish","validate"),e.abortOnServerValidations&&await Object(Mr.a)(mx.data,"validate",e.currentForm.getSubmitObjects()),r){const t=await Promise.all(r.map(i));return"objects"in n?t:t[0]}return i();async function i(n){const r=n&&t.specializations&&t.specializations[n.getEntity()]||t;return mx.ui.openForm2(r.name,n&&n.getGuid(),r.title,e.currentForm,Object.assign({},r,{formParams:e.formParams}))}}async function Yo(t,e){const n="addressAttribute"in t?await Object(Mr.a)(Object(Q.c)(e),"fetch",t.addressAttribute):t.address,r=function(t,e){switch(t){case"email":return`mailto:${escape(e)}`;case"call":return`tel:${escape(e)}`;case"text":return`sms:${escape(e)}`;default:return e}}(t.schema,n);window.open(r,"web"===t.schema?"_blank":"_self")}async function Jo(t){const e=mx.ui.showProgress(void 0,!0);try{await async function(t){try{await Object(Mr.a)(mx.data,"synchronizeOffline",{fast:t})}catch(t){if(t instanceof Je)throw t;t instanceof ze.a?mx.ui.info(Sr("mxui.sys.UI","sync_error"),!0):mx.ui.error(Sr("mxui.sys.UI","non_connection_sync_error"),!0)}}(t.fast),t.reload&&await Object(Mr.a)(mx.ui,"reload")}finally{mx.ui.hideProgress(e)}}function Ko(t,e,n,r,i){function o(t){i?i(t):t instanceof Wo.a||mx.onError(t)}mx.session.hasSomeRole(t.config.allowedRoles)?function(){switch(t.type){case"callMicroflow":return Lo(t.config,e,n);case"callNanoflow":return async function(t,e,n){e.beforeExecuteAction&&e.beforeExecuteAction(),e.abortOnClientValidations&&await Object(Mr.a)(e.currentForm,"publish","validate"),await Object(Mr.a)(e.currentForm,"publish","submit");const r=Object.keys(n).map(t=>{const e=n[t];return{name:t,value:"object"in e?e.object:Object(Q.b)()}});await Ho.execute(t.nanoflow,r,e.currentForm)}(t.config,e,n);case"cancelChanges":return async function(t,{currentForm:e}){e.setSuspend(!0);try{await Object(Mr.a)(e,"publish","rollback"),await(n=e.getSubmitObjects(),new Promise((t,e)=>{mx.data.rollback({mxobjs:n,callback:t,error:e})})),t.closePage&&await Object(Mr.a)(e,"close")}finally{e.setSuspend(!1)}var n}(t.config,e);case"closePage":return Object(Mr.a)(e.currentForm,"close");case"doNothing":return Promise.resolve();case"openLink":const r="$object"in n?"object"in n.$object?n.$object.object:Object(Q.b)():void 0;return Yo(t.config,r);case"openPage":return zo(t.config,e,n.$pageParameter).then(()=>void 0);case"saveChanges":return async function(t,{currentForm:e}){await Object(Mr.a)(e,"publish","validate"),e.setSuspend(!0);try{await Object(Mr.a)(e,"publish","submit"),await Object(Mr.a)(e,"publish","commit"),await(n=e.getSubmitObjects(),new Promise((t,e)=>{mx.data.commit({mxobjs:n,callback:t,error:e})})),t.syncAutomatically&&await Jo({fast:!0,reload:!1}),t.closePage&&await Object(Mr.a)(e,"close")}finally{e.setSuspend(!1)}var n}(t.config,e);case"signOut":return async function(){mx.session.isGuest()||(mx.ui.showProgress(void 0,!0),mx.logout())}();case"synchronize":return Jo({fast:!1,reload:!0});case"deleteObject":return async function(t,{currentForm:e},n){let r;if("object"in n)r=[n.object];else{if(!("objects"in n))throw new ue.a;r=n.objects}const i=Sr(r.length>1?"mxui.widget.DataGrid":"mxui.sys.UI","confirm_delete",r.length.toString());if(await new Promise(t=>mx.ui.confirmation({content:i,handler:()=>{t(!0)},onCancel:()=>{t(!1)}}))){e.setSuspend(!0);try{await mx.onlineData.delete(r),t.closePage&&await Object(Mr.a)(e,"close")}finally{e.setSuspend(!1)}}}(t.config,e,n.$object);case"createObject":const i="$object"in n?"object"in n.$object?n.$object.object:Object(Q.b)():void 0;return async function(t,e,n){if("association"in t&&void 0===n)throw new ue.a;const r=mx.ui.showProgress("",!1);try{const i=await new Promise((e,n)=>mx.data.create({entity:t.entity,callback:e,error:n}));t.association&&i.addReference(t.association,n.getGuid()),await zo(t.pageSettings,e,{object:i})}finally{mx.ui.hideProgress(r)}}(t.config,e,i);default:throw new ue.a}}().then(r,o):mx.session.isGuest()?mx.ui.showLogin():o(new Ye.a("Unable to execute action because you do not have sufficient permissions."))}var Xo;function Qo(){return{access:Xo.None}}!function(t){t[t.None=0]="None",t[t.Read=1]="Read",t[t.Write=2]="Write"}(Xo||(Xo={}));var Zo=n(11);class ts{constructor(t){this.mxObject=t,this.attributes={},this.references={};const e="PluginWidget",n=Jt({guid:t.getGuid(),tag:e});this.self$=n.pipe(xo(void 0),yt(()=>t.isDeleted()?Eo():So(this)));const r=mx.meta.getEntity(t.getEntity());for(const i of r.getAttributes()){const o=Ct(n,Jt({guid:t.getGuid(),attr:i,tag:e})).pipe(xo(void 0),yt(()=>es(t,i)),Zt());this.attributes[i]=o,r.isReference(i)&&(this.references[i]=o.pipe(eo(t=>t.access===Xo.None?R(Eo()):void 0===t.value?R(Eo()):Po(rs(t.value)).pipe(yt(To(t=>null===t?Eo():So(ts.from(t)))))),Zt(),Xt()))}}getGuid(){return this.mxObject.getGuid()}getEntity(){return this.mxObject.getEntity()}old(){return this.mxObject}get$(t){return Object.prototype.hasOwnProperty.call(this.attributes,t)?this.attributes[t]:Qt(Qo())}set(t,e){if(this.mxObject.isDeleted())throw new ue.a(`Cannot modify attribute ${t} of a deleted object.`);if(ns(this.mxObject,t)!==Xo.Write)throw new ue.a(`No write access to attribute ${t}`);this.mxObject.set(t,Object(Zo.c)(e))}getByPath$(t){const[e,,...n]=t.split("/"),r=n.length?n.join("/"):void 0;return Object.prototype.hasOwnProperty.call(this.references,e)?this.references[e].pipe(eo(t=>t.status===si.Available?r?t.value.getByPath$(r):t.value.self$:R(t)),Zt()):Qt(Eo())}static from(t){return t.__cached_mxObj3||(t.__cached_mxObj3=new ts(t))}static fromState$(t,e){if(void 0===t)return Qt(_o());if(t===Ae)return Qt(Eo());const n=ts.from(t);return e?n.getByPath$(e):Qt(So(n))}}function es(t,e){const n=ns(t,e);return n===Xo.None?Qo():function(t,e=Xo.Write){return{access:e,value:t}}(Object(Zo.e)(t.get(e),t.getAttributeType(e)),n)}function ns(t,e){return t.has(e)?t.isReadonlyAttr(e)?Xo.Read:Xo.Write:Xo.None}function rs(t){return new Promise((e,n)=>mx.data.get({guid:t,callback:e,error:n}))}class is{constructor(t){this.defaultConfig=t}format(t,e){return!t||isNaN(t.getTime())?"":mx.parser.formatValue(t.getTime(),"DateTime",e||this.defaultConfig)}parse(t,e){const n=mx.parser.parseValue(t,"DateTime",e||this.defaultConfig);return null===n||n&&isNaN(n.getTime())?{valid:!1}:{valid:!0,value:""!==n?n:void 0}}getFormatPlaceholder(){return mx.parser.getDateFormatPlaceholder(this.defaultConfig)}}class os{constructor(t){this.universe=t}format(t,e){const n=this.universe.find(e=>e.key===t);return n?n.caption:t?t.toString():""}parse(t,e){throw new Error("Enumeration values cannot be parsed")}getFormatPlaceholder(){}}class ss{constructor(t,e){this.attributeType=t,this.defaultConfig=e}format(t,e){return t?mx.parser.formatValue(t,this.attributeType,e||this.defaultConfig):""}parse(t,e){const n=mx.parser.parseValue(t,this.attributeType,e||this.defaultConfig);return null===n?{valid:!1}:{valid:!0,value:""!==n?n:void 0}}getFormatPlaceholder(){}}function as(t,e){switch(t){case"DateTime":return new is(e.dateFormat||{type:"date"});case"Float":case"Currency":case"Integer":case"Long":case"Decimal":return new ss(t,e.numberFormat||{groupDigits:!1});default:return{format:e=>void 0!==e?mx.parser.formatValue(Object(Zo.c)(e),t):"",parse:e=>{const n=mx.parser.parseValue(e,t);return null!==n?{valid:!0,value:Object(Zo.e)(n,t)}:{valid:!1}},getFormatPlaceholder:()=>void 0}}}var cs=n(26),us=n(27),ls=n(28),hs=n(23);class fs{constructor(t){this.baseConfig=t,this.initiatedValueChange=!1,this.customValidation$=new Tt(void 0)}onValueChangeInitiated(){this.initiatedValueChange=!0}setCustomValidation(t){this.customValidation$.next(t)}getValidation$(t,e){const n=t.pipe(Ht(t=>t.status===si.Loading),yt(t=>{const e=this.initiatedValueChange;return this.initiatedValueChange=!1,Object.assign({internal:e},t)}),Xt(),Zt(),bo(1));return J(t.pipe(Kt(Ct(n.pipe(qt(t=>t.internal)),e)),yt(t=>t.status===si.Available?this.validate(t.value):void 0),xo(void 0),te(n.pipe(qt(t=>!t.internal),po(void 0)))),t.pipe(yt(t=>t.status===si.Available?t.value.object:void 0),xo(void 0),eo(t=>(function(t,e){if(void 0===t)return R(void 0);return Jt({val:!0,guid:t.getGuid(),attr:e.attribute,tag:`Validation of ${e.friendlyId}`})})(t,this.baseConfig)),te(Ct(n,e).pipe(po(void 0)))),this.customValidation$).pipe(yt(t=>t.filter(t=>void 0!==t)),Zt())}isValid(t){return void 0===this.customValidation$.value&&void 0===this.validate(t)}}function ps(t){return{state:"parsed",value:t}}class ds extends fs{constructor(t){super(t),this.config=t}validate(t){switch(t.attr.state){case"unparsed":return function(t,e){const n=mx.meta.getEntity(e.entity).getAttributeType(e.attribute);switch(n){case"Enum":case"Boolean":case"ObjectReference":case"ObjectReferenceSet":return Sr("mendix.lib.Validations","invalid_attribute",t,e.attribute);case"DateTime":return Sr("mendix.lib.Validations","invalid_date");case"Currency":return Sr("mendix.lib.Validations","invalid_currency");case"Float":case"Integer":case"Long":case"Decimal":return Sr("mendix.lib.Validations","invalid_number");default:throw new Error(`Attribute type ${n} is not supported.`)}}(t.attr.value,this.config);case"parsed":return function(t,e){return function(t,e){const n=cr.validate(t,e);if(n!==cr.validation.OK)return Sr("mendix.lib.Validations",_r[n])}(Object(Zo.c)(t),mx.meta.getEntity(e.entity).getAttributeType(e.attribute))}(t.attr.value,this.config)||(this.config.validation?function(t,e,n){const r=new hs.a({currentObject:()=>e.old(),value:()=>Object(Zo.d)(t)});if(!gs.evaluate(n.expression,r))return n.message||Sr("mendix.lib.Validations","required_field");return}(t.attr.value,t.object,this.config.validation):void 0)}}}const gs=new cs.a(us.a,Object(ls.a)(()=>new Date));function ms(t){mx.logger.debug(`Widget ${t.friendlyId} is attempting to change the value of attribute "${t.attribute}" of entity "${t.entity}" which is not available.`)}function bs(t){mx.logger.debug(`Widget ${t.friendlyId} is attempting to change the value of attribute "${t.attribute}" of entity "${t.entity}" which is not writable.`)}const ys=he(function(t,e,n){const r=function(t,e,n){const r=mx.meta.getEntity(t),i=r.getAttributeType(e);return i?"Enum"===i?new os(r.getEnumMap(e)):as(i,n):{format:()=>"",parse:()=>{throw new Error("Cannot parse values for unresolved attribute")},getFormatPlaceholder:()=>void 0}}(t.entity,t.attribute,t),i=function(t){const e=mx.meta.getEntity(t.entity);switch(e.getAttributeType(t.attribute)){case"Enum":return e.getEnumMap(t.attribute).map(t=>t.key);case"Boolean":return[!0,!1];default:return}}(t),o=new ds(t),s=new Tt(r.defaultConfig),a=new it;return ao(()=>({unsubscribe:function(){e.set(n,"isInvalid",!1)}}),()=>{const u=function(){const n=e.get$(t.scope,"object").pipe(eo(e=>ts.fromState$(e,t.path)),Zt(),eo(e=>e.status===si.Available?e.value.get$(t.attribute).pipe(yt(t=>So({object:e.value,attr:t}))):R(e))),r=e.get$(Me,"subtreeReadonly").pipe(yt(Boolean)),i=J(n,r).pipe(yt(([e,n])=>ko(e,({object:e,attr:r})=>{if(r.access===Xo.None)return Eo();const i=r.access===Xo.Read||n||t.readOnly;return So({object:e,readOnly:i,submitted:r.value,unsubmitted:void 0})})));return Ct(i,a.pipe(Dt(i),yt(([t,e])=>e.status===si.Available?So(Object.assign({},e.value,{unsubmitted:t})):Object(Q.b)())))}();return J(u,function(t){const r=t.pipe(yt(Co(t=>({object:t.object,attr:t.unsubmitted||ps(t.submitted)})))),i=e.get$(Me,"validationRequest").pipe(bo(1),po(void 0));return o.getValidation$(r,i).pipe(vo(t=>{e.set(n,"isInvalid",t.length>0)}))}(u),s).pipe(yt(([e,n,u])=>{const l={status:e.status,formatter:r,validation:n,universe:i,setFormatting:oe(t=>s.next(t)),setValidation:oe(t=>o.setCustomValidation(t))};if(e.status!==si.Available)return Object.assign({},l,{value:void 0,displayValue:"",readOnly:!0,setValue:()=>ms(t),setTextValue:()=>ms(t)});const{submitted:h,unsubmitted:f,readOnly:p}=e.value;let d;if(void 0===f||"parsed"===f.state){const t=f?f.value:h;d={value:t,displayValue:r.format(t,u)}}else d={value:void 0,displayValue:f.value};return p?Object.assign({},l,d,{readOnly:!0,setValue:()=>bs(t),setTextValue:()=>bs(t)}):Object.assign({},l,d,{readOnly:!1,setValue:oe(t=>c(e.value,t)),setTextValue:oe(t=>(function(t,e,n){const i=r.parse(e,n);i.valid?c(t,i.value):(o.onValueChangeInitiated(),a.next({state:"unparsed",value:e}))})(e.value,t,u)),setValidation:oe(t=>(function(t,e){if(o.setCustomValidation(e),void 0!==t.unsubmitted&&o.isValid({object:t.object,attr:t.unsubmitted})){if("parsed"!==t.unsubmitted.state)throw new ue.a;c(t,t.unsubmitted.value)}})(e.value,t))})}))});function c(n,r){const i=Object(Zo.a)(r,t.entity,t.attribute),s=Z(i,n.submitted);!o.isValid({object:n.object,attr:ps(i)})||void 0!==n.unsubmitted&&s?(o.onValueChangeInitiated(),a.next(ps(r))):s||(o.onValueChangeInitiated(),n.object.set(t.attribute,i),function(){const n={};for(const r of Object.keys(t.onChange.argMap)){const i=e.get(t.onChange.argMap[r].widget,"object");if(!i||"unavailable"===i)return;n[r]={object:i}}Ko(t.onChange,{abortOnClientValidations:!0,abortOnServerValidations:!1,widgetIsValid:!0,currentForm:Object(Q.c)(e.get(Me,"form"))[0]},n)}())}});const ws=he(function(t,e,n){const r=new Tt(0),i=r.pipe(yt(t=>t>0));return J(Go(t.action.argMap,e),i).pipe(Zt(),yt(([i,o])=>{const s=Object.values(i).every(t=>void 0!==t);return{canExecute:s,isExecuting:o,execute:s?oe(()=>(function(i){if(Object.keys(i).some(e=>{const n=i[e];return"selection"===t.action.argMap[e].source&&"objects"in n&&0===n.objects.length}))return void mx.ui.info(Sr("mxui.widget.DataGrid","no_selection"),!1);const o=e.get(n,"isInvalid"),s=Object(Q.c)(e.get(Me,"form"))[0];r.next(r.value+1),Ko(t.action,{abortOnClientValidations:!0,abortOnServerValidations:t.abortOnServerValidation,widgetIsValid:!o,currentForm:s},i,()=>{r.next(r.value-1)},t=>{r.next(r.value-1),t instanceof Wo.a||mx.onError(t)})})(i)):()=>mx.logger.debug(`Widget is attempting to execute a ${t.action.type} action which is not executable.`)}}))});function vs(t,e){const n=t.parameters||{},r=t.formats||{};return e.pipe(eo(e=>{return ee(t.elements.map(t=>"string"==typeof t?R(So(t)):function(t,e,n){const{attribute:r,entityPath:i}=Object(Q.j)(e);return(t?i?t.getByPath$(i):R(So(t)):R(_o())).pipe(eo(t=>t.status===si.Available?t.value.get$(r).pipe(yt(e=>e.access===Xo.None?Eo():So(function(t,e,n,r){const i=mx.meta.getEntity(t),o=i.getAttributeType(e),s=Object(Zo.c)(n);return"Enum"===o?i.getEnumCaption(e,s):mx.parser.formatValue(s,o,r)}(t.value.getEntity(),r,e.value,n)))):Qt(t)))}(e,n[t.toString()],r[t.toString()])))}),yt(t=>t.some(t=>t.status===si.Loading)?_o():So(t.map(t=>t.status===si.Available?t.value:"").join(""))))}const js=t=>{const e=function(t){return t.elements.every(t=>"string"==typeof t)?So(t.elements.join("")):_o()}(t.template);return e.status===si.Available?Mo(e):pe(e=>{const n=void 0!==t.scope?e.get$(t.scope,"object").pipe(yt(t=>t&&"unavailable"!==t?ts.from(t):void 0)):R(void 0);return vs(t.template,n).pipe(yt(Mo))})};const Os=he(function({widgetId:t,slot:e,type:n,initialValue:r},i){void 0===i.get(t,e)&&void 0!==r&&i.set(t,e,"number"==typeof r?ke(r):r);const o=as(n,{}),s=i.get$(t,e).pipe(yt(t=>({type:"submitted",value:t}))),a=new it,c=new Tt(o.defaultConfig),u=new Tt(void 0);return J(Ct(s,a),c,u).pipe(yt(([t,e,r])=>({status:si.Available,validation:(void 0!==r?[r]:[]).concat("unparsed"===t.type?[function(t){switch(t){case"String":case"Boolean":case"ObjectReferenceSet":return Sr("mendix.lib.Validations","invalid_value");case"Decimal":return Sr("mendix.lib.Validations","invalid_number")}}(n)]:[]),universe:void 0,readOnly:!1,formatter:o,value:"unparsed"!==t.type?t.value:void 0,displayValue:"unparsed"!==t.type?o.format(t.value,e):t.value,setValue:oe(t=>l(t,Boolean(r))),setTextValue:oe(t=>(function(t,e,n){const r=o.parse(t,e);r.valid?l(r.value,n):a.next({type:"unparsed",value:t})})(t,e,Boolean(r))),setFormatting:oe(t=>c.next(t)),setValidation:oe(e=>(function(t,e){t!==u.value&&u.next(t),t||"unsubmitted"!==e.type||l(e.value,!1)})(e,t))})));function l(r,o){r=Object(Zo.b)(r,n),o?a.next({type:"unsubmitted",value:r}):i.set(t,e,r)}});const xs=he(function(t,e){return e.get$(t.scope,"object").pipe(eo(t=>ts.fromState$(t)),eo(e=>{if(e.status!==si.Available)return R(e);const n=(t.showAsThumbnail?Fr:Vr)+e.value.getGuid();return Po((new gn).readAsDataURL(n)).pipe(yt(t=>{const e=t.status===si.Available&&t.value;return e?So(t=>Object(r.createElement)(je.Image,Object.assign({source:{uri:e}},t))):Eo()}))}),yt(Mo))});var _s=n(39),Es=n(40);const Ss=new cs.a(us.a,Object(ls.a)(()=>new Date));class Cs extends Error{constructor(){super(),Object.setPrototypeOf(this,Cs.prototype)}}const Ts=t=>{const e=function(t){const e=new hs.a({pageTitle:()=>{throw new Cs},currentObject:()=>{throw new Cs}});try{return So(Ss.evaluate(t,e))}catch(t){return _o()}}(t.expression);return e.status===si.Available?Mo(e):pe(e=>J(e.get$(t.scope,"object"),e.get$(Me,"form")).pipe(eo(([e,n])=>(function t(e,n,r){const i=new hs.a({pageTitle:()=>n.getTitle(),currentObject:()=>{if(!e||e===Ae)throw new Cs;return e}});try{const o=Ss.evaluate(r,i),s=Ct(...i.getDependencies().map(t=>Jt(t)));return Et(R(So(o)),s.pipe(lo(1),eo(()=>t(e,n,r))))}catch(t){if(t instanceof Es.a||t instanceof _s.a||t instanceof Cs)return R(_o());throw t}})(e,Object(Q.c)(n)[0],t.expression)),Zt(),yt(Mo)))};function Ds(t){if(!t.icon)return null;switch(t.icon.type){case"glyph":return Object(r.createElement)(Se,{name:String(t.icon&&t.icon.iconClass),color:t.color,size:t.size});case"image":return Object(r.createElement)(je.Image,{testID:`${t.name}`,style:[{resizeMode:"contain",width:t.size,height:t.size}],source:t.icon.iconUrl})}}const ks=t=>Object(r.createElement)(je.View,{testID:t.name},Object(r.createElement)(Ds,Object.assign({},t)));const Ps=he(function(t){return Qt(e=>Object(r.createElement)(ks,Object.assign({icon:t.icon},e)))});n.d(e,"asPluginWidget",function(){return we}),n.d(e,"NativeUI",function(){return qe}),n.d(e,"startApp",function(){return ui}),n.d(e,"Text",function(){return li}),n.d(e,"Button",function(){return mi}),n.d(e,"NativeList",function(){return vi}),n.d(e,"Container",function(){return ji}),n.d(e,"Image",function(){return Oi}),n.d(e,"DropDown",function(){return Pi}),n.d(e,"CheckBox",function(){return Mi}),n.d(e,"TextBox",function(){return Ni}),n.d(e,"TextArea",function(){return Ii}),n.d(e,"ScrollContainer",function(){return Ri}),n.d(e,"DatePicker",function(){return Bi}),n.d(e,"NativeDynamicImage",function(){return Xi}),n.d(e,"Title",function(){return Qi}),n.d(e,"ClickableArea",function(){return Zi}),n.d(e,"ConditionalVisibilityWrapper",function(){return to}),n.d(e,"NanoflowObjectListProperty",function(){return Uo}),n.d(e,"OfflineObjectListProperty",function(){return qo}),n.d(e,"EditableAttributeProperty",function(){return ys}),n.d(e,"ActionProperty",function(){return ws}),n.d(e,"DynamicTextProperty",function(){return js}),n.d(e,"WidgetVariableProperty",function(){return Os}),n.d(e,"NativeDynamicImageProperty",function(){return xs}),n.d(e,"ExpressionProperty",function(){return Ts}),n.d(e,"NativeIconProperty",function(){return Ps})},function(t,e,n){n.r(e);var r=n(25),i=n(18),o=n(3);async function s(t){for(const e of t.instructions||[])switch(e.type){case"logout":mx.logout();break;case"show_login":mx.ui.showLogin();break;case"download_file":const t=await new Promise((t,n)=>mx.data.get({guid:e.args.FileDocumentGuid,callback:t,error:n}));mx.ui.downloadFile({mxobject:Object(o.c)(t),target:e.args.Target});break;case"text_message":mx.ui[e.args.MessageType](e.args.MessageContent,e.args.MessageBlock)}}var a=n(7);function c(t,e){const n=Object.entries(e.changes||{}).map(([t,e])=>Object.keys(e).map(e=>({guid:t,attr:e}))),r=Object.entries(e.resets||{}).map(([t,e])=>e.map(e=>({guid:t,attr:e}))),i=(e.objects||[]).map(e=>{const n=t.getObject(e.guid);return null!==n?function(t,e){const n=mx.meta.getEntity(e.objectType),r=a.MxObject.fromJson(e);return n.getAttributes().filter(e=>!function(t,e,n){if(t.isReadonlyAttr(n)!==e.isReadonlyAttr(n))return!1;if(t.isReference(n)){if("System.changedBy"===n||"System.owner"===n)return!0;const r=t.getOriginalReferences(n).sort().join(","),i=e.getOriginalReferences(n).sort().join(",");return r===i}const r=t.getOriginalValue(n),i=e.getOriginalValue(n);return r===i||null!==r&&null!==i&&r.valueOf&&i.valueOf&&r.valueOf()===i.valueOf()}(t,r,e))}(n,e).map(t=>({guid:e.guid,attr:t})):[]}),s=Object(o.l)(Object(o.a)((e.instructions||[]).map(u)).concat(e.deletes||[]));return[...Object(o.m)(Object(o.a)([...n,...r,...i]),t=>`${t.guid}:${t.attr}`).map(({guid:t,attr:e})=>({guid:t,attr:e})).filter(({guid:e})=>!s.includes(e)&&t.has(e)),...s.filter(e=>t.has(e)).map(t=>({guid:t})),...Object(o.l)(Object(o.a)((e.instructions||[]).map(t=>"refresh_class"===t.type?t.args.classnames:[]))).map(t=>({entity:t}))]}function u(t){return"refresh_object_list"===t.type?t.args.ObjectIds:[]}async function l(t,e,n){const r=c(t,e);!function(t,e){const{objects:n=[],changes:r={},newpersistable:i=[],commits:o=[],deletes:s=[],resets:a={}}=e;t.removeChanges(a),t.addChanges(r);const c=n.filter(e=>(function(e){return!t.has(e.guid)})(e)).filter(t=>!function(t){return mx.meta.getEntity(t.objectType).isPersistable()}(t)?!o.includes(t.guid):i.includes(t.guid)).map(t=>t.guid);t.onCreate(c),t.onDelete(s),t.onCommit(o),t.setMxObjects(n)}(t,e),function(t,e){if((t.instructions||[]).some(t=>"close"===t.type)){const t=Object(o.c)(e);t.setSuspend(!0),t.close(()=>{t.setSuspend(!1)},e=>{t.setSuspend(!1),mx.onError(e)})}}(e,n),await Promise.all(r.map(t=>mx.data.update2(t))),await async function(t,e){for(const n of t.instructions||[])"open_form"===n.type&&await mx.ui.openForm2(n.args.FormPath,n.args.FormGuid,n.args.FormTitle,e,{location:n.args.FormTarget,width:n.args.FormWidth,height:n.args.FormHeight,resizable:n.args.FormResizable})}(e,n),await s(e),f(e)}async function h(t,e,n){if(e instanceof i.a){const r=e.original,i=c(t,r).filter(t=>!("attr"in t));await Promise.all(i.map(t=>mx.data.update2(t))),await s(r),f(r,n)}}function f(t,e){const n=r.a.fromResponse(t.datavalidation||[]);mx.data.sendValidationUpdates(n),n.length>0&&e&&e(n)}n.d(e,"handleRuntimeSuccess",function(){return l}),n.d(e,"handleRuntimeError",function(){return h})}]);