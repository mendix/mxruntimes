module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=112)}([function(t,e,n){n.r(e),n.d(e,"AssertionError",function(){return r});class r extends Error{constructor(t="Unexpected error occurred, please contact your system administrator."){super(t),Object.setPrototypeOf(this,r.prototype)}}},function(t,e){t.exports=require("react-native")},function(t,e){t.exports=require("react")},function(t,e,n){n.d(e,"a",function(){return u});var r=n(6),i=n(32),o=36e5,s=6e4,a=2,c={dateTimeDelimeter:/[T ]/,plainTime:/:/,timeZoneDelimeter:/[Z ]/i,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-])(\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function u(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===t)return new Date(NaN);var n=e||{},u=null==n.additionalDigits?a:Object(r.a)(n.additionalDigits);if(2!==u&&1!==u&&0!==u)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))return new Date(t.getTime());if("number"==typeof t||"[object Number]"===Object.prototype.toString.call(t))return new Date(t);if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var h=function(t){var e,n={},r=t.split(c.dateTimeDelimeter);c.plainTime.test(r[0])?(n.date=null,e=r[0]):(n.date=r[0],e=r[1],c.timeZoneDelimeter.test(n.date)&&(n.date=t.split(c.timeZoneDelimeter)[0],e=t.substr(n.date.length,t.length)));if(e){var i=c.timezone.exec(e);i?(n.time=e.replace(i[1],""),n.timezone=i[1]):n.time=e}return n}(t),f=function(t,e){var n,r=c.YYY[e],i=c.YYYYY[e];if(n=c.YYYY.exec(t)||i.exec(t)){var o=n[1];return{year:parseInt(o,10),restDateString:t.slice(o.length)}}if(n=c.YY.exec(t)||r.exec(t)){var s=n[1];return{year:100*parseInt(s,10),restDateString:t.slice(s.length)}}return{year:null}}(h.date,u),y=f.year,v=function(t,e){if(null===e)return null;var n,r,i,o;if(0===t.length)return(r=new Date(0)).setUTCFullYear(e),r;if(n=c.MM.exec(t))return r=new Date(0),i=parseInt(n[1],10)-1,d(e,i)?(r.setUTCFullYear(e,i),r):new Date(NaN);if(n=c.DDD.exec(t)){r=new Date(0);var s=parseInt(n[1],10);return function(t,e){if(e<1)return!1;var n=p(t);if(n&&e>366)return!1;if(!n&&e>365)return!1;return!0}(e,s)?(r.setUTCFullYear(e,0,s),r):new Date(NaN)}if(n=c.MMDD.exec(t)){r=new Date(0),i=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return d(e,i,a)?(r.setUTCFullYear(e,i,a),r):new Date(NaN)}if(n=c.Www.exec(t))return o=parseInt(n[1],10)-1,g(e,o)?l(e,o):new Date(NaN);if(n=c.WwwD.exec(t)){o=parseInt(n[1],10)-1;var u=parseInt(n[2],10)-1;return g(e,o,u)?l(e,o,u):new Date(NaN)}return null}(f.restDateString,y);if(isNaN(v))return new Date(NaN);if(v){var w,O=v.getTime(),_=0;if(h.time&&(_=function(t){var e,n,r;if(e=c.HH.exec(t))return m(n=parseFloat(e[1].replace(",",".")))?n%24*o:NaN;if(e=c.HHMM.exec(t))return n=parseInt(e[1],10),r=parseFloat(e[2].replace(",",".")),m(n,r)?n%24*o+r*s:NaN;if(e=c.HHMMSS.exec(t)){n=parseInt(e[1],10),r=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return m(n,r,i)?n%24*o+r*s+1e3*i:NaN}return null}(h.time),isNaN(_)))return new Date(NaN);if(h.timezone){if(w=function(t){var e,n,r;if(e=c.timezoneZ.exec(t))return 0;if(e=c.timezoneHH.exec(t))return b(r=parseInt(e[2],10))?(n=r*o,"+"===e[1]?-n:n):NaN;if(e=c.timezoneHHMM.exec(t)){r=parseInt(e[2],10);var i=parseInt(e[3],10);return b(r,i)?(n=r*o+i*s,"+"===e[1]?-n:n):NaN}return 0}(h.timezone),isNaN(w))return new Date(NaN)}else w=Object(i.a)(new Date(O+_)),w=Object(i.a)(new Date(O+_+w));return new Date(O+_+w)}return new Date(NaN)}function l(t,e,n){e=e||0,n=n||0;var r=new Date(0);r.setUTCFullYear(t,0,4);var i=7*e+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}var h=[31,28,31,30,31,30,31,31,30,31,30,31],f=[31,29,31,30,31,30,31,31,30,31,30,31];function p(t){return t%400==0||t%4==0&&t%100!=0}function d(t,e,n){if(e<0||e>11)return!1;if(null!=n){if(n<1)return!1;var r=p(t);if(r&&n>f[e])return!1;if(!r&&n>h[e])return!1}return!0}function g(t,e,n){return!(e<0||e>52)&&(null==n||!(n<0||n>6))}function m(t,e,n){return(null==t||!(t<0||t>=25))&&((null==e||!(e<0||e>=60))&&(null==n||!(n<0||n>=60)))}function b(t,e){return null==e||!(e<0||e>59)}},function(t,e,n){n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"e",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"g",function(){return l}),n.d(e,"h",function(){return h});var r=n(0);function i(t){if(null==t)throw new Error("Did not expect an argument to be undefined");return t}function o(){throw new r.AssertionError}function s(t){return t.displayName||t.name||"<component>"}function a(t){return"string"==typeof t}function c(t){return null!=t&&"object"==typeof t&&t.constructor==={}.constructor}function u(t,e){return e instanceof Array&&e.every(e=>void 0===e||e instanceof t)}function l(t){return t instanceof Array&&t.every(t=>void 0===t||"string"==typeof t)}function h(t){const e=t.split("/");return e.length>1&&e.shift(),{attribute:e.pop(),entityPath:e.length?e.join("/"):void 0}}},function(t,e,n){var r;!function(i){var o,s=20,a=1,c=-7,u=21,l={},h=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function f(t,e,n){var r=t.constructor,i=e-(t=new r(t)).e,o=t.c;for(o.length>++e&&p(t,i,r.RM),o[0]?n?i=e:(o=t.c,i=t.e+i+1):++i;o.length<i;o.push(0));return i=t.e,1===n||n&&(e<=i||i<=c)?(t.s<0&&o[0]?"-":"")+(o.length>1?o[0]+"."+o.join("").slice(1):o[0])+(i<0?"e":"e+")+i:t.toString()}function p(t,e,n,r){var i,o=t.c,s=t.e+e+1;if(1===n?r=o[s]>=5:2===n?r=o[s]>5||5==o[s]&&(r||s<0||o[s+1]!==i||1&o[s-1]):3===n?r=r||o[s]!==i||s<0:(r=!1,0!==n&&d("!Big.RM!")),s<1||!o[0])r?(t.e=-e,t.c=[1]):t.c=[t.e=0];else{if(o.length=s--,r)for(;++o[s]>9;)o[s]=0,s--||(++t.e,o.unshift(1));for(s=o.length;!o[--s];o.pop());}return t}function d(t){var e=new Error(t);throw e.name="BigError",e}l.abs=function(){var t=new this.constructor(this);return t.s=1,t},l.cmp=function(t){var e,n=this,r=n.c,i=(t=new n.constructor(t)).c,o=n.s,s=t.s,a=n.e,c=t.e;if(!r[0]||!i[0])return r[0]?o:i[0]?-s:0;if(o!=s)return o;if(e=o<0,a!=c)return a>c^e?1:-1;for(o=-1,s=(a=r.length)<(c=i.length)?a:c;++o<s;)if(r[o]!=i[o])return r[o]>i[o]^e?1:-1;return a==c?0:a>c^e?1:-1},l.div=function(t){var e=this,n=e.constructor,r=e.c,i=(t=new n(t)).c,o=e.s==t.s?1:-1,s=n.DP;if((s!==~~s||s<0||s>1e6)&&d("!Big.DP!"),!r[0]||!i[0])return r[0]==i[0]&&d(NaN),i[0]||d(o/0),new n(0*o);var a,c,u,l,h,f,g=i.slice(),m=a=i.length,b=r.length,y=r.slice(0,a),v=y.length,w=t,O=w.c=[],_=0,j=s+(w.e=e.e-t.e)+1;for(w.s=o,o=j<0?0:j,g.unshift(0);v++<a;y.push(0));do{for(u=0;u<10;u++){if(a!=(v=y.length))l=a>v?1:-1;else for(h=-1,l=0;++h<a;)if(i[h]!=y[h]){l=i[h]>y[h]?1:-1;break}if(!(l<0))break;for(c=v==a?i:g;v;){if(y[--v]<c[v]){for(h=v;h&&!y[--h];y[h]=9);--y[h],y[v]+=10}y[v]-=c[v]}for(;!y[0];y.shift());}O[_++]=l?u:++u,y[0]&&l?y[v]=r[m]||0:y=[r[m]]}while((m++<b||y[0]!==f)&&o--);return O[0]||1==_||(O.shift(),w.e--),_>j&&p(w,s,n.RM,y[0]!==f),w},l.eq=function(t){return!this.cmp(t)},l.gt=function(t){return this.cmp(t)>0},l.gte=function(t){return this.cmp(t)>-1},l.lt=function(t){return this.cmp(t)<0},l.lte=function(t){return this.cmp(t)<1},l.minus=function(t){var e,n,r,i,o=this,s=o.constructor,a=o.s,c=(t=new s(t)).s;if(a!=c)return t.s=-c,o.plus(t);var u=o.c.slice(),l=o.e,h=t.c,f=t.e;if(!u[0]||!h[0])return h[0]?(t.s=-c,t):new s(u[0]?o:0);if(a=l-f){for((i=a<0)?(a=-a,r=u):(f=l,r=h),r.reverse(),c=a;c--;r.push(0));r.reverse()}else for(n=((i=u.length<h.length)?u:h).length,a=c=0;c<n;c++)if(u[c]!=h[c]){i=u[c]<h[c];break}if(i&&(r=u,u=h,h=r,t.s=-t.s),(c=(n=h.length)-(e=u.length))>0)for(;c--;u[e++]=0);for(c=e;n>a;){if(u[--n]<h[n]){for(e=n;e&&!u[--e];u[e]=9);--u[e],u[n]+=10}u[n]-=h[n]}for(;0==u[--c];u.pop());for(;0==u[0];)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t},l.mod=function(t){var e,n=this,r=n.constructor,i=n.s,o=(t=new r(t)).s;return t.c[0]||d(NaN),n.s=t.s=1,e=1==t.cmp(n),n.s=i,t.s=o,e?new r(n):(i=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=i,r.RM=o,this.minus(n.times(t)))},l.plus=function(t){var e,n=this,r=n.constructor,i=n.s,o=(t=new r(t)).s;if(i!=o)return t.s=-o,n.minus(t);var s=n.e,a=n.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]?t:new r(a[0]?n:0*i);if(a=a.slice(),i=s-c){for(i>0?(c=s,e=u):(i=-i,e=a),e.reverse();i--;e.push(0));e.reverse()}for(a.length-u.length<0&&(e=u,u=a,a=e),i=u.length,o=0;i;)o=(a[--i]=a[i]+u[i]+o)/10|0,a[i]%=10;for(o&&(a.unshift(o),++c),i=a.length;0==a[--i];a.pop());return t.c=a,t.e=c,t},l.pow=function(t){var e=this,n=new e.constructor(1),r=n,i=t<0;for((t!==~~t||t<-1e6||t>1e6)&&d("!pow!"),t=i?-t:t;1&t&&(r=r.times(e)),t>>=1;)e=e.times(e);return i?n.div(r):r},l.round=function(t,e){var n=this,r=n.constructor;return null==t?t=0:(t!==~~t||t<0||t>1e6)&&d("!round!"),p(n=new r(n),t,null==e?r.RM:e),n},l.sqrt=function(){var t,e,n,r=this,i=r.constructor,o=r.c,s=r.s,a=r.e,c=new i("0.5");if(!o[0])return new i(r);s<0&&d(NaN),0==(s=Math.sqrt(r.toString()))||s==1/0?((t=o.join("")).length+a&1||(t+="0"),(e=new i(Math.sqrt(t).toString())).e=((a+1)/2|0)-(a<0||1&a)):e=new i(s.toString()),s=e.e+(i.DP+=4);do{n=e,e=c.times(n.plus(r.div(n)))}while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return p(e,i.DP-=4,i.RM),e},l.times=function(t){var e,n=this,r=n.constructor,i=n.c,o=(t=new r(t)).c,s=i.length,a=o.length,c=n.e,u=t.e;if(t.s=n.s==t.s?1:-1,!i[0]||!o[0])return new r(0*t.s);for(t.e=c+u,s<a&&(e=i,i=o,o=e,u=s,s=a,a=u),e=new Array(u=s+a);u--;e[u]=0);for(c=a;c--;){for(a=0,u=s+c;u>c;)a=e[u]+o[c]*i[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=(e[u]+a)%10}for(a&&++t.e,e[0]||e.shift(),c=e.length;!e[--c];e.pop());return t.c=e,t},l.toString=l.valueOf=l.toJSON=function(){var t=this,e=t.e,n=t.c.join(""),r=n.length;if(e<=c||e>=u)n=n.charAt(0)+(r>1?"."+n.slice(1):"")+(e<0?"e":"e+")+e;else if(e<0){for(;++e;n="0"+n);n="0."+n}else if(e>0)if(++e>r)for(e-=r;e--;n+="0");else e<r&&(n=n.slice(0,e)+"."+n.slice(e));else r>1&&(n=n.charAt(0)+"."+n.slice(1));return t.s<0&&t.c[0]?"-"+n:n},l.toExponential=function(t){return null==t?t=this.c.length-1:(t!==~~t||t<0||t>1e6)&&d("!toExp!"),f(this,t,1)},l.toFixed=function(t){var e,n=this,r=c,i=u;return c=-(u=1/0),null==t?e=n.toString():t===~~t&&t>=0&&t<=1e6&&(e=f(n,n.e+t),n.s<0&&n.c[0]&&e.indexOf("-")<0&&(e="-"+e)),c=r,u=i,e||d("!toFix!"),e},l.toPrecision=function(t){return null==t?this.toString():((t!==~~t||t<1||t>1e6)&&d("!toPre!"),f(this,t-1,2))},o=function t(){function e(n){var r=this;if(!(r instanceof e))return void 0===n?t():new e(n);n instanceof e?(r.s=n.s,r.e=n.e,r.c=n.c.slice()):function(t,e){var n,r,i;for(0===e&&1/e<0?e="-0":h.test(e+="")||d(NaN),t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;"0"==e.charAt(r);r++);if(r==(i=e.length))t.c=[t.e=0];else{for(;"0"==e.charAt(--i););for(t.e=n-r-1,t.c=[],n=0;r<=i;t.c[n++]=+e.charAt(r++));}}(r,n),r.constructor=e}return e.prototype=l,e.DP=s,e.RM=a,e}(),void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){function r(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}n.d(e,"a",function(){return r})},function(t,e,n){n.r(e),n.d(e,"MxObject",function(){return h});var r=n(0),i=n(5),o=n.n(i),s=n(9),a=n.n(s),c=n(17),u=n.n(c);const l=Symbol("snapshot");class h{constructor(t){if(this._guid="0",this._deleted=!1,this.metaData=null,this.jsonData=null,this.id="mendix.lib.MxObject",!(t.meta&&t.json&&t.json.objectType)){var e=this.metaData&&this.metaData.getEntity();throw new Error("new MxObject(): cannot create Mendix object.  Check entity access"+(e?" for entity "+e:""))}this.metaData=t.meta,this._setJsonData(t.json),this.id+="("+this.jsonData.objectType+":"+this._guid+")"}resetFromJSON(t){this._setJsonData(t)}markDeleted(){this._setJsonData({guid:this._guid,attributes:{}}),this._deleted=!0}_setJsonData(t){for(var e in this.jsonData=t,this._guid=t.guid,t.attributes)this._setAttributeValue(e,this._getAttributeValue(e))}getGuid(){return this._guid}hasChanges(){return!a.a.objectIsEmpty(window.mx.data.getChanges(this._guid))}snapshot(){return this[l]||(this[l]=new(n(96).MxObjectSnapshot)(this))}isDeleted(){return this._deleted}set(t,e){this._setContent(t,e)}isReadonlyAttr(t){return this.has(t)?!!this.jsonData.attributes[t].readonly:!this.metaData.has(t)}fetch(t,e,n){let i;i=t?t instanceof Array?t.slice():t.split("/"):[],this.isA(i[0])&&i.shift();let o=this;const s=()=>{if(0===i.length)e(o);else if(1===i.length)e(o.get(i[0]));else{const t=i.shift(),n=i.shift();o._fetchReference(t,n,t=>{void 0===t?e(null):Array.isArray(t)?0===i.length?e(t):a(new r.AssertionError(this.id+".fetch : "+o+" reference set should be last reference in path")):(o=t,s())},a)}};function a(t){n?n(t):window.mx.onError(t)}s()}_fetchReference(t,e,n,r){const i=this.getReferences(t);0!==i.length?window.mx.data.get({guids:i,callback:r=>{if(this.isObjectReferenceSet(t))0===r.length||r[0].isA(e)?n(r):n(void 0);else{const t=r[0];t&&t.isA(e)?n(t):n(void 0)}},error:r}):n(void 0)}get(t){if("string"!=typeof t)throw new r.AssertionError("parameter attr "+t+" is not of type String");return this.has(t)?this._convertToClientValue(t,this._getRawValue(t)):null}getOriginalValue(t){if("string"!=typeof t)throw new r.AssertionError("parameter attr "+t+" is not of type String");return this.has(t)?this._convertToClientValue(t,this._getRawOriginalValue(t)):null}has(t){if("string"!=typeof t)throw new r.AssertionError("attribute parameter is not a string");return Object.prototype.hasOwnProperty.call(this.jsonData.attributes,t)}getReferences(t){if("string"!=typeof t)throw new r.AssertionError("parameter attr "+t+" is not of type String.");if(!this.has(t))return[];if(!this.isReference(t))throw new r.AssertionError("attribute "+t+" is not an ObjectReference(Set).");const e=this._getRawValue(t);return this.isObjectReference(t)?null==e?[]:[e]:null==e?[]:e.slice()}getOriginalReferences(t){if("string"!=typeof t)throw new r.AssertionError("parameter attr "+t+" is not of type String.");if(!this.has(t))return[];if(!this.isReference(t))throw new r.AssertionError("attribute "+t+" is not an ObjectReference(Set).");const e=this._getRawOriginalValue(t);return this.isObjectReference(t)?null==e?[]:[e]:null==e?[]:e.slice()}getReference(t){return this.get(t)}isEnum(t){return this.metaData.isEnum(t)}isNumeric(t){return this.metaData.isNumeric(t)}isCurrency(t){return this.metaData.isCurrency(t)}isPassword(t){return this.metaData.isPassword(t)}isDate(t){return this.metaData.isDate(t)}isLocalizedDate(t){return this.metaData.isLocalizedDate(t)}isBoolean(t){return this.metaData.isBoolean(t)}isReference(t){return this.metaData.isReference(t)}isObjectReference(t){return this.metaData.isObjectReference(t)}isObjectReferenceSet(t){return this.metaData.isObjectReferenceSet(t)}getOptions(t){return this.metaData.getOptions(t)}getEnumMap(t){return this.metaData.getEnumMap(t)}getEnumKVPairs(t){return this.metaData.getEnumKVPairs(t)}getEnumCaption(t){return this.metaData.getEnumCaption(t,this.get(t))}hasChildren(t){if("string"!=typeof t)throw new r.AssertionError("parameter attr ("+t+") is not of type String.");return!this._attributeChanged(t)&&this._hasChildren(t)}getChildren(t){if("string"!=typeof t)throw new r.AssertionError("parameter attr ("+t+") is not of type String.");if(!this.has(t))return[];if(!this.isReference(t))throw new r.AssertionError("attribute "+t+" is not an ObjectReference(Set).");return this._attributeChanged(t)?[]:this._hasChildren(t)?this._getChildren(t):[]}getChild(t){if("string"!=typeof t)throw new r.AssertionError("parameter attr("+t+") is not of type String.");if(!this.has(t))return;if(!this.isObjectReference(t))throw new r.AssertionError("attribute "+t+" is not an ObjectReference.");const e=this.getChildren(t);return 0===e.length?null:e[0]}removeReferences(t,e){if("string"!=typeof t)throw new r.AssertionError("parameter attr is not of type String.");if(!this.has(t))return!1;if(!this.isReference(t))throw new r.AssertionError("attempt to remove Reference from non-Reference attribute : "+t);if(Array.isArray(e)||(e=[e]),this._attributeChanged(t)||!this._hasChildren(t))this.isObjectReference(t)?this._setContent(t,null):this._setContent(t,a.a.arraySubtract(this.getReferences(t),e));else{if(!this.isObjectReference(t)){for(var n=0;n<e.length;n++)delete this.jsonData.attributes[t].value[e[n]];var i=a.a.arraySubtract(this.getReferences(t),e);return this._makeChange(t,i)}this._setContent(t,null)}return!0}addReference(t,e){if("string"!=typeof t)throw new r.AssertionError("parameter attr is not of type String.");if(!e)throw new r.AssertionError("parameter guid is not set.");if(!this.has(t))return!1;if(!this.isReference(t))throw new r.AssertionError("attempt to add Reference to non-Reference attribute : "+t);if(this.isObjectReference(t))this._setContent(t,e);else{var n=this.getReferences(t);n.join(";").match(e)||(n.push(e),this._setContent(t,n))}return!0}addReferences(t,e){if("string"!=typeof t)throw new r.AssertionError("parameter attr is not of type String.");if(!Array.isArray(e))throw new r.AssertionError("parameter guids is not an Array.");if(!this.has(t))return!1;if(!this.isObjectReferenceSet(t))throw new r.AssertionError("attempt to add References to non-ReferenceSet attribute : "+t);const n=this.getReferences(t),i=e.filter(t=>!n.includes(t));return i.length>0&&this._setContent(t,n.concat(i)),!0}getReferenceAttributes(){return this.metaData.getReferenceAttributes().filter(t=>this.has(t))}getAttributes(){return this.metaData.getAttributes().filter(t=>this.has(t))}getPrimitives(){return this.metaData.getAttributesWithoutReferences().filter(t=>this.has(t))}getAttributeType(t){return!!this.has(t)&&this.metaData.getAttributeType(t)}getSelectorEntity(t){return this.has(t)?this.metaData.getSelectorEntity(t):null}getEntity(){return this.metaData.getEntity()}isPersistable(){return this.metaData.isPersistable()}isNew(){return window.mx.data.isNew(this._guid)}isA(t){return this.metaData.isA(t)}hasSuperEntities(){return this.metaData.hasSuperEntities()}getSuperEntities(){return this.metaData.getSuperEntities()}hasSubEntities(){return this.metaData.hasSubEntities()}getSubEntities(){return this.metaData.getSubEntities()}inheritsFrom(t){return this.metaData.inheritsFrom(t)}toJSON(){return this.jsonData}toString(){return this.getGuid()}_getRawValue(t){if(this._attributeChanged(t)){return window.mx.data.getChanges(this._guid)[t].value}return this._getRawOriginalValue(t)}_getRawOriginalValue(t){return this._hasChildren(t)?this._getChildValue(t):this._getAttributeValue(t)}_attributeChanged(t){const e=window.mx.data.getChanges(this._guid);return Object.prototype.hasOwnProperty.call(e,t)}_getChildren(t){return(this.isObjectReference(t)?[this._getAttributeValue(t)]:Object.values(this._getAttributeValue(t))).map(t=>h.fromJson(t))}_getChildValue(t){const e=this._getChildren(t).map(t=>t.getGuid());return this.isObjectReference(t)?0===e.length?null:e[0]:e}_convertToRuntimeValue(t,e){if("String"!==this.getAttributeType(t)&&""===e)return this.isObjectReferenceSet(t)?[]:null;if(null==e)return null;if(this.isNumeric(t)){const n=o()(e);if(u.a.validate(n,this.metaData.getAttributeType(t))!==u.a.validation.OK)throw new Error(`Cannot set invalid value '${n}' to MxObject attribute '${t}'`);return String(n)}if(this.isDate(t))return this.isLocalizedDate(t)?Number(e):window.mx.parser.delocalizeEpoch(Number(e));if(this.isPassword(t))return e.replace(/[\s\t]+$/,"").replace(/^[\s\t]+/,"");if(this.isBoolean(t))return Boolean(e);if(this.isObjectReference(t)){if(Array.isArray(e))throw new Error("Trying to set single object reference to multiple values");return e}if(this.isObjectReferenceSet(t)){if(!Array.isArray(e))throw new Error("Trying to set object reference set to single value");return e}return String(e)}_convertToClientValue(t,e){return null==e?"":this.isNumeric(t)?o()(e):this.isDate(t)?this.isLocalizedDate(t)?e:window.mx.parser.localizeEpoch(e):this.isBoolean(t)?e:this.isObjectReferenceSet(t)?0===e.length?"":e:String(e)}_setContent(t,e){if("string"!=typeof t)throw new r.AssertionError("parameter attr ("+t+") is not of type String.");if(!this.metaData.has(t))return;const n=this._convertToRuntimeValue(t,e),i=this._getRawValue(t);n!==i&&(this._makeChange(t,n),this.metaData.isBidirectionalReference(t)&&(f(this.isObjectReference(t)?[i]:a.a.arraySubtract(i,n)).filter(e=>!e.isReadonlyAttr(t)&&e.getReferences(t).includes(this._guid)).forEach(e=>e.removeReferences(t,[this._guid])),f(this.isObjectReference(t)?[n]:a.a.arraySubtract(n,i)).filter(e=>!e.isReadonlyAttr(t)&&!e.getReferences(t).includes(this._guid)).forEach(e=>e.addReference(t,this._guid))))}_hasChildren(t){if(!this.isReference(t))return!1;const e=this._getAttributeValue(t);return e&&"object"==typeof e&&null==e.length}_getAttributeValue(t){var e=this.jsonData.attributes[t];return void 0===e&&(e=null),e&&"object"==typeof e&&"value"in e?e.value:e}_setAttributeValue(t,e){var n=this.jsonData.attributes[t];void 0===e&&(e=null),n&&"object"==typeof n&&"value"in n?n.value=e:this.jsonData.attributes[t]=e}_makeChange(t,e){if(this.isDeleted())throw new r.AssertionError(`Cannot modify attribute ${t} of a deleted object.`);window.mx.data.makeChange(this._guid,t,e),window.mx.data.updateMxObjectSubscribers(this._guid,t,this.get(t))}static fromJson(t){return new h({json:t,meta:window.mx.meta.getEntity(t.objectType)})}}function f(t){return t.map(t=>window.mx.data.getCachedObject(t)).filter(t=>null!=t)}},function(t,e,n){function r(){return new Promise(()=>{})}function i(t=0){return new Promise(e=>{setTimeout(()=>{e()},t)})}function o(t,e,n){const r=Array.from(arguments).slice(2);return new Promise((n,i)=>t[e](...r,n,i))}n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o})},function(t,e,n){const{DescribedServerError:r}=n(31);var i=0;function o(t,e,n){return function(...r){const i=e.concat(r);return i.length>=t?n.apply(this,i.slice(0,t)):o(t,i,n)}}t.exports.map=function(e,n,r){var i=[];return t.exports.forEach(e,function(){i.push(n.apply(this,arguments))},r),i},t.exports.mapObject=function(t,e,n=null){return Object.keys(t).reduce(function(r,i){return r[i]=e.call(n,t[i],i),r},{})},t.exports.forEach=function(t,e,n){if(null!=t)if(t.length===+t.length)for(var r=0;r<t.length;r++)e.call(n,t[r],r,t);else for(var i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)},e.curry=function(t){return o(t.length,[],t)},e.curryN=function(t,e){return o(t,[],e)},t.exports.sequence=function(t,e,n){if(e&&"object"==typeof e&&(n=e,e=null),!(t instanceof Array))throw new Error("mendix/lang.sequence: sequence is not an array");var r,i,o,s=0,a=function(){r=!0,i&&o()};(o=function(){for(;s<t.length;){r=!1,i=!1;var o=t[s++];if("function"==typeof o)o.call(n,a);else{if(!n||"function"!=typeof n[o])throw new Error("mendix/lang.sequence: #"+s+" is not a function");n[o](a)}if(!r)return void(i=!0)}e&&e.call(n)})()},t.exports.collect=function(t,e,n){if(e&&"object"==typeof e&&(n=e,e=null),!(t instanceof Array))throw new Error("mendix/lang.collect: collection is not an array");for(var r=0,i=t.length+1,o=function(){0==--i&&e&&e.call(n)};r<t.length;){var s=t[r++];if("function"==typeof s)s.call(n,o);else{if(!n||"function"!=typeof n[s])throw new Error("mendix/lang.collect: #"+r+" is not a function");n[s](o)}}o()},t.exports.find=function(t,e,n){for(var r=0;r<t.length;r++)if(e.call(n,t[r],r,t))return t[r]},t.exports.findLast=function(t,e,n){for(var r=t.length-1;r>=0;r--)if(e.call(n,t[r],r,t))return t[r]},t.exports.findIndex=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return n;return-1},t.exports.flatten=function(t){const e=[];return t.forEach(t=>{e.push.apply(e,t)}),e},t.exports.toArray=function(t){return[].slice.call(t)},t.exports.objectToArray=function(t){var e=[];for(var n in t)e.push(n);return e},t.exports.arrayFromObject=function(t){return Object.keys(t).map(function(e){return[e,t[e]]})},t.exports.objectFromArray=function(t){return t.reduce(function(t,e){return t[e[0]]=e[1],t},{})},t.exports.groupBy=function(t,e){return t.map(t=>[e(t),t]).reduce((t,[e,n])=>(t[e]||(t[e]=[]),t[e].push(n),t),{})},t.exports.partition=function(t,e){for(var n=[],r=[],i=0;i<e.length;++i)t(e[i])?n.push(e[i]):r.push(e[i]);return[n,r]},t.exports.clone=function(t){return JSON.parse(JSON.stringify(t))},t.exports.delay=function(t,e,n){return setTimeout(function r(){e()?t():setTimeout(r,n||500)},n||500)},t.exports.runOrDelay=function(t,e,n){return n||(n=500),e()?t():setTimeout(function r(){e()?t():setTimeout(r,n)},n)},t.exports.waitUntilPredicateHolds=function(e,n,r){if(0===r.length||e())n();else{var i=r.shift();setTimeout(function(){t.exports.waitUntilPredicateHolds(e,n,r)},i)}},t.exports.arraySubtract=function(t,e){for(var n=0;n<e.length;n++)for(var r=t.length-1;0<=r;r--)t[r].toString()===e[n].toString()&&t.splice(r,1);return t},t.exports.objectIsEmpty=function(t){for(var e in t)return!1;return!0},t.exports.firstKey=function(t){for(var e in t)return e;return null},t.exports.inArray=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},t.exports.unique=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})},t.exports.startsWith=function(t,e){return 0===t.indexOf(e)},t.exports.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},t.exports.trim=function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},t.exports.capitalize=function(t){return t.length>0?t[0].toUpperCase()+t.slice(1):""},t.exports.getUniqueId=function(){return+new Date+"-"+i++},t.exports.getFileError=function(t){var e,n,i=null;return(e=t.getElementsByTagName("textarea")[0])&&(n=JSON.parse(e.value)).type&&"exception"===n.type&&((i=new r(n.description))._type="exception"),i},t.exports.registerInDojo=function(t,e){window.dojoDynamicRequire.cache[t]=function(){window.define([],function(){return e})}}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,"a",function(){return get}),__webpack_require__.d(__webpack_exports__,"b",function(){return post});var _exceptions_AssertionError__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_errors_ConnectionError__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16),_errors_DescribedServerError__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(31),_errors_ServerError__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(23),_errors_UnauthorizedError__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(21),_errors_ValidationError__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(19),_middleware__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(15);async function get(url,handleAs){const request={url:url,init:{method:"get",headers:new Headers,cache:"force-cache",credentials:"include"}},response=await Object(_middleware__WEBPACK_IMPORTED_MODULE_7__.a)(request,doFetch);if(!response.ok)throw new _errors_ServerError__WEBPACK_IMPORTED_MODULE_4__.a(response.status,response.statusText);switch(handleAs){case"text":return response.text();case"json":return response.json();case"blob":return response.blob();case"javascript":return void eval(await response.text())}}async function post(t,e){const n={url:t,body:e,init:{method:"post",headers:new Headers(Object.assign({Accept:"application/json"},Object(_util__WEBPACK_IMPORTED_MODULE_1__.e)(e)?{"Content-Type":"application/json"}:{})),redirect:"error",credentials:"include"}};return(await Object(_middleware__WEBPACK_IMPORTED_MODULE_7__.a)(n,doFetch)).json()}async function doFetch(t){if(t.init.body)throw new _exceptions_AssertionError__WEBPACK_IMPORTED_MODULE_0__.AssertionError;let e;t.init.body=Object(_util__WEBPACK_IMPORTED_MODULE_1__.e)(t.body)?JSON.stringify(t.body):t.body;try{e=await window.fetch(t.url,t.init)}catch(t){throw new _errors_ConnectionError__WEBPACK_IMPORTED_MODULE_2__.a(t.message)}switch(e.status){case 200:return e;case 400:case 401:case 402:case 403:case 460:throw new _errors_UnauthorizedError__WEBPACK_IMPORTED_MODULE_5__.a(e.status);case 502:case 504:throw new _errors_ServerError__WEBPACK_IMPORTED_MODULE_4__.a(e.status,e.statusText);case 551:throw new _errors_ValidationError__WEBPACK_IMPORTED_MODULE_6__.a(await e.json());case 560:const t=await getXasErrorDescription(e);throw t?new _errors_DescribedServerError__WEBPACK_IMPORTED_MODULE_3__.DescribedServerError(t):new _errors_ServerError__WEBPACK_IMPORTED_MODULE_4__.a(e.status);case 12029:throw new _errors_ConnectionError__WEBPACK_IMPORTED_MODULE_2__.a("No connection");default:throw new _errors_ServerError__WEBPACK_IMPORTED_MODULE_4__.a(e.status,await getXasErrorDescription(e))}}async function getXasErrorDescription(t){const e=await t.json();return e&&"description"in e?e.description:void 0}},function(t,e,n){n.d(e,"e",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return l});var r=n(5),i=n(4),o=n(0);function s(t,e){switch(e){case"DateTime":return""!==t?new Date(t):void 0;case"String":return t;default:return""!==t?t:void 0}}function a(t){return void 0===t?"":t instanceof Date?t.getTime():t}function c(t,e,n){const r=mx.meta.getEntity(e),i=r.getAttributeType(n);return"Enum"===i?void 0===t||r.getEnumMap(n).find(e=>e.key===t)?t:function(){throw new o.AssertionError(`Value ${t} is not assignable to the attribute of type ${i}.`)}():u(t,i)}function u(t,e){switch(e){case"String":case"ObjectReference":return"string"==typeof t||void 0===t?t:n();case"ObjectReferenceSet":return Array.isArray(t)&&t.every(t=>"string"==typeof t)?t:n();case"Boolean":return"boolean"==typeof t?t:n();case"DateTime":return void 0===t||t instanceof Date&&!isNaN(t.getTime())?t:n();case"Float":case"Currency":case"Integer":case"Long":case"Decimal":return t instanceof r||void 0===t?t:n();default:throw new o.AssertionError(`Attribute type ${e} is not supported.`)}function n(){throw new o.AssertionError(`Value ${t} is not assignable to the attribute of type ${e}.`)}}function l(t){return Object(i.g)(t)?t.map(t=>Object(i.b)(mx.data.getCachedObject(t))):t}},,function(t,e,n){n.d(e,"g",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"a",function(){return l}),n.d(e,"e",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return d});var r,i=n(68),o=n(10);function s(t,e={},n=!1){return Object(o.b)(g(),{action:"retrieve_by_xpath",params:{xpath:t,schema:e,count:n}})}function a(t){return Object(o.b)(g(),{action:"poll_background_job",params:{asyncid:t}})}function c(t,e,n){return Object(o.b)(g(),{action:"instantiate",params:{objecttype:t},changes:e,objects:n})}function u(t,e,n){return Object(o.b)(g(),{action:"login",params:{username:t,password:e,shouldgeneratetoken:n}})}function l(t){return Object(o.b)(g(),{action:"get_session_data",params:t})}function h(t){return Object(o.b)(g(),{action:"logout",params:t?{authtoken:t}:{}})}function f(){return Object(o.b)(g(),{action:"keepalive",params:{}})}function p(t,e,n,r){return Object(o.b)(g(),{action:"synchronize",params:{guids:t,fileGuidMapping:e},changes:n,objects:r})}function d(t,e,n,r,s,a){const c=mx.remoteUrl+"file?"+Object(i.stringify)(Object.assign({},n,{guid:t})),u=new FormData;return u.append("data",JSON.stringify({changes:s,objects:a})),e?u.append("blob",r,e):u.append("blob",r),Object(o.b)(c,u)}function g(){return mx.remoteUrl+"xas/"}!function(t){t[t.Sunday=0]="Sunday",t[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday"}(r||(r={}))},,function(t,e,n){n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s});const r=[];function i(t){r.push(t)}function o(){r.splice(0,r.length)}function s(t,e){return function t(n,i){if(n===r.length)return e(i);return r[n](i,e=>t(n+1,e))}(0,t)}},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t){super(t),Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){const r=n(5);var i=new r("1e20"),o=new r(2).pow(31).times(-1),s=new r(2).pow(31).minus(1),a=new r(2).pow(63).times(-1),c=new r(2).pow(63).minus(1),u=new r(2).pow(53);function l(t,e,n){return t.gte(e)&&t.lte(n)}var h={validation:{OK:0,NOT_INTEGER:1,RANGE_INTEGER:2,RANGE_LONG:3,RANGE_DECIMAL:4,RANGE_NUMBER:5},validate:function(t,e){if(/^(Integer|Long|Decimal|Float|Currency)$/.test(e)){if(""===t)return h.validation.OK;if(t instanceof r||(t=new r(t)),("Integer"===e||"Long"===e)&&function(t){return!t.mod(1).eq(0)}(t))return h.validation.NOT_INTEGER;if("Integer"===e&&!l(t,o,s))return h.validation.RANGE_INTEGER;if("Long"===e&&!l(t,a,c))return h.validation.RANGE_LONG;if("Decimal"===e&&t.abs().gte(i))return h.validation.RANGE_DECIMAL;if("Decimal"===e&&!t.mod(1e-8).eq(0))return h.validation.RANGE_DECIMAL;if(/^(Float|Currency)$/.test(e)&&t.abs().gt(u))return h.validation.RANGE_NUMBER}return h.validation.OK}};t.exports=h},function(t,e,n){var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var s,a,c,u=r(e),l=r(n);if(u&&l){if((a=e.length)!=n.length)return!1;for(s=a;0!=s--;)if(!t(e[s],n[s]))return!1;return!0}if(u!=l)return!1;var h=e instanceof Date,f=n instanceof Date;if(h!=f)return!1;if(h&&f)return e.getTime()==n.getTime();var p=e instanceof RegExp,d=n instanceof RegExp;if(p!=d)return!1;if(p&&d)return e.toString()==n.toString();var g=i(e);if((a=g.length)!==i(n).length)return!1;for(s=a;0!=s--;)if(!o.call(n,g[s]))return!1;for(s=a;0!=s--;)if(!t(e[c=g[s]],n[c]))return!1;return!0}return e!=e&&n!=n}},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t){super(),this.original=t,Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t){super(t),Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){n.d(e,"a",function(){return i});var r=n(23);class i extends r.a{constructor(t){super(t),Object.setPrototypeOf(this,i.prototype)}}},function(t,e){t.exports=require("react-native-navigation")},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t,e){super(e),this.status=t,Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){n.d(e,"a",function(){return r});class r{constructor(t,e){this._guid=t,this._fields=e}getGuid(){return this._guid}getAttributes(){return Object.keys(this._fields).map(t=>({name:t,reason:this._fields[t]}))}getFields(){return this.getAttributes()}static describe(t){const e=[];for(let n=0;void 0!==t[n];n++){const r=t[n].getFields();for(let t=0;void 0!==r[t];t++)e.push(r[t].reason)}return e.join("\n")}addAttribute(t,e){return!(t in this._fields)&&(this._fields[t]=e,!0)}addField(...t){return this.addAttribute(...t)}removeAttribute(t){return t in this._fields&&(delete this._fields[t],!0)}removeField(...t){return this.removeAttribute(...t)}getErrorReason(t){return this._fields[t]}getReasonByAttribute(...t){return this.getErrorReason(...t)}clone(){return new r(this._guid,Object.assign({},this._fields))}toString(){return Object.keys(this._fields).map(t=>`${t} ${this._fields[t]}`).join("; ")}}r.fromResponse=function(t){return t.datavalidation?t.datavalidation.map(({guid:t,errorFields:e})=>{const n={};return e.forEach(({name:t,message:e})=>{n[t]=e}),new r(t,n)}):[]}},function(t,e,n){n.d(e,"a",function(){return i});var r=n(5);class i{constructor(t,e){this.expressionFunctions=t,this.expressionTokens=e}evaluate(t,e){switch(t.type){case"function":if(!this.expressionFunctions[t.name])throw new Error(`Function ${t.name} is not known`);const n=t.parameters.map(t=>this.evaluate(t,e));return this.expressionFunctions[t.name].apply(null,n);case"literal":return"number"==typeof t.value?new r(t.value):null===t.value?void 0:t.value;case"variable":return void 0!==t.path?e.resolve(t.variable,t.path):e.resolve(t.variable);case"conditional":return this.evaluate(t.condition,e)?this.evaluate(t.then,e):this.evaluate(t.else,e);case"token":if(!this.expressionTokens[t.name])throw new Error(`Token ${t.name} is not known`);return this.expressionTokens[t.name]()}}}},function(t,e,n){n.d(e,"a",function(){return o});var r=n(5),i=n(4);const o={not:t=>!t,"=":(t,e)=>t instanceof r&&e instanceof r?t.eq(e):t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():"string"==typeof t||"string"==typeof e?(t||"")===(e||""):t instanceof Array&&e instanceof Array?t.length===e.length&&t.every(t=>e.indexOf(t)>-1):t instanceof Array&&void 0===e?0===t.length:void 0===t&&e instanceof Array?0===e.length:t===e,"!=":(t,e)=>!o["="](t,e),">"(t,e){if(t instanceof r&&e instanceof r)return t.gt(e);if(t instanceof Date&&e instanceof Date)return t.getTime()>e.getTime();if(void 0===t||void 0===e)throw new Error(s(">",t,e));return t>e},">=":(t,e)=>o["="](t,e)||o[">"](t,e),"<"(t,e){if(t instanceof r&&e instanceof r)return t.lt(e);if(t instanceof Date&&e instanceof Date)return t.getTime()<e.getTime();if(void 0===t||void 0===e)throw new Error(s("<",t,e));return t<e},"<=":(t,e)=>o["="](t,e)||o["<"](t,e),"+"(t,e){if(t instanceof r&&e instanceof r)return t.plus(e);if("string"==typeof t)return t+(void 0!==e?e.toString():"");if("string"==typeof e)return(void 0!==t?t.toString():"")+e;throw new Error(s("+",t,e))},"-"(t,e){if(1===arguments.length&&void 0!==t)return t.times(-1);if(void 0!==t&&void 0!==e)return t.minus(e);throw new Error(s("-",t,e))},"*"(t,e){if(void 0!==t&&void 0!==e)return t.times(e);throw new Error(s("*",t,e))},div(t,e){if(void 0!==t&&void 0!==e)return t.div(e);throw new Error(s("div",t,e))},mod(t,e){if(void 0!==t&&void 0!==e)return t.mod(e);throw new Error(s("mod",t,e))},":":(t,e)=>o.div(t,e),max(...t){if(t[0]instanceof r)return t.reduce((t,e)=>t.gt(e)?t:e);if(t[0]instanceof Date)return t.reduce((t,e)=>t.getTime()>e.getTime()?t:e);throw new Error(s("max",...t))},min(...t){if(t[0]instanceof r)return t.reduce((t,e)=>t.lt(e)?t:e);if(t[0]instanceof Date)return t.reduce((t,e)=>t.getTime()<e.getTime()?t:e);throw new Error(s("min",...t))},round(t,e){if(t instanceof r)return t.round(void 0===e?0:Number(e));throw new Error(s("round",t))},random:()=>new r(Math.random()),floor(t){if(t instanceof r){const e=t,n=e.mod(1);return n.eq(0)?e.eq(-0)?e.abs():e:e.minus(n).minus(e.lt(0)?1:0)}throw new Error(s("floor",t))},ceil(t){if(t instanceof r){const e=t,n=o.floor(e.times(-1));return n.eq(0)?n:n.times(-1)}throw new Error(s("ceil",t))},pow(t,e){if(t instanceof r&&e instanceof r)return t.pow(Number(e));throw new Error(s("pow",t))},abs(t){if(t instanceof r)return t.abs();throw new Error(s("abs",t))},parseInteger(t,e){if("string"==typeof t){if(/^-?\d+$/.test(t)){const e=r(t);return e.eq(-0)?e.abs():e}if(void 0===e)throw new Error(`Not parsable to Integer: ${t}`);return e}throw new Error(s("parseInteger",t))},parseDecimal(t,e){if("string"==typeof t){const n=mx.parser.parseValue(t,"Decimal");if(null===n&&void 0===e)throw new Error(`Not parsable to Decimal: ${t}`);return null===n?e:n}throw new Error(s("parseDecimal",t))},formatDecimal(t){if(t instanceof r)return mx.parser.formatValue(Number(t),"Decimal");throw new Error(s("formatDecimal",t))},isNew(t){if(void 0!==t)return mx.data.isNew(t);throw new Error(s("isNew",t))},isSynced(t){if(void 0!==t)return!mx.data.isDirty(t);throw new Error(s("isSynced",t))},toUpperCase:t=>a(t).toUpperCase(),toLowerCase:t=>a(t).toLowerCase(),trim:t=>a(t).trim(),contains:(t,e)=>a(t).indexOf(a(e))>-1,startsWith:(t,e)=>(t=a(t),e=a(e),t.substr(0,e.length)===e),endsWith:(t,e)=>(t=a(t),e=a(e),t.substr(t.length-e.length)===e),substring(t,e,n){if(t=a(t),n=n,void 0!==(e=e)&&e.gte(0)){if(2===arguments.length)return t.substr(Number(e));if(void 0!==n&&n.gte(0))return t.substr(Number(e),Number(n))}throw new Error(s("substring",t,e,n))},find(t,e,n){if(t=a(t),e=a(e),2===arguments.length)return new r(t.indexOf(e));if(void 0!==n)return new r(t.indexOf(e,Number(n)));throw new Error(s("find",t,e,n))},findLast(t,e,n){if(t=a(t),e=a(e),2===arguments.length)return new r(t.lastIndexOf(e));if(void 0!==n)return new r(t.lastIndexOf(e,Number(n)));throw new Error(s("findLast",t,e,n))},length:t=>new r(a(t).length),urlEncode:t=>encodeURIComponent(a(t)).replace("%20","+"),urlDecode:t=>decodeURIComponent(a(t).replace("+","%20")),isMatch(t,e){if(void 0!==e)return new RegExp(`^(${e})$`).test(a(t));throw new Error(s("isMatch",t,e))},replaceFirst(t,e,n){if(void 0!==e&&void 0!==n){const r=n.replace(/\$/g,"$$$$");return a(t).replace(new RegExp(e),r)}throw new Error(s("replaceFirst",t,e))},replaceAll(t,e,n){if(void 0!==e&&void 0!==n){const r=n.replace(/\$/g,"$$$$");return a(t).replace(new RegExp(e,"g"),r)}throw new Error(s("replaceAll",t,e))},_newList:()=>[],_toList(t){if(t instanceof Array)return t;if(Object(i.f)(t))return t.length>0?[t]:[];if(void 0===t)return[];throw new Error(s("_toList",t))},_addToList(t,e){if(t instanceof Array&&e instanceof Array)return t.concat(e.filter(e=>!t.includes(e)));if(t instanceof Array&&Object(i.f)(e))return t.includes(e)?t:t.concat([e]);if(t instanceof Array&&void 0===e)return t;if(void 0===t&&e instanceof Array)return e.slice(0);if(void 0===t&&Object(i.f)(e))return[e];if(void 0===t&&void 0===e)return[];throw new Error(s("_addToList",t,e))},_removeFromList(t,e){if(t instanceof Array&&e instanceof Array)return t.filter(t=>!e.includes(t));if(t instanceof Array&&Object(i.f)(e))return t.filter(t=>t!==e);if(t instanceof Array&&void 0===e)return t;if(void 0===t)return[];throw new Error(s("_removeFromList",t,e))}};function s(t,...e){return`Operator ${t} not supported in expression ${t}(${e.join(", ")})`}function a(t){return void 0===t?"":t}},function(t,e,n){n.d(e,"a",function(){return u});var r=n(7),i=n(0),o=n(4),s=n(11),a=n(39),c=n(40);class u{constructor(t){this.variables=t,this.dependencies=[]}resolve(t,e){return void 0!==e?this.resolveAttribute(t,e):this.resolveVariable(t)}getDependencies(){return this.dependencies.slice()}resolveVariable(t){if(!(t in this.variables))throw new i.AssertionError;const e=this.variables[t]();if(e instanceof r.MxObject)return this.addDependency({guid:e.getGuid()}),e.getGuid();if(Object(o.d)(r.MxObject,e)){const t=e.map(t=>t.getGuid());return t.forEach(t=>this.addDependency({guid:t})),t}return e}resolveAttribute(t,e){if(!(t in this.variables))throw new i.AssertionError;const n=this.variables[t]();if(void 0===n)throw new c.a(t);if(!(n instanceof r.MxObject))throw new i.AssertionError;if(!n.has(e))throw new a.a(t,n.getEntity(),e);return this.addDependency({guid:n.getGuid()}),this.addDependency({guid:n.getGuid(),attr:e}),Object(s.e)(n.get(e),n.getAttributeType(e))}addDependency(t){this.dependencies.find(e=>e.guid===t.guid&&t.attr===e.attr)||this.dependencies.push(t)}}},function(t,e,n){var r=n(3);var i=n(6);n.d(e,"a",function(){return s});const o={beginOfCurrentMinute:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setSeconds(0,0),n},endOfCurrentMinute:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setSeconds(59,999),n},beginOfCurrentHour:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setMinutes(0,0,0),n},endOfCurrentHour:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setMinutes(59,59,999),n},beginOfCurrentDay:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setHours(0,0,0,0),n},endOfCurrentDay:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setHours(23,59,59,999),n},beginOfCurrentWeek:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},o=n.locale,s=o&&o.options&&o.options.weekStartsOn,a=null==s?0:Object(i.a)(s),c=null==n.weekStartsOn?a:Object(i.a)(n.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Object(r.a)(t,n),l=u.getDay(),h=(l<c?7:0)+l-c;return u.setDate(u.getDate()-h),u.setHours(0,0,0,0),u},endOfCurrentWeek:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},o=n.locale,s=o&&o.options&&o.options.weekStartsOn,a=null==s?0:Object(i.a)(s),c=null==n.weekStartsOn?a:Object(i.a)(n.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Object(r.a)(t,n),l=u.getDay(),h=6+(l<c?-7:0)-(l-c);return u.setDate(u.getDate()+h),u.setHours(23,59,59,999),u},beginOfCurrentMonth:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e);return n.setDate(1),n.setHours(0,0,0,0),n},endOfCurrentMonth:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n},beginOfCurrentYear:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e),i=new Date(0);return i.setFullYear(n.getFullYear(),0,1),i.setHours(0,0,0,0),i},endOfCurrentYear:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(t,e),i=n.getFullYear();return n.setFullYear(i+1,0,0),n.setHours(23,59,59,999),n}};function s(t){const e={currentUser:()=>mx.session.getUserId(),currentDateTime:t};return Object.keys(o).forEach(n=>{const r=o[n];e[n]=(()=>r(t(),{weekStartsOn:mx.session.getConfig("locale.firstDayOfWeek")})),e[n+"UTC"]=(()=>(function(t){const e=new Date(t.getTime());return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e})(r(function(t){const e=new Date(t.getTime());return e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),e}(t()))))}),e}},function(t,e,n){n.r(e);const r=n(102);class i{constructor(){this.__labels=[],this.__labelMap={},this.__graph=[]}addEdge(t,e){const n=this._getOrCreateLabelIndex(t),r=this._getOrCreateLabelIndex(e),i=this.__graph[n];i.includes(r)||i.push(r)}neighborsOf(t){const e=this._getOrCreateLabelIndex(t);return this.__graph[e].map(this._indexToLabel,this)}reachableLabels(t){const e=t.map(this._getOrCreateLabelIndex,this);return r.reachability(this.__graph,e).map(this._indexToLabel,this)}_indexToLabel(t){return this.__labels[t]}_getOrCreateLabelIndex(t){let e=t in this.__labelMap?this.__labelMap[t]:-1;return-1===e&&(this.__labels.push(t),this.__graph.push([]),e=this.__labels.length-1,this.__labelMap[t]=e),e}}function o(t,e){return a(t,e).reachableLabels(e)}function s(t,e,n){const r=h(t);return l(null!=n?function(t,e){const n=[];return t.forEach(t=>{e.forEach(e=>{if(!t.has(e.association))return;const r=window.mx.meta.getAttributeOwner(t.getEntity(),e.association),i=t.getSelectorEntity(e.association);e.fromEntity===r&&u(t,e.association).forEach(e=>n.push({from:t.getGuid(),to:e})),e.fromEntity===i&&u(t,e.association).forEach(e=>n.push({from:e,to:t.getGuid()}))})}),n}(t,n):c(t)).reachableLabels(e).filter(t=>r[t])}function a(t,e){const n=h(t=t.filter(t=>!t.isPersistable()||t.hasChanges()||t.isNew()));return l(c(t).filter(({from:t,to:e})=>r(t)&&r(e)));function r(t){return e.includes(t)||t in n}}function c(t){const e=[];return t.forEach(t=>{t.getReferenceAttributes().filter(t=>!function(t){return"System.owner"===t||"System.changedBy"===t}(t)).forEach(n=>{u(t,n).forEach(n=>e.push({from:n,to:t.getGuid()},{from:t.getGuid(),to:n}))})}),e}function u(t,e){return t.getReferences(e).concat(t.getOriginalReferences(e))}function l(t){const e=new i;return t.forEach(({from:t,to:n})=>e.addEdge(t,n)),e}function h(t){const e={};return t.forEach(t=>{e[t.getGuid()]=t}),e}n.d(e,"findReachableGuidsToRetain",function(){return o}),n.d(e,"findReachableGuidsForRequest",function(){return s}),n.d(e,"buildRetainmentGraph",function(){return a})},function(t,e,n){n.r(e),function(t,r){n.d(e,"$mobx",function(){return In}),n.d(e,"Reaction",function(){return sn}),n.d(e,"untracked",function(){return tn}),n.d(e,"IDerivationState",function(){return Te}),n.d(e,"createAtom",function(){return Jt}),n.d(e,"spy",function(){return y}),n.d(e,"comparer",function(){return V}),n.d(e,"isObservableObject",function(){return at}),n.d(e,"isBoxedObservable",function(){return Q}),n.d(e,"isObservableArray",function(){return se}),n.d(e,"ObservableMap",function(){return Ft}),n.d(e,"isObservableMap",function(){return Lt}),n.d(e,"transaction",function(){return Vt}),n.d(e,"observable",function(){return Dt}),n.d(e,"computed",function(){return bt}),n.d(e,"isObservable",function(){return lt}),n.d(e,"isObservableProp",function(){return ht}),n.d(e,"isComputed",function(){return pt}),n.d(e,"isComputedProp",function(){return dt}),n.d(e,"extendObservable",function(){return vt}),n.d(e,"extendShallowObservable",function(){return yt}),n.d(e,"observe",function(){return dn}),n.d(e,"intercept",function(){return gn}),n.d(e,"autorun",function(){return $}),n.d(e,"reaction",function(){return B}),n.d(e,"when",function(){return mn}),n.d(e,"action",function(){return T}),n.d(e,"isAction",function(){return D}),n.d(e,"runInAction",function(){return C}),n.d(e,"keys",function(){return yn}),n.d(e,"values",function(){return vn}),n.d(e,"entries",function(){return wn}),n.d(e,"set",function(){return On}),n.d(e,"remove",function(){return _n}),n.d(e,"has",function(){return jn}),n.d(e,"get",function(){return xn}),n.d(e,"decorate",function(){return En}),n.d(e,"configure",function(){return Sn}),n.d(e,"onBecomeObserved",function(){return Ht}),n.d(e,"onBecomeUnobserved",function(){return Yt}),n.d(e,"flow",function(){return Cn}),n.d(e,"toJS",function(){return Pn}),n.d(e,"trace",function(){return on}),n.d(e,"getDependencyTree",function(){return Ne}),n.d(e,"getObserverTree",function(){return $e}),n.d(e,"_resetGlobalState",function(){return Re}),n.d(e,"_getGlobalState",function(){return Ie}),n.d(e,"getDebugName",function(){return qt}),n.d(e,"getAtom",function(){return Gt}),n.d(e,"_getAdministration",function(){return Wt}),n.d(e,"_allowStateChanges",function(){return O}),n.d(e,"_allowStateChangesInsideComputed",function(){return x}),n.d(e,"isArrayLike",function(){return _e}),n.d(e,"_isComputingDerivation",function(){return Ke}),n.d(e,"onReactionError",function(){return an}),n.d(e,"_interceptReads",function(){return Mn});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}var u={},l={};function h(t){if(!0!==t.__mobxDidRunLazyInitializers){var e=t.__mobxDecorators;if(e)for(var n in ve(t,"__mobxDidRunLazyInitializers",!0),e){var r=e[n];r.propertyCreator(t,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function f(t,e){return function(){var n,r=function(r,i,o,a){if(!0===a)return e(r,i,o,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var c=r.__mobxDecorators;ve(r,"__mobxDecorators",s({},c))}return r.__mobxDecorators[i]={prop:i,propertyCreator:e,descriptor:o,decoratorTarget:r,decoratorArguments:n},function(t,e){var n=e?u:l;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return h(this),this[t]},set:function(e){h(this),this[t]=e}})}(i,t)};return function(t){return(2===t.length||3===t.length)&&"string"==typeof t[1]||4===t.length&&!0===t[3]}(arguments)?(n=ce,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function p(){return!!Me.spyListeners.length}function d(t){if(Me.spyListeners.length)for(var e=Me.spyListeners,n=0,r=e.length;n<r;n++)e[n](t)}function g(t){d(s({},t,{spyReportStart:!0}))}var m={spyReportEnd:!0};function b(t){d(t?s({},t,{spyReportEnd:!0}):m)}function y(t){return Me.spyListeners.push(t),ge(function(){Me.spyListeners=Me.spyListeners.filter(function(e){return e!==t})})}function v(t,e){var n=function(){return w(t,e,this,arguments)};return n.isMobxAction=!0,n}function w(t,e,n,r){var i=function(t,e,n,r){var i=p()&&!!t,o=0;if(i){o=Date.now();var s=r&&r.length||0,a=new Array(s);if(s>0)for(var c=0;c<s;c++)a[c]=r[c];g({type:"action",name:t,object:n,arguments:a})}var u=en();Ge();var l=_(!0);return{prevDerivation:u,prevAllowStateChanges:l,notifySpy:i,startTime:o}}(t,0,n,r);try{return e.apply(n,r)}finally{!function(t){j(t.prevAllowStateChanges),We(),nn(t.prevDerivation),t.notifySpy&&b({time:Date.now()-t.startTime})}(i)}}function O(t,e){var n,r=_(t);try{n=e()}finally{j(r)}return n}function _(t){var e=Me.allowStateChanges;return Me.allowStateChanges=t,e}function j(t){Me.allowStateChanges=t}function x(t){var e,n=Me.computationDepth;Me.computationDepth=0;try{e=t()}finally{Me.computationDepth=n}return e}function E(){fe(!1)}function S(t){return function(e,n,r){if(r){if(r.value)return{value:v(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return v(t,i.call(this))}}}return function(t){return function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(e){ve(this,n,T(t,e))}})}}(t).apply(this,arguments)}}var T=function(t,e,n,r){return 1===arguments.length&&"function"==typeof t?v(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?v(t,e):1===arguments.length&&"string"==typeof t?S(t):!0!==r?S(e).apply(null,arguments):void(t[e]=v(t.name||e,n.value))};function C(t,e){return w("string"==typeof t?t:t.name||"<unnamed action>","function"==typeof t?t:e,this,void 0)}function D(t){return"function"==typeof t&&!0===t.isMobxAction}function A(t,e,n){ve(t,e,v(e,n.bind(t)))}T.bound=function(t,e,n,r){return!0===r?(A(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return A(this,e,n.value||n.initializer.call(this)),this[e]},set:E}:{enumerable:!1,configurable:!0,set:function(t){A(this,e,t)},get:function(){}}};var k=Object.prototype.toString;function P(t,e){return M(t,e)}function M(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&function(t,e,n,r){t=I(t),e=I(e);var i=k.call(t);if(i!==k.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e)}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!("function"==typeof s&&s instanceof s&&"function"==typeof a&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];var c=n.length;for(;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),o){if((c=t.length)!==e.length)return!1;for(;c--;)if(!M(t[c],e[c],n,r))return!1}else{var u,l=Object.keys(t);if(c=l.length,Object.keys(e).length!==c)return!1;for(;c--;)if(u=l[c],!R(e,u)||!M(t[u],e[u],n,r))return!1}return n.pop(),r.pop(),!0}(t,e,n,r)}function I(t){return se(t)?t.peek():je(t)||Lt(t)?xe(t.entries()):t}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){return t===e}var V={identity:N,structural:function(t,e){return P(t,e)},default:function(t,e){return function(t,e){return"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(t,e)||N(t,e)}};function $(t,e){void 0===e&&(e=ue);var n,r=e&&e.name||t.name||"Autorun@"+he();if(!e.scheduler&&!e.delay)n=new sn(r,function(){this.track(s)},e.onError);else{var i=U(e),o=!1;n=new sn(r,function(){o||(o=!0,i(function(){o=!1,n.isDisposed||n.track(s)}))},e.onError)}function s(){t(n)}return n.schedule(),n.getDisposer()}var F=function(t){return t()};function U(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:F}function B(t,e,n){void 0===n&&(n=ue),"boolean"==typeof n&&(n={fireImmediately:n},de("Using fireImmediately as argument is deprecated. Use '{ fireImmediately: true }' instead"));var r,i=n.name||"Reaction@"+he(),o=T(i,n.onError?function(t,e){return function(){try{return e.apply(this,arguments)}catch(e){t.call(this,e)}}}(n.onError,e):e),s=!n.scheduler&&!n.delay,a=U(n),c=!0,u=!1,l=n.compareStructural?V.structural:n.equals||V.default,h=new sn(i,function(){c||s?f():u||(u=!0,a(f))},n.onError);function f(){if(u=!1,!h.isDisposed){var e=!1;h.track(function(){var n=t(h);e=c||!l(r,n),r=n}),c&&n.fireImmediately&&o(r,h),c||!0!==e||o(r,h),c&&(c=!1)}}return h.schedule(),h.getDisposer()}var L=function(){function t(t){this.dependenciesState=Te.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Te.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+he(),this.value=new Ye(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Ce.NONE,this.firstGet=!0,this.derivation=t.get,this.name=t.name||"ComputedValue@"+he(),t.set&&(this.setter=v(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?V.structural:V.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){!function(t){if(t.lowestObserverState!==Te.UP_TO_DATE)return;t.lowestObserverState=Te.POSSIBLY_STALE;var e=t.observers,n=e.length;for(;n--;){var r=e[n];r.dependenciesState===Te.UP_TO_DATE&&(r.dependenciesState=Te.POSSIBLY_STALE,r.isTracing!==Ce.NONE&&He(r,t),r.onBecomeStale())}}(this)},t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.get=function(){var t=this;this.keepAlive&&this.firstGet&&(this.firstGet=!1,$(function(){return t.get()})),this.isComputing&&fe("Cycle detected in computation "+this.name+": "+this.derivation),0===Me.inBatch&&0===this.observers.length?Je(this)&&(this.warnAboutUntrackedRead(),Ge(),this.value=this.computeValue(!1),We()):(qe(this),Je(this)&&this.trackAndCompute()&&function(t){if(t.lowestObserverState===Te.STALE)return;t.lowestObserverState=Te.STALE;var e=t.observers,n=e.length;for(;n--;){var r=e[n];r.dependenciesState===Te.POSSIBLY_STALE?r.dependenciesState=Te.STALE:r.dependenciesState===Te.UP_TO_DATE&&(t.lowestObserverState=Te.UP_TO_DATE)}}(this));var e=this.value;if(ze(e))throw e.cause;return e},t.prototype.peek=function(){var t=this.computeValue(!1);if(ze(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){pe(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else pe(!1,!1)},t.prototype.trackAndCompute=function(){p()&&d({object:this.scope,type:"compute",name:this.name});var t=this.value,e=this.dependenciesState===Te.NOT_TRACKING,n=this.computeValue(!0),r=e||ze(t)||ze(n)||!this.equals(t,n);return r&&(this.value=n),r},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,Me.computationDepth++,t)e=Qe(this,this.derivation,this.scope);else if(!0===Me.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(t){e=new Ye(t)}return Me.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){Ze(this),this.value=void 0},t.prototype.observe=function(t,e){var n=this,r=!0,i=void 0;return $(function(){var o=n.get();if(!r||e){var s=en();t({type:"update",object:n,newValue:o,oldValue:i}),nn(s)}r=!1,i=o})},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return Se(this.get())},t}();L.prototype[Ee()]=L.prototype.valueOf;var G=Oe("ComputedValue",L);function W(t){return void 0!==t.interceptors&&t.interceptors.length>0}function q(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),ge(function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)})}function H(t,e){var n=en();try{var r=t.interceptors;if(r)for(var i=0,o=r.length;i<o&&(pe(!(e=r[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{nn(n)}}function Y(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function z(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),ge(function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)})}function J(t,e){var n=en(),r=t.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](e);nn(n)}}var K={};!function(){if(Ut)return;Ut=function(){function t(t){void 0===t&&(t="Atom@"+he()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Te.NOT_TRACKING}return t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.reportObserved=function(){return qe(this)},t.prototype.reportChanged=function(){Ge(),function(t){if(t.lowestObserverState===Te.STALE)return;t.lowestObserverState=Te.STALE;var e=t.observers,n=e.length;for(;n--;){var r=e[n];r.dependenciesState===Te.UP_TO_DATE&&(r.isTracing!==Ce.NONE&&He(r,t),r.onBecomeStale()),r.dependenciesState=Te.STALE}}(this),We()},t.prototype.toString=function(){return this.name},t}(),Bt=Oe("Atom",Ut)}();var X=function(t){function e(e,n,r,i){void 0===r&&(r="ObservableValue@"+he()),void 0===i&&(i=!0);var o=t.call(this,r)||this;return o.enhancer=n,o.hasUnreportedChange=!1,o.value=n(e,void 0,r),i&&p()&&d({type:"create",name:o.name,newValue:""+o.value}),o}return o(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){var e=this.value;if((t=this.prepareNewValue(t))!==K){var n=p();n&&g({type:"update",name:this.name,newValue:t,oldValue:e}),this.setNewValue(t),n&&b()}},e.prototype.prepareNewValue=function(t){if(Xe(this),W(this)){var e=H(this,{object:this,type:"update",newValue:t});if(!e)return K;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.value!==t?t:K},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),Y(this)&&J(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return q(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),z(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return Se(this.get())},e}(Ut);X.prototype[Ee()]=X.prototype.valueOf;var Q=Oe("ObservableValue",X),Z=function(){function t(t,e,n){this.target=t,this.name=e,this.defaultEnhancer=n,this.values={}}return t.prototype.read=function(t,e){if(this.target===t||(this.illegalAccess(t,e),this.values[e]))return this.values[e].get()},t.prototype.write=function(t,e,n){var r=this.target;r!==t&&this.illegalAccess(t,e);var i=this.values[e];if(i instanceof L)i.set(n);else{if(W(this)){if(!(c=H(this,{type:"update",object:r,name:e,newValue:n})))return;n=c.newValue}if((n=i.prepareNewValue(n))!==K){var o=Y(this),a=p(),c=o||a?{type:"update",object:r,oldValue:i.value,name:e,newValue:n}:null;a&&g(s({},c,{name:this.name,key:e})),i.setNewValue(n),o&&J(this,c),a&&b()}}},t.prototype.remove=function(t){if(this.values[t]){var e=this.target;if(W(this))if(!(o=H(this,{object:e,name:t,type:"remove"})))return;try{Ge();var n=Y(this),r=p(),i=this.values[t].get();this.keys&&this.keys.remove(t),delete this.values[t],delete this.target[t];var o=n||r?{type:"remove",object:e,oldValue:i,name:t}:null;r&&g(s({},o,{name:this.name,key:t})),n&&J(this,o),r&&b()}finally{We()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return z(this,t)},t.prototype.intercept=function(t){return q(this,t)},t.prototype.getKeys=function(){var t=this;return void 0===this.keys&&(this.keys=new te(Object.keys(this.values).filter(function(e){return t.values[e]instanceof X}),Pt,"keys("+this.name+")",!0)),this.keys.slice()},t}();function tt(t,e,n){void 0===e&&(e=""),void 0===n&&(n=kt);var r=t.$mobx;return r||(ye(t)||(e=(t.constructor.name||"ObservableObject")+"@"+he()),e||(e="ObservableObject@"+he()),we(t,"$mobx",r=new Z(t,e,n)),r)}function et(t,e,n,r){var i=tt(t);if(W(i)){var o=H(i,{object:t,name:e,type:"add",newValue:n});if(!o)return;n=o.newValue}n=(i.values[e]=new X(n,r,i.name+"."+e,!1)).value,Object.defineProperty(t,e,function(t){return rt[t]||(rt[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(e){this.$mobx.write(this,t,e)}})}(e)),i.keys&&i.keys.push(e),function(t,e,n,r){var i=Y(t),o=p(),a=i||o?{type:"add",object:e,name:n,newValue:r}:null;o&&g(s({},a,{name:t.name,key:n}));i&&J(t,a);o&&b()}(i,t,e,n)}function nt(t,e,n){var r=tt(t);n.name=r.name+"."+e,n.context=t,r.values[e]=new L(n),Object.defineProperty(t,e,function(t){return it[t]||(it[t]={configurable:!0,enumerable:!1,get:function(){return ot(this).read(this,t)},set:function(e){ot(this).write(this,t,e)}})}(e))}var rt=Object.create(null),it=Object.create(null);function ot(t){var e=t.$mobx;return e||(h(t),t.$mobx)}var st=Oe("ObservableObjectAdministration",Z);function at(t){return!!be(t)&&(h(t),st(t.$mobx))}function ct(e){var n=f(!0,function(t,n,r,i,o){et(t,n,r?r.initializer?r.initializer.call(t):r.value:void 0,e)}),r=(void 0!==t&&t.env,n);return r.enhancer=e,r}function ut(t,e){if(null===t||void 0===t)return!1;if(void 0!==e){if(at(t)){var n=t.$mobx;return n.values&&!!n.values[e]}return!1}return at(t)||!!t.$mobx||Bt(t)||fn(t)||G(t)}function lt(t){return 1!==arguments.length&&fe(!1),ut(t)}function ht(t,e){return"string"!=typeof e?fe(!1):ut(t,e)}function ft(t,e){if(null===t||void 0===t)return!1;if(void 0!==e){if(!1===at(t))return!1;if(!t.$mobx.values[e])return!1;var n=Gt(t,e);return G(n)}return G(t)}function pt(t){return arguments.length>1?fe(!1):ft(t)}function dt(t,e){return"string"!=typeof e?fe(!1):ft(t,e)}var gt=f(!1,function(t,e,n,r,i){var o=n.get,a=n.set,c=i[0]||{};nt(t,e,s({get:o,set:a},c))}),mt=gt({equals:V.structural}),bt=function(t,e,n){if("string"==typeof e)return gt.apply(null,arguments);if(null!==t&&"object"==typeof t&&1===arguments.length)return gt.apply(null,arguments);var r="object"==typeof e?e:{};return r.get=t,r.set="function"==typeof e?e:r.set,r.name=r.name||t.name||"",new L(r)};function yt(t,e,n){return de("'extendShallowObservable' is deprecated, use 'extendObservable(target, props, { deep: false })' instead"),vt(t,e,n,Ot)}function vt(t,e,n,r){var i=(r=_t(r)).defaultDecorator||(!1===r.deep?St:xt);h(t),tt(t,r.name,i.enhancer),Ge();try{for(var o in e){var s=Object.getOwnPropertyDescriptor(e,o);0;var a=(n&&o in n?n[o]:s.get?gt:i)(t,o,s,!0);a&&Object.defineProperty(t,o,a)}}finally{We()}return t}bt.struct=mt;var wt={deep:!0,name:void 0,defaultDecorator:void 0},Ot={deep:!1,name:void 0,defaultDecorator:void 0};function _t(t){return null===t||void 0===t?wt:"string"==typeof t?{name:t,deep:!0}:t}function jt(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?Pt:kt}Object.freeze(wt),Object.freeze(Ot);var xt=ct(kt),Et=ct(function(t,e,n){return void 0===t||null===t?t:at(t)||se(t)||Lt(t)?t:Array.isArray(t)?Dt.array(t,{name:n,deep:!1}):ye(t)?Dt.object(t,void 0,{name:n,deep:!1}):je(t)?Dt.map(t,{name:n,deep:!1}):fe(!1)}),St=ct(Pt),Tt=ct(function(t,e,n){0;return P(t,e)?e:t});var Ct={box:function(t,e){arguments.length>2&&At("box");var n=_t(e);return new X(t,jt(n),n.name)},shallowBox:function(t,e){return arguments.length>2&&At("shallowBox"),de("observable.shallowBox","observable.box(value, { deep: false })"),Dt.box(t,{name:e,deep:!1})},array:function(t,e){arguments.length>2&&At("array");var n=_t(e);return new te(t,jt(n),n.name)},shallowArray:function(t,e){return arguments.length>2&&At("shallowArray"),de("observable.shallowArray","observable.array(values, { deep: false })"),Dt.array(t,{name:e,deep:!1})},map:function(t,e){arguments.length>2&&At("map");var n=_t(e);return new Ft(t,jt(n),n.name)},shallowMap:function(t,e){return arguments.length>2&&At("shallowMap"),de("observable.shallowMap","observable.map(values, { deep: false })"),Dt.map(t,{name:e,deep:!1})},object:function(t,e,n){return"string"==typeof arguments[1]&&At("object"),vt({},t,e,_t(n))},shallowObject:function(t,e){return"string"==typeof arguments[1]&&At("shallowObject"),de("observable.shallowObject","observable.object(values, {}, { deep: false })"),Dt.object(t,{},{name:e,deep:!1})},ref:St,shallow:Et,deep:xt,struct:Tt},Dt=function(t,e,n){if("string"==typeof arguments[1])return xt.apply(null,arguments);if(lt(t))return t;var r=ye(t)?Dt.object(t,e,n):Array.isArray(t)?Dt.array(t,e):je(t)?Dt.map(t,e):t;if(r!==t)return r;fe(!1)};function At(t){fe("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}function kt(t,e,n){return lt(t)?t:Array.isArray(t)?Dt.array(t,{name:n}):ye(t)?Dt.object(t,void 0,{name:n}):je(t)?Dt.map(t,{name:n}):t}function Pt(t){return t}function Mt(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function It(t,e){we(t,Mt(),e)}function Rt(t){return t[Mt()]=Nt,t}function Nt(){return this}function Vt(t,e){void 0===e&&(e=void 0),Ge();try{return t.apply(e)}finally{We()}}Object.keys(Ct).forEach(function(t){return Dt[t]=Ct[t]});var $t={},Ft=function(){function t(t,e,n){if(void 0===e&&(e=kt),void 0===n&&(n="ObservableMap@"+he()),this.enhancer=e,this.name=n,this.$mobx=$t,this._keys=new te(void 0,Pt,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){return this._hasMap.has(t)?this._hasMap.get(t).get():this._updateHasMapEntry(t,!1).get()},t.prototype.set=function(t,e){var n=this._has(t);if(W(this)){var r=H(this,{type:n?"update":"add",object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(W(this)&&!(i=H(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var n=p(),r=Y(this),i=r||n?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return n&&g(s({},i,{name:this.name,key:t})),Vt(function(){e._keys.remove(t),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)}),r&&J(this,i),n&&b(),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var n=this._hasMap.get(t);return n?n.setNewValue(e):(n=new X(e,Pt,this.name+"."+t+"?",!1),this._hasMap.set(t,n)),n},t.prototype._updateValue=function(t,e){var n=this._data.get(t);if((e=n.prepareNewValue(e))!==K){var r=p(),i=Y(this),o=i||r?{type:"update",object:this,oldValue:n.value,name:t,newValue:e}:null;r&&g(s({},o,{name:this.name,key:t})),n.setNewValue(e),i&&J(this,o),r&&b()}},t.prototype._addValue=function(t,e){var n=this;Vt(function(){var r=new X(e,n.enhancer,n.name+"."+t,!1);n._data.set(t,r),e=r.value,n._updateHasMapEntry(t,!0),n._keys.push(t)});var r=p(),i=Y(this),o=i||r?{type:"add",object:this,name:t,newValue:e}:null;r&&g(s({},o,{name:this.name,key:t})),i&&J(this,o),r&&b()},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keys[Mt()]()},t.prototype.values=function(){var t=this,e=0;return Rt({next:function(){return e<t._keys.length?{value:t.get(t._keys[e++]),done:!1}:{value:void 0,done:!0}}})},t.prototype.entries=function(){var t=this,e=0;return Rt({next:function(){if(e<t._keys.length){var n=t._keys[e++];return{value:[n,t.get(n)],done:!1}}return{done:!0}}})},t.prototype.forEach=function(t,e){var n=this;this._keys.forEach(function(r){return t.call(e,n.get(r),r,n)})},t.prototype.merge=function(t){var e=this;return Lt(t)&&(t=t.toJS()),Vt(function(){ye(t)?Object.keys(t).forEach(function(n){return e.set(n,t[n])}):Array.isArray(t)?t.forEach(function(t){var n=a(t,2),r=n[0],i=n[1];return e.set(r,i)}):je(t)?t.forEach(function(t,n){return e.set(n,t)}):null!==t&&void 0!==t&&fe("Cannot initialize map from "+t)}),this},t.prototype.clear=function(){var t=this;Vt(function(){tn(function(){t._keys.slice().forEach(function(e){return t.delete(e)})})})},t.prototype.replace=function(t){var e=this;return Vt(function(){var n=function(t){return ye(t)?Object.keys(t):Array.isArray(t)?t.map(function(t){return a(t,1)[0]}):je(t)||Lt(t)?xe(t.keys()):fe("Cannot get keys from '"+t+"'")}(t);e._keys.filter(function(t){return-1===n.indexOf(t)}).forEach(function(t){return e.delete(t)}),e.merge(t)}),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t=this,e={};return this._keys.forEach(function(n){return e[""+n]=t.get(n)}),e},t.prototype.toJS=function(){var t=this,e=new Map;return this._keys.forEach(function(n){return e.set(n,t.get(n))}),e},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+this._keys.map(function(e){return e+": "+t.get(e)}).join(", ")+" }]"},t.prototype.observe=function(t,e){return z(this,t)},t.prototype.intercept=function(t){return q(this,t)},t}();It(Ft.prototype,function(){return this.entries()}),we(Ft.prototype,"undefined"!=typeof Symbol?Symbol.toStringTag:"@@toStringTag","Map");var Ut,Bt,Lt=Oe("ObservableMap",Ft);function Gt(t,e){if("object"==typeof t&&null!==t){if(se(t))return void 0!==e&&fe(!1),t.$mobx.atom;if(Lt(t)){var n=t;return void 0===e?Gt(n._keys):((r=n._data.get(e)||n._hasMap.get(e))||fe(!1),r)}var r;if(h(t),e&&!t.$mobx&&t[e],at(t))return e?((r=t.$mobx.values[e])||fe(!1),r):fe(!1);if(Bt(t)||G(t)||fn(t))return t}else if("function"==typeof t&&fn(t.$mobx))return t.$mobx;return fe(!1)}function Wt(t,e){return t||fe("Expecting some object"),void 0!==e?Wt(Gt(t,e)):Bt(t)||G(t)||fn(t)?t:Lt(t)?t:(h(t),t.$mobx?t.$mobx:void fe(!1))}function qt(t,e){return(void 0!==e?Gt(t,e):at(t)||Lt(t)?Wt(t):Gt(t)).name}function Ht(t,e,n){return zt("onBecomeObserved",t,e,n)}function Yt(t,e,n){return zt("onBecomeUnobserved",t,e,n)}function zt(t,e,n,r){var i="string"==typeof n?Gt(e,n):Gt(e),o="string"==typeof n?r:n,s=i[t];return"function"!=typeof s?fe(!1):(i[t]=function(){s.call(this),o.call(this)},function(){i[t]=s})}function Jt(t,e,n){void 0===e&&(e=me),void 0===n&&(n=me);var r=new Ut(t);return Ht(r,e),Yt(r,n),r}var Kt=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,!1===t}(),Xt=0,Qt=function(){return function(){}}();!function(t,e){void 0!==Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):void 0!==t.prototype.__proto__?t.prototype.__proto__=e:t.prototype=e}(Qt,Array.prototype),Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(t){Object.defineProperty(Qt.prototype,t,{configurable:!0,writable:!0,value:Array.prototype[t]})});var Zt=function(){function t(t,e,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new Ut(t||"ObservableArray@"+he()),this.enhancer=function(n,r){return e(n,r,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&this.values.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return q(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),z(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var n=new Array(t-e),r=0;r<t-e;r++)n[r]=void 0;this.spliceWithArray(e,0,n)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=e,e>0&&t+e+1>Xt&&ie(t+e+1)},t.prototype.spliceWithArray=function(t,e,n){var r=this;Xe(this.atom);var i=this.values.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:void 0===e||null===e?0:Math.max(0,Math.min(e,i-t)),void 0===n&&(n=ce),W(this)){var o=H(this,{object:this.array,type:"splice",index:t,removedCount:e,added:n});if(!o)return ce;e=o.removedCount,n=o.added}var s=(n=0===n.length?n:n.map(function(t){return r.enhancer(t,void 0)})).length-e;this.updateArrayLength(i,s);var a=this.spliceItemsIntoValues(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice(t,n,a),this.dehanceValues(a)},t.prototype.spliceItemsIntoValues=function(t,e,n){if(n.length<1e4)return(r=this.values).splice.apply(r,c([t,e],n));var r,i=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+e)),i},t.prototype.notifyArrayChildUpdate=function(t,e,n){var r=!this.owned&&p(),i=Y(this),o=i||r?{object:this.array,type:"update",index:t,newValue:e,oldValue:n}:null;r&&g(s({},o,{name:this.atom.name})),this.atom.reportChanged(),i&&J(this,o),r&&b()},t.prototype.notifyArraySplice=function(t,e,n){var r=!this.owned&&p(),i=Y(this),o=i||r?{object:this.array,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;r&&g(s({},o,{name:this.atom.name})),this.atom.reportChanged(),i&&J(this,o),r&&b()},t}(),te=function(t){function e(e,n,r,i){void 0===r&&(r="ObservableArray@"+he()),void 0===i&&(i=!1);var o=t.call(this)||this,s=new Zt(r,n,o,i);if(we(o,"$mobx",s),e&&e.length){var a=_(!0);o.spliceWithArray(0,0,e),j(a)}return Kt&&Object.defineProperty(s.array,"0",ee),o}return o(e,t),e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,e){return void 0===e&&(e=!1),this.$mobx.observe(t,e)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map(function(t){return se(t)?t.peek():t}))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,e,n){void 0===n&&(n=0),3===arguments.length&&de("The array.find fromIndex argument to find will not be supported anymore in the next major");var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},e.prototype.findIndex=function(t,e,n){void 0===n&&(n=0),3===arguments.length&&de("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");for(var r=this.peek(),i=r.length,o=n;o<i;o++)if(t.call(e,r[o],o,this))return o;return-1},e.prototype.splice=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,e)}return this.$mobx.spliceWithArray(t,e,n)},e.prototype.spliceWithArray=function(t,e,n){return this.$mobx.spliceWithArray(t,e,n)},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,t),n.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(0,0,t),n.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var e=this.slice();return e.sort.apply(e,arguments)},e.prototype.remove=function(t){var e=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return e>-1&&(this.splice(e,1),!0)},e.prototype.move=function(t,e){function n(t){if(t<0)throw new Error("[mobx.array] Index out of bounds: "+t+" is negative");var e=this.$mobx.values.length;if(t>=e)throw new Error("[mobx.array] Index out of bounds: "+t+" is not smaller than "+e)}if(de("observableArray.move is deprecated, use .slice() & .replace() instead"),n.call(this,t),n.call(this,e),t!==e){var r,i=this.$mobx.values;r=t<e?c(i.slice(0,t),i.slice(t+1,e+1),[i[t]],i.slice(e+1)):c(i.slice(0,e),[i[t]],i.slice(e,t),i.slice(t+1)),this.replace(r)}},e.prototype.get=function(t){var e=this.$mobx;if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,e){var n=this.$mobx,r=n.values;if(t<r.length){Xe(n.atom);var i=r[t];if(W(n)){var o=H(n,{type:"update",object:this,index:t,newValue:e});if(!o)return;e=o.newValue}(e=n.enhancer(e,i))!==i&&(r[t]=e,n.notifyArrayChildUpdate(t,e,i))}else{if(t!==r.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+r.length);n.spliceWithArray(t,0,[e])}},e}(Qt);It(te.prototype,function(){this.$mobx.atom.reportObserved();var t=this,e=0;return Rt({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})}),Object.defineProperty(te.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(t){this.$mobx.setArrayLength(t)}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&ve(te.prototype,"undefined"!=typeof Symbol?Symbol.toStringTag:"@@toStringTag","Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(t){var e=Array.prototype[t];pe("function"==typeof e,"Base function not defined on Array prototype: '"+t+"'"),ve(te.prototype,t,function(){return e.apply(this.peek(),arguments)})}),function(t,e){for(var n=0;n<e.length;n++)ve(t,e[n],t[e[n]])}(te.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var ee=ne(0);function ne(t){return{enumerable:!1,configurable:!1,get:function(){return this.get(t)},set:function(e){this.set(t,e)}}}function re(t){Object.defineProperty(te.prototype,""+t,ne(t))}function ie(t){for(var e=Xt;e<t;e++)re(e);Xt=t}ie(1e3);var oe=Oe("ObservableArrayAdministration",Zt);function se(t){return be(t)&&oe(t.$mobx)}var ae="An invariant failed, however the error is obfuscated because this is an production build.",ce=[];Object.freeze(ce);var ue={};function le(){return"undefined"!=typeof window?window:r}function he(){return++Me.mobxGuid}function fe(t){throw pe(!1,t),"X"}function pe(t,e){if(!t)throw new Error("[mobx] "+(e||ae))}Object.freeze(ue);function de(t,e){return!1}function ge(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var me=function(){};function be(t){return null!==t&&"object"==typeof t}function ye(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function ve(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function we(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Oe(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return be(t)&&!0===t[n]}}function _e(t){return Array.isArray(t)||se(t)}function je(t){return void 0!==le().Map&&t instanceof le().Map}function xe(t){for(var e=[];;){var n=t.next();if(n.done)break;e.push(n.value)}return e}function Ee(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function Se(t){return null===t?null:"object"==typeof t?""+t:t}var Te,Ce,De=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","disableErrorBoundaries","runId"],Ae=function(){return function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.disableErrorBoundaries=!1}}(),ke=!0,Pe=!1,Me=function(){var t=le();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(ke=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Ae).version&&(ke=!1),ke?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Ae):(setTimeout(function(){Pe||fe("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Ae)}();function Ie(){return Me}function Re(){var t=new Ae;for(var e in t)-1===De.indexOf(e)&&(Me[e]=t[e]);Me.allowStateChanges=!Me.enforceActions}function Ne(t,e){return Ve(Gt(t,e))}function Ve(t){var e={name:t.name};return t.observing&&t.observing.length>0&&(e.dependencies=function(t){var e=[];return t.forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),e}(t.observing).map(Ve)),e}function $e(t,e){return Fe(Gt(t,e))}function Fe(t){var e={name:t.name};return function(t){return t.observers&&t.observers.length>0}(t)&&(e.observers=function(t){return t.observers}(t).map(Fe)),e}function Ue(t,e){var n=t.observers.length;n&&(t.observersIndexes[e.__mapid]=n),t.observers[n]=e,t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function Be(t,e){if(1===t.observers.length)t.observers.length=0,Le(t);else{var n=t.observers,r=t.observersIndexes,i=n.pop();if(i!==e){var o=r[e.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],n[o]=i}delete r[e.__mapid]}}function Le(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Me.pendingUnobservations.push(t))}function Ge(){Me.inBatch++}function We(){if(0==--Me.inBatch){ln();for(var t=Me.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof L&&n.suspend())}Me.pendingUnobservations=[]}}function qe(t){var e=Me.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.length&&Me.inBatch>0&&Le(t),!1)}function He(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===Ce.BREAK){var n=[];!function t(e,n,r){if(n.length>=1e3)return void n.push("(and many more)");n.push(""+new Array(r).join("\t")+e.name);e.dependencies&&e.dependencies.forEach(function(e){return t(e,n,r+1)})}(Ne(t),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof L?t.derivation.toString():"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}}!function(t){t[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE"}(Te||(Te={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(Ce||(Ce={}));var Ye=function(){return function(t){this.cause=t}}();function ze(t){return t instanceof Ye}function Je(t){switch(t.dependenciesState){case Te.UP_TO_DATE:return!1;case Te.NOT_TRACKING:case Te.STALE:return!0;case Te.POSSIBLY_STALE:for(var e=en(),n=t.observing,r=n.length,i=0;i<r;i++){var o=n[i];if(G(o)){if(Me.disableErrorBoundaries)o.get();else try{o.get()}catch(t){return nn(e),!0}if(t.dependenciesState===Te.STALE)return nn(e),!0}}return rn(t),nn(e),!1}}function Ke(){return null!==Me.trackingDerivation}function Xe(t){var e=t.observers.length>0;Me.computationDepth>0&&e&&fe(!1),Me.allowStateChanges||!e&&"strict"!==Me.enforceActions||fe(!1)}function Qe(t,e,n){rn(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++Me.runId;var r,i=Me.trackingDerivation;if(Me.trackingDerivation=t,!0===Me.disableErrorBoundaries)r=e.call(n);else try{r=e.call(n)}catch(t){r=new Ye(t)}return Me.trackingDerivation=i,function(t){for(var e=t.observing,n=t.observing=t.newObserving,r=Te.UP_TO_DATE,i=0,o=t.unboundDepsCount,s=0;s<o;s++){var a=n[s];0===a.diffValue&&(a.diffValue=1,i!==s&&(n[i]=a),i++),a.dependenciesState>r&&(r=a.dependenciesState)}n.length=i,t.newObserving=null,o=e.length;for(;o--;){var a=e[o];0===a.diffValue&&Be(a,t),a.diffValue=0}for(;i--;){var a=n[i];1===a.diffValue&&(a.diffValue=0,Ue(a,t))}r!==Te.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}(t),r}function Ze(t){var e=t.observing;t.observing=[];for(var n=e.length;n--;)Be(e[n],t);t.dependenciesState=Te.NOT_TRACKING}function tn(t){var e=en(),n=t();return nn(e),n}function en(){var t=Me.trackingDerivation;return Me.trackingDerivation=null,t}function nn(t){Me.trackingDerivation=t}function rn(t){if(t.dependenciesState!==Te.UP_TO_DATE){t.dependenciesState=Te.UP_TO_DATE;for(var e=t.observing,n=e.length;n--;)e[n].lowestObserverState=Te.UP_TO_DATE}}function on(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"==typeof t[t.length-1]&&(n=t.pop());var r=function(t){switch(t.length){case 0:return Me.trackingDerivation;case 1:return Gt(t[0]);case 2:return Gt(t[0],t[1])}}(t);if(!r)return fe(!1);r.isTracing===Ce.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?Ce.BREAK:Ce.LOG}var sn=function(){function t(t,e,n){void 0===t&&(t="Reaction@"+he()),this.name=t,this.onInvalidate=e,this.errorHandler=n,this.observing=[],this.newObserving=[],this.dependenciesState=Te.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+he(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Ce.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Me.pendingReactions.push(this),ln())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(Ge(),this._isScheduled=!1,Je(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&p()&&d({name:this.name,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation(t)}}We()}},t.prototype.track=function(t){Ge();var e,n=p();n&&(e=Date.now(),g({name:this.name,type:"reaction"})),this._isRunning=!0;var r=Qe(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ze(this),ze(r)&&this.reportExceptionInDerivation(r.cause),n&&b({time:Date.now()-e}),We()},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(Me.disableErrorBoundaries)throw t;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this;console.error(n,t),p()&&d({type:"error",name:this.name,message:n,error:""+t}),Me.globalReactionErrorHandlers.forEach(function(n){return n(t,e)})}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ge(),Ze(this),We()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t.$mobx=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),on(this,t)},t}();function an(t){return Me.globalReactionErrorHandlers.push(t),function(){var e=Me.globalReactionErrorHandlers.indexOf(t);e>=0&&Me.globalReactionErrorHandlers.splice(e,1)}}var cn=100,un=function(t){return t()};function ln(){Me.inBatch>0||Me.isRunningReactions||un(hn)}function hn(){Me.isRunningReactions=!0;for(var t=Me.pendingReactions,e=0;t.length>0;){++e===cn&&(console.error("Reaction doesn't converge to a stable state after "+cn+" iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Me.isRunningReactions=!1}var fn=Oe("Reaction",sn);function pn(t){var e=un;un=function(n){return t(function(){return e(n)})}}function dn(t,e,n,r){return"function"==typeof n?function(t,e,n,r){return Wt(t,e).observe(n,r)}(t,e,n,r):function(t,e,n){return Wt(t).observe(e,n)}(t,e,n)}function gn(t,e,n){return"function"==typeof n?function(t,e,n){return Wt(t,e).intercept(n)}(t,e,n):function(t,e){return Wt(t).intercept(e)}(t,e)}function mn(t,e,n){return 1===arguments.length||e&&"object"==typeof e?function(t,e){0;var n,r=new Promise(function(r,i){var o=bn(t,r,s({},e,{onError:i}));n=function(){o(),i("WHEN_CANCELLED")}});return r.cancel=n,r}(t,e):bn(t,e,n||{})}function bn(t,e,n){var r;"number"==typeof n.timeout&&(r=setTimeout(function(){if(!o.$mobx.isDisposed){o();var t=new Error("WHEN_TIMEOUT");if(!n.onError)throw t;n.onError(t)}},n.timeout)),n.name=n.name||"When@"+he();var i=v(n.name+"-effect",e),o=$(function(e){t()&&(e.dispose(),r&&clearTimeout(r),i())},n);return o}function yn(t){return at(t)?t.$mobx.getKeys():Lt(t)?t._keys.slice():se(t)?t.map(function(t,e){return e}):fe(!1)}function vn(t){return at(t)?yn(t).map(function(e){return t[e]}):Lt(t)?yn(t).map(function(e){return t.get(e)}):se(t)?t.slice():fe(!1)}function wn(t){return at(t)?yn(t).map(function(e){return[e,t[e]]}):Lt(t)?yn(t).map(function(e){return[e,t.get(e)]}):se(t)?t.map(function(t,e){return[e,t]}):fe(!1)}function On(t,e,n){if(2!==arguments.length)if(at(t)){var r=t.$mobx;r.values[e]?r.write(t,e,n):et(t,e,n,r.defaultEnhancer)}else if(Lt(t))t.set(e,n);else{if(!se(t))return fe(!1);"number"!=typeof e&&(e=parseInt(e,10)),pe(e>=0,"Not a valid index: '"+e+"'"),Ge(),e>=t.length&&(t.length=e+1),t[e]=n,We()}else{Ge();var i=e;try{for(var o in i)On(t,o,i[o])}finally{We()}}}function _n(t,e){if(at(t))t.$mobx.remove(e);else if(Lt(t))t.delete(e);else{if(!se(t))return fe(!1);"number"!=typeof e&&(e=parseInt(e,10)),pe(e>=0,"Not a valid index: '"+e+"'"),t.splice(e,1)}}function jn(t,e){if(at(t)){var n=Wt(t);return n.getKeys(),!!n.values[e]}return Lt(t)?t.has(e):se(t)?e>=0&&e<t.length:fe(!1)}function xn(t,e){if(jn(t,e))return at(t)?t[e]:Lt(t)?t.get(e):se(t)?t[e]:fe(!1)}function En(t,e){var n="function"==typeof t?t.prototype:t,r=function(t){var r=e[t];Array.isArray(r)||(r=[r]);var i=Object.getOwnPropertyDescriptor(n,t),o=r.reduce(function(e,r){return r(n,t,e)},i);o&&Object.defineProperty(n,t,o)};for(var i in e)r(i);return t}function Sn(t){var e=t.enforceActions,n=t.computedRequiresReaction,r=t.disableErrorBoundaries,i=t.arrayBuffer,o=t.reactionScheduler;if(void 0!==e){var s=void 0;switch(e){case!0:case"observed":s=!0;break;case!1:case"never":s=!1;break;case"strict":case"always":s="strict";break;default:fail("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}Me.enforceActions=s,Me.allowStateChanges=!0!==s&&"strict"!==s}void 0!==n&&(Me.computedRequiresReaction=!!n),!0===t.isolateGlobalState&&((Me.pendingReactions.length||Me.inBatch||Me.isRunningReactions)&&fe("isolateGlobalState should be called before MobX is running any reactions"),Pe=!0,ke&&(0==--le().__mobxInstanceCount&&(le().__mobxGlobals=void 0),Me=new Ae)),void 0!==r&&(!0===r&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),Me.disableErrorBoundaries=!!r),"number"==typeof i&&ie(i),o&&pn(o)}var Tn=0;function Cn(t){1!==arguments.length&&fe("Flow expects one 1 argument and cannot be used as decorator");var e=t.name||"<unnamed flow>";return function(){var n,r=arguments,i=++Tn,o=T(e+" - runid: "+i+" - init",t).apply(this,r),s=void 0,a=new Promise(function(t,r){var a=0;function c(t){var n;s=void 0;try{n=T(e+" - runid: "+i+" - yield "+a++,o.next).call(o,t)}catch(t){return r(t)}l(n)}function u(t){var n;s=void 0;try{n=T(e+" - runid: "+i+" - yield "+a++,o.throw).call(o,t)}catch(t){return r(t)}l(n)}function l(e){if(!e||"function"!=typeof e.then)return e.done?t(e.value):(s=Promise.resolve(e.value)).then(c,u);e.then(l,r)}n=r,c(void 0)});return a.cancel=T(e+" - runid: "+i+" - cancel",function(){try{s&&Dn(s);var t=o.return(),e=Promise.resolve(t.value);e.then(me,me),Dn(e),n(new Error("FLOW_CANCELLED"))}catch(t){n(t)}}),a}}function Dn(t){"function"==typeof t.cancel&&t.cancel()}var An={detectCycles:!0,exportMapsAsObjects:!0};function kn(t,e,n,r){return r.detectCycles&&t.set(e,n),n}function Pn(t,e){return lt(t)?("boolean"==typeof e&&(e={detectCycles:e}),e||(e=An),!0===e.detectCycles&&(n=new Map),function t(e,n,r){if(!lt(e))return e;if(!0===n.detectCycles&&null!==e&&"object"==typeof e&&r.has(e))return r.get(e);if(se(e)){var i=kn(r,e,[],n),o=e.map(function(e){return t(e,n,r)});i.length=o.length;for(var s=0,a=o.length;s<a;s++)i[s]=o[s];return i}if(at(e)){for(var c in i=kn(r,e,{},n),yn(e),e)i[c]=t(e[c],n,r);return i}if(Lt(e)){if(!1===n.exportMapsAsObjects){var u=kn(r,e,new Map,n);return e.forEach(function(e,i){u.set(i,t(e,n,r))}),u}var l=kn(r,e,{},n);return e.forEach(function(e,i){l[i]=t(e,n,r)}),l}return Q(e)?t(e.get(),n,r):e}(t,e,n)):t;var n}function Mn(t,e,n){var r;if(Lt(t)||se(t)||Q(t))r=Wt(t);else{if(!at(t))return fe(!1);if("string"!=typeof e)return fe(!1);r=Wt(t,e)}return void 0!==r.dehancer?fe(!1):(r.dehancer="function"==typeof e?e:n,function(){r.dehancer=void 0})}"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:y,extras:{getDebugName:qt}});var In="$mobx"}.call(this,n(89),n(90))},function(t,e,n){n.r(e),n.d(e,"DescribedServerError",function(){return i});var r=n(20);class i extends r.a{constructor(t){super(t),Object.setPrototypeOf(this,i.prototype)}}},function(t,e,n){n.d(e,"a",function(){return i});var r=6e4;function i(t){var e=new Date(t.getTime()),n=e.getTimezoneOffset();e.setSeconds(0,0);var i=e.getTime()%r;return n*r+i}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(53)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports={LIKE_ESCAPE_CHAR:"~",QUOTE_CHAR:'"'}},function(t,e){function n(t){this.fork=t}n.of=function(t){return new n(function(e,n){n(t)})},n.prototype.chain=function(t){var e=this;return new n(function(n,r){e.fork(n,function(e){t(e).fork(n,r)})})},n.prototype.orElse=function(t){var e=this;return new n(function(n,r){e.fork(function(e){t(e).fork(n,r)},r)})},n.prototype.ap=function(t){var e,r,i,o=this,s=2;return new n(function(n,a){function c(){0==--s&&a(e(r))}function u(t){void 0===i&&n(i=t)}o.fork(u,function(t){e=t,c()}),t.fork(u,function(t){r=t,c()})})},n.prototype.map=function(t){return this.chain(function(e){return n.of(t(e))})},n.rejected=n.prototype.rejected=function(t){return new n(function(e,n){e(t)})},n.parallel=function(t){return new n(function(e,n){var r,i=t.length,o=new Array(t.length);0!==t.length?t.forEach(function(t,s){t.fork(function(t){void 0===r&&(r=t,e(t))},function(t){return function(e){o[t]=e,void 0===r&&0==--i&&n(o)}}(s))}):n(o)})},n.sequence=function(t){return t.reduce(function(t,e){return t.chain(function(t){return e})},n.of(null))},t.exports=n},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t,e,n){super(`Unable to get a member from variable $${t}, because you do not have sufficient permissions to "${e}.${n}".`),this.variableName=t,this.entityName=e,this.attributeName=n,Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){n.d(e,"a",function(){return r});class r extends Error{constructor(t){super(`Unable to get a member from an empty variable $${t}.`),this.variableName=t,Object.setPrototypeOf(this,r.prototype)}}},function(t,e,n){t.exports=n(111)},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){const r=n(108),i=n(38),o=new r(i);o.rejected=function(t){return new o(function(e){return i.rejected(t)})},o.parallel=function(t){return new o(e=>new i((n,r)=>{if(0===t.length)return void r([]);const i=new Array(t.length);let o=t.length,s=!1;t.forEach((t,a)=>{t.run(e).fork(t=>{s||(s=!0,n(t))},t=>{i[a]=t,s||0!=--o||r(i)})})}))},o.sequence=function(t){return t.reduce((t,e)=>t.chain(t=>e.map(e=>t.concat([e]))),o.of([]))},t.exports=o},function(t,e,n){n.r(e),n.d(e,"getAllStateForMicroflow",function(){return f}),n.d(e,"getRequestDataForMicroflow",function(){return p}),n.d(e,"getRequestDataForObjectAction",function(){return d}),n.d(e,"getRequestDataForGuidsReachableFrom",function(){return g}),n.d(e,"getRequestData",function(){return m}),n.d(e,"handleServerSuccess",function(){return b}),n.d(e,"handleServerError",function(){return y}),n.d(e,"handleState",function(){return v}),n.d(e,"handleUncachedObjects",function(){return w}),n.d(e,"uploadWithRetries",function(){return j}),n.d(e,"executeAsync",function(){return E});var r=n(13),i=n(0),o=n(31),s=n(7),a=n(24),c=n(19),u=n(29),l=n(9),h=n(8);function f(t){const e=t.getAllObjects().map(t=>t.getGuid());return[window.mx.session.getUserId(),window.mx.session.getSessionObjectId()].filter(t=>!e.includes(t)).forEach(t=>e.push(t)),m(t,e)}function p(t,e,n){const r=window.mx.session.getMicroflowInfo(e),i=n.concat([window.mx.session.getUserId(),window.mx.session.getSessionObjectId()]),o=t.getAllObjects(),s=void 0!==r?Object(u.findReachableGuidsForRequest)(o,i,r.followedAssociations):o.map(t=>t.getGuid());return i.filter(t=>!s.includes(t)).forEach(t=>s.push(t)),m(t,s)}function d(t,e,n){let r=[];const i=t.getAllObjects(),[o,s]=Object(l.partition)(e=>{const r=t.getObject(e);return r&&r.metaData&&r.metaData.needsReachableState(n)},e);if(0!==o.length){const t=[window.mx.session.getUserId(),window.mx.session.getSessionObjectId()];r=r.concat(Object(u.findReachableGuidsForRequest)(i,o.concat(t)))}const[a,c]=Object(l.partition)(e=>t.isNew(e),s),h=i.filter(e=>t.isNew(e.getGuid()));return r=(r=r.concat(Object(u.findReachableGuidsForRequest)(h,a))).concat(c),m(t,r)}function g(t,e){const n=[window.mx.session.getUserId(),window.mx.session.getSessionObjectId()],r=t.getAllObjects();return m(t,Object(u.findReachableGuidsForRequest)(r,e.concat(n)))}function m(t,e){const n={};e.filter(e=>t.hasChanges(e)).forEach(e=>{n[e]=t.getChanges(e)});const r=e.filter(e=>t.has(e)).map(t.getObject,t).filter(e=>!e.isPersistable()||t.isNew(e.getGuid())).map(t=>t.jsonData);return[n,r]}async function b(t,e,n){const r=function(t,{objects:e=[],changes:n={},resets:r={}}){const i=function(t,e){return e.filter(({guid:e})=>t.has(e)).map(e=>{const{guid:n}=e;return function(t,e){const{objectType:n}=e,r=window.mx.meta.getEntity(n),i=new s.MxObject({meta:r,json:e});return r.getAttributes().filter(e=>!function(t,e,n){if(t.isReadonlyAttr(n)!==e.isReadonlyAttr(n))return!1;if(t.isReference(n)){if("System.changedBy"===n||"System.owner"===n)return!0;const r=t.getOriginalReferences(n).sort().join(","),i=e.getOriginalReferences(n).sort().join(",");return r===i}const r=t.getOriginalValue(n),i=e.getOriginalValue(n);return r===i||null!==r&&null!==i&&r.valueOf&&i.valueOf&&r.valueOf()===i.valueOf()}(t,i,e))}(t.getObject(n),e).map(t=>({guid:n,attr:t}))})}(t,e),o=function(t,e){return Object.keys(e).filter(e=>t.has(e)).map(t=>Object.keys(e[t]).map(e=>({guid:t,attr:e}))).reduce((t,e)=>t.concat(e),[])}(t,n),a=function(t,e){return Object.keys(e).filter(e=>t.has(e)).map(t=>e[t].map(e=>({guid:t,attr:e}))).reduce((t,e)=>t.concat(e),[])}(t,r);return function(t,e){return t.reduce((t,n)=>t.some(t=>e(n,t))?t:t.concat(n),[])}([].concat(i,o,a),(t,e)=>t.guid===e.guid&&t.attr===e.attr)}(t,e);v(t,e);const i=r.map(({guid:e,attr:n})=>({guid:e,attr:n,value:t.getObject(e).get(n)})).map(t=>window.mx.data.update2(t));await Promise.all(i),await O(e,n,!1),_(e)}async function y(t,e,n){if(t instanceof c.a){const r=t.original;await O(r,e,!0),_(r,n)}else t instanceof o.DescribedServerError&&await O(t.original,e,!1)}function v(t,e){const{objects:n=[],changes:r={},newpersistable:i=[],commits:o=[],deletes:s=[],resets:a={}}=e;t.removeChanges(a),t.addChanges(r);const c=n.filter(e=>(function(e){return!t.has(e.guid)})(e)).filter(t=>!function(t){return window.mx.meta.getEntity(t.objectType).isPersistable()}(t)?!o.includes(t.guid):i.includes(t.guid)).map(t=>t.guid);return t.onCreate(c),t.onDelete(s),t.onCommit(o),t.setMxObjects(n),e}function w(t,e,n){const{commits:r=[],rollbacks:i=[],deletes:o=[]}=n;e.forEach(e=>{const n=e.getGuid();if(r.includes(n)||i.indexOf(n)>=0){const r=t.getObject(n);if(!r)throw new Error("inconsistent response: committed or rolled back object is missing from response and cache");e.resetFromJSON(r.jsonData)}else o.includes(n)&&e.markDeleted()})}function O(t,e,n){return new Promise(r=>{window.mx.remote.execute(t,e,n,r)})}function _(t,e){const n=a.a.fromResponse(t);window.mx.data.sendValidationUpdates(n),n.length>0&&e&&e(n)}async function j(t,e,n,o){for(let i=0;i<=o;i++)try{return await Object(r.i)(t,e,{},n,{},[])}catch(t){if(!(i<o))throw t;{const t=Math.pow(2,i);await Object(h.c)(t)}}throw new i.AssertionError}let x=(new Date).getTime();async function E(t){const e=x++;await t(e);let n=500;for(;;){const t=await Object(r.f)(e);if(t.response.finished)return t;await Object(h.c)(n),n=Math.min(n+500,8e3)}}},function(t,e,n){n.r(e);var r=n(25),i=n(26),o=n(28),s=n(27);const a=new r.a(i.a,Object(o.a)(()=>new Date)),c=(t,e)=>{const n={};return e.all().forEach(t=>n[t]=(()=>e.get(t))),a.evaluate(t,new s.a(n))};var u=n(0);var l=n(7);var h=n(5),f=n(11);class p extends Error{constructor(t){super(t),Object.setPrototypeOf(this,p.prototype)}}function d(t){return new Promise((e,n)=>mx.data.commit({mxobjs:t,callback:e,error:n}))}function g(t){return new Promise((e,n)=>mx.data.rollback({mxobjs:t,callback:e,error:n}))}var m=n(8);var b=n(24);const y=Symbol("validations");n.d(e,"executors",function(){return v});const v=[new class{constructor(){this.instructionType="jump"}async execute(t,e){return{goto:t.target}}},new class{constructor(t){this.exprEvaluator=t,this.instructionType="switch"}async execute(t,e){const n=this.exprEvaluator(t.condition,e),r=void 0!==n?n.toString():"";if(!(r in t.targets))throw new u.AssertionError;return{goto:t.targets[r]}}}(c),new class{constructor(){this.instructionType="loop"}async execute(t,e){const n=e.get(t.listVar);if(!Array.isArray(n))throw new u.AssertionError;for(const r of n)if(e.set(t.iteratorVar,r),await e.executeNanoflow(t.body))break}},new class{constructor(t){this.evaluateExp=t,this.instructionType="return"}async execute(t,e){const n=this.evaluateExp(t.result,e);return void 0===n?{result:void 0}:Array.isArray(n)?{result:e.mapGuidsToObjects(n)}:"string"==typeof n?{result:e.mapGuidsToObjects([n])[0]}:{result:n}}}(c),new class{constructor(){this.instructionType="createObject"}async execute(t,e){const n=await new Promise((e,n)=>mx.data.create({entity:t.objectType,callback:e,error:n}));e.set(t.outputVar,n)}},new class{constructor(t){this.evaluateExp=t,this.instructionType="changeObject"}async execute(t,e){const n=e.get(t.inputVar);if(void 0===n)throw new p(`Cannot change $${t.inputVar} as it is empty`);if(!(n instanceof l.MxObject))throw new u.AssertionError;const r=this.evaluateExp(t.value,e);let i=Object(f.c)(r);i instanceof h&&(i=i.round(8)),n.set(t.member,i)}}(c),new class{constructor(){this.instructionType="commitObjects"}async execute(t,e){const n=e.get(t.inputVar);if(n instanceof l.MxObject)await d([n]);else{if(!Array.isArray(n))throw void 0===n?new p(`Cannot commit $${t.inputVar} as it is empty`):new u.AssertionError;await d(n)}}},new class{constructor(){this.instructionType="rollbackObjects"}async execute(t,e){const n=e.get(t.inputVar);if(n instanceof l.MxObject)await g([n]);else{if(!Array.isArray(n))throw void 0===n?new p(`Cannot rollback $${t.inputVar} as it is empty`):new u.AssertionError;await g(n)}}},new class{constructor(t){this.evaluateExp=t,this.instructionType="setVariable"}async execute(t,e){const n=this.evaluateExp(t.value,e);if(Array.isArray(n)){const r=e.mapGuidsToObjects(n);e.set(t.outputVar,r)}else e.set(t.outputVar,n)}}(c),new class{constructor(){this.instructionType="openForm"}async execute(t,e){const n=t.inputVar?e.get(t.inputVar):void 0;await mx.ui.openForm2(t.path,n?n.getGuid():void 0,t.title,e.currentForm,t.params)}},new class{constructor(){this.instructionType="closeForm"}async execute(t,e){await Object(m.a)(e.currentForm,"close")}},new class{constructor(t){this.evaluateExp=t,this.instructionType="showValidation"}async execute(t,e){const n=e.get(t.inputVar);if(void 0===n)throw new p(`Cannot refresh $${t.inputVar} as it is empty`);if(!(n instanceof l.MxObject))throw new u.AssertionError;const r=this.evaluateExp(t.text,e),i=void 0===r?"":r,o=function(t,e){const n=t[y]||(t[y]={});return n[e]||(n[e]={})}(e,n.getGuid());o[t.member]=i;const s=new b.a(n.getGuid(),o);mx.data.sendValidationUpdates([s])}}(c),new class{constructor(t){this.evaluateExp=t,this.instructionType="databaseRetrieve"}async execute(t,e){const{entity:n,limitExpr:r,offsetExpr:i,takeFirst:o,sort:s,outputVar:a}=t,c=r?this.evaluateExp(r,e):void 0,u=i?this.evaluateExp(i,e):void 0,l=await function(t,e){return new Promise((n,r)=>{mx.data.get({entity:t,filter:e,callback:n,error:r})})}(n,{offset:u?Number(u):void 0,amount:c?Number(c):void 0,sort:s});e.set(a,o?l[0]:l)}}(c),new class{constructor(){this.instructionType="associationRetrieve"}async execute(t,e){const{inputVar:n,association:r,entity:i,retrieveSingleObject:o,direction:s,outputVar:a}=t,c=e.get(n);if(void 0===c)return void e.set(a,void 0);if(!(c instanceof l.MxObject))throw new u.AssertionError;const h=await function(t,e,n,r){return new Promise((i,o)=>{mx.data.get({guid:t.getGuid(),path:e,entity:n,direction:r,callback:i,error:o})})}(c,r,i,s);e.set(a,o?h[0]:h)}},new class{constructor(t){this.evaluateExp=t,this.instructionType="writeLog"}async execute(t,e){const n=this.evaluateExp(t.message,e);mx.logger.log(t.level,n)}}(c)]},function(t,e,n){n.r(e);var r=n(0),i=n(7),o=n(4);class s{constructor(t,e){this.currentForm=t,this.executeNanoflow=e,this.map={}}set(t,e){this.map[t]=e}get(t){if(!(t in this.map))throw new r.AssertionError;return this.map[t]}all(){return Object.keys(this.map)}mapGuidsToObjects(t){const e={};return this.all().map(t=>this.get(t)).map(t=>t instanceof i.MxObject?[t]:Array.isArray(t)?t:[]).reduce((t,e)=>t.concat(e),[]).forEach(t=>{e[t.getGuid()]=t}),t.map(t=>Object(o.b)(e[t]))}}n.d(e,"NanoflowEngine",function(){return a});class a{constructor(t){this.executors=t}execute(t,e,n){const r=new s(n,t=>this.executeWithScope(t,r));return e.forEach(({name:t,value:e})=>r.set(t,e)),this.executeWithScope(t,r)}async executeWithScope(t,e){let n=0;for(;n<t.length;){const i=t[n],o=this.executors.find(t=>t.instructionType===i.type);if(void 0===o)throw new r.AssertionError;const s=await o.execute(i,e);if(c(s)){if(-1===(n=t.findIndex(t=>t.label===s.goto)))throw new r.AssertionError}else{if(u(s))return s.result;n++}}throw new r.AssertionError}}function c(t){return void 0!==t&&"object"==typeof t&&"goto"in t}function u(t){return void 0!==t&&"object"==typeof t&&"result"in t}},function(t,e,n){t.exports=n(91)()},,function(t,e,n){var r=n(33),i=n(34),o=n(50),s=n(74),a=n(57),c=function(t,e,n){var u,l,h,f,p=t&c.F,d=t&c.G,g=t&c.S,m=t&c.P,b=t&c.B,y=d?r:g?r[e]||(r[e]={}):(r[e]||{}).prototype,v=d?i:i[e]||(i[e]={}),w=v.prototype||(v.prototype={});for(u in d&&(n=e),n)h=((l=!p&&y&&void 0!==y[u])?y:n)[u],f=b&&l?a(h,r):m&&"function"==typeof h?a(Function.call,h):h,y&&s(y,u,h,t&c.U),v[u]!=h&&o(v,u,f),m&&w[u]!=h&&(w[u]=h)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(72),i=n(55);t.exports=n(36)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(35);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(36)&&!n(53)(function(){return 7!=Object.defineProperty(n(73)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(35);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(76);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},function(t,e,n){const r=n(38);var i={promiseFromTask:function(t){return new Promise(function(e,n){t.fork(n,e)})},callbackFromTask:function(t,e,n){t.fork(function(t){n&&n(t)},function(t){e&&e(t)})},taskFromPromise:function(t){return new r(function(e,n){t.then(n,e)})}};t.exports=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),i=n(2),o=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(i),s=n(1),a=void 0,c={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},u={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l=Object.defineProperty,h=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,g=d&&d(Object);var m=function t(e,n,r){if("string"!=typeof n){if(g){var i=d(n);i&&i!==g&&t(e,i,r)}var o=h(n);f&&(o=o.concat(f(n)));for(var s=0;s<o.length;++s){var a=o[s];if(!(c[a]||u[a]||r&&r[a])){var m=p(n,a);try{l(e,a,m)}catch(t){}}}return e}return e},b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=(function(){function t(t){this.value=t}function e(e){var n,r;function i(n,r){try{var s=e[n](r),a=s.value;a instanceof t?Promise.resolve(a.value).then(function(t){i("next",t)},function(t){i("throw",t)}):o(s.done?"return":"normal",s.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?i(n.key,n.arg):r=null}this._invoke=function(t,e){return new Promise(function(o,s){var a={key:t,arg:e,resolve:o,reject:s,next:null};r?r=r.next=a:(n=r=a,i(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),w=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},O=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},_=function(){function t(){y(this,t),this.listeners=[]}return v(t,[{key:"on",value:function(t){var e=this;return this.listeners.push(t),function(){var n=e.listeners.indexOf(t);-1!==n&&e.listeners.splice(n,1)}}},{key:"emit",value:function(t){this.listeners.forEach(function(e){return e(t)})}}]),t}();function j(t){function e(e,n,i,o,s,a){for(var c=arguments.length,u=Array(c>6?c-6:0),l=6;l<c;l++)u[l-6]=arguments[l];return r.untracked(function(){if(o=o||"<<anonymous>>",a=a||i,null==n[i]){if(e){var r=null===n[i]?"null":"undefined";return new Error("The "+s+" `"+a+"` is marked as required in `"+o+"`, but its value is `"+r+"`.")}return null}return t.apply(void 0,[n,i,o,s,a].concat(u))})}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function x(t){var e=void 0===t?"undefined":b(t);return Array.isArray(t)?"array":t instanceof RegExp?"object":function(t,e){return"symbol"===t||"Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol}(e,t)?"symbol":e}function E(t,e){return j(function(n,i,o,s,a){return r.untracked(function(){if(t&&x(n[i])===e.toLowerCase())return null;var s=void 0;switch(e){case"Array":s=r.isObservableArray;break;case"Object":s=r.isObservableObject;break;case"Map":s=r.isObservableMap;break;default:throw new Error("Unexpected mobxType: "+e)}var c=n[i];if(!s(c)){var u=function(t){var e=x(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}(c),l=t?" or javascript `"+e.toLowerCase()+"`":"";return new Error("Invalid prop `"+a+"` of type `"+u+"` supplied to `"+o+"`, expected `mobx.Observable"+e+"`"+l+".")}return null})})}function S(t,e){return j(function(n,i,o,s,a){for(var c=arguments.length,u=Array(c>5?c-5:0),l=5;l<c;l++)u[l-5]=arguments[l];return r.untracked(function(){if("function"!=typeof e)return new Error("Property `"+a+"` of component `"+o+"` has invalid PropType notation.");var r=E(t,"Array")(n,i,o);if(r instanceof Error)return r;for(var c=n[i],l=0;l<c.length;l++)if((r=e.apply(void 0,[c,l,o,s,a+"["+l+"]"].concat(u)))instanceof Error)return r;return null})})}var T=E(!1,"Array"),C=S.bind(null,!1),D=E(!1,"Map"),A=E(!1,"Object"),k=E(!0,"Array"),P=S.bind(null,!0),M=E(!0,"Object"),I=Object.freeze({observableArray:T,observableArrayOf:C,observableMap:D,observableObject:A,arrayOrObservableArray:k,arrayOrObservableArrayOf:P,objectOrObservableObject:M});var R={mobxStores:M};Object.seal(R);var N={contextTypes:{get:function(){return R},set:function(t){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function V(t,e,n){var r,o,s="inject-"+(e.displayName||e.name||e.constructor&&e.constructor.name||"Unknown");n&&(s+="-with-"+n);var a=(o=r=function(n){function r(){var t,e,n;y(this,r);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=n=O(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(o))),n.storeRef=function(t){n.wrappedInstance=t},O(n,e)}return w(r,n),v(r,[{key:"render",value:function(){var n={};for(var r in this.props)this.props.hasOwnProperty(r)&&(n[r]=this.props[r]);var o=t(this.context.mobxStores||{},n,this.context)||{};for(var s in o)n[s]=o[s];return function(t){return!(t.prototype&&t.prototype.render)}(e)||(n.ref=this.storeRef),i.createElement(e,n)}}]),r}(i.Component),r.displayName=s,o);return m(a,e),a.wrappedComponent=e,Object.defineProperties(a,N),a}function $(){var t=void 0;if("function"==typeof arguments[0])return t=arguments[0],function(e){var n=V(t,e);return n.isMobxInjector=!1,(n=it(n)).isMobxInjector=!0,n};for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t=function(t){return function(e,n){return t.forEach(function(t){if(!(t in n)){if(!(t in e))throw new Error("MobX injector: Store '"+t+"' is not available! Make sure it is provided by some Provider");n[t]=e[t]}}),n}}(e),function(n){return V(t,n,e.join("-"))}}var F=r.$mobx||"$mobx",U=!1,B=!1,L=!1,G="undefined"!=typeof WeakMap?new WeakMap:void 0,W=new _,q={};function H(t){return q[t]||(q[t]=function(t){return"function"==typeof Symbol?Symbol(t):"$mobxReactProp$"+t+Math.random()}(t)),q[t]}var Y=H("skipRender"),z=H("isForcingUpdate");function J(t,e,n){Object.hasOwnProperty.call(t,e)?t[e]=n:Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n})}function K(t){if(a)try{return a(t)}catch(t){return null}return null}function X(t){var e=K(t);e&&G&&G.set(e,t),W.emit({event:"render",renderTime:t.__$mobRenderEnd-t.__$mobRenderStart,totalTime:Date.now()-t.__$mobRenderStart,component:t,node:e})}function Q(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");U||(U=!0)}var Z=new _;function tt(t,e){if(et(t,e))return!0;if("object"!==(void 0===t?"undefined":b(t))||null===t||"object"!==(void 0===e?"undefined":b(e))||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!hasOwnProperty.call(e,n[i])||!et(t[n[i]],e[n[i]]))return!1;return!0}function et(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var nt={componentWillUnmount:function(){if(!0!==B&&(this.render[F]&&this.render[F].dispose(),this.__$mobxIsUnmounted=!0,U)){var t=K(this);t&&G&&G.delete(t),W.emit({event:"destroy",component:this,node:t})}},componentDidMount:function(){U&&X(this)},componentDidUpdate:function(){U&&X(this)},shouldComponentUpdate:function(t,e){return B&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==e||!tt(this.props,t)}};function rt(t,e){var n=H(e+" value holder"),i=H(e+" atom holder");function o(){return this[i]||J(this,i,r.createAtom("reactive "+e)),this[i]}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o.call(this).reportObserved(),this[n]},set:function(t){this[z]||tt(this[n],t)?J(this,n,t):(J(this,n,t),J(this,Y,!0),o.call(this).reportChanged(),J(this,Y,!1))}})}function it(t,e){if("string"==typeof t)throw new Error("Store names should be provided as array");if(Array.isArray(t))return L||(L=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),e?$.apply(null,t)(it(e)):function(e){return it(t,e)};var n=t;if(!0===n.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),n.__proto__===i.PureComponent&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),!("function"!=typeof n||n.prototype&&n.prototype.render||n.isReactClass||i.Component.isPrototypeOf(n))){var o,s,a=it((s=o=function(t){function e(){return y(this,e),O(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return w(e,t),v(e,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),e}(i.Component),o.displayName=n.displayName||n.name,o.contextTypes=n.contextTypes,o.propTypes=n.propTypes,o.defaultProps=n.defaultProps,s));return m(a,n),a}if(!n)throw new Error("Please pass a valid component to 'observer'");var c=n.prototype||n;!function(t){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(e){!function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t[e],i=nt[e],o=r?!0===n?function(){i.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),i.apply(this,arguments)}:i;t[e]=o}(t,e)}),t.shouldComponentUpdate?t.shouldComponentUpdate!==nt.shouldComponentUpdate&&console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):t.shouldComponentUpdate=nt.shouldComponentUpdate}(c),n.isMobXReactObserver=!0,rt(c,"props"),rt(c,"state");var u=c.render;return c.render=function(){return function(t){var e=this;if(!0===B)return t.call(this);function n(){var t=this;c=!1;var e=void 0,n=void 0;if(u.track(function(){U&&(t.__$mobRenderStart=Date.now());try{n=r._allowStateChanges(!1,a)}catch(t){e=t}U&&(t.__$mobRenderEnd=Date.now())}),e)throw Z.emit(e),e;return n}var o=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",s=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;J(this,Y,!1),J(this,z,!1);var a=t.bind(this),c=!1,u=new r.Reaction(o+"#"+s+".render()",function(){if(!c&&(c=!0,"function"==typeof e.componentWillReact&&e.componentWillReact(),!0!==e.__$mobxIsUnmounted)){var t=!0;try{J(e,z,!0),e[Y]||i.Component.prototype.forceUpdate.call(e),t=!1}finally{J(e,z,!1),t&&u.dispose()}}});return u.reactComponent=this,n[F]=u,this.render=n,n.call(this)}.call(this,u)},n}var ot=it(function(t){var e=t.children,n=t.inject,r=t.render,i=e||r;if(void 0===i)return null;if(!n)return i();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var s=$(n)(i);return o.createElement(s,null)});ot.displayName="Observer";var st,at,ct=function(t,e,n,r,i){var o="children"===e?"render":"children";return"function"==typeof t[e]&&"function"==typeof t[o]?new Error("Invalid prop,do not use children and render in the same time in`"+n):"function"!=typeof t[e]&&"function"!=typeof t[o]?new Error("Invalid prop `"+i+"` of type `"+b(t[e])+"` supplied to `"+n+"`, expected `function`."):void 0};function ut(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==t&&void 0!==t&&this.setState(t)}function lt(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!==n&&void 0!==n?n:null}.bind(this))}function ht(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}ot.propTypes={render:ct,children:ct},ut.__suppressDeprecationWarning=!0,lt.__suppressDeprecationWarning=!0,ht.__suppressDeprecationWarning=!0;var ft={children:!0,key:!0,ref:!0},pt=(at=st=function(t){function e(t,n){y(this,e);var r=O(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.state={},dt(t,r.state),r}return w(e,t),v(e,[{key:"render",value:function(){return i.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var t={};return dt(this.context.mobxStores,t),dt(this.props,t),{mobxStores:t}}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(!t)return null;if(!e)return t;if(Object.keys(t).filter(gt).length!==Object.keys(e).filter(gt).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!t.suppressChangedStoreWarning)for(var n in t)gt(n)&&e[n]!==t[n]&&console.warn("MobX Provider: Provided store '"+n+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return t}}]),e}(i.Component),st.contextTypes={mobxStores:M},st.childContextTypes={mobxStores:M.isRequired},at);function dt(t,e){if(t)for(var n in t)gt(n)&&(e[n]=t[n])}function gt(t){return!ft[t]&&"suppressChangedStoreWarning"!==t}if(function(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate)return t;var n=null,r=null,i=null;if("function"==typeof e.componentWillMount?n="componentWillMount":"function"==typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof e.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof e.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof e.componentWillUpdate?i="componentWillUpdate":"function"==typeof e.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==i){var o=t.displayName||t.name,s="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+s+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof t.getDerivedStateFromProps&&(e.componentWillMount=ut,e.componentWillReceiveProps=lt),"function"==typeof e.getSnapshotBeforeUpdate){if("function"!=typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=ht;var a=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;a.call(this,t,e,r)}}}(pt),!i.Component)throw new Error("mobx-react requires React to be available");if(!r.spy)throw new Error("mobx-react requires mobx to be available");"function"==typeof s.unstable_batchedUpdates&&r.configure({reactionScheduler:s.unstable_batchedUpdates});if("object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":b(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var mt={spy:r.spy,extras:{getDebugName:r.getDebugName}},bt={renderReporter:W,componentByNodeRegistry:G,componentByNodeRegistery:G,trackComponents:Q};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(bt,mt)}e.propTypes=I,e.PropTypes=I,e.onError=function(t){return Z.on(t)},e.observer=it,e.Observer=ot,e.renderReporter=W,e.componentByNodeRegistery=G,e.componentByNodeRegistry=G,e.trackComponents=Q,e.useStaticRendering=function(t){B=t},e.Provider=pt,e.inject=$},function(t,e,n){var r=n(93),i=n(94),o=i;o.v1=r,o.v4=i,t.exports=o},function(t,e){t.exports=require("react-native-vector-icons")},function(t,e,n){const r=n(95);t.exports=function(){const t={},e={};this.startup=function(){window.mx.session.getConfig("metadata").forEach(function(e){const n=new r({json:e});t[n.getEntity()]=n})},this.getMap=function(){return t},this.getEntity=function(e){const n=t[e];return n||window.mx.logger.error("No permission to read or write entity "+e+", check security!"),n},this.getAttributeOwner=function(t,n){const r=t+"."+n,i=e[r];if(null!=i)return i;const o=this.getEntity(t);if(!o||!o.has(n))return null;const[s]=[t].concat(o.getSuperEntities()).filter(t=>this.getEntity(t).has(n)).slice(-1);return e[r]=s,s}}},function(t,e,n){const{AssertionError:r}=n(0),i=n(9);var o="mendix.sys.Remote",s={text_message:function(t,e,n){var i=t.args,o=i.MessageContent,s=i.MessageType,a="true"===String(i.MessageBlock);if(null==o||null==s)throw new r("'Show Message' message content is null");(window.mx.ui[s.toLowerCase()]||window.mx.ui.info)(o,a);n&&n()},refresh_object_list:function(t,e,n){var r=t.args.ObjectIds;r?Promise.all(r.map(t=>window.mx.data.update2({guid:t}))).then(n):n&&n()},refresh_class:function(t,e,n){var r=t.args.classnames;null!=r?Promise.all(r.map(t=>window.mx.data.update2({entity:t}))).then(n):n&&n()},open_form:function({args:t},e,n){const{FormPath:r,FormTitle:i,FormGuid:o,FormTarget:s,FormWidth:a,FormHeight:c,FormResizable:u}=t;window.mx.ui.openForm2(r,o,i,e,{location:s,width:a,height:c,resizable:u}).then(n,window.mx.onError)},download_file:function(t,e,n){const{FileDocumentGuid:r,Target:i}=t.args;window.mx.data.get({guid:r,callback:t=>{t&&window.mx.ui.downloadFile({mxobject:t,target:i}),n&&n()}})},show_login:function(t,e,n){window.mx.ui.showLogin(),n&&n()},logout:function(t,e,n){window.mx.logout(),n&&n()},close:function(t,e,n){e.close(),n&&n()}};t.exports=function(){this.toString=function(){return o},this.execute=function(t,e,n,r){if(this.hasInstructions(t)){var o=t.instructions.filter(u),a=t.instructions.filter(function(t){return!u(t)}),c=(n?a:o.concat(a)).map(function(t){if("system"!==t.target||!(t.type in s))throw new Error("Unsupported instruction received from the server: "+JSON.stringify(t));return s[t.type].bind(null,t,e||{})});i.sequence(c,r)}else r&&r();function u(t){return"open_form"===t.type||"close"===t.type}},this.hasInstructions=function(t){return!(!t||null==t.instructions||!t.instructions.length)}}},function(t,e){t.exports=require("react-native-sqlite-storage")},function(t,e,n){var r=n(99),i=n(100),o=n(101);function s(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function a(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function c(t,e){var n=function(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return function(t,n,r){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e=i({arrayFormat:"none"},e)),r=Object.create(null);return"string"!=typeof t?r:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),i=e.shift(),s=e.length>0?e.join("="):void 0;s=void 0===s?null:o(s),n(o(i),s,r)}),Object.keys(r).sort().reduce(function(t,e){var n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(n):t[e]=n,t},Object.create(null))):r}e.extract=a,e.parse=c,e.stringify=function(t,e){!1===(e=i({encode:!0,strict:!0,arrayFormat:"none"},e)).sort&&(e.sort=function(){});var n=function(t){switch(t.arrayFormat){case"index":return function(e,n,r){return null===n?[s(e,t),"[",r,"]"].join(""):[s(e,t),"[",s(r,t),"]=",s(n,t)].join("")};case"bracket":return function(e,n){return null===n?s(e,t):[s(e,t),"[]=",s(n,t)].join("")};default:return function(e,n){return null===n?s(e,t):[s(e,t),"=",s(n,t)].join("")}}}(e);return t?Object.keys(t).sort(e.sort).map(function(r){var i=t[r];if(void 0===i)return"";if(null===i)return s(r,e);if(Array.isArray(i)){var o=[];return i.slice().forEach(function(t){void 0!==t&&o.push(n(r,t,o.length))}),o.join("&")}return s(r,e)+"="+s(i,e)}).filter(function(t){return t.length>0}).join("&"):""},e.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:c(a(t),e)}}},function(t,e,n){const r=n(104),i=n(109),o=n(110),s=n(43),a=n(61);function c(){return window.openDatabase("MendixDatabase","1","Mendix Database",10485760)}function u(t,e){o.call(this),e=e||c,this._tableNames=t;const n=e();this._databasePromise=this._initialize(n)}u.prototype=Object.create(o.prototype),u.prototype._getDatabase=function(){return this._databasePromise},u.prototype._initialize=function(t){var e=r.createCreateTransaction(this._tableNames);return a.promiseFromTask(i.runWriteTransaction(t,e)).then(()=>t)},u.prototype._fetch=function(t){return function(e){var n=r.createFetchByGuidTransaction(t);return a.promiseFromTask(i.runReadTransaction(e,n))}},u.prototype._fetchSlice=function(t,e,n){return function(o){var s=r.createFetchSliceTransaction(t,e,n.offset,n.limit,n.sort);return a.promiseFromTask(i.runReadTransaction(o,s))}},u.prototype._rebuildDb=function(t){return s.ask().chain(function(e){var n=r.createRebuildTransaction(this._tableNames,t);return new s(function(t){return i.runWriteTransaction(e,n)})}.bind(this))},u.prototype._insertOrReplace=function(t){return function(e){var n=r.createInsertOrReplaceTransaction(t);return a.promiseFromTask(i.runWriteTransaction(e,n))}},u.prototype._cleanDatabase=function(){return t=>{var e=r.createCleanTransaction(this._tableNames);return a.promiseFromTask(i.runWriteTransaction(t,e))}},u.prototype._fetchDirty=function(){return s.ask().chain(function(t){var e=r.createFetchDirtyObjectsTransaction();return new s(function(n){return i.runWriteTransaction(t,e)})})},u.prototype._makeClean=function(t){return s.ask().chain(function(e){var n=r.createMakeCleanTransaction(t);return new s(function(t){return i.runWriteTransaction(e,n)})})},u.prototype._cleanupDirtyObjects=function(){return function(t){var e=r.createDirtyCleanupTransaction();return a.promiseFromTask(i.runWriteTransaction(t,e))}},t.exports=u},function(t,e,n){n(71),t.exports=n(34).Object.setPrototypeOf},function(t,e,n){var r=n(49);r(r.S,"Object",{setPrototypeOf:n(77).set})},function(t,e,n){var r=n(51),i=n(52),o=n(54),s=Object.defineProperty;e.f=n(36)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(35),i=n(33).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(33),i=n(50),o=n(56),s=n(75)("src"),a=Function.toString,c=(""+a).split("toString");n(34).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||i(n,s,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(35),i=n(51),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(57)(Function.call,n(78).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){var r=n(79),i=n(55),o=n(80),s=n(54),a=n(56),c=n(52),u=Object.getOwnPropertyDescriptor;e.f=n(36)?u:function(t,e){if(t=o(t),e=s(e,!0),c)try{return u(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(81),i=n(42);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(82);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){n(84),t.exports=n(34).String.padEnd},function(t,e,n){var r=n(49),i=n(85),o=n(88);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){var r=n(86),i=n(87),o=n(42);t.exports=function(t,e,n,s){var a=String(o(t)),c=a.length,u=void 0===n?" ":String(n),l=r(e);if(l<=c||""==u)return a;var h=l-c,f=i.call(u,Math.ceil(h/u.length));return f.length>h&&(f=f.slice(0,h)),s?f+a:a+f}},function(t,e,n){var r=n(58),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(58),i=n(42);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){var r=n(33).navigator;t.exports=r&&r.userAgent||""},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&p())}function p(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(92);function i(){}t.exports=function(){function t(t,e,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=i,n.PropTypes=n,n}},function(t,e,n){t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r,i,o=n(59),s=n(60),a=0,c=0;t.exports=function(t,e,n){var u=e&&n||0,l=e||[],h=(t=t||{}).node||r,f=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==f){var p=o();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,m=d-a+(g-c)/1e4;if(m<0&&void 0===t.clockseq&&(f=f+1&16383),(m<0||d>a)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,c=g,i=f;var b=(1e4*(268435455&(d+=122192928e5))+g)%4294967296;l[u++]=b>>>24&255,l[u++]=b>>>16&255,l[u++]=b>>>8&255,l[u++]=255&b;var y=d/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var v=0;v<6;++v)l[u+v]=h[v];return e||s(l)}},function(t,e,n){var r=n(59),i=n(60);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[o+a]=s[a];return e||i(s)}},function(t,e){t.exports=function(t){var e=t.json;if(!(e&&e.attributes&&e.objectType&&e.properties))throw new Error("MxMetaObject: invalid initialization");this.has=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.has: parameter attr is not of type String.");return Object.prototype.hasOwnProperty.call(e.attributes,t)},this.isEnum=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isEnum : parameter attr is not of type String.");return/^(Enum|EnumSet)$/.test(this.getAttributeType(t))},this.isNumeric=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isNumeric : parameter attr is not of type String.");return/^(Integer|Long|Decimal|Float|Currency)$/.test(this.getAttributeType(t))},this.isPassword=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isDate : parameter attr is not of type String.");return"HashString"===this.getAttributeType(t)},this.isCurrency=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isCurrency : parameter attr is not of type String.");return"Currency"===this.getAttributeType(t)},this.isDate=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isDate : parameter attr is not of type String.");return/^(Date|DateTime)$/.test(this.getAttributeType(t))},this.isLocalizedDate=function(t){return this.isDate(t)?/true/.test(e.attributes[t].localize):null},this.isBoolean=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isBoolean : parameter attr is not of type String.");return"Boolean"===this.getAttributeType(t)},this.isReference=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isReference : parameter attr is not of type String.");return/^(ObjectReference|ObjectReferenceSet)$/.test(this.getAttributeType(t))},this.isObjectReference=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isObjectReference : parameter attr is not of type String.");return"ObjectReference"===this.getAttributeType(t)},this.isObjectReferenceSet=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isObjectReferenceSet : parameter attr is not of type String.");return"ObjectReferenceSet"===this.getAttributeType(t)},this.isBidirectionalReference=function(t){return this.isReference(t)&&Boolean(e.attributes[t].both)},this.getOptions=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.getOptions : parameter attr is not of type String.");if(!this.isEnum(t))throw new Error("mendix/lib/MxMetaObject.getOptions : attribute '"+t+"' is not an Enumeration.");try{var n=[];if(this.has(t)){var r=e.attributes[t].options;if(r&&r.length){n=[];for(var i=0;i<r.length;i++)for(var o in r[i])n.push(r[i][o])}}return n}catch(t){return[]}},this.getEnumMap=function(t){if(!this.isEnum(t))return null;for(var n=[],r=e.attributes[t].options,i=0;i<r.length;i++)for(var o in r[i]){n.push({key:o,caption:r[i][o]});break}return n},this.getEnumKVPairs=function(t){if(!this.isEnum(t))return null;for(var n={},r=e.attributes[t].options,i=0;i<r.length;i++)for(var o in r[i])n[o]=r[i][o];return n},this.getEnumCaption=function(t,n){if(!this.isEnum(t))return null;for(var r=e.attributes[t].options,i=0;i<r.length;i++){var o=r[i];for(var s in o)if(s===n)return o[s]}return n},this.getReferenceAttributes=function(){var t=[];for(var n in e.attributes)this.isReference(n)&&t.push(n);return t},this.getAttributes=function(){var t=[];for(var n in e.attributes)t.push(n);return t},this.getAttributesWithoutReferences=function(){var t=[];for(var n in e.attributes)this.isReference(n)||t.push(n);return t},this.getAttributeType=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.getAttributeType : parameter attr is not of type String.");return!!this.has(t)&&e.attributes[t].type},this.getSelectorEntity=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.getSelectorEntity : parameter attr is not of type String.");return!!this.has(t)&&e.attributes[t].klass},this.getEntity=function(){return e.objectType},this.isPersistable=function(){return e.persistable},this.needsReachableState=function(t){return!(t in e.needsReachableState)||e.needsReachableState[t]},this.isA=function(t){return this.getEntity()===t||this.inheritsFrom(t)},this.hasSuperEntities=function(){return 0!==e.properties.superclasses.length},this.getSuperEntities=function(){var t=e.properties.superclasses;return"string"==typeof t?[t]:t},this.hasSubEntities=function(){return 0!==e.properties.subclasses.length},this.getSubEntities=function(){var t=e.properties.subclasses;return"string"==typeof t?[t]:t},this.inheritsFrom=function(t){return(this.getSuperEntities()||[]).includes(t)},this.isSyncable=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isObjectReferenceSet : parameter attr is not of type String.");return!!this.has(t)&&(void 0===e.attributes[t].sync||e.attributes[t].sync)}}},function(t,e,n){n.r(e),n.d(e,"MxObjectSnapshot",function(){return o});var r=n(0),i=n(7);class o extends i.MxObject{constructor(t){super({meta:t.metaData,json:{guid:t.getGuid(),objectType:t.getEntity()}}),this._mxObject=t}resetFromJSON(t){super.resetFromJSON(t),this._mxObject.resetFromJSON(t)}markDeleted(){super.markDeleted(),this._mxObject.markDeleted()}hasChanges(){return!1}snapshot(){return this}isReadonlyAttr(t){return!0}_fetchReference(t,e,n,r){super._fetchReference(t,e,t=>{t instanceof i.MxObject?n(t.snapshot()):Array.isArray(t)?n(t.map(t=>t.snapshot())):n(t)},r)}has(t){return this._mxObject.has(t)}toJSON(){return this._mxObject.toJSON()}_attributeChanged(t){return!1}_getAttributeValue(t){return this._mxObject._getAttributeValue(t)}_makeChange(t,e){throw new r.AssertionError(`Cannot modify attribute ${t} of a read-only object.`)}_getChildren(t){return this._mxObject._getChildren(t).map(t=>t.snapshot())}convertToEditable(){return window.mx.data.removeChanges(this.getGuid()),this._mxObject}}},function(t,e,n){n.r(e),n.d(e,"MxContext",function(){return a});var r=n(7),i=n(9),o=n.n(i);let s=0;class a{constructor(t){this.id=this.ident=++s,this.trackId="",this.trackEntity="",this.trackObject=null,this.localParams={},this.constraintby=[],this._entityToGuid={},this._mxidToObject={},t&&(t.mxcontext&&this.dupFrom(t.mxcontext),t.classname&&t.mendixguid?this.setContext(t.classname,t.mendixguid):t.entity&&t.guid&&this.setContext(t.entity,t.guid))}hasTrackEntity(){return""!==this.trackEntity}hasTrackId(){return!!this.trackId}hasTrackObject(){return!!this.trackObject}getTrackEntity(){return this.trackEntity}getTrackId(){return this.trackId}getTrackObject(){return this.trackObject}setTrackObject(t){t&&this.setContext(t.getEntity(),t.getGuid()),this.trackObject=t}getObject(){return this.trackObject}setConstraints(t){null!=t&&""!==t&&0!==t.length&&(this.constraintby="string"==typeof t?t.split(","):t)}getConstraints(){for(var t=[],e=0;e<this.constraintby.length;e++)t.push(this.constraintby[e]);return t}hasBacktrack(){return 0!==this.constraintby.length}getEntities(){return Object.keys(this._entityToGuid).filter(t=>void 0!==t&&""!==this._entityToGuid[t])}setContext(t,e){if(1===arguments.length&&arguments[0]instanceof r.MxObject){var n=arguments[0];t=n.getEntity(),e=n.getGuid()}this.trackEntity=null==t?"":t,this.trackId=null==e?"":e,this.trackObject=null,this._entityToGuid[this.trackEntity]=this.trackId}unsetContext(t){if("string"!=typeof t)throw new Error("mendix/lib/MxContext.unsetContext: parameter entity is not of type String");delete this._entityToGuid[t]}getContext(t){if("string"!=typeof t)throw new Error("mendix/lib/MxContext.getContext: parameter entity is not of type String");if(t in this._entityToGuid)return this._entityToGuid[t];var e=null;return window.mx.meta.getEntity(t).getSubEntities().some(t=>t in this._entityToGuid&&(e=this._entityToGuid[t],!0)),e}hasContext(t){if("string"!=typeof t)throw new Error("mendix/lib/MxContext.hasContext: parameter entity is not of type String");return null!=this.getContext(t)}reset(){this._entityToGuid={},this._mxidToObject={},this.trackId=null,this.trackEntity="",this.trackObject=null}dupFrom(t){this.reset(),this.mixin(t)}mixin(t){if(t)t.getEntities().forEach(e=>this.setContext(e,t.getContext(e))),t.getWidgetIds().forEach(e=>this.setWidgetObject(e,t.getWidgetObject(e))),this.setParams(t.getParams()),this.setConstraints(t.getConstraints()),this.setContext(t.getTrackEntity(),t.getTrackId()),this.setTrackObject(t.getTrackObject());else{const t=this.getTrackEntity();t&&this.unsetContext(t),this.setContext(null,null)}}hasParam(t){return t in this.localParams}getParam(t){return this.hasParam(t)?this.localParams[t]:null}getParams(){return this.localParams}setParam(t,e){if(null==t)throw new Error("mendix/lib/MxContext["+this.ident+"].setParam key is null");this.localParams[t]=e}setParams(t){if("object"!=typeof t)throw new Error("mendix/lib/MxContext["+this.ident+"].setParams requires an Object.");for(var e in t)this.localParams[e]=t[e]}unsetParam(t){delete this.localParams[t]}resetParams(){this.localParams={}}isEmpty(){for(var t in this._entityToGuid)return!0;return!1}getGuids(){for(var t=this.getEntities(),e=this.getTrackId(),n=e?[e]:[],r=0,i=t.length;r<i;r++){var o=t[r];if("System.owner"!==o&&"System.changedBy"!==o){var s=this.getContext(o);s!==e&&n.push(s)}}return n}getWidgetIds(){return Object.keys(this._mxidToObject)}getWidgetObject(t){return this._mxidToObject[t]}setWidgetObject(t,e){this.setTrackObject(e),this._mxidToObject[t]=e}getWidgetObjectMap(){return o.a.clone(this._mxidToObject)}freeze(){this.setTrackObject=this.setConstraints=this.setContext=this.unsetContext=this.reset=this.dupFrom=this.setParam=this.setParams=this.unsetParam=this.setWidgetObject=this.resetParams=function(){return window.mx.logger.error("mendix/lib/MxContext["+this.ident+"].freeze: context is readonly"),!1}}}},function(t,e,n){const{executors:r}=n(45),{handleServerError:i,handleUncachedObjects:o}=n(44),{MxObject:s}=n(7),{NanoflowEngine:a}=n(46),c=n(5);function u(t,e,n){this._backend=t,this._objectCache=e,this._shouldRemoveObjectImmediately=n,this._nanoflowEngine=new a(r)}function l(t){return t.getGuid()}function h(t,e){return t.isObjectReference(e)?t.getReference(e):t.isObjectReferenceSet(e)?t.getReferences(e):t.get(e)}u.prototype.getByGuid=function(t,e){e=e||{};var n=t.map(this._objectCache.getObject,this._objectCache).filter(function(t){return null!=t});if(t.every(function(t){return this._objectCache.has(t)},this)){var r=n;e.sort&&e.sort.forEach(function(t){var e=t[0],n=t[1];r=r.sort(function(t,r){return(t=t.get(e))<(r=r.get(e))?"asc"===n?-1:1:t>r?"asc"===n?1:-1:0})});var i=e.offset;if(i){var o=e.amount;r=o?r.slice(i,i+o):r.slice(i)}return Promise.resolve({mxobjs:r,count:n.length})}var a=null==e.attributes;return this._backend.getByGuid(t,e).then(function(t){var e,n=t.mxobjects||[],r=n.map(t=>t.guid);a?(this._objectCache.setMxObjects(n),e=r.map(this._objectCache.getObject,this._objectCache)):(r.forEach(this._removeObjectKeepChanges,this),e=n.map(s.fromJson));return{mxobjs:e,count:e.length}}.bind(this))},u.prototype.getByXPath=function(t,e,n){return this._backend.getByXPath(t,e,n).then(function(t){var e=t.mxobjects||[],n=t.count||0,r=t.aggregates||[];e.map(t=>t.guid).forEach(this._removeObjectKeepChanges,this);var i=e.map(s.fromJson),o=r.map(function(t){return null==t?"":new c(t)});return{mxobjs:i,count:n,aggregates:o}}.bind(this))},u.prototype.getByPath=function(t,e,n,r){return this._backend.getByPath(t,e,n,r).then(function(t){var e=t.mxobjects||[];this._objectCache.setMxObjects(e);var n=e.map(function(t){return this._objectCache.getObject(t.guid)},this);return{mxobjs:n,count:n.length}}.bind(this))},u.prototype.getSlice=function(t,e,n,r){return this._backend.getSlice(t,e,n).then(({mxobjects:t=[],count:e=0})=>{let n=null;return r?(this._objectCache.setMxObjects(t),n=t.map(t=>this._objectCache.getObject(t.guid))):n=t.map(s.fromJson),[n,e]})},u.prototype.fetch=function(t,e,n,r,i,o){var s;s=(r=r||{}).schema?e.splice(-2,e.length):[],this._performFetch(t,e,s,n,r,i,o)},u.prototype.action=async function(t,e,n,r,i){const{actionResult:o}=await this._backend.action(t,e,n,r,i);let s;return o instanceof Array?(this._objectCache.setMxObjects(o),s=o.map(t=>this._objectCache.getObject(t.guid))):o&&"object"==typeof o&&o.guid?(this._objectCache.setMxObjects([o]),s=[this._objectCache.getObject(o.guid)]):s=o,s},u.prototype.runNanoflow=async function(t,e,n){try{const r=await this._nanoflowEngine.execute(t,e,n),o=Array.isArray(r)?r:"object"==typeof r&&r instanceof s?[r]:void 0;return o?(this._objectCache.setMxObjects(o.map(t=>t.jsonData)),o.map(t=>this._objectCache.getObject(t.getGuid()))):r}catch(t){throw i(t,n),t}},u.prototype.create=async function(t){const{actionResult:e}=await this._backend.create(t);return this._objectCache.getObject(e)},u.prototype.validate=async function(t){await this._backend.validate(t)},u.prototype.commit=async function(t,e,n,r){const i=t.map(l),s=await this._backend.commit(i,e);o(this._objectCache,t,s)},u.prototype.rollback=async function(t){const e=t.map(l),n=await this._backend.rollback(e);o(this._objectCache,t,n)},u.prototype.remove=function(t){return this._backend.remove(t)},u.prototype.saveDocument=async function(t,e,n,r){await this._backend.saveDocument(t,e,n,r),await this.getByGuid([t],{})},u.prototype.generateReport=async function(t,e,n,r){const{report:i}=await this._backend.generateReport(t,e,n,r);return i},u.prototype.generateExcelReport=async function(t,e){const{mxobject:n}=await this._backend.generateExcelReport(t,e);return s.fromJson(n)},u.prototype._removeObjectKeepChanges=function(t){this._shouldRemoveObjectImmediately(t)&&this._objectCache.removeObjectKeepChanges(t)},u.prototype._performFetch=function(t,e,n,r,i,o,s){var a,c,u,l;if(e.length+n.length===0)o(null==t?null:r?h(t,r):t);else if(0===e.length&&n.length>0)a=n[0],c=n[1],t.isObjectReferenceSet(a)?this._fetchReferenceSet(t,a,c,o,s):this._fetchReference(t,e,n.slice(2),r,i,a,c,i.schema,o,s);else if(a=e[0],c=e[1],t.isObjectReferenceSet(a))e.length>2||n.length>2?s&&s(new Error("reference set should be at end of path")):this._fetchReferenceSet(t,a,c,o,s);else if(t.isObjectReference(a))if(u=t.getChild(a))u.isA(c)?this._performFetch(u,e.slice(2),n,r,i,o,s):o&&o(null);else if(l=t.getReference(a))if(this._objectCache.has(l)){var f=this._objectCache.getObject(l);f.isA(c)?this._performFetch(f,e.slice(2),n,r,i,o,s):o&&o(null)}else i.usexpath&&e.length>2?this._fetchXPath(t,e.slice(2),n,r,i,l,c,o,s):this._fetchReference(t,e.slice(2),n,r,i,a,c,null,o,s);else o(null);else s&&s(new Error("attribute "+a+" is not a reference type"))},u.prototype._fetchReference=function(t,e,n,r,i,o,s,a,c,u){var l=this,h=t.getReference(o);h?this.getByGuid([h],{id:a}).then(({mxobjs:t,count:o})=>{var f,p=1===(f=a?t.filter(function(t){return t.getGuid()===h}):t).length?f[0]:null;p&&p.isA(s)?l._performFetch(p,e,n,r,i,c,u):c(null)},u):c(null)},u.prototype._fetchReferenceSet=function(t,e,n,r,i){0===t.getReferences(e).length?r([]):t.hasChildren(e)?r(t.getChildren(e).filter(function(t){return t.isA(n)})):this.getByGuid(t.getReferences(e)).then(({mxobjs:t,count:e})=>{var i=t.reduce(function(t,e){return e.isA(n)?t.matching.push(e):t.releasing.push(e),t},{matching:[],releasing:[]});r(i.matching)},i)},u.prototype._fetchXPath=function(t,e,n,r,i,o,s,a,c){var u=this,l=["//"+s+"[id="+o+"]"].concat(e).join("/");this.getByXPath(l).then(({mxobjs:t})=>{0===t.length?a(null):r&&1===t.length?a(h(t[0],r)):r?c&&c(new Error(r+" is not a reference type")):!function(t,e){var n,r,i=[t].concat(e);if(e.length<2)return!1;return n=window.mx.meta.getEntity(i.slice(-3)[0]),r=e.slice(-2)[0],n.isObjectReferenceSet(r)}(s,e)?u._performFetch(t[0],[],n,r,i,a,c):a(t)},c)},t.exports=u},function(t,e,n){t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e,n){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))i.call(n,u)&&(a[u]=n[u]);if(r){s=r(n);for(var l=0;l<s.length;l++)o.call(n,s[l])&&(a[s[l]]=n[s[l]])}}return a}},function(t,e,n){var r=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function o(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],o(n),o(r))}function s(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(r),n=1;n<e.length;n++)e=(t=o(e,n).join("")).match(r);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"","%FF%FE":""},n=i.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=s(n[0]);r!==n[0]&&(e[n[0]]=r)}n=i.exec(t)}e["%C2"]="";for(var o=Object.keys(e),a=0;a<o.length;a++){var c=o[a];t=t.replace(new RegExp(c,"g"),e[c])}return t}(t)}}},function(t,e){e.reachability=function(t,e){var n=new Array(t.length);return function e(r){for(var i=0;i<r.length;++i){var o=r[i];if(o<0||o>=n.length)throw new Error("graph: index "+o+" out of bounds in graph of size "+t.length);n[o]||(n[o]=!0,e(t[o]))}}(e),function(){for(var t=[],e=0;e<n.length;++e)n[e]&&t.push(e);return t}()}},function(t,e){function n(t){for(var e in this.__values={},t)this.__values[e+""]=!0}n.of=n.prototype.of=function(t){return n.fromArray([t])},n.fromArray=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=!0;return new n(e)},n.empty=n.prototype.empty=function(){return n.fromArray([])},n.prototype.contains=function(t){return this.__values[t]||!1},n.prototype.union=n.prototype.concat=function(t){var e={};for(var r in this.__values)e[r]=!0;for(var i in t.__values)e[i]=!0;return new n(e)},n.prototype.intersection=function(t){var e={};for(var r in this.__values)t.contains(r)&&(e[r]=!0);return new n(e)},n.prototype.difference=function(t){var e={};for(var r in this.__values)t.contains(r)||(e[r]=!0);return new n(e)},n.prototype.length=function(){return this.values().length},n.prototype.reduce=function(t,e){return this.values().reduce(t,e)},n.prototype.chain=function(t){return this.reduce(function(e,n){return e.concat(t(n))},this.empty())},n.prototype.map=function(t){return this.chain(function(e){return this.of(t(e))}.bind(this))},n.prototype.values=function(){return Object.keys(this.__values)},n.prototype.toString=function(){return"StringSet("+this.values()+")"},t.exports=n},function(t,e,n){const r=n(37),{SqlSelectBuilder:i,constraintBuilder:o}=n(105),s=n(106),a=n(107),c=n(43),u=n(38),l=n(5),h="_guidToTable",f={String:"text",Integer:"text",Long:"text",Decimal:"text",Float:"text",Currency:"text",Enum:"text",HashString:"text",ObjectReference:"text",DateTime:"integer",Boolean:"integer",AutoNumber:"integer",Binary:"blob"},p={String:_,Integer:O,Long:O,Decimal:O,Float:O,Currency:O,Enum:_,HashString:_,ObjectReference:_,DateTime:function(t){return null!=t?Number(t):null},Boolean:Number,AutoNumber:_,Binary:_},d={String:_,Integer:_,Long:_,Decimal:_,Float:_,Currency:_,Enum:_,HashString:_,ObjectReference:_,DateTime:j,Boolean:Boolean,AutoNumber:_,Binary:_},g={String:j,Integer:j,Long:j,Decimal:j,Float:j,Currency:j,Enum:j,HashString:j,ObjectReference:j,DateTime:function(t){return t?Number(t):null},Boolean:function(t){return"false"!==t},AutoNumber:j,Binary:j};var m={createCreateTransaction:b,createCleanTransaction:function(t){var e=[h].concat(t).map(E).map(t=>`DELETE FROM '${t}'`).map(t=>D(t,[]));return c.parallel(e).map(t=>void 0)},createFetchByGuidTransaction:function(t){return D((new i).from(h).where(o.equals("guid")).select(),[t]).chain(function(e){if(0===e.rows.length)return c.of(null);if(1!==e.rows.length)return c.rejected(new Error("db consistency error"));const n=e.rows.item(0),r=n.tableName,s=Boolean(n.dirty),a=n.readonlyAttrs;return D((new i).from(E(r)).where(o.equals("guid")).select(),[t]).chain(function(t){return 0===t.rows.length?c.rejected(new Error("entity not found")):1!==t.rows.length?c.rejected(new Error("db consistency error")):c.of(T(window.mx.meta.getEntity(r),s,a,t.rows.item(0)))})})},createFetchSliceTransaction:function(t,e,n,s,a){e=e||[],a=a||[];const u=window.mx.meta.getEntity(t),l=function(t,e){const n=[];return{builder:(new i).where(e.map(function e(i){if(i.constraints)return o[i.operator](i.constraints.map(e).filter(t=>null!==t));if(null==i.value)switch(i.operator){case"contains":return null;case"equals":return o.isNull(E(i.attribute),i.negate)}const s=t.getAttributeType(i.attribute);const a=g[s];const c=p[s];const u=c(a(i.value));n.push("contains"===i.operator?function(t){var e=r.LIKE_ESCAPE_CHAR;return t.replace(new RegExp(e,"g"),e+e).replace(/%/g,e+"%").replace(/_/g,e+"_")}(u):u);return o[i.operator](E(i.attribute),i.negate)}).filter(t=>null!==t)),args:n}}(u,e),f=l.builder.from(E(t)),d=l.args;let m=f.offset(n).limit(s).join(h,"guid",["dirty","readonlyAttrs"]);var b=D((m=a.reduce(function(t,e){return t.order(e[0],e[1])},m)).select(),d).map(function(t){const e=[];for(let n=0;n<t.rows.length;++n){const r=t.rows.item(n),i=Boolean(r[`${h}.dirty`]),o=C(r,"readonlyAttrs");e.push(T(u,i,o,r))}return e}),y=D(f.selectCount("cnt"),d).map(function(t){return t.rows.item(0).cnt});return c.parallel([b,y])},createInsertOrReplaceTransaction:function(t){return c.parallel(t.map(t=>{const e=t.$objectType,n=v(),r=w(e,t);return[D(n.insertOrReplace(),[t.guid,e,1,JSON.stringify(t.$readonlyAttrs)]),D(r.builder.insertOrReplace(),r.values)]}).reduce((t,e)=>t.concat(e),[])).map(t=>void 0)},createFetchDirtyObjectsTransaction:function(){return y().chain(function(t){const e=x(t.rows).map(({tableName:t})=>{const e=(new i).from(E(t)).join(h,"guid",["dirty","readonlyAttrs"]).where(o.equals(`${h}.dirty`)).select(),n=window.mx.meta.getEntity(t);return D(e,[1]).map(t=>x(t.rows).map(t=>T(n,!0,C(t,"readonlyAttrs"),t)))});return c.parallel(e)}).map(t=>t.reduce((t,e)=>t.concat(e),[]))},createMakeCleanTransaction:function(t){var e=t.map(t=>D(`UPDATE ${h} set dirty = 0 where guid = ?`,[t.guid]));return c.parallel(e).map(t=>void 0)},createDirtyCleanupTransaction:function(){return y().chain(function(t){var e=x(t.rows).map(function(t){var e=t.tableName;return D(`DELETE FROM ${E(e)} WHERE guid IN (\n                            SELECT guid FROM ${h} WHERE tableName = ? AND dirty = 1)`,[e])});return c.sequence([c.parallel(e),D(`DELETE FROM ${h} WHERE dirty = 1`)]).map(t=>void 0)})},createRebuildTransaction:function(t,e){const n=function(t){var e=[h].concat(t).map(E).map(function(t){return"DROP TABLE IF EXISTS '"+t+"'"}).map(function(t){return D(t,[])});return c.sequence([c.parallel(e),b(t)])}(t),r=t.map(t=>{const n=e.filter(e=>e.$objectType===t);return function(t,e){var n=e.reduce(function(e,n){var r=v(),i=w(t,n);return e.concat([D(r.insert(),[n.guid,t,0,JSON.stringify(n.$readonlyAttrs)]),D(i.builder.insert(),i.values)])},[]);return c.parallel(n).map(t=>void 0)}(t,n)});return c.sequence([n,c.parallel(r)]).map(t=>void 0)}};function b(t){var e=[D((new s).table(h).primaryKeyColumn("guid","text").column("tableName","text").column("dirty","boolean").column("readonlyAttrs","text").createIfNotExists(),[])].concat(t.map(function(t){return D(function(t){var e=window.mx.meta.getEntity(t);return e.getAttributes().map(function(t){var n=e.getAttributeType(t);return{attr:t,type:f[n]}})}(t).reduce(function(t,e){return t.column(E(e.attr),e.type)},(new s).table(E(t)).primaryKeyColumn("guid","text")).createIfNotExists(),[])}));return c.parallel(e).map(t=>void 0)}function y(){return D((new i).from(h).where(o.equals("dirty")).selectDistinct("tableName"),[1])}function v(){return(new a).into(h).column("guid").column("tableName").column("dirty").column("readonlyAttrs")}function w(t,e){var n=window.mx.meta.getEntity(t),r=n.getAttributes().reduce(function(t,r){var i=n.getAttributeType(r),o=p[i];if(!o)return t;var s=o(e[r]);return{attrs:t.attrs.concat([r]),values:t.values.concat([s])}},{attrs:["guid"],values:[e.guid]});return{builder:r.attrs.reduce(function(t,e){return t.column(E(e))},(new a).into(E(t))),values:r.values}}function O(t){if(null==t)return null;var e=new l(t),n=20-Math.max(0,e.e)-1;return(e.s<0?"-":"")+new Array(n+1).join("0")+e.abs().toFixed()}function _(t){return null!=t?String(t):null}function j(t){return t}function x(t){for(var e=[],n=0;n<t.length;++n)e.push(t.item(n));return e}function E(t){return t.replace(".","$")}function S(t){return t.replace("$",".")}function T(t,e,n,r){const i={guid:r.guid,$objectType:t.getEntity(),$dirty:e,$readonlyAttrs:JSON.parse(n)};for(const e in r){if(o(e))continue;const n=S(e),s=t.getAttributeType(n),a=d[s];a&&(i[n]=a(r[e]))}return i;function o(t){return"guid"===t||t.indexOf(".")>-1}}function C(t,e){return t[`${h}.${e}`]}function D(t,e){return e=e||[],new c(function(n){return new u(function(r,i){n.executeSql(t,e,(t,e)=>i(e),(t,e)=>r(e))})})}t.exports=m},function(t,e,n){n.r(e),n.d(e,"SqlSelectBuilder",function(){return i}),n.d(e,"constraintBuilder",function(){return c});const r=n(37);class i{constructor(t,e){this._select=e&&e.select||t&&t._select||null,this._from=e&&e.from||t&&t._from||null,this._join=e&&e.join||t&&t._join||null,this._constraints=e&&e.constraints||t&&t._constraints||[],this._orderBy=e&&e.orderBy||t&&t._orderBy||[],this._limit=e&&e.limit||t&&t._limit||null,this._offset=e&&e.offset||t&&t._offset||null}from(t){return new i(this,{from:t})}join(t,e,n){return new i(this,{join:{tableName:t,joinOnColumn:e,selectedColumns:n}})}where(t){return new i(this,{constraints:this._constraints.concat(t)})}order(t,e){return new i(this,{orderBy:this._orderBy.concat([[t,e]])})}limit(t){return new i(this,{limit:t})}offset(t){return new i(this,{offset:t})}selectDistinct(t){return Array.isArray(t)&&(t=t.join(", ")),`SELECT DISTINCT ${t} ${this._buildSql()}`}selectCount(t){return`SELECT COUNT(*) AS ${t}`+this._buildSql()}select(){let t=`SELECT ${this._from}.*`;return this._join&&this._join.selectedColumns.forEach(e=>{t+=`, ${this._join.tableName}.[${e}] as "${this._join.tableName}.${e}"`}),t+this._buildSql()}_buildSql(){let t=` FROM ${this._from} AS ${this._from}`;return this._join&&(t+=` JOIN ${this._join.tableName} AS ${this._join.tableName} USING (${this._join.joinOnColumn})`),this._constraints.length>0&&(t+=" WHERE "+this._constraints.map(t=>t.build(this._from)).join(" AND ")),this._orderBy.length>0&&(t+=" ORDER BY "+this._orderBy.map(t=>`${this._from}.[${t[0]}] ${t[1]}`).join(", ")),this._limit&&(t+=" LIMIT "+this._limit),this._offset&&(t+=" OFFSET "+this._offset),t}}const o={equals:u("="),lessThan:u("<"),lessThanOrEquals:u("<="),greaterThan:u(">"),greaterThanOrEquals:u(">="),contains:function(t){let e="";return e+=t,e+=" LIKE '%' || ? || '%'",e+=" ESCAPE '"+r.LIKE_ESCAPE_CHAR+"'"}};class s{constructor(t,e,n){this._column=t,this._operator=e,this._negate=!!n}build(t){const e=o[this._operator],n=this._column.indexOf(".")>-1?this._column:`${t}.[${this._column}]`;return(this._negate?"NOT ":"")+e(n)}}class a{constructor(t,e){this.group=t,this.constraints=e||[]}add(t){this.constraints.push(t)}build(t){return"("+this.constraints.map(e=>e.build(t)).join(` ${this.group} `)+")"}}const c={and:t=>new a("and",t),or:t=>new a("or",t),equals:(t,e)=>new s(t,"equals",e),isNull:(t,e)=>new class{constructor(t,e){this._column=t,this._negate=!!e}build(t){return(this._column.indexOf(".")>-1?this._column:`${t}.[${this._column}]`)+" IS "+(this._negate?"NOT ":"")+"NULL"}}(t,e),lessThan:(t,e)=>new s(t,"lessThan",e),lessThanOrEquals:(t,e)=>new s(t,"lessThanOrEquals",e),greaterThan:(t,e)=>new s(t,"greaterThan",e),greaterThanOrEquals:(t,e)=>new s(t,"greaterThanOrEquals",e),contains:(t,e)=>new s(t,"contains",e)};function u(t){return function(e){return e+" "+t+" ?"}}},function(t,e,n){const r=n(37);function i(t,e){this._tableName=e&&e.tableName||t&&t._tableName||null,this._columns=e&&e.columns||t&&t._columns||[]}function o(t){var e=r.QUOTE_CHAR;return e+t+e}i.prototype.table=function(t){return new i(this,{tableName:t})},i.prototype.column=function(t,e){return new i(this,{columns:this._columns.concat({columnName:t,columnType:e,isPrimary:!1})})},i.prototype.primaryKeyColumn=function(t,e){return new i(this,{columns:this._columns.concat({columnName:t,columnType:e,isPrimary:!0})})},i.prototype.createIfNotExists=function(){var t="";return t+="CREATE TABLE IF NOT EXISTS "+o(this._tableName),t+=this._buildSql()},i.prototype._buildSql=function(){var t="";return this._columns.length>0&&(t+=" (",t+=this._columns.map(function(t){return[o(t.columnName),t.columnType,"text"===t.columnType?" COLLATE NOCASE ":"",t.isPrimary?"PRIMARY KEY ":""].join(" ").slice(0,-1)},this).join(", "),t+=")"),t},t.exports=i},function(t,e,n){const r=n(37);function i(t,e){if(!(this instanceof i))return new i;this._tableName=e&&e.tableName||t&&t._tableName||null,this._columnNames=e&&e.columnNames||t&&t._columnNames||[]}function o(t){var e=r.QUOTE_CHAR;return e+t+e}i.prototype.into=function(t){return new i(this,{tableName:t})},i.prototype.column=function(t){return new i(this,{columnNames:this._columnNames.concat(t)})},i.prototype.insert=function(){var t="";return t+="INSERT INTO "+o(this._tableName),t+=this._buildSql()},i.prototype.insertOrReplace=function(){var t="";return t+="INSERT OR REPLACE INTO "+o(this._tableName),t+=this._buildSql()},i.prototype._buildSql=function(){var t="";return this._columnNames.length>0&&(t+=" (",t+=this._columnNames.map(o).join(", "),t+=")"),t+=" VALUES (",t+="?"+new Array(this._columnNames.length).join(", ?"),t+=")"},t.exports=i},function(t,e){t.exports=function(t){function e(t){this.run=t}return e.prototype.chain=function(t){return new e(function(e){return this.run(e).chain(function(n){return t(n).run(e)})}.bind(this))},e.prototype.ap=function(t){return new e(function(e){return this.run(e).ap(t.run(e))}.bind(this))},e.prototype.map=function(t){return this.chain(function(n){return e.of(t(n))})},e.of=function(n){return new e(function(e){return t.of(n)})},e.ask=function(){return new e(t.of)},e}},function(t,e,n){const r=n(38);function i(t){return function(e,n){return new r(function(r,i){var o,s=2;e[t](function(t){n.run(t).fork(r,function(t){o=t,0==--s&&i(o)})},r,function(){0==--s&&i(o)})})}}t.exports={runReadTransaction:i("readTransaction"),runWriteTransaction:i("transaction")}},function(t,e,n){const r=n(61),i=n(43);function o(){}o.prototype.getSlice=function(t,e,n={}){return this._getDatabase().then(this._fetchSlice(t,e,n))},o.prototype.getByGuid=function(t){return this._getDatabase().then(this._fetch(t))},o.prototype.insertOrReplace=function(t){return this._getDatabase().then(this._insertOrReplace(t))},o.prototype.cleanDatabase=function(){return this._getDatabase().then(this._cleanDatabase())},o.prototype.rebuildDatabase=function(t){return this._getDatabase().then(e=>r.promiseFromTask(this._rebuildDb(t).run(e)))},o.prototype.fetchDirty=function(){return this._getDatabase().then(t=>r.promiseFromTask(this._fetchDirty().run(t)))},o.prototype.makeClean=function(t){return this._getDatabase().then(e=>r.promiseFromTask(this._makeClean(t).run(e)))},o.prototype.cleanupDirtyObjects=function(){return this._getDatabase().then(this._cleanupDirtyObjects())},o.prototype._getDatabase=function(){return Promise.reject(new Error("not implemented"))},o.prototype._initialize=function(){return Promise.reject(new Error("not implemented"))},o.prototype._fetch=function(t){return function(t){return Promise.reject(new Error("not implemented"))}},o.prototype._fetchSlice=function(t,e,n){return function(t){return Promise.reject(new Error("not implemented"))}},o.prototype._insertOrReplace=function(t){return function(t){return Promise.reject(new Error("not implemented"))}},o.prototype._cleanDatabase=function(){return function(t){return Promise.reject(new Error("not implemented"))}},o.prototype._rebuildDb=function(t){return i.rejected(new Error("not implemented"))},o.prototype._fetchDirty=function(){return i.rejected(new Error("not implemented"))},o.prototype._makeClean=function(){return i.rejected(new Error("not implemented"))},o.prototype._cleanupDirtyObjects=function(){return function(t){return Promise.reject(new Error("not implemented"))}},t.exports=o},function(t,e){var n={parse:function(t){for(var e,n,r=/^\s*at (?:(?:(?:Anonymous function)?|((?:\[object object\])?\S+(?: \[as \S+\])?)) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,i=/^(?:\s*([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i,o=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i,s=t.split("\n"),a=[],c=0,u=s.length;c<u;++c){if(e=i.exec(s[c]))n={file:e[3],methodName:e[1]||"<unknown>",lineNumber:+e[4],column:e[5]?+e[5]:null};else if(e=r.exec(s[c]))n={file:e[2],methodName:e[1]||"<unknown>",lineNumber:+e[3],column:e[4]?+e[4]:null};else{if(!(e=o.exec(s[c])))continue;n={file:e[2],methodName:e[1]||"<unknown>",lineNumber:+e[3],column:e[4]?+e[4]:null}}a.push(n)}return a}};t.exports=n},function(t,e,n){n.r(e);n(70),n(83);var r=n(62),i=n(2),o=n(0),s=n(4),a=n(18),c=n(30),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function l(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function h(t){return"function"==typeof t}var f=!1,p={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;f=t},get useDeprecatedSynchronousErrorHandling(){return f}};function d(t){setTimeout(function(){throw t})}var g={closed:!0,next:function(t){},error:function(t){if(p.useDeprecatedSynchronousErrorHandling)throw t;d(t)},complete:function(){}},m=Array.isArray||function(t){return t&&"number"==typeof t.length};function b(t){return null!=t&&"object"==typeof t}var y,v={e:{}};function w(){try{return y.apply(this,arguments)}catch(t){return v.e=t,v}}function O(t){return y=t,w}function _(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}_.prototype=Object.create(Error.prototype);var j=_,x=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=r?r.length:0;n;)n.remove(this),n=++s<a&&r[s]||null;if(h(i))O(i).call(this)===v&&(e=!0,t=t||(v.e instanceof j?E(v.e.errors):[v.e]));if(m(o))for(s=-1,a=o.length;++s<a;){var c=o[s];if(b(c))if(O(c.unsubscribe).call(c)===v){e=!0,t=t||[];var u=v.e;u instanceof j?t=t.concat(E(u.errors)):t.push(u)}}if(e)throw new j(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function E(t){return t.reduce(function(t,e){return t.concat(e instanceof j?e.errors:e)},[])}var S="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),T=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,o._parentSubscription=null,arguments.length){case 0:o.destination=g;break;case 1:if(!n){o.destination=g;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new C(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new C(o,n,r,i)}return o}return l(e,t),e.prototype[S]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(x),C=function(t){function e(e,n,r,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return h(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==g&&(h((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=r,s._complete=i,s}return l(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;p.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=p.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):d(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;d(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};p.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),p.useDeprecatedSynchronousErrorHandling)throw t;d(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!p.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return p.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(d(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(T);var D="function"==typeof Symbol&&Symbol.observable||"@@observable";function A(){}function k(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:A}var P=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof T)return t;if(t[S])return t[S]()}return t||e||n?new T(t,e,n):new T(g)}(t,e,n);if(r?r.call(i,this.source):i.add(this.source||p.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),p.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){p.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof T?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=M(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[D]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:k(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=M(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function M(t){if(t||(t=p.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function I(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}I.prototype=Object.create(Error.prototype);var R=I,N=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return l(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(x),V=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return l(e,t),e}(T),$=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return l(e,t),e.prototype[S]=function(){return new V(this)},e.prototype.lift=function(t){var e=new F(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new R;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new R;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new R;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new R;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new R;return this.hasError?(t.error(this.thrownError),x.EMPTY):this.isStopped?(t.complete(),x.EMPTY):(this.observers.push(t),new N(this,t))},e.prototype.asObservable=function(){var t=new P;return t.source=this,t},e.create=function(t,e){return new F(t,e)},e}(P),F=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return l(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):x.EMPTY},e}($),U=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return l(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return l(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return l(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(x))),B=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),L=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(function(t){function e(n,r){void 0===r&&(r=B.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return l(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(B)))(U),G=new P(function(t){return t.complete()});function W(t){return t?function(t){return new P(function(e){return t.schedule(function(){return e.complete()})})}(t):G}function q(t){return t&&"function"==typeof t.schedule}var H=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}};function Y(t,e){return new P(e?function(n){var r=new x,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:H(t))}function z(t){var e=new P(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}function J(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(q(n)?t.pop():n=void 0,t.length){case 0:return W(n);case 1:return n?Y(t,n):z(t[0]);default:return Y(t,n)}}function K(t){var e=t.error;t.subscriber.error(e)}var X=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return J(this.value);case"E":return function(t,e){return new P(e?function(n){return e.schedule(K,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}(this.error);case"C":return W()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var Q=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return l(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new Z(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(X.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(X.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(X.createComplete()),this.unsubscribe()},e}(T),Z=function(){return function(t,e){this.notification=t,this.destination=e}}(),tt=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return l(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new et(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new R;if(this.isStopped||this.hasError?e=x.EMPTY:(this.observers.push(t),e=new N(this,t)),i&&t.add(t=new Q(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||L).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}($),et=function(){return function(t,e){this.time=t,this.value=e}}();function nt(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var rt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};var it=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();var ot=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,d),e}};var st=function(t){return function(e){for(var n=t[it]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}};var at=function(t){return function(e){var n=t[D]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}};var ct=function(t){if(t instanceof P)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[D])return at(t);if(rt(t))return H(t);if(nt(t))return ot(t);if(t&&"function"==typeof t[it])return st(t);var e=b(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function ut(t,e){if(!e)return t instanceof P?t:new P(ct(t));if(null!=t){if(function(t){return t&&"function"==typeof t[D]}(t))return function(t,e){return new P(e?function(n){var r=new x;return r.add(e.schedule(function(){var i=t[D]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:at(t))}(t,e);if(nt(t))return function(t,e){return new P(e?function(n){var r=new x;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:ot(t))}(t,e);if(rt(t))return Y(t,e);if(function(t){return t&&"function"==typeof t[it]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new P(e?function(n){var r,i=new x;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[it](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:st(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var lt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return l(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(T);function ht(t,e,n,r,i){if(void 0===i&&(i=new lt(t,n,r)),!i.closed)return ct(e)(i)}var ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(T);function pt(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new dt(t,e))}}var dt=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new gt(t,this.project,this.thisArg))},t}(),gt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return l(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(T);var mt=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new bt(t,this.project,this.concurrent))},t}(),bt=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return l(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new lt(this,void 0,void 0);this.destination.add(r),ht(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(ft);function yt(t){return t}function vt(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t(function(t,r){return ut(e(t,r)).pipe(pt(function(e,i){return n(t,e,r,i)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new mt(e,r))})}(yt,t)}function wt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&q(t[1])?ut(t[0]):vt(1)(J.apply(void 0,t))}var Ot=new P(A);function _t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return q(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof P?t[0]:vt(n)(Y(t,r))}var jt={};function xt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return q(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&m(t[0])&&(t=t[0]),Y(t,r).lift(new Et(n))}var Et=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new St(t,this.resultSelector))},t}(),St=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return l(e,t),e.prototype._next=function(t){this.values.push(jt),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(ht(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===jt?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(ft),Tt=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return l(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new R;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}($);function Ct(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new Dt(r,n))}}var Dt=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new At(t,this.observables,this.project))},t}(),At=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var o=n.length;i.values=new Array(o);for(var s=0;s<o;s++)i.toRespond.push(s);for(s=0;s<o;s++){var a=n[s];i.add(ht(i,a,a,s))}return i}return l(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(ft);function kt(){return function(t){return t.lift(new Pt(t))}}var Pt=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new Mt(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),Mt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return l(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(T),It=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return l(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new x).add(this.source.subscribe(new Nt(this.getSubject(),this))),t.closed?(this._connection=null,t=x.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return kt()(this)},e}(P).prototype,Rt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:It._subscribe},_isComplete:{value:It._isComplete,writable:!0},getSubject:{value:It.getSubject},connect:{value:It.connect},refCount:{value:It.refCount}},Nt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return l(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(V);var Vt=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}();var $t=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Ft(t,this.compare,this.keySelector))},t}(),Ft=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return l(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=O(this.keySelector)(t))===v)return this.destination.error(v.e);var n=!1;if(this.hasKey){if((n=O(this.compare)(this.key,e))===v)return this.destination.error(v.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=e,this.destination.next(t))},e}(T);var Ut=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new Bt(t,this.predicate))},t}(),Bt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.index=0,r}return l(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(T);function Lt(t,e){return function(n){return n.lift(new Gt(t,e))}}var Gt=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Wt(t,this.predicate,this.thisArg))},t}(),Wt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return l(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(T);function qt(t){return new P(e=>{const n=mx.data.subscribe(Object.assign({},t,{callback:t=>e.next(t)}));return()=>mx.data.unsubscribe(n)})}function Ht(t,e){let n,r;function i(){let t=!1;if(r=re(e).subscribe(e=>{t=!0,n=e,a.reportChanged()},mx.onError),Zt&&(Zt=!1,te.next(te.value+1),Zt=!0),!t)throw new o.AssertionError}function s(){r.unsubscribe()}const a=Object(c.createAtom)(t,i,s);return{current:()=>(a.reportObserved()||a.isBeingObserved||(i(),s()),n)}}function Yt(t){return e=>t.pipe(Ct(e),pt(([t,e])=>e))}function zt(){const t=new tt(1);return e=>kt()(function(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new Vt(r,e));var i=Object.create(n,Rt);return i.source=n,i.subjectFactory=r,i}}(t)(e))}function Jt(t){return wt(J(t),Ot)}function Kt(){return function(t,e){return function(n){return n.lift(new $t(t,e))}}(a)}function Xt(t){return e=>_t(e,t)}function Qt(t){return t.length>0?xt(...t):Jt([])}let Zt=!1;const te=new Tt(0);function ee(t){ne(t)()}function ne(t){return(...e)=>{if(Zt)return t(...e);Zt=!0;try{return t(...e)}finally{Zt=!1,te.next(te.value+1)}}}function re(t){const e={};return xt(wt(t,Promise.resolve(e)).pipe(pt(t=>({value:t,emittedInTransaction:Zt,transaction:te.value+1}))),te).pipe(function(t){return function(e){return e.lift(new Ut(t))}}(([{value:t}])=>t!==e),Lt(([{emittedInTransaction:t,transaction:e},n])=>t?e===n:e===n+1),pt(([{value:t}])=>t))}class ie{initialize(t,e){}uninitialize(t,e){}handleAction(t,e){}}var oe=n(47);const se=Array(3).fill(null).map(()=>Math.floor(Math.random()*"abcdefghijklmnopqrst".length)).map(t=>"abcdefghijklmnopqrst"[t]).join("");let ae=0;function ce(t="id"){return`${t}_${se}_${ae++}`}var ue=n(5);const le=["amount","offset","selection"],he="$pageParameter",fe="unavailable";class pe{constructor(t){this.parentStore=t,this.stateMap={}}set(t,e,n){const r=this.getSubject(t,e,!1);a(r.value,n)||ee(()=>r.next(n))}get(t,e){return this.getSubject(t,e,!0).value}get$(t,e){return this.getSubject(t,e,!0)}dehydrate(){return Object.keys(this.stateMap).map(t=>JSON.parse(t)).filter(({slot:t})=>le.includes(t)).map(({widgetId:t,slot:e})=>({widgetId:t,slot:e,value:this.get(t,e)}))}hydrate(t){t.forEach(({widgetId:t,slot:e,value:n})=>{if(!le.includes(e))throw new o.AssertionError(`Invalid slot for restoring the state: ${e}`);switch(e){case"amount":case"offset":this.set(t,e,n instanceof ue?n:ue(n.toString()));break;default:this.set(t,e,n)}})}getSubject(t,e,n){const r=JSON.stringify({widgetId:t,slot:e});if(r in this.stateMap)return this.stateMap[r];if(n&&this.parentStore){const t=this.parentStore.findSubject(r);if(t)return t}return this.stateMap[r]=new Tt(void 0)}findSubject(t){return t in this.stateMap?this.stateMap[t]:this.parentStore?this.parentStore.findSubject(t):void 0}}const de=ce("_private_store");class ge extends i.Component{getChildContext(){return{[de]:this.props.store}}render(){return this.props.children||null}}function me(t){var e;return(e=class extends i.Component{render(){const e=Object.assign({$store:this.context[de]},this.props);return Object(i.createElement)(t,e,this.props.children)}}).contextTypes={[de]:Object(oe.instanceOf)(pe)},e}ge.childContextTypes={[de]:Object(oe.instanceOf)(pe)};const be=new Map;function ye(t){const e=be.get(t);if(void 0!==e)return e;const n=me(Object(r.observer)(class extends i.Component{constructor(t){super(t),this.propsSnapshot={},this.properties=[],Object.keys(t).filter(t=>"children"!==t&&"$"!==t[0]).forEach(e=>{this.propsSnapshot[e]=t[e],this.properties.push(...function t(e){if(e instanceof ie)return[e];if(Array.isArray(e))return e.map(e=>e instanceof ie?[e]:ve(e)?[]:t(e)).reduce((t,e)=>t.concat(e),[]);if(Object(s.e)(e)){const n=[];return Object.keys(e).forEach(r=>n.push(...t(e[r]))),n}return[]}(t[e]))}),this.dispatch=ne(e=>this.properties.forEach(n=>n.handleAction(e,t.$store))),this.properties.forEach(e=>e.initialize(t.$widgetId,t.$store))}componentWillReceiveProps(e){if(e.$widgetId!==this.props.$widgetId)throw new o.AssertionError(`Parent of widget '${this.props.$widgetId}' (${Object(s.c)(t)}) did not correctly assign keys.`)}componentWillUnmount(){this.properties.forEach(t=>t.uninitialize(this.props.$widgetId,this.props.$store))}render(){const e={$dispatch:this.dispatch};return Object.keys(this.propsSnapshot).forEach(t=>e[t]=function t(e,n){if(ve(e))return e;if(e instanceof ie)return e.computeValue(n);if(Array.isArray(e))return e.map(e=>t(e,n));if(Object(s.e)(e)){const r={};return Object.keys(e).forEach(i=>r[i]=t(e[i],n)),r}return e}(this.propsSnapshot[t],this.props.$store)),Object(i.createElement)(t,e,this.props.children)}}));return n.displayName=`pluginWidget(${Object(s.c)(t)})`,be.set(t,n),n}function ve(t){const e=t;return e&&e.props&&e.props.$widgetId}var we=n(1),Oe=n(22),_e=n(63);class je extends Error{constructor(t=""){super("Not implemented"+(""!==t?": "+t:"")),Object.setPrototypeOf(this,je.prototype)}}class xe{constructor(t){this.key=t}get(){return new Promise((t,e)=>we.AsyncStorage.getItem(this.key,(n,r)=>{n?e(n):t(r)}))}set(t){return new Promise((e,n)=>we.AsyncStorage.setItem(this.key,t,t=>{t?n(t):e()}))}remove(){return new Promise((t,e)=>we.AsyncStorage.removeItem(this.key,n=>{n?e(n):t()}))}}var Ee=n(64);const Se=Object(Ee.createIconSet)({"glyphicon-asterisk":42,"glyphicon-plus":43,"glyphicon-euro":8364,"glyphicon-eur":8364,"glyphicon-minus":8722,"glyphicon-cloud":9729,"glyphicon-envelope":9993,"glyphicon-pencil":9999,"glyphicon-glass":57345,"glyphicon-music":57346,"glyphicon-search":57347,"glyphicon-heart":57349,"glyphicon-star":57350,"glyphicon-star-empty":57351,"glyphicon-user":57352,"glyphicon-film":57353,"glyphicon-th-large":57360,"glyphicon-th":57361,"glyphicon-th-list":57362,"glyphicon-ok":57363,"glyphicon-remove":57364,"glyphicon-zoom-in":57365,"glyphicon-zoom-out":57366,"glyphicon-off":57367,"glyphicon-signal":57368,"glyphicon-cog":57369,"glyphicon-trash":57376,"glyphicon-home":57377,"glyphicon-file":57378,"glyphicon-time":57379,"glyphicon-road":57380,"glyphicon-download-alt":57381,"glyphicon-download":57382,"glyphicon-upload":57383,"glyphicon-inbox":57384,"glyphicon-play-circle":57385,"glyphicon-repeat":57392,"glyphicon-refresh":57393,"glyphicon-list-alt":57394,"glyphicon-lock":57395,"glyphicon-flag":57396,"glyphicon-headphones":57397,"glyphicon-volume-off":57398,"glyphicon-volume-down":57399,"glyphicon-volume-up":57400,"glyphicon-qrcode":57401,"glyphicon-barcode":57408,"glyphicon-tag":57409,"glyphicon-tags":57410,"glyphicon-book":57411,"glyphicon-bookmark":57412,"glyphicon-print":57413,"glyphicon-camera":57414,"glyphicon-font":57415,"glyphicon-bold":57416,"glyphicon-italic":57417,"glyphicon-text-height":57424,"glyphicon-text-width":57425,"glyphicon-align-left":57426,"glyphicon-align-center":57427,"glyphicon-align-right":57428,"glyphicon-align-justify":57429,"glyphicon-list":57430,"glyphicon-indent-left":57431,"glyphicon-indent-right":57432,"glyphicon-facetime-video":57433,"glyphicon-picture":57440,"glyphicon-map-marker":57442,"glyphicon-adjust":57443,"glyphicon-tint":57444,"glyphicon-edit":57445,"glyphicon-share":57446,"glyphicon-check":57447,"glyphicon-move":57448,"glyphicon-step-backward":57449,"glyphicon-fast-backward":57456,"glyphicon-backward":57457,"glyphicon-play":57458,"glyphicon-pause":57459,"glyphicon-stop":57460,"glyphicon-forward":57461,"glyphicon-fast-forward":57462,"glyphicon-step-forward":57463,"glyphicon-eject":57464,"glyphicon-chevron-left":57465,"glyphicon-chevron-right":57472,"glyphicon-plus-sign":57473,"glyphicon-minus-sign":57474,"glyphicon-remove-sign":57475,"glyphicon-ok-sign":57476,"glyphicon-question-sign":57477,"glyphicon-info-sign":57478,"glyphicon-screenshot":57479,"glyphicon-remove-circle":57480,"glyphicon-ok-circle":57481,"glyphicon-ban-circle":57488,"glyphicon-arrow-left":57489,"glyphicon-arrow-right":57490,"glyphicon-arrow-up":57491,"glyphicon-arrow-down":57492,"glyphicon-share-alt":57493,"glyphicon-resize-full":57494,"glyphicon-resize-small":57495,"glyphicon-exclamation-sign":57601,"glyphicon-gift":57602,"glyphicon-leaf":57603,"glyphicon-fire":57604,"glyphicon-eye-open":57605,"glyphicon-eye-close":57606,"glyphicon-warning-sign":57607,"glyphicon-plane":57608,"glyphicon-calendar":57609,"glyphicon-random":57616,"glyphicon-comment":57617,"glyphicon-magnet":57618,"glyphicon-chevron-up":57619,"glyphicon-chevron-down":57620,"glyphicon-retweet":57621,"glyphicon-shopping-cart":57622,"glyphicon-folder-close":57623,"glyphicon-folder-open":57624,"glyphicon-resize-vertical":57625,"glyphicon-resize-horizontal":57632,"glyphicon-hdd":57633,"glyphicon-bullhorn":57634,"glyphicon-bell":57635,"glyphicon-certificate":57636,"glyphicon-thumbs-up":57637,"glyphicon-thumbs-down":57638,"glyphicon-hand-right":57639,"glyphicon-hand-left":57640,"glyphicon-hand-up":57641,"glyphicon-hand-down":57648,"glyphicon-circle-arrow-right":57649,"glyphicon-circle-arrow-left":57650,"glyphicon-circle-arrow-up":57651,"glyphicon-circle-arrow-down":57652,"glyphicon-globe":57653,"glyphicon-wrench":57654,"glyphicon-tasks":57655,"glyphicon-filter":57656,"glyphicon-briefcase":57657,"glyphicon-fullscreen":57664,"glyphicon-dashboard":57665,"glyphicon-paperclip":57666,"glyphicon-heart-empty":57667,"glyphicon-link":57668,"glyphicon-phone":57669,"glyphicon-pushpin":57670,"glyphicon-usd":57672,"glyphicon-gbp":57673,"glyphicon-sort":57680,"glyphicon-sort-by-alphabet":57681,"glyphicon-sort-by-alphabet-alt":57682,"glyphicon-sort-by-order":57683,"glyphicon-sort-by-order-alt":57684,"glyphicon-sort-by-attributes":57685,"glyphicon-sort-by-attributes-alt":57686,"glyphicon-unchecked":57687,"glyphicon-expand":57688,"glyphicon-collapse-down":57689,"glyphicon-collapse-up":57696,"glyphicon-log-in":57697,"glyphicon-flash":57698,"glyphicon-log-out":57699,"glyphicon-new-window":57700,"glyphicon-record":57701,"glyphicon-save":57702,"glyphicon-open":57703,"glyphicon-saved":57704,"glyphicon-import":57705,"glyphicon-export":57712,"glyphicon-send":57713,"glyphicon-floppy-disk":57714,"glyphicon-floppy-saved":57715,"glyphicon-floppy-remove":57716,"glyphicon-floppy-save":57717,"glyphicon-floppy-open":57718,"glyphicon-credit-card":57719,"glyphicon-transfer":57720,"glyphicon-cutlery":57721,"glyphicon-header":57728,"glyphicon-compressed":57729,"glyphicon-earphone":57730,"glyphicon-phone-alt":57731,"glyphicon-tower":57732,"glyphicon-stats":57733,"glyphicon-sd-video":57734,"glyphicon-hd-video":57735,"glyphicon-subtitles":57736,"glyphicon-sound-stereo":57737,"glyphicon-sound-dolby":57744,"glyphicon-sound-5-1":57745,"glyphicon-sound-6-1":57746,"glyphicon-sound-7-1":57747,"glyphicon-copyright-mark":57748,"glyphicon-registration-mark":57749,"glyphicon-cloud-download":57751,"glyphicon-cloud-upload":57752,"glyphicon-tree-conifer":57753,"glyphicon-tree-deciduous":57856,"glyphicon-cd":57857,"glyphicon-save-file":57858,"glyphicon-open-file":57859,"glyphicon-level-up":57860,"glyphicon-copy":57861,"glyphicon-paste":57862,"glyphicon-alert":57865,"glyphicon-equalizer":57872,"glyphicon-king":57873,"glyphicon-queen":57874,"glyphicon-pawn":57875,"glyphicon-bishop":57876,"glyphicon-knight":57877,"glyphicon-baby-formula":57878,"glyphicon-tent":9978,"glyphicon-blackboard":57880,"glyphicon-bed":57881,"glyphicon-apple":63743,"glyphicon-erase":57889,"glyphicon-hourglass":8987,"glyphicon-lamp":57891,"glyphicon-duplicate":57892,"glyphicon-piggy-bank":57893,"glyphicon-scissors":57894,"glyphicon-bitcoin":57895,"glyphicon-btc":57895,"glyphicon-xbt":57895,"glyphicon-yen":165,"glyphicon-jpy":165,"glyphicon-ruble":8381,"glyphicon-rub":8381,"glyphicon-scale":57904,"glyphicon-ice-lolly":57905,"glyphicon-ice-lolly-tasted":57906,"glyphicon-education":57907,"glyphicon-option-horizontal":57908,"glyphicon-option-vertical":57909,"glyphicon-menu-hamburger":57910,"glyphicon-modal-window":57911,"glyphicon-oil":57912,"glyphicon-grain":57913,"glyphicon-sunglasses":57920,"glyphicon-text-size":57921,"glyphicon-text-color":57922,"glyphicon-text-background":57923,"glyphicon-object-align-top":57924,"glyphicon-object-align-bottom":57925,"glyphicon-object-align-horizontal":57926,"glyphicon-object-align-left":57927,"glyphicon-object-align-vertical":57928,"glyphicon-object-align-right":57929,"glyphicon-triangle-right":57936,"glyphicon-triangle-left":57937,"glyphicon-triangle-bottom":57938,"glyphicon-triangle-top":57939,"glyphicon-console":57940,"glyphicon-superscript":57941,"glyphicon-subscript":57942,"glyphicon-menu-left":57943,"glyphicon-menu-right":57944,"glyphicon-menu-down":57945,"glyphicon-menu-up":57952},"GLYPHICONS Halflings","glyphicons-halflings-regular.ttf"),Te=async t=>Promise.all(t.map(t=>(async t=>Se.getImageSource(t,20,"black"))(t))).then(e=>t.reduce(Ce(e),{})),Ce=t=>(e,n,r)=>(e[n]=t[r],e);class De{constructor(t,e,n,r){this.componentId=t,this.name=e,this.title=n,this.formParameterGuid=r,this.store=new pe,this.place="content",this.store.set(he,"form",[this,""]),r&&mx.data.get({guid:r,callback:this.setFormParameter.bind(this),error:mx.onError})}setFormParameter(t){this.pageObject=t,this.store.set(he,"object",t)}getComponentId(){return this.componentId}getTitle(){return this.title}getName(){return this.name}getGuid(){return this.formParameterGuid}getSubmitObjects(){return void 0!==this.pageObject?[this.pageObject]:[]}setSuspend(t){}close(t){Oe.Navigation.pop(this.componentId,{}).then(t,mx.onError)}publish(t,e){e()}}const Ae=new xe("pageState"),ke={},Pe={},Me={};let Ie,Re,Ne={};class Ve{async openForm2(t,e,n,r,i){const o=t.replace("/",".").replace(".page.xml",""),a=ke[o],c=void 0!==n?n:a.title,u=Ve.createLayoutConfig(a.layout,o,c,e);return await Oe.Navigation.push(r.getComponentId(),u),Object(s.b)(Re)}static createLayoutConfig(t,e,n,r){const i=Object(_e.v4)();return{component:{name:t.main,passProps:{pageName:e,title:n,formParameterGuid:r,pageUuid:i},options:{topBar:Object.assign({visible:!!t.topBar},t.topBar?Object.assign({title:{text:n}},Ve.createTopBarButtonConfiguration(i,t.topBar,"left"),Ve.createTopBarButtonConfiguration(i,t.topBar,"right")):{_height:0,drawBehind:!0})}}}}static createTopBarButtonConfiguration(t,e,n){if(e&&e[n])return{[`${n}Buttons`]:[{id:e[n],component:{name:e[n],passProps:{pageUuid:t}}}]}}reload(){throw new je("reload")}confirmation(t){t.handler()}showLogin(){throw new je("showLogin")}showProgress(){return 0}hideProgress(){}info(t,e){}error(t,e){}static savePageState(){if(!Re)return Promise.resolve();const t={name:Re.getName(),title:Re.getTitle(),formParameterGuid:Re.getGuid(),cache:mx.data.dehydrateCache()};return Ae.set(JSON.stringify(t))}static async loadPageState(){const t=await Ae.get();let e=null;try{e=JSON.parse(t)}catch(t){}return e}static registerPage(t,e){ke[t]=e}static registerComponent(t,e){Oe.Navigation.registerComponent(t,t.endsWith(":main")?()=>(function(t){return class extends i.Component{constructor(t){super(t),Oe.Navigation.events().bindComponent(this)}componentWillMount(){let t=Pe[this.props.pageUuid];t||(t=new De(this.props.componentId,this.props.pageName,this.props.title,this.props.formParameterGuid),Pe[this.props.pageUuid]=t),this.setState({form:t})}componentWillUnmount(){delete Pe[this.props.pageUuid]}componentDidAppear(){Re=this.state.form}render(){return Object(i.createElement)(we.SafeAreaView,{style:{flex:1,backgroundColor:"white"}},Object(i.createElement)(ge,{store:this.state.form.store},t()))}}})(e):()=>(function(t){return class extends i.Component{componentWillMount(){const t=this.props.pageUuid||Me[this.props.componentId];Me[this.props.componentId]=t;const e=Pe[t];this.setState({form:e})}render(){return Object(i.createElement)(ge,{store:this.state.form.store},t())}}})(e))}static setTabBar(t){const e=t.filter(t=>t.icon).map(t=>t.icon);Ie=Te(e).then(e=>{return{bottomTabs:{children:t.map((t,n)=>{const r=ke[t.pageName],i=void 0!==t.title?t.title:r.title,o=this.createLayoutConfig(r.layout,t.pageName,i);return{stack:{children:[Object.assign({},o)],options:{bottomTab:{text:t.caption,icon:e[t.icon],testID:`bottomTab$item${n}`}}}}})}}})}static setHomePage(t){const e=ke[t],n=e.title,r=this.createLayoutConfig(e.layout,t,n);Ie=Promise.resolve({stack:{children:[Object.assign({},r)]}})}static setDefaultStyling(t={}){const e=t.topBar?t.topBar:{},n=t.bottomBar?t.bottomBar:{};Ne=Object.assign({},Ne,{bottomTab:{fontFamily:n.fontFamily,fontSize:n.fontSize,iconColor:n.iconColor,selectedIconColor:n.selectedIconColor,selectedTextColor:n.selectedTextColor,textColor:n.textColor},bottomTabs:{backgroundColor:n.backgroundColor},topBar:{backButton:{color:e.backButtonColor,fontFamily:e.backButtonFontFamily,fontSize:e.backButtonFontSize},background:{color:e.backgroundColor},title:{color:e.titleColor,fontFamily:e.titleFontFamily,fontSize:e.titleFontSize,component:{alignment:e.titleAlignment}}}})}static async startApp(){if(!Ie)throw new Error("Navigation not configured");Oe.Navigation.setDefaultOptions(Ne);const t=await Ie,e=await Ve.restorePreviousPageState(t);return Oe.Navigation.setRoot({root:e})}static async restorePreviousPageState(t){const e=await this.loadPageState();let n=t;if(e&&e.name){n=Object.assign({},t);const r=ke[e.name];mx.data.hydrateCache(e.cache);const i=Ve.createLayoutConfig(r.layout,e.name,e.title,e.formParameterGuid);n.bottomTabs?n.bottomTabs.children[0].stack.children.push(i):n.stack&&n.stack.children.push(i),await Ae.remove()}return n}}var $e=n(65),Fe=n(66),Ue=n(67),Be=n(15),Le=n(16),Ge=n(20);class We extends Ge.a{constructor(t){super(t),Object.setPrototypeOf(this,We.prototype)}}var qe=n(24);const{MxObject:He}=n(7),{MxContext:Ye}=n(97),ze=n(9),Je=n(98),Ke=n(103),Xe=n(29);function Qe(t,e){t=t||{};var n=this;const r=[];let i,s,a;const c=ze.curryN(3,d),u=ze.curry(g);async function l(){try{await s.upload()}catch(t){throw[Le.a,We].some(e=>t instanceof e)||await s.cleanupDirtyObjects(),t}}function h(t){if("object"!=typeof t)throw new o.AssertionError("args is not an object");if("function"!=typeof t.callback)throw new o.AssertionError("callback is not a function");if(t.mxobj&&!(t.mxobj instanceof He))throw new o.AssertionError("mxobj is not a MxObject");if(t.mxobjs&&!(t.mxobjs instanceof Array))throw new o.AssertionError("mxobjs is not an Array");if(!t.mxobj&&!t.mxobjs||t.mxobj&&t.mxobjs)throw new o.AssertionError("one of mxobj or mxobjs should be passed");return t.mxobj?[t.mxobj]:t.mxobjs}function f(){const n=e.getAllObjects(),i=Ke.fromArray(n.map(t=>t.getGuid())),o=i.difference(Ke.fromArray(function(){const t=window.mx.session.getUserId(),e=window.mx.session.getSessionObjectId(),i=[t,e],o=ze.unique([].concat(r.filter(t=>void 0!==t.guid).map(t=>t.guid))).concat(i);return Xe.findReachableGuidsToRetain(n,o)}())).values();t.logCleanupStatistics&&window.mx.logger.debug(function(){const t=ze.groupBy(o,t=>e.getObject(t).getEntity()),n=ze.arrayFromObject(t).map(([t,e])=>t+": "+e.join(", ")).join("\n");return`Garbage collecting ${o.length} of ${i.length()}\n${n}`}()),e.removeObjects(o)}function p(t,e){return function(){d(t,e)}}function d(t,e,...n){try{t&&t.apply(e,n)}catch(t){window.mx.onError(t)}}function g(t,e,n){t?t.call(e,n):window.mx.onError(n)}function m(t){return e.has(t.getGuid())}function b(t){return t.getGuid()}function y(t){return t.getEntity()}this.getBacktrack=function(t,e,r,i,s){if("function"!=typeof i&&(s=i,i=null),e&&0!==e.length){var a=null,c=[],l=0,h=!0,f=function(){var t=e[l++];t?function(t,e,r,i){var s=e.split("/"),a=function(t){var e,n=s.shift(),i=s.shift();if(null!=t&&null!=t.length&&0!==t.length){for(var o=[],a=0;a<t.length;a++)null!=t[a]&&o.push("id='"+t[a].getGuid()+"'");o.length?(e="["+i+"/"+n+"["+o.join(" or ")+"]]",1===s.length?r(e):(n=s.shift(),i=s.shift(),r("["+i+"/"+n+e+"]"))):r(null)}else r(null)};!function(){var e=s.shift(),c=s.shift();if(1===s.length){var u="["+c+"='"+t.getGuid()+"']";return void r(u)}const l=window.mx.meta.getEntity(e);null!=l?t.isA(e)?l.isReference(c)?""!==t.get(c)?n.get({guids:t.getReferences(c),callback:a,error:i}):r(null):g(i,null,new Error(`Reference ${c} not found in entity ${e}`)):g(i,null,new o.AssertionError(`Entity ${t.getEntity()} is not a ${e} or one of its subclasses`)):g(i,null,new Error(`Entity ${e} does not exist`))}()}(a,t,function(t){t?c.push(t):h=!1,f()},u(i,s)):r.call(s,c.join(""),h)};t?n.get({guid:t,callback:function(t){t?(a=t,f()):r.call(s,"",!1)},error:u(i,s)}):r.call(s,"",!1)}else r.call(s,"",!0)},this.toString=function(){return"mendix.sys.Data"},this.startup=function(n){s=n,i=new Je(n,e,function(t){return!function(t){return r.some(e=>e.guid!==t&&!e.val)}(t)});const o=null!=t.garbageCollectionInterval?Number(t.garbageCollectionInterval):1e4;0!==o&&(a=window.setInterval(f,o))},this.subscribe=function(t,e){const n=Object.assign({},t,{callback(...n){t.callback&&t.callback.call(e,...n)}});return r.push(n),()=>{const t=r.indexOf(n);-1!==t?r.splice(t,1):window.mx.logger.warn(`mx.data.unsubscribe: attempting to unsubscribe already unsubscribed subscription ${n}`)}},this.unsubscribe=function(t){if("function"!=typeof t)throw new o.AssertionError("Trying to unsubscribe using an invalid subscription handle");t()},this.update=function({entity:t,attr:e,guid:n,value:r,callback:i}){this.update2({entity:t,attr:e,guid:n,value:r}).then(i,window.mx.onError)},this.update2=ne(function({topic:t,entity:e,attr:n,guid:i,value:s}){if(t){return a(r.filter(e=>e.topic===t),()=>[])}if(e){const t=function(t){const e=window.mx.meta.getEntity(t);if(!e)throw new Error(`No permission to read or write entity ${t}, check security!`);return[t].concat(e.getSuperEntities())}(e);return a(r.filter(e=>null!=e.entity&&t.includes(e.entity)),t=>[t.entity])}if(n){return a(r.filter(t=>!t.val&&t.guid===i&&t.attr===n),t=>[t.guid,t.attr,s])}if(i){return a(r.filter(t=>!t.val&&t.guid===i&&null==t.attr),t=>[t.guid])}return Promise.reject(new o.AssertionError("no 'entity' or 'guid' parameter found"));function a(t,e){const n=t.map(t=>new Promise(n=>{t.async?t.callback(...e(t),n):(t.callback(...e(t)),n())}));return Promise.all(n)}}),this.sendValidationUpdates=ne(function(t){const e=[];if(t.forEach(t=>{const n=t.clone(),i=t.getAttributes().map(t=>t.name);r.filter(({val:e,guid:n,attr:r})=>e&&null!=r&&n===t.getGuid()&&i.includes(r)).forEach(({attr:e,callback:r})=>{r(t.getErrorReason(e)),n.removeAttribute(e)}),r.filter(({val:e,guid:n,attr:r})=>e&&null==r&&n===t.getGuid()).forEach(({callback:e})=>{const r=t.clone();e([r]);const i=r.getAttributes().map(t=>t.name);n.getAttributes().forEach(({name:t})=>{i.includes(t)||n.removeAttribute(t)})}),n.getAttributes().length>0&&e.push(n)}),e.length){const t=qe.a.describe(e);window.mx.ui.error(t,!1)}}),this.updateInCache=function(t){return e.removeAllChanges([t.guid]),e.setMxObjects([t]),e.getObject(t.guid)},this.removeChanges=function(t){e.removeAllChanges([t])},this.action=function(t){i.action(t.params,t.context||new Ye,t.origin,!!t.async,t.onValidation).then(t.callback,u(t.error,null))},this.callNanoflow=function({nanoflow:{nanoflow:t,paramsSpec:e},context:r,origin:o,callback:s,error:a}){const l=Object.keys(e).map(t=>({name:t,guid:r.getContext(e[t])||void 0}));(function(t){return new Promise((e,r)=>{n.get({guids:t,callback:e,error:r})})})(l.map(t=>t.guid).filter(t=>Boolean(t))).then(e=>{const n=l.map(({name:t,guid:n})=>({name:t,value:e.find(t=>t.getGuid()===n)}));return i.runNanoflow(t,n,o)}).then(c(s,null),u(a,null))},this.get=function(t,e){var r=t.xpath,s=t.path,a=t.guid,l="guids"in t||!a?""===t.guids?[]:t.guids:[a],h=t.entity,f=t.direction||"reverse",p=t.callback,m=t.error,b=!!t.count,y=t.filter,v=t.context||new Ye,w=t.microflow;if("guid"in t&&null==a)d(p,e,null);else{if(!(r||l||w||h))throw new o.AssertionError("xpath, guid|guids and microflow arguments are undefined");if(s&&1!==l.length)throw new o.AssertionError("path can only be used with a single guid");if("function"!=typeof p)throw new o.AssertionError("callback is not a function");if(m&&"function"!=typeof m)throw new o.AssertionError("error is not a function");y&&y.limit&&(y.amount=y.limit,delete y.limit);var O=function(t,e,n){if(!e)return t;for(var r in n)r in e&&null!=e[r]&&(t[r]=e[r]);return t}({},y,a?{id:null}:{id:null,attributes:null,offset:null,sort:null,amount:null,distinct:null,references:null}),_=u(m,e);if(O.id&&l&&!a&&delete O.id,O.id&&(delete O.attributes,delete O.distinct),w){var j=l?"selection":r?"set":"none",x={actionname:w,applyto:j};"selection"===j?x.guids=l:"set"===j&&(x.xpath=r,O.sort&&(x.sort=O.sort)),n.action({params:x,context:v,callback:c(p,e),error:_})}else if(s&&l)i.getByPath(l[0],s,h,f).then(({mxobjs:t,count:n})=>{d(p,e,t,{count:n})},u(m,e));else if(l){if(0===l.length)return void d(p,e,a?null:[],{count:0});i.getByGuid(l,O).then(({mxobjs:t,count:n})=>{var r;if(a)if(O.id){if(void 0===(r=t.filter(t=>t.getGuid()===a)[0]))return void g(m,e,new Error("Returned objects do not contain requested one"))}else r=t[0]||null;else r=t;d(p,e,r,{count:n})},_)}else if(h)if(window.mx.isOffline()){const{amount:t,offset:n,sort:r}=O;i.getSlice(h,[],{limit:t,offset:n,sort:r},!1).then(([t,n])=>{d(p,e,t,{count:n})})}else{const{amount:t,offset:n,sort:r}=O;i.getByXPath(`//${h}`,{amount:t,offset:n,sort:r},b).then(({mxobjs:t,count:n})=>{d(p,e,t,{count:n})},_)}else i.getByXPath(r,O,b).then(({mxobjs:t,count:n,aggregates:r})=>{d(p,e,t,{count:n,aggregates:r})},_)}},this.getOffline=function(t,e,n,r,i){return this.getSlice(t,e,n,!1,r,i)},this.getSlice=function(t,e,n,r,o,s){i.getSlice(t,e,n,r).then(([t,e])=>{d(o,null,t,e)}).catch(u(s,null))},this.fetch=function(t,e,n,r,o){var s,a;"function"==typeof n&&(o=r,r=n),s=e?e instanceof Array?e.slice():e.split("/"):[],t&&t.isA(s[0])&&s.shift(),a=s.length%2==1?s.pop():"",i.fetch(t,s,a,n,r,u(o,null))},this.create=function(t,e){if("function"!=typeof t.callback)throw new o.AssertionError("callback is not a function");if(t.error&&"function"!=typeof t.error)throw new o.AssertionError("error is not a function");if("string"!=typeof t.entity)throw new o.AssertionError("entity is not a string");i.create(t.entity).then(function(r){t.context&&n.setObjectToContext(r,t.context);d(t.callback,e,r)},u(t.error,e))},this.remove=function(t){const e="guid"in t?[t.guid]:""===t.guids?[]:t.guids;if("guids"in t&&!(t.guids instanceof Array))throw new o.AssertionError("parameter guids set but not of type Array");if(t.error&&"function"!=typeof t.error)throw new o.AssertionError("parameter error set but not of type Function");if(t.callback&&"function"!=typeof t.callback)throw new o.AssertionError("parameter callback set but not of type Function");i.remove(e).then(p(t.callback),u(t.error,null))},this.validate=function(t,e,n){0!==t.length?i.validate(t.map(b)).then(p(e),u(n,null)):d(e)},this.commit=function(t,e){const r=p(t.callback,e),o=u(t.error,e),s=h(t);0===s.length&&t.callback?r():i.commit(s,t.context||new Ye,t.store,t.onValidation).then(function(){const t=ze.unique(s.filter(m).map(y)).map(t=>({entity:t})),e=ze.unique(s.map(b)).map(t=>({guid:t})),i=t.concat(e);Promise.all(i.map(t=>n.update2(t))).then(r,o)},o)},this.rollback=function(t,e){const r=u(t.error,e),o=h(t);if(0===o.length)return void d(t.callback,e);const s=ze.unique(o.map(y)).map(t=>({entity:t}));i.rollback(o).then(function(){const i=ze.unique(o.filter(m).map(b)).map(t=>({guid:t})),a=s.concat(i);Promise.all(a.map(t=>n.update2(t))).then(c(t.callback,e),r)},r)},this.uploadOfflineObjectsAndFiles=function(t,e){l().then(p(t),u(e,null))},this.downloadOfflineObjectsAndFiles=function(t,e){this.downloadObjects().then(()=>this.downloadFiles()).then(p(t),u(e,null))},this.synchronizeOffline=function({fast:t},n,r){l().then(()=>t?null:e.clear()).then(()=>this.downloadObjects()).then(()=>t?null:this.downloadFiles()).then(p(n),u(r,null))},this.downloadObjects=function(){const t=window.mx.session.getConfig("sync_config.fetch")||[];return s.downloadObjects(t)},this.downloadFiles=function(){const t=(window.mx.session.getConfig("sync_config.fetch")||[]).map(t=>t.store).filter(t=>window.mx.meta.getEntity(t).isA("System.FileDocument"));return s.downloadFiles(t)},this.saveDocument=function(t,e,n,r,o,s){i.saveDocument(t,e,n,r).then(o,u(s,null))},this.generateReport=function(t,e,n,r,o,s){i.generateReport(t,e,n,r).then(o,u(s,null))},this.generateExcelReport=function(t,e,n,r){i.generateExcelReport(t,e).then(n,u(r,null))},this.getReportParameters=function(t,e,n){s.getReportParameters(t).then(e,u(n,null))},this.setObjectToContext=function(t,e){if("object"!=typeof t)throw new o.AssertionError("parameter mxObj is not of type Object");if("object"!=typeof e)throw new o.AssertionError("parameter context is not of type Object");for(var n=t.getAttributes(),r=0;r<n.length;r++)if(t.isReference(n[r])){var i=t.getSelectorEntity(n[r]);if("System.owner"===n[r]||"System.changedBy"===n[r])continue;e.hasContext(i)&&t.addReference(n[r],e.getContext(i));var s=window.mx.meta.getEntity(i);if(s&&s.hasSubEntities())for(var a=s.getSubEntities(),c=0;c<a.length;c++)e.hasContext(a[c])&&t.addReference(n[r],e.getContext(a[c]))}},this.getObjectFromContext=function(t,e){var n=t.getObject(),r=t.getTrackId();n?e(n):r?window.mx.data.get({guid:r,callback:function(t){t||window.mx.onError("Error while fetching object with guid "+r),e(t)},error:function(t){window.mx.onError(t),e(null)}},this):e(null)},this.isDirty=function(t){return s.isDirty(t)},this.isNew=function(t){return e.isNew(t)},this.makeChange=function(t,n,r){e.makeChange(t,n,r)},this.getChanges=function(t){return e.getChanges(t)},this.getCachedObject=function(t){return e.getObject(t)},this.dehydrateCache=function(){return e.dehydrate()},this.hydrateCache=function(t){return e.hydrate(t)},this.updateMxObjectSubscribers=function(t,e,n){this.update({guid:t,attr:e,value:n})},this.getDocumentUrl=function(t,e,n){return s.getDocumentUrl(t,e,n)},this.getImageUrl=function(t,e,n){s.getImageUrl(t).then(e,n)},this.clear=function(t){e.clear(),s.cleanup().then(t)},this.uninitialize=function(){a&&window.clearInterval(a)},this.getObjectsStatistics=function(){return e.getAllObjects().map(t=>({object:t,changes:e.getChanges(t.getGuid()),uncommitted:e.isNew(t.getGuid()),subscriptions:function(t){return r.filter(e=>e.guid===t)}(t.getGuid()).map(t=>t.tag)}))}}class Ze{constructor(t){this.url=t,this.reloadHandlers=[],this.connectHandlers=[]}isConnected(){return void 0!==this.socket&&this.socket.readyState===WebSocket.OPEN}onConnect(t){this.isConnected()?t():this.connectHandlers.push(t)}onReloadMessage(t){this.reloadHandlers.push(t)}sendLog(t,e){if(this.isConnected()){const n=6e4;for(let r=0;r<e.length;r+=n){const i=e.substr(r,n);Object(s.b)(this.socket).send(`log:${t}:${i}`)}}}connect(){try{this.socket=new WebSocket(this.url),this.socket.onopen=(()=>{this.connectHandlers.forEach(t=>t()),this.connectHandlers.splice(0)}),this.socket.onmessage=(t=>{if("MENDIX_RELOAD"!==t.data)throw new o.AssertionError(`Unexpected command received from the runtime: ${t.data}`);this.reloadHandlers.forEach(t=>t())}),this.socket.onclose=(()=>this.reconnect())}catch(t){this.reconnect()}}reconnect(){this.socket=void 0,setTimeout(()=>this.connect(),1e3)}}class tn{constructor(t){this.connection=new Ze(t.replace(/^http/,"ws")+"reload/")}connect(){this.connection.connect()}addOnReload(t){this.connection.onReloadMessage(t)}log(t,...e){const n=e.map(en);this.connection.onConnect(()=>this.connection.sendLog(t,n.join("\n")))}}function en(t){return"string"==typeof t?t:t instanceof Error?`${t.message} ${t.stack}`:t&&void 0!==t.outerHTML?t.outerHTML:JSON.stringify(t)}class nn{constructor({handleErrors:t=!0,isQuiet:e=!1}={}){this.logHandlers=[],e||this.addHandler(this.createConsoleLogHandler()),t&&"function"==typeof window.addEventListener&&(window.addEventListener("error",t=>this.error(t.error)),window.addEventListener("unhandledrejection",t=>this.error(t.reason)))}addHandler(t){this.logHandlers.push(t)}trace(...t){this.log("trace",...t)}debug(...t){this.log("debug",...t)}info(...t){this.log("info",...t)}warn(...t){this.log("warning",...t)}error(...t){this.log("error",...t)}critical(...t){this.log("critical",...t)}log(t,...e){this.logHandlers.forEach(n=>n(t,...e))}createConsoleLogHandler(){const t={};return["debug","info","log","warn","error"].forEach(e=>{t[e]=console[e];const n=function(t){switch(t){case"warn":return"warning";case"log":return"debug";default:return t}}(e);console[e]=((...t)=>this.log(n,...t))}),(e,...n)=>{const r=function(t){switch(t){case"trace":return;case"critical":return"error";case"warning":return"warn";default:return t}}(e);void 0!==r&&t[r].call(console,...n)}}}const rn=n(9),{MxObject:on}=n(7);function sn(){this._objectCache={},this._newGuids={},this._changes={}}sn.prototype.getAllObjects=function(){return Object.values(this._objectCache)},sn.prototype.dehydrate=function(){return rn.clone({data:this.getAllObjects(),newGuids:this._newGuids,changes:this._changes})},sn.prototype.hydrate=function({data:t,newGuids:e,changes:n}){this._objectCache={},t.map(t=>on.fromJson(t)).forEach(t=>{this._objectCache[t.getGuid()]=t}),this._newGuids=rn.clone(e),this._changes=rn.clone(n)},sn.prototype.getObject=function(t){return this._objectCache[t]||null},sn.prototype.removeObjectKeepChanges=function(t){delete this._objectCache[t],delete this._newGuids[t]},sn.prototype.setMxObjects=function(t){t.forEach(function(t){var e=t.guid,n=this._objectCache[e];n?n.resetFromJSON(t):this._objectCache[e]=new on({json:t,meta:window.mx.meta.getEntity(t.objectType)})},this)},sn.prototype.has=function(t){return!!this.getObject(t)},sn.prototype.isNew=function(t){return this.has(t)&&Boolean(this._newGuids[t])},sn.prototype.clear=function(){this._objectCache={},this._newGuids={},this._changes={}},sn.prototype.hasChanges=function(t){return t in this._changes},sn.prototype.getChanges=function(t){return rn.clone(this._changes[t]||{})},sn.prototype.makeChange=function(t,e,n){this._changes[t]=this._changes[t]||{},this._changes[t][e]={value:n}},sn.prototype.removeAllChanges=function(t){t.forEach(function(t){delete this._changes[t]},this)},sn.prototype.removeChanges=function(t){Object.keys(t).forEach(e=>{const n=this._changes[e];n&&(t[e].forEach(t=>delete n[t]),0===Object.keys(n).length&&delete this._changes[e])})},sn.prototype.onCreate=function(t){t.forEach(t=>{this._newGuids[t]=!0})},sn.prototype.onCommit=function(t){t.forEach(t=>delete this._newGuids[t])},sn.prototype.onDelete=function(t){for(const e of t)e in this._objectCache&&this._objectCache[e].markDeleted();this.removeObjects(t)},sn.prototype.addChanges=function(t){for(const e in t){const n=t[e];null==this._changes[e]&&(this._changes[e]={});const r=this._changes[e];for(const t in n)r[t]=n[t]}},sn.prototype.removeObjects=function(t){t.forEach(t=>{delete this._objectCache[t],delete this._newGuids[t],delete this._changes[t]})};var an=n(10);const cn=we.NativeModules.NativeFsModule.DocumentDirectoryPath,un={};class ln{async readFile(t){const e=await we.NativeModules.NativeFsModule.read(ln.toAbsolutePath(t)),n=new Blob;return n.data=e,n}async storeFile(t,e){await we.NativeModules.NativeFsModule.save(t,e),t.close()}moveFile(t,e){return we.NativeModules.NativeFsModule.move(ln.toAbsolutePath(t),ln.toAbsolutePath(e))}async downloadFile(t,e){return un[e]=Object(an.a)(t,"blob").then(async t=>(await we.NativeModules.NativeFsModule.save(t.data,ln.toAbsolutePath(e)),t.close(),t)).then(t=>(delete un[e],t))}removeDir(t){return we.NativeModules.NativeFsModule.remove(ln.toAbsolutePath(t))}readAsDataURL(t){return(un[t]?un[t]:Promise.resolve({})).then(()=>we.NativeModules.NativeFsModule.readAsDataURL(ln.toAbsolutePath(t)))}static toAbsolutePath(t){return[cn,t].join("/")}}var hn=n(6),fn=n(32),pn=n(3);var dn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function gn(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var mn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function bn(t){return function(e,n){var r=n||{},i=r.width?String(r.width):t.defaultWidth;return("formatting"===(r.context?String(r.context):"standalone")&&t.formattingValues?t.formattingValues[i]||t.formattingValues[t.defaultFormattingWidth]:t.values[i]||t.values[t.defaultWidth])[t.argumentCallback?t.argumentCallback(e):e]}}function yn(t){return function(e,n){var r=String(e),i=n||{},o=i.width,s=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],a=r.match(s);if(!a)return null;var c,u=a[0],l=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth];return c="[object Array]"===Object.prototype.toString.call(l)?l.findIndex(function(t){return t.test(r)}):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}(l,function(t){return t.test(r)}),c=t.valueCallback?t.valueCallback(c):c,{value:c=i.valueCallback?i.valueCallback(c):c,rest:r.slice(u.length)}}}var vn={formatDistance:function(t,e,n){var r;return n=n||{},r="string"==typeof dn[t]?dn[t]:1===e?dn[t].one:dn[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:{date:gn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:gn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:gn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},formatRelative:function(t,e,n,r){return mn[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:bn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:bn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:bn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:bn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:bn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaulFormattingWidth:"wide"})},match:{ordinalNumber:function(t){return function(e,n){var r=String(e),i=n||{},o=r.match(t.matchPattern);if(!o)return null;var s=o[0],a=r.match(t.parsePattern);if(!a)return null;var c=t.valueCallback?t.valueCallback(a[0]):a[0];return{value:c=i.valueCallback?i.valueCallback(c):c,rest:r.slice(s.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}}),era:yn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:yn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:yn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:yn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:yn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},wn=864e5;function On(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(pn.a)(t,e),r=n.getUTCDay(),i=(r<1?7:0)+r-1;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function _n(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(pn.a)(t,e),r=n.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(r+1,0,4),i.setUTCHours(0,0,0,0);var o=On(i,e),s=new Date(0);s.setUTCFullYear(r,0,4),s.setUTCHours(0,0,0,0);var a=On(s,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}var jn=6048e5;function xn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(pn.a)(t,e),r=On(n,e).getTime()-function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=_n(t,e),r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),On(r,e)}(n,e).getTime();return Math.round(r/jn)+1}function En(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:Object(hn.a)(i),s=null==n.weekStartsOn?o:Object(hn.a)(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var a=Object(pn.a)(t,n),c=a.getUTCDay(),u=(c<s?7:0)+c-s;return a.setUTCDate(a.getUTCDate()-u),a.setUTCHours(0,0,0,0),a}function Sn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(pn.a)(t,e),r=n.getUTCFullYear(),i=e||{},o=i.locale,s=o&&o.options&&o.options.firstWeekContainsDate,a=null==s?1:Object(hn.a)(s),c=null==i.firstWeekContainsDate?a:Object(hn.a)(i.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,c),u.setUTCHours(0,0,0,0);var l=En(u,e),h=new Date(0);h.setUTCFullYear(r,0,c),h.setUTCHours(0,0,0,0);var f=En(h,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}var Tn=6048e5;function Cn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(pn.a)(t,e),r=En(n,e).getTime()-function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:Object(hn.a)(i),s=null==n.firstWeekContainsDate?o:Object(hn.a)(n.firstWeekContainsDate),a=Sn(t,e),c=new Date(0);return c.setUTCFullYear(a,0,s),c.setUTCHours(0,0,0,0),En(c,e)}(n,e).getTime();return Math.round(r/Tn)+1}var Dn="midnight",An="noon",kn="morning",Pn="afternoon",Mn="evening",In="night";function Rn(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}function Nn(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+Rn(Math.floor(i/60),2)+n+Rn(i%60,2)}function Vn(t,e){return t%60==0?(t>0?"-":"+")+Rn(Math.abs(t)/60,2):Nn(t,e)}function $n(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var s=e||"";return n+String(i)+s+Rn(o,2)}var Fn={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n,r){var i=t.getUTCFullYear(),o=i>0?i:1-i;return"yy"===e?Rn(o%100,2):"yo"===e?n.ordinalNumber(o,{unit:"year"}):Rn(o,e.length)},Y:function(t,e,n,r){var i=Sn(t,r),o=i>0?i:1-i;return"YY"===e?Rn(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):Rn(o,e.length)},R:function(t,e,n,r){return Rn(_n(t,r),e.length)},u:function(t,e,n,r){return Rn(t.getUTCFullYear(),e.length)},Q:function(t,e,n,r){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Rn(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n,r){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Rn(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n,r){var i=t.getUTCMonth();switch(e){case"M":return String(i+1);case"MM":return Rn(i+1,2);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n,r){var i=t.getUTCMonth();switch(e){case"L":return String(i+1);case"LL":return Rn(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=Cn(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):Rn(i,e.length)},I:function(t,e,n,r){var i=xn(t,r);return"Io"===e?n.ordinalNumber(i,{unit:"week"}):Rn(i,e.length)},d:function(t,e,n,r){var i=t.getUTCDate();return"do"===e?n.ordinalNumber(i,{unit:"date"}):Rn(i,e.length)},D:function(t,e,n,r){var i=function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(pn.a)(t,e),r=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var i=r-n.getTime();return Math.floor(i/wn)+1}(t,r);return"Do"===e?n.ordinalNumber(i,{unit:"dayOfYear"}):Rn(i,e.length)},E:function(t,e,n,r){var i=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Rn(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Rn(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n,r){var i=t.getUTCDay(),o=0===i?7:i;switch(e){case"i":return String(o);case"ii":return Rn(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?An:0===i?Dn:i/12>=1?"pm":"am",e){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?Mn:i>=12?Pn:i>=4?kn:In,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n,r){var i=t.getUTCHours()%12;return 0===i&&(i=12),"ho"===e?n.ordinalNumber(i,{unit:"hour"}):Rn(i,e.length)},H:function(t,e,n,r){var i=t.getUTCHours();return"Ho"===e?n.ordinalNumber(i,{unit:"hour"}):Rn(i,e.length)},K:function(t,e,n,r){var i=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(i,{unit:"hour"}):Rn(i,e.length)},k:function(t,e,n,r){var i=t.getUTCHours();return 0===i&&(i=24),"ko"===e?n.ordinalNumber(i,{unit:"hour"}):Rn(i,e.length)},m:function(t,e,n,r){var i=t.getUTCMinutes();return"mo"===e?n.ordinalNumber(i,{unit:"minute"}):Rn(i,e.length)},s:function(t,e,n,r){var i=t.getUTCSeconds();return"so"===e?n.ordinalNumber(i,{unit:"second"}):Rn(i,e.length)},S:function(t,e,n,r){var i=e.length,o=t.getUTCMilliseconds();return Rn(Math.floor(o*Math.pow(10,i-3)),i)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return Vn(i);case"XXXX":case"XX":return Nn(i);case"XXXXX":case"XXX":default:return Nn(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return Vn(i);case"xxxx":case"xx":return Nn(i);case"xxxxx":case"xxx":default:return Nn(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+$n(i,":");case"OOOO":default:return"GMT"+Nn(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+$n(i,":");case"zzzz":default:return"GMT"+Nn(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return Rn(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return Rn((r._originalDate||t).getTime(),e.length)}};function Un(t,e,n){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function Bn(t,e,n){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}var Ln={p:Bn,P:function(t,e,n){var r,i=t.match(/(P+)(p+)?/),o=i[1],s=i[2];if(!s)return Un(t,e);switch(o){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"})}return r.replace("{{date}}",Un(o,e)).replace("{{time}}",Bn(s,e))}};function Gn(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(pn.a)(t,n).getTime(),i=Object(hn.a)(e);return new Date(r+i)}(t,-Object(hn.a)(e),n)}const Wn=["D","DD","YY","YYYY"];var qn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Yn=/^'(.*?)'?$/,zn=/''/g;function Jn(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(e),i=n||{},o=i.locale||vn,s=o.options&&o.options.firstWeekContainsDate,a=null==s?1:Object(hn.a)(s),c=null==i.firstWeekContainsDate?a:Object(hn.a)(i.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=o.options&&o.options.weekStartsOn,l=null==u?0:Object(hn.a)(u),h=null==i.weekStartsOn?l:Object(hn.a)(i.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=Object(pn.a)(t,i);if(!function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(pn.a)(t,e);return!isNaN(n)}(f,i))return"Invalid Date";var p=Gn(f,Object(fn.a)(f),i),d={firstWeekContainsDate:c,weekStartsOn:h,locale:o,_originalDate:f};return r.match(Hn).map(function(t){var e=t[0];return"p"===e||"P"===e?(0,Ln[e])(t,o.formatLong,d):t}).join("").match(qn).map(function(t){if("''"===t)return"'";var e=t[0];if("'"===e)return function(t){return t.match(Yn)[1].replace(zn,"'")}(t);var n=Fn[e];return n?(!i.awareOfUnicodeTokens&&function(t){return-1!==Wn.indexOf(t)}(t)&&function(t){throw new RangeError("`options.awareOfUnicodeTokens` must be set to `true` to use `"+t+"` token; see: https://git.io/fxCyr")}(t),n(p,t,o.localize,d)):t}).join("")}var Kn,Xn,Qn,Zn,tr,er=n(17);!function(t){t.Month="months",t.DayOfWeek="days"}(Kn||(Kn={})),function(t){t.Long="wide",t.Short="abbr",t.Narrow="narrow"}(Xn||(Xn={})),function(t){t.Date="date",t.Time="time",t.DateTime="datetime"}(Qn||(Qn={})),function(t){t.Short="short",t.Medium="medium",t.Long="long",t.Full="full"}(Zn||(Zn={})),function(t){t.Gregorian="gregorian",t.ThaiBuddhist="thai-buddhist"}(tr||(tr={}));class nr{constructor(t,e,n,r){this.year=t,this.monthOfYear=e,this.dayOfMonth=n,this.chronology=r}isSameDate(t){return this.chronology===t.chronology&&this.getYear()===t.getYear()&&this.getMonthOfYear()===t.getMonthOfYear()&&this.getDayOfMonth()===t.getDayOfMonth()}getChronology(){return this.chronology}getYear(){return this.year}getMonthOfYear(){return this.monthOfYear}getDayOfMonth(){return this.dayOfMonth}getDayOfWeek(){return this.chronology.getDayOfWeek(this)}lengthOfYearInMonths(){return this.chronology.lengthOfYearInMonths(this.year)}plusYears(t){return this.chronology.plusYears(this,t)}plusMonths(t){return this.chronology.plusMonths(this,t)}plusDays(t){return this.chronology.plusDays(this,t)}minusYears(t){return this.chronology.minusYears(this,t)}minusMonths(t){return this.chronology.minusMonths(this,t)}minusDays(t){return this.chronology.minusDays(this,t)}withDayOfMonth(t){return this.chronology.withDayOfMonth(this,t)}withMonthOfYear(t){return this.chronology.withMonthOfYear(this,t)}withYear(t){return this.chronology.withYear(this,t)}toJsDate(){return this.chronology.toJsDate(this)}toString(){const t=rr(this.monthOfYear,2),e=rr(this.dayOfMonth,2),n=ir[this.getDayOfWeek()],r=this.getChronology().getCalendarSystem();return`${this.year}-${t}-${e} ${n} (${r})`}}function rr(t,e){const n=t.toString();return new Array(e-n.length+1).join("0")+n}const ir=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];class or{constructor(t=0,e=0,n=0,r=0){this.hour=t,this.minute=e,this.second=n,this.millisecond=r}getHour(){return this.hour}getMinute(){return this.minute}getSecond(){return this.second}getMillisecond(){return this.millisecond}isSameTime(t){return this.hour===t.hour&&this.minute===t.minute&&this.second===t.second&&this.millisecond===t.millisecond}toString(){return sr(this.hour,2)+":"+sr(this.minute,2)+":"+sr(this.second,2)+"."+sr(this.millisecond,3)}}function sr(t,e){const n=t.toString();return new Array(e-n.length+1).join("0")+n}class ar{constructor(t){this.calendarSystem=t}getCalendarSystem(){return this.calendarSystem}convertInput(t){if(t.getChronology()!==this)throw new Error(`Incompatible chronology: LocalDate should be ${this.getCalendarSystem()} but was ${t.getChronology().getCalendarSystem()}`);return{localDate:t instanceof nr?t:t.getDate(),localTime:t instanceof nr?new or:t.getTime()}}static getInstance(){return this.instance}}function cr(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(pn.a)(t,e),r=n.getFullYear(),i=n.getMonth(),o=new Date(0);return o.setFullYear(r,i+1,0),o.setHours(0,0,0,0),o.getDate()}function ur(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(pn.a)(t,n),i=Object(hn.a)(e),o=r.getMonth()+i,s=new Date(0);s.setFullYear(r.getFullYear(),o,1),s.setHours(0,0,0,0);var a=cr(s,n);return r.setMonth(o,Math.min(a,r.getDate())),r}function lr(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return ur(t,12*Object(hn.a)(e),n)}function hr(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(pn.a)(t,n),i=Object(hn.a)(e);return r.setDate(r.getDate()+i),r}class fr{constructor(t,e=new or){this.date=t,this.time=e}getDate(){return this.date}getTime(){return this.time}withDate(t){return new fr(t,this.time)}withTime(t){return new fr(this.date,t)}toJsDate(){return this.date.getChronology().toJsDate(this)}isSameDateTime(t){return this.date.isSameDate(t.date)&&this.time.isSameTime(t.time)}getChronology(){return this.date.getChronology()}toString(){return this.date.toString()+" "+this.time.toString()}}class pr extends ar{constructor(t=tr.Gregorian,e=0){super(t),this.yearOffset=e}getDayOfWeek(t){return function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(pn.a)(t,e).getDay()}(this.toJsDate(t))}lengthOfMonthInDays(t,e){return cr(new Date(t,e-1,1))}lengthOfYearInMonths(t){return 12}plusYears(t,e){return dr(this.fromJsDate(lr(this.toJsDate(t),e)),t)}minusYears(t,e){return dr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return lr(t,-Object(hn.a)(e),n)}(this.toJsDate(t),e)),t)}plusMonths(t,e){return dr(this.fromJsDate(ur(this.toJsDate(t),e)),t)}minusMonths(t,e){return dr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return ur(t,-Object(hn.a)(e),n)}(this.toJsDate(t),e)),t)}plusDays(t,e){return dr(this.fromJsDate(hr(this.toJsDate(t),e)),t)}minusDays(t,e){return dr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return hr(t,-Object(hn.a)(e),n)}(this.toJsDate(t),e)),t)}withDayOfMonth(t,e){return dr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(pn.a)(t,n),i=Object(hn.a)(e);return r.setDate(i),r}(this.toJsDate(t),e)),t)}withMonthOfYear(t,e){return dr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(pn.a)(t,n),i=Object(hn.a)(e),o=r.getFullYear(),s=r.getDate(),a=new Date(0);a.setFullYear(o,i,15),a.setHours(0,0,0,0);var c=cr(a,n);return r.setMonth(i,Math.min(s,c)),r}(this.toJsDate(t),e-1)),t)}withYear(t,e){return dr(this.fromJsDate(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Object(pn.a)(t,n),i=Object(hn.a)(e);return isNaN(r)?new Date(NaN):(r.setFullYear(i),r)}(this.toJsDate(t),e)),t)}fromJsDate(t){const e=new nr(t.getFullYear()+this.yearOffset,t.getMonth()+1,t.getDate(),this),n=new or(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());return new fr(e,n)}toJsDate(t){const{localDate:e,localTime:n}=this.convertInput(t);return new Date(e.getYear()-this.yearOffset,e.getMonthOfYear()-1,e.getDayOfMonth(),n.getHour(),n.getMinute(),n.getSecond(),n.getMillisecond())}}function dr(t,e){return e instanceof nr?t.getDate():t}pr.instance=new pr;class gr extends pr{}gr.instance=new gr(tr.ThaiBuddhist,543);var mr=n(13);const br={[er.validation.NOT_INTEGER]:"invalid_number",[er.validation.RANGE_INTEGER]:"range_integer",[er.validation.RANGE_LONG]:"range_long",[er.validation.RANGE_DECIMAL]:"range_decimal",[er.validation.RANGE_NUMBER]:"range_number"},yr="[No translation]";function vr(t,e,...n){if(!mx.session.isValid())return yr;return(mx.session.getConfig("uiconfig.translations")[`${t}.${e}`]||yr).replace(/\{(\d+)\}/g,(t,e)=>n.length>=e?n[e-1]:t)}class wr{constructor(t){this.defaultPatterns=t}formatValue(t,e,n){if(""===t||null===t)return"";switch(e){case"Decimal":case"Float":case"Currency":case"Integer":case"Long":if(!(t instanceof ue))throw new Error(`Value '${t}' cannot be formatted as a numeric value.`);return function(t,e){const n=t.lt(0);let[r,i=""]=t.toFixed().split(".");n&&(r=r.slice(1));void 0!==e&&(i=i.padEnd(e,"0"));return(n?"-":"")+r+(i?"."+i:"")}(t,"Decimal"===e||"Float"===e?void 0:"Currency"===e?2:0);case"DateTime":if("number"!=typeof t)throw new Error(`Value '${t}' cannot be formatted as Date.`);const r=n,i=function(t){return"custom"===t.type}(r)?r.pattern:this.defaultPatterns[r.type];return Jn(new Date(t),function(t){return function(t,e){const n=t.match(/(.)\1*/g)||[];return e.reduce((t,{existing:e,replacement:n})=>t.map(t=>t===e?n:t),n).join("")}(t,[{existing:"yyy",replacement:"yyyy"},{existing:"E",replacement:"e"},{existing:"EE",replacement:"ee"},{existing:"YYY",replacement:"YYYY"}])}(i));case"Boolean":if("boolean"!=typeof t)throw new Error(`Value '${t}' cannot be formatted as boolean.`);return vr("mxui.common",t.toString());default:if("string"!=typeof t)throw new Error(`Value '${t}' cannot be formatted as ${e}.`);return t}}parseValue(t,e,n){if(""===t)return"";switch(e.toLowerCase()){case"float":case"currency":case"integer":case"long":case"decimal":return function(t,e){let n;try{n=new ue(t)}catch(t){return null}return e&&e>=0?n.round(e):n}(t,n.decimalPrecision);case"enum":return t;case"boolean":return t===vr("mxui.common","true");default:return t}}getDateFormatPlaceholder(t){return""}getI18nBundle(){}getDecimalSeparator(){return""}}var Or=n(7),_r=n(21);function jr(t){const e=["get_session_data","login","logout"];let n,r=0;return async(i,o)=>{const a=r;try{return await o(i)}catch(c){const u=Object(s.e)(i.body)?i.body.action:void 0;if(!(c instanceof _r.a)||void 0!==u&&e.includes(u))throw c;if(a!==r)return o(i);if(n)return await n,o(i);n=t();try{await n}finally{n=void 0}return++r,o(i)}}}const xr=t=>{if(null===t||"object"!=typeof t)return t;const e=Array.isArray(t)?[]:{};return Object.keys(t).forEach(n=>e[n]=xr(t[n])),e};var Er=n(8);function Sr(t){if(t.startsWith("data:"))return t;/^\w+:\/\//.test(t)||(t=function(t){return t.startsWith("data:")?t:mx.appUrl+t}(t));const e=mx.session.getConfig("cachebust");return t.startsWith(mx.appUrl)&&!t.endsWith(e)&&(t+=(/\?/.test(t)?"&":"?")+e),t}class Tr{constructor(t,e,n){this.sessionStore=t,this.tokenStore=e,this.config=n,this.clientMetadata={}}isValid(){return void 0!==this.sessionData}getConfig(t){if(void 0===this.sessionData)throw new Error("Session is not available");if(!t)return xr(this.sessionData);const e=t.split(".");let n=this.sessionData;for(let t=0;t<e.length&&n;t++)n=n[e[t]];return xr(n)}getUserObject(){return this.userObject||(this.userObject=Or.MxObject.fromJson(this.getConfig("user"))),this.userObject}isGuest(){return this.getUserObject().get("IsAnonymous")}getSessionObjectId(){return this.getConfig("sessionObjectId")}getUserId(){return this.getUserObject().getGuid()}getUserRoleNames(){return this.getConfig("roles")}hasSomeRole(t){if(void 0===t)return!0;const e=this.getUserRoleNames();return t.some(t=>e.indexOf(t)>-1)}getMicroflowInfo(t){return this.clientMetadata[t]}async login(t){const e=await Object(mr.d)(t.username,t.password,this.config.shouldGenerateToken);e.authtoken&&await this.tokenStore.set(e.authtoken)}destroySession(t){t()}async logout(){try{const t=await this.tokenStore.get();await Object(mr.e)(t)}catch(t){if(!(t instanceof Le.a))throw t}finally{await this.tokenStore.remove(),await this.sessionStore.remove()}}async startup(t){const e=await this.tokenStore.get();this.sessionParams=e?Object.assign({authtoken:e},t):t;const{sessionData:n,fromCache:r}=await this.loadSessionData();this.sessionData=n;const i=Boolean(n.sync_config);return i&&await this.sessionStore.set(JSON.stringify(n)),e&&i?Object(Be.c)(jr(this.restoreSessionOnUnauthorized.bind(this))):e?Object(Be.c)(jr(async()=>mx.reload())):Object(Be.c)(function(t){return async(e,n)=>{try{return await n(e)}catch(n){const r=Object(s.e)(e.body)&&e.body.action;if(n instanceof _r.a&&"login"!==r)return await t(n);throw n}}}(this.failOnUnauthorized.bind(this))),!n.sync_config&&n.keepalive&&setInterval(mr.c,n.keepalive),Object(Be.c)(function(t){return(e,n)=>{const r={url:e.url,init:Object.assign({},e.init,{headers:new Headers(e.init.headers)}),body:e.body};return r.init.headers.append("X-Csrf-Token",t()),n(r)}}(()=>Object(s.b)(this.sessionData).csrftoken)),await this.loadClientMetadata(),!r}onUnauthorized(t){return t}async loadSessionData(){const t=await this.sessionStore.get(),e=void 0!==t?JSON.parse(t):void 0;if(e&&e.cachebust===this.config.currentCacheBust)return{fromCache:!0,sessionData:e};try{return{fromCache:!1,sessionData:await Object(mr.a)(Object(s.b)(this.sessionParams))}}catch(t){if(401===t.status)throw await this.sessionStore.remove(),await this.tokenStore.remove(),t;if(460!==t.status&&e)return{fromCache:!0,sessionData:e};throw t}}async loadClientMetadata(){const t=await Object(an.a)(Sr("metamodel.json"),"json");Object.keys(t).forEach(e=>{const n=t[e];this.clientMetadata[e]={parameters:n.p},n.a&&(this.clientMetadata[e].followedAssociations=n.a.map(([t,e])=>({association:t,fromEntity:e})))})}async restoreSessionOnUnauthorized(){try{const{csrftoken:t}=await Object(mr.a)(Object(s.b)(this.sessionParams));Object(s.b)(this.sessionData).csrftoken=t,await this.sessionStore.set(JSON.stringify(this.sessionData))}catch(t){if(!(t instanceof _r.a))throw t;await this.failOnUnauthorized(t)}}async failOnUnauthorized(t){return await this.sessionStore.remove(),await this.tokenStore.remove(),this.onUnauthorized(t.status),Object(Er.b)()}}var Cr=n(69);const Dr=n(9),Ar="files/documents/",kr="files/thumbnails/";function Pr(t){return t.replace(/:/g,"_")}const Mr="GUID:",Ir=new RegExp("^"+Mr);function Rr(t){return!Ir.test(t)}function Nr(t){return"guid"===t||"$"===t[0]}function Vr(t,e){return t.$readonlyAttrs.includes(e)}function $r(t){const e=Object.keys(t).filter(t=>!Nr(t)).reduce((e,n)=>(e[n]={value:t[n]},Vr(t,n)&&(e[n].readonly=!0),e),{});return{guid:t.guid,objectType:t.$objectType,attributes:e}}function Fr(t){const e={guid:t.guid,$objectType:t.objectType,$readonlyAttrs:[]};for(const n in t.attributes)e[n]=t.attributes[n].value,t.attributes[n].readonly&&e.$readonlyAttrs.push(n);return e}class Ur{getByGuid(t,e){return Promise.reject(new je("getByGuid"))}getByPath(t,e,n,r){return Promise.reject(new je("getByPath"))}getByXPath(t,e,n){return Promise.reject(new je("getByXPath"))}getSlice(t,e,n){return Promise.reject(new je("getSlice"))}action(t,e,n,r,i){return Promise.reject(new je("action"))}create(t){return Promise.reject(new je("create"))}commit(t,e,n,r){return Promise.reject(new je("commit"))}rollback(t){return Promise.reject(new je("rollback"))}remove(t){return Promise.reject(new je("remove"))}validate(t){return Promise.reject(new je("validate"))}saveDocument(t,e,n,r){return Promise.reject(new je("saveDocument"))}generateReport(t,e,n,r){return Promise.reject(new je("generateReport"))}generateExcelReport(t,e){return Promise.reject(new je("generateExcelReport"))}getReportParameters(t){return Promise.reject(new je("getReportParameters"))}getDocumentUrl(t,e,n){throw new je("getDocumentUrl")}getImageUrl(t){return Promise.reject(new je("getImageUrl"))}upload(){return Promise.reject(new je("upload"))}downloadObjects(t){return Promise.reject(new je("downloadObjects"))}downloadFiles(t){return Promise.reject(new je("downloadFiles"))}cleanupDirtyObjects(){return Promise.reject(new je("cleanupDirtyObjects"))}isDirty(t){throw new je("isDirty")}cleanup(){return Promise.reject(new je("cleanup"))}}const Br=n(9),Lr={String:null,Integer:"0",Long:"0",Decimal:"0",Float:"0",Currency:"0",Enum:null,HashString:null,ObjectReference:null,DateTime:null,Boolean:!1,AutoNumber:"0",Binary:null};class Gr extends Ur{constructor(t,e,n,r,i){super(),t=t||{},this._store=n,this._getDocumentUrl=t.getDocumentUrlFn||qr,this._objectCache=e,this._fileBackend=r,this._synchronizer=i,this._dirtyGuids=[]}async initialize(){const t=await this._store.fetchDirty();this._dirtyGuids=t.map(t=>t.guid)}getByGuid(t,e){return Promise.all(t.map(this._getByGuid,this)).then(t=>{return{mxobjects:t.filter(t=>null!=t).map($r)}})}async getByPath(t,e,n,r){if("reverse"===r){const r=this._objectCache.getAllObjects().filter(n=>n.getReferences(e).includes(t)).map(t=>t.jsonData),{mxobjects:i}=await this.getSlice(n,[{attribute:e,operator:"equals",value:t}]),o=i.map(t=>Or.MxObject.fromJson(t)).filter(n=>n.getReferences(e).includes(t)).filter(t=>!r.some(e=>e.guid===t.getGuid())).map(t=>t.jsonData);return{mxobjects:r.concat(o)}}{let n=this._objectCache.getObject(t);if(!n){const{mxobjects:[e]}=await this.getByGuid([t]);e&&(n=Or.MxObject.fromJson(e))}if(!n)return{mxobjects:[]};const r=n.getReferences(e),i=r.map(t=>this._objectCache.getObject(t)).filter(t=>null!==t).map(t=>t.jsonData),o=r.filter(t=>!this._objectCache.has(t)),{mxobjects:s}=await this.getByGuid(o);return{mxobjects:s.concat(i)}}}getSlice(t,e,n){const r=window.mx.meta.getEntity(t),i=(e||[]).map(t=>(t.attribute&&r.isReference(t.attribute)&&(t.value=this._synchronizer.getInternalGuid(t.value)),t));return this._store.getSlice(t,i,n).then(([t,e])=>{return{mxobjects:t.map(this._synchronizer.makeObjectExternal,this._synchronizer).map($r),count:e}})}create(t){const e=Mr+Dr.getUniqueId();return this._objectCache.onCreate([e]),this._objectCache.setMxObjects([function(t,e){const n={guid:t,objectType:e,attributes:{}},r=window.mx.meta.getEntity(e);return r.getAttributes().forEach(t=>{n.attributes[t]={value:Lr[r.getAttributeType(t)]}}),n}(e,t)]),Promise.resolve({actionResult:e})}async commit(t,e){const n=Br.objectFromArray(t.map(t=>[t,Br.clone(this._objectCache.getChanges(t))])),[r,i]=Br.partition(t=>this._objectCache.has(t),t),o=r.map(t=>this._objectCache.getObject(t)).map(Wr),s=(await Promise.all(i.map(this._getByGuid,this))).concat(o).map(function(t){return Object.assign({},t,Br.mapObject(n[t.guid],t=>t.value))});return await this._store.insertOrReplace(s.map(this._synchronizer.makeObjectInternal,this._synchronizer)),this._dirtyGuids.push(...t),this._objectCache.onCommit(t),this._objectCache.setMxObjects(s.map(t=>$r(Object.assign(t,{$dirty:!0})))),this._objectCache.removeChanges(function(t){const e={};return Object.keys(t).forEach(n=>{e[n]=Object.keys(t[n])}),e}(n)),{}}rollback(t){this._objectCache.removeAllChanges(t);const e=t.filter(t=>this._objectCache.isNew(t));return this._objectCache.removeObjects(e),Promise.resolve({})}validate(t){return Promise.resolve({})}saveDocument(t,e,n,r){if(r.size/1048576>n.maxFileSize)return Promise.reject(new Ge.a("File too large"));const i=Pr(this._synchronizer.getInternalGuid(t));return this._fileBackend.storeFile(r,Ar+i).then(()=>(this._objectCache.makeChange(t,"HasContents",!0),this.commit([t],null)))}getDocumentUrl(t,e,n){return this._getDocumentUrl(Pr(this._synchronizer.getInternalGuid(t)),e,n)}getImageUrl(t){return Promise.resolve(t)}upload(){return this._synchronizer.upload()}async downloadObjects(t){await this._synchronizer.downloadObjects(t),this._dirtyGuids=[]}downloadFiles(t){return this._synchronizer.downloadFiles(t)}cleanupDirtyObjects(){return this._store.cleanupDirtyObjects()}isDirty(t){return this._dirtyGuids.includes(t)}async cleanup(){await this._store.cleanDatabase(),await this._fileBackend.removeDir(Ar),await this._fileBackend.removeDir(kr),this._dirtyGuids=[]}_getByGuid(t){return this._store.getByGuid(this._synchronizer.getInternalGuid(t)).then(t=>this._synchronizer.makeObjectExternal(t))}}function Wr(t){return Fr(t.jsonData)}function qr(t,e,n){var r=n?"thumbnails":"documents";return"filesystem:"+window.mx.appUrl+"temporary/files/"+r+"/"+t+"?"+ +new Date}var Hr=n(9),Yr=n.n(Hr),zr=n(44);class Jr{constructor(t,e,n){this._store=t,this._fileBackend=e,this._objectCache=n,this._internalToExternal={}}async upload(){const t=this._fileBackend,e=await this._store.fetchDirty();if(0===e.length)return{};!function(t){const e=t.map(t=>t.guid),n=Yr.a.unique(t.map(t=>p(t).map(([t,e])=>e)).reduce((t,e)=>t.concat(e),[])).filter(t=>!Rr(t)).filter(t=>!e.includes(t));if(n.length>0){const e=Yr.a.unique(t.map(t=>p(t).filter(([t,e])=>n.includes(e)).map(([e,n])=>`object of type ${t.$objectType} (reference ${e})`)).reduce((t,e)=>t.concat(e),[])).join(", "),r=`Sync has failed due to a modeling error. Your database contains objects that reference uncommitted objects:\n${e}.`;throw new We(r)}}(e);const[n,r]=Yr.a.partition(t=>Rr(t.guid),e),i=r.filter(d),o=n.filter(d),[s,a]=await Promise.all([Promise.all(i.concat(o).map(async function(e){const n=Ar+Pr(e.guid),r=await t.readFile(n);return{tempGuid:(await Object(zr.uploadWithRetries)("__sync__","",r,2)).commits[0],fileObjGuid:e.guid}})),Promise.all(r.map(function(t){return Object(mr.b)(t.$objectType).then(e=>{const n=e.objects.find(t=>t.guid===e.actionResult);return{internalObj:t,remoteJson:n}})}))]),c=Yr.a.objectFromArray(a.map(({internalObj:t,remoteJson:e})=>[t.guid,e.guid])),u=Yr.a.objectFromArray(s.map(({tempGuid:t,fileObjGuid:e})=>Rr(e)?[t,e]:[t,c[e]])),l=n.map(t=>t.guid).concat(a.map(({remoteJson:t})=>t.guid)),h=a.map(({remoteJson:t})=>t),f=Yr.a.objectFromArray(e.map(t=>(function(t,e){const n=window.mx.meta.getEntity(t.$objectType),r=Object.keys(t).filter(function(e){return!Nr(e)&&n.isSyncable(e)&&!Vr(t,e)}).map(r=>{const i=t[r],o=n.isObjectReference(r)&&null!=i&&!Rr(i)?e[i]:i;return[r,{value:o}]});return[Rr(t.guid)?t.guid:e[t.guid],Yr.a.objectFromArray(r)]})(t,c)));return await Object(mr.h)(l,u,f,h),await this._store.makeClean(e),await Promise.all(i.map(async e=>{const n=Ar+Pr(e.guid),r=Ar+Pr(c[e.guid]);await t.moveFile(n,r)})),Yr.a.arrayFromObject(c).forEach(([t,e])=>this._mapInternalGuid(t,e)),{};function p(t){const e=window.mx.meta.getEntity(t.$objectType);return Yr.a.arrayFromObject(t).filter(([t,n])=>"guid"===t||!Nr(t)&&e.isReference(t))}function d(t){return window.mx.meta.getEntity(t.$objectType).isA("System.FileDocument")&&t.HasContents}}async downloadObjects(t){const e=Yr.a.flatten(await Promise.all(t.map(t=>(function(t,e){return Object(mr.g)(e).then(e=>e.mxobjects.map(Fr).map(e=>Object.assign({},e,{$objectType:t})))})(t.store,t.xpath))));await this._store.rebuildDatabase(e);const n=e.map(this.makeObjectExternal,this).filter(t=>this._objectCache.has(t.guid));return this._objectCache.setMxObjects(n.map($r)),{}}async downloadFiles(t){const e=this._store,n=this._fileBackend,r=Yr.a.flatten(await Promise.all(t.map(t=>(function(t){return e.getSlice(t,[{attribute:"HasContents",operator:"equals",value:"true"}]).then(([t,e])=>t)})(t)))),i=r.map(t=>s(t,!1)),o=r.filter(t=>window.mx.meta.getEntity(t.$objectType).isA("System.Image")).map(t=>s(t,!0));return await Promise.all(i.concat(o)),{};function s(t,e){const r=function(t,e,n){return mx.remoteUrl+function(t,e,n){let r="file?"+["guid="+t,"changedDate="+e].join("&");return n&&(r+="&thumb=true"),r}(t,e,n)}(t.guid,t.changedDate,e),i=(e?kr:Ar)+Pr(t.guid);return n.downloadFile(r,i)}}getExternalGuid(t){return this._internalToExternal[t]||t}getInternalGuid(t){for(const e in this._internalToExternal)if(this._internalToExternal[e]===t)return e;return t}makeObjectExternal(t){return Kr(t,this.getExternalGuid.bind(this))}makeObjectInternal(t){return Kr(t,this.getInternalGuid.bind(this))}_mapInternalGuid(t,e){this._internalToExternal[e]=t}}function Kr(t,e){if(null===t)return null;const n=window.mx.meta.getEntity(t.$objectType);return Yr.a.mapObject(t,(t,r)=>{return("guid"===r||!Nr(r)&&n.isReference(r))&&null!=t?e(t):t})}function Xr(t,...e){return new Promise((n,r)=>{const i=e.concat([n,r]);t(...i)})}function Qr(t){return(e,n)=>{const r=n(e),i=new Promise((n,r)=>{setTimeout(()=>r(new Le.a(`Request ${function(t){return(t.init.method||"get").toUpperCase()+" "+t.url+(Object(s.e)(t.body)&&t.body.action?`(${t.body.action})`:"")}(e)} timed out after ${t} ms.`)),t)});return Promise.race([r,i])}}var Zr,ti=n(41);async function ei(t,e,n,r){Object(Be.b)(),Object(Be.c)(Qr(3e4));const i=new sn,o=new Tr(new xe("session"),new xe("token"),{currentCacheBust:e,shouldGenerateToken:!0}),s=new $e,a=new Qe({garbageCollectionInterval:1e4,logCleanupStatistics:!1},i),c=new wr(r),u=new nn;window.mx={version:"{{mendix-version}}",appUrl:"resources://",homeUrl:"not-supported",remoteUrl:t,remote:new Fe,ui:new Ve,onError:t=>we.NativeModules.NativeErrorHandler.handle(t.message,Object(ti.parse)(t.stack)),isOffline:()=>!0,reload:()=>we.NativeModules.NativeReloadHandler.reload(),logger:u,session:o,meta:s,data:a,parser:c},function(t){Object(Be.c)((e,n)=>{if(!e.url.startsWith(window.mx.appUrl))return n(e);let r;if((r=-1===e.url.indexOf("?")?e.url.substring(window.mx.appUrl.length):e.url.substring(window.mx.appUrl.length,e.url.indexOf("?")))in t){const e=t[r]();return Promise.resolve(new Response(JSON.stringify(e),{status:200,statusText:"OK"}))}return Promise.reject(new Error(`Failed to locate resource ${r}`))})}(n);const l=await o.startup({hybrid:!0,offline:!0,profile:"hybridPhoneOffline",timezoneoffset:(new Date).getTimezoneOffset()});if(o.getConfig("isDevModeEnabled")){const e=new tn(t);e.connect(),e.addOnReload(Ve.savePageState),e.addOnReload(we.NativeModules.NativeReloadHandler.reload),u.addHandler((t,...n)=>{e.log(t,...n)})}s.startup();const h=await async function(t,e,{createStoreFn:n,getStorageDirFn:r,downloadFileFn:i,getDocumentUrlFn:o}){const s=new Cr(window.mx.session.getConfig("sync_config.schema"),n),a=new e({downloadFileFn:i,getStorageDirFn:r}),c=new Jr(s,a,t),u=new Gr({getDocumentUrlFn:o},t,s,a,c);return await u.initialize(),u}(i,ln,{createStoreFn:()=>Ue.openDatabase("MendixDatabase","1","Mendix Database",-1)});a.startup(h),l&&(await Xr(a.uploadOfflineObjectsAndFiles.bind(a)),await a.downloadObjects(),a.downloadFiles())}async function ni({cacheBust:t,resourcesMap:e,defaultPatterns:n}){try{const r=we.NativeModules.MxConfiguration.RUNTIME_URL;await ei(r,t,e,n),await Ve.startApp()}catch(t){we.NativeModules.NativeErrorHandler.handle(t.message,Object(ti.parse)(t.stack))}}function ri(t){const e={testID:t.name,style:t.style};return t.text.status!==Zr.Loading?Object(i.createElement)(we.Text,e,t.text.value):null}function ii(t,e){return Object.keys(t).filter(t=>!e.includes(t)).reduce((e,n)=>Object.assign({},e,{[n]:t[n]}),{})}function oi(t,e){return e.filter(e=>void 0!==t[e]).reduce((e,n)=>Object.assign({},e,{[n]:t[n]}),{})}function si(t,e){return t.filter(t=>void 0!==t&&void 0!==t[e]).map(t=>t[e])}function ai(t){const{buttonStyles:e,captionStyles:n}=function(t){const e=si(t,"button"),n=si(t,"caption");return{buttonStyles:e,captionStyles:n}}(t.style),r="android"===we.Platform.OS?we.TouchableNativeFeedback:we.TouchableOpacity,o=t.caption.value||"",s="android"===we.Platform.OS?o.toUpperCase():o;return Object(i.createElement)(r,{testID:t.name,style:e,onPress:()=>t.onClick.execute(),disabled:!t.onClick||!t.onClick.canExecute},Object(i.createElement)(we.View,null,Object(i.createElement)(we.Text,{style:n},s)))}!function(t){t.Loading="loading",t.Unavailable="unavailable",t.Available="available"}(Zr||(Zr={}));const ci=Symbol("mxObject");const ui=me(class extends i.Component{constructor(t){super(t),this.store=new pe(t.$store),this.setMxObject(t.scope)}componentWillReceiveProps(t){if(this.props.$store!==t.$store)throw new Error("Unexpected change of parent scope.");this.setMxObject(t.scope)}render(){return Object(i.createElement)(ge,{store:this.store},this.props.children)}setMxObject(t){const{obj:e,scope:n}=function(t){const e=t[ci];if(void 0===e)throw new Error("Arbitrary object is used as a ListItem. This is not allowed.");return e}(t);this.store.set(n,"object",e)}});function li(t){const e={testID:t.name,refreshing:t.listInfo.status===Zr.Loading,style:t.style,data:t.listInfo.value?t.listInfo.value.items:[],keyExtractor:t=>t.id,renderItem:({item:e,index:n})=>Object(i.createElement)(ui,{scope:e},Object(i.createElement)(we.View,{testID:`${t.name}$item${n}`},t.itemTemplate())),onEndReached:()=>{const e=Object(s.b)(t.amount.value).plus(t.pageSize);t.amount.setValue(e)}};return Object(i.createElement)(we.FlatList,Object.assign({},e))}function hi(t){const e={testID:t.name,style:t.style};return Object(i.createElement)(we.View,e,t.content)}class fi extends i.Component{constructor(){super(...arguments),this.onPressHandler=this.onPress.bind(this)}onPress(){this.props.onClick&&this.props.onClick.canExecute&&this.props.onClick.execute()}render(){return Object(i.createElement)(we.TouchableWithoutFeedback,{testID:this.props.name,onPress:this.onPressHandler},Object(i.createElement)(we.Image,{source:this.props.source,style:this.props.style}))}}var pi;!function(t){t[t.Unknown=0]="Unknown",t[t.Validation=1]="Validation",t[t.WidgetNotFound=2]="WidgetNotFound"}(pi||(pi={}));var di=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};const gi=t=>{const{error:e}=t,n=di(t,["error"]);return void 0!==e&&e.message?Object(i.createElement)(we.Text,n,e.message):null};function mi(t){return{type:pi.Unknown,message:t}}class bi extends i.Component{constructor(t){super(t),this.onValueChangeAndroid=this.onValueChangeAndroid.bind(this),this.onValueChange=this.onValueChange.bind(this),this.renderOption=this.renderOption.bind(this),this.state={IOSPickerVisible:!1}}getCaption(t){return this.props.inputValue.status!==Zr.Available?"":void 0===t||""===t?this.props.emptyOptionCaption.value||"":this.props.inputValue.formatter.format(t)}onValueChangeAndroid(t){this.onValueChange(t)}onValueChange(t){t!==this.props.inputValue.value&&this.props.inputValue.setValue(t||void 0)}render(){const t=si(this.props.style,"label"),e=this.props.label&&this.props.label.status!==Zr.Loading?Object(i.createElement)(we.Text,{key:"label",testID:`${this.props.name}$label`,style:t},this.props.label.value):null,n=this.props.inputValue.validation[0];return[e,"android"===we.Platform.OS?this.renderPicker():this.renderIOS(),Object(i.createElement)(gi,{key:"error",testID:`${this.props.name}$alert`,error:{type:pi.Unknown,message:n}})]}renderPicker(){const t="android"===we.Platform.OS?we.Picker:we.PickerIOS,e="android"===we.Platform.OS?si(this.props.style,"value"):si(this.props.style,"pickerIOS"),n="android"===we.Platform.OS?void 0:si(this.props.style,"pickerItemIOS"),r="android"===we.Platform.OS?this.onValueChangeAndroid:this.onValueChange,o=this.props.inline?"dropdown":"dialog";return Object(i.createElement)(t,{selectedValue:this.props.inputValue.value,mode:o,testID:this.props.name,style:e,itemStyle:n,onValueChange:r,enabled:!this.props.inputValue.readOnly,key:"picker"},this.renderOptions())}renderOptions(){if(this.props.inputValue.status!==Zr.Available)return[];const t=this.props.inputValue.universe||[],e=this.props.inputValue.value,n=e&&-1===t.indexOf(e)?[e]:[];return["",...t,...n].map(this.renderOption)}renderOption(t,e){const n="android"===we.Platform.OS?we.Picker.Item:we.PickerIOS.Item;return Object(i.createElement)(n,{label:this.getCaption(t),value:t,key:t,testID:`dropDownItem${e}`})}renderIOS(){const t=si(this.props.style,"value"),e=si(this.props.style,"pickerBackdropIOS"),n=si(this.props.style,"pickerTopIOS");let r=null;return this.state.IOSPickerVisible&&(r=this.props.inline?this.renderPicker():Object(i.createElement)(we.Modal,{animationType:"fade",key:"modal",transparent:!0,visible:this.state.IOSPickerVisible},Object(i.createElement)(we.TouchableWithoutFeedback,{accessible:!1,onPress:()=>this.toggleIOSPicker()},Object(i.createElement)(we.View,{style:[yi.backdropWrapper,...e]},Object(i.createElement)(we.View,{style:yi.container},Object(i.createElement)(we.View,{style:[yi.topWrapper,...n]},Object(i.createElement)(we.Button,{testID:`${this.props.name}$closeButton`,title:vr("mxui.widget.native","ModalDialog.close"),onPress:()=>this.toggleIOSPicker()})),this.renderPicker()))))),[Object(i.createElement)(we.TouchableOpacity,{onPress:()=>this.toggleIOSPicker(),key:"button",disabled:this.props.inputValue.readOnly||this.props.inputValue.status!==Zr.Available,testID:`${this.props.name}$openButton`},Object(i.createElement)(we.Text,{style:t},this.getCaption(this.props.inputValue.value))),r]}toggleIOSPicker(){this.setState({IOSPickerVisible:!this.state.IOSPickerVisible})}}const yi=we.StyleSheet.create({backdropWrapper:{backgroundColor:"rgba(0, 0, 0, 0.3)",flex:1,flexDirection:"row",alignItems:"flex-end"},container:{backgroundColor:"#FFFFFF",flex:1},topWrapper:{alignItems:"flex-end"}});class vi extends i.Component{constructor(t){super(t),this.onChange=this.onChange.bind(this)}onChange(t){this.props.value.status!==Zr.Available||this.props.value.readOnly||this.props.value.setValue(t)}render(){const{inputStyles:t,inputErrorStyles:e,labelStyles:n,validationMessageStyles:r,inputSwitchStyleProps:o,inputErrorSwitchStyleProps:s}=this.processStyles(),a=this.props.value.validation&&this.props.value.validation[0],c=this.props.caption?Object(i.createElement)(we.Text,{testID:`${this.props.name}$label`,key:"label",style:n},this.props.caption.value):null,u=Object.assign({testID:this.props.name,style:a?e:t,onValueChange:this.onChange,value:this.props.value.value||!1,disabled:this.props.value.readOnly},a?s:o);return[c,Object(i.createElement)(we.Switch,Object.assign({key:"input"},u)),Object(i.createElement)(gi,{key:"alert",testID:`${this.props.name}$alert`,error:mi(a),style:r})]}processStyles(){const t=["tintColor","thumbTintColor"],e=si(this.props.style,"input").map(e=>ii(e,t)),n=si(this.props.style,"inputError").map(e=>ii(e,t)),r=si(this.props.style,"input").map(e=>oi(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),i=si(this.props.style,"inputError").map(e=>oi(e,t)).reduce((t,e)=>Object.assign({},t,e),{});return{inputStyles:e,inputErrorStyles:n,labelStyles:si(this.props.style,"label"),validationMessageStyles:si(this.props.style,"validationMessage"),inputSwitchStyleProps:r,inputErrorSwitchStyleProps:i}}}const wi={default:{android:"default",iOS:"default"},"number-pad":{android:"numeric",iOS:"number-pad"},"decimal-pad":{android:"numeric",iOS:"decimal-pad"},"phone-pad":{android:"phone-pad",iOS:"phone-pad"},url:{android:"default",iOS:"url"},"email-address":{android:"email-address",iOS:"email-address"}};class Oi extends i.Component{constructor(){super(...arguments),this.state={focused:!1},this.onChangeTextHandler=this.onChangeText.bind(this),this.onFocusHandler=this.onFocus.bind(this),this.onBlurHandler=this.onBlur.bind(this)}componentDidUpdate(t,e){if(!e.editedValue)return;const{value:n,displayValue:r}=this.props.inputValue,{value:i,displayValue:o}=t.inputValue;!this.props.inputValue.readOnly&&a(n,i)&&r===o||this.setState({editedValue:void 0})}onChangeText(t){this.setState({editedValue:{displayValue:t,internalValue:this.props.inputValue.formatter.parse(t)}})}onFocus(){this.setState({focused:!0}),this.dispatchAction("onEnter")}onBlur(){this.submitValue(),this.dispatchAction("onLeave"),this.props.inputValue.setFormatting(this.props.inputValue.formatter.defaultConfig),this.setState({editedValue:void 0,focused:!1})}submitValue(){const t=this.state.editedValue;if(t)if(t.internalValue.valid){const e=t.internalValue.value;this.isSameValue(e,this.props.inputValue.value)||this.props.inputValue.setValue(e)}else t.displayValue!==this.props.inputValue.displayValue&&this.props.inputValue.setTextValue(t.displayValue)}isSameValue(t,e){const n=this.props.inputValue.formatter;return n.format(t)===n.format(e)}render(){const{inputStyles:t,inputErrorStyles:e,labelStyles:n,validationMessageStyles:r,inputTextInputStyleProps:o,inputErrorTextInputStyleProps:s}=this.processStyles(),a=this.props.inputValue.validation&&this.props.inputValue.validation[0],c="horizontal"===this.props.formOrientation?{flex:this.props.labelWidth}:void 0,u=this.props.label?Object(i.createElement)(we.Text,{testID:`${this.props.name}$label`,key:"label",style:[c,...n]},this.props.label.value):null,l="horizontal"===this.props.formOrientation?{flex:12-this.props.labelWidth}:void 0,h=Object.assign({testID:this.props.name,style:[l,...t,...a?e:[]],editable:!this.props.inputValue.readOnly,onChangeText:this.onChangeTextHandler,onFocus:this.onFocusHandler,onBlur:this.onBlurHandler,maxLength:this.props.maxLength,placeholder:this.props.placeholder.value||void 0,secureTextEntry:this.props.isPassword,value:(this.state.editedValue||this.props.inputValue).displayValue,keyboardType:Oi.getPlatformKeyboardType(this.props.keyboardType),clearButtonMode:"always"},a?s:o),f=Object(i.createElement)(we.TextInput,Object.assign({key:"input"},h)),p="horizontal"===this.props.formOrientation?{flexDirection:"row",alignItems:"center"}:void 0;return[Object(i.createElement)(we.View,{key:"inputGroup",style:p},u,f),Object(i.createElement)(gi,{key:"alert",testID:`${this.props.name}$alert`,style:r,error:{type:pi.Unknown,message:a}})]}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===Zr.Available&&e&&e.execute()}static getPlatformKeyboardType(t){const e=wi[t];return"android"===we.Platform.OS?e.android:e.iOS}processStyles(){const t=["placeholderTextColor","selectionColor","underlineColorAndroid"],e=si(this.props.style,"input").map(e=>ii(e,t)),n=si(this.props.style,"inputError").map(e=>ii(e,t)),r=si(this.props.style,"input").map(e=>oi(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),i=si(this.props.style,"inputError").map(e=>oi(e,t)).reduce((t,e)=>Object.assign({},t,e),{});return{inputStyles:e,inputErrorStyles:n,labelStyles:si(this.props.style,"label"),validationMessageStyles:si(this.props.style,"validationMessage"),inputTextInputStyleProps:r,inputErrorTextInputStyleProps:i}}}class _i extends i.Component{constructor(){super(...arguments),this.state={internalValue:this.props.inputValue.displayValue||""},this.onChangeTextHandler=this.onChangeText.bind(this),this.onFocusHandler=this.onFocus.bind(this),this.onBlurHandler=this.onBlur.bind(this)}componentDidUpdate(t){this.props.inputValue.displayValue!==t.inputValue.displayValue&&this.setState({internalValue:this.props.inputValue.displayValue})}onChangeText(t){this.setState({internalValue:t})}onFocus(){this.dispatchAction("onEnter")}onBlur(){this.state.internalValue!==this.props.inputValue.displayValue&&this.props.inputValue.setValue(this.state.internalValue),this.dispatchAction("onLeave")}render(){const{inputStyles:t,inputErrorStyles:e,labelStyles:n,validationMessageStyles:r,inputTextInputStyleProps:o,inputErrorTextInputStyleProps:s}=this.processStyles(),a=this.props.inputValue.validation[0],c=this.props.label?Object(i.createElement)(we.Text,{testID:`${this.props.name}$label`,key:"label",style:n},this.props.label.value):null,u=Object.assign({multiline:!0,numberOfLines:this.props.numberOfLines,testID:this.props.name,style:a?[t,e]:t,editable:!this.props.inputValue.readOnly&&this.props.inputValue.status===Zr.Available,onChangeText:this.onChangeTextHandler,onFocus:this.onFocusHandler,onBlur:this.onBlurHandler,maxLength:this.props.maxLength,placeholder:this.props.placeholder.value||void 0,value:this.state.internalValue},a?s:o);return[c,Object(i.createElement)(we.TextInput,Object.assign({key:"input"},u)),Object(i.createElement)(gi,{key:"alert",testID:`${this.props.name}$alert`,style:r,error:{type:pi.Unknown,message:a}})]}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===Zr.Available&&e&&e.execute()}processStyles(){const t=["placeholderTextColor","selectionColor","underlineColorAndroid"],e=si(this.props.style,"input").map(e=>ii(e,t)),n=si(this.props.style,"inputError").map(e=>ii(e,t)),r=si(this.props.style,"input").map(e=>oi(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),i=si(this.props.style,"inputError").map(e=>oi(e,t)).reduce((t,e)=>Object.assign({},t,e),{});return{inputStyles:e,inputErrorStyles:n,labelStyles:si(this.props.style,"label"),validationMessageStyles:si(this.props.style,"validationMessage"),inputTextInputStyleProps:r,inputErrorTextInputStyleProps:i}}}const ji=t=>Object(i.createElement)(we.ScrollView,{style:[t.style]},t.content);class xi extends i.Component{constructor(){super(...arguments),this.onDatePressHandler=this.onDatePress.bind(this)}async onDatePress(){if(this.props.inputValue.readOnly)return;this.dispatchAction("onEnter");const t=this.props.inputValue.status===Zr.Available&&void 0===this.props.inputValue.value?new Date:this.props.inputValue.value;try{const e=await this.selectDate(t).then(this.selectTime.bind(this));this.props.inputValue.setValue(e)}catch(t){}finally{this.dispatchAction("onLeave")}}render(){const t=Pi(this.props.style),e=this.props.inputValue.validation&&this.props.inputValue.validation[0];return[Object(i.createElement)(Di,{key:"label",name:this.props.name,label:this.props.label,style:t.label}),Object(i.createElement)(Ai,{key:"value",name:this.props.name,inputValue:this.props.inputValue,placeholder:this.props.placeholder,onPress:this.onDatePressHandler,style:t.value}),Object(i.createElement)(gi,{key:"error",testID:`${this.props.name}$alert`,error:mi(e),style:t.validationMessage})]}async selectDate(t){if("date"===this.props.mode||"datetime"===this.props.mode){const{action:e,year:n,month:r,day:i}=await we.DatePickerAndroid.open({date:t});return e===we.DatePickerAndroid.dateSetAction&&n&&r&&i?new Date(n,r,i):Promise.reject()}return t}async selectTime(t){if("time"===this.props.mode||"datetime"===this.props.mode){const{action:e,hour:n,minute:r}=await we.TimePickerAndroid.open({hour:t.getHours(),minute:t.getMinutes()});if(e===we.TimePickerAndroid.timeSetAction){const e=new Date(t);return e.setHours(n,r),e}return Promise.reject()}return t}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===Zr.Available&&e&&e.execute()}}class Ei extends i.Component{constructor(t){super(t),this.onDateChangeHandler=this.onDateChange.bind(this),this.onDatePressHandler=this.onDatePress.bind(this),this.toggleVisibilityHandler=this.toggleVisibility.bind(this),this.state={visible:!1}}onDateChange(t){const e=this.props.inputValue;e.status!==Zr.Available||e.readOnly||this.props.inputValue.setValue(t)}onDatePress(){this.props.inputValue.readOnly||(this.props.inputValue.status===Zr.Available&&void 0===this.props.inputValue.value?(this.dispatchAction("onEnter"),this.onDateChange(new Date),this.toggleVisibility(!1)):this.toggleVisibility())}toggleVisibility(t=!0){this.setState({visible:!this.state.visible},()=>t&&this.dispatchAction(this.state.visible?"onEnter":"onLeave"))}render(){const t=Pi(this.props.style),e=this.props.inputValue.validation&&this.props.inputValue.validation[0];return[Object(i.createElement)(Di,{key:"label",name:this.props.name,label:this.props.label,style:t.label}),Object(i.createElement)(Ai,{key:"value",name:this.props.name,inputValue:this.props.inputValue,placeholder:this.props.placeholder,onPress:this.onDatePressHandler,style:t.value}),this.renderDatePicker(),Object(i.createElement)(gi,{key:"error",testID:`${this.props.name}$alert`,error:mi(e),style:t.validationMessage})]}renderDatePicker(){if(!this.state.visible)return null;const t=Object(i.createElement)(we.DatePickerIOS,{key:"datePicker",date:this.props.inputValue.value,onDateChange:this.onDateChangeHandler,mode:this.props.mode});return this.props.inline?t:this.renderModal(t)}renderModal(t){return Object(i.createElement)(we.Modal,{key:"modal",transparent:!0,onRequestClose:()=>{}},Object(i.createElement)(we.TouchableWithoutFeedback,{accessible:!1,onPress:this.toggleVisibilityHandler},Object(i.createElement)(we.View,{style:Si.backdropWrapper},Object(i.createElement)(we.View,{style:Si.container},Object(i.createElement)(we.View,{style:Si.topWrapper},Object(i.createElement)(we.Button,{testID:`${this.props.name}$closeButton`,title:vr("mxui.widget.native","ModalDialog.close"),onPress:this.toggleVisibilityHandler})),t))))}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===Zr.Available&&e&&e.execute()}}const Si=we.StyleSheet.create({backdropWrapper:{backgroundColor:"rgba(0, 0, 0, 0.3)",flex:1,flexDirection:"row",alignItems:"flex-end"},container:{backgroundColor:"#FFFFFF",flex:1},topWrapper:{alignItems:"flex-end"}});var Ti=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};const Ci=t=>Object(i.createElement)("android"===we.Platform.OS?xi:Ei,t),Di=({name:t,label:e,style:n})=>e&&void 0!==e.value?Object(i.createElement)(we.Text,{testID:`${t}$label`,style:n},e.value):null,Ai=t=>{const e="android"===we.Platform.OS?we.TouchableNativeFeedback:we.TouchableOpacity,n=ki(t.inputValue,t.placeholder);return Object(i.createElement)(n=>{var{children:r}=n,o=Ti(n,["children"]);return t.inputValue.readOnly?i.Children.only(r):Object(i.createElement)(e,Object.assign({onPress:()=>t.onPress()},o),r)},{key:"touchable",testID:`${t.name}$value`,accessible:!0,accessibilityLabel:n},Object(i.createElement)(we.Text,{key:"value",style:t.style,testID:`${t.name}$value`},n))},ki=(t,e)=>t.value?t.displayValue:e.value||" ",Pi=t=>({label:si(t,"label").filter(t=>!!t),value:si(t,"value").filter(t=>!!t),validationMessage:si(t,"validationMessage").filter(t=>!!t)});const Mi=t=>{const e={testID:t.name,style:[{minWidth:t.width||100,minHeight:t.height||100},t.style],source:{}};return t.source.status===Zr.Available?e.source=t.source.value:t.placeholder&&(e.source=t.placeholder),Object(i.createElement)(we.Image,Object.assign({},e))},Ii=t=>{const e=t.placeholder?function(t,e){return class extends i.Component{constructor(t){super(t),this.initialProps=t,this.state={ignoreUpdates:!0}}componentDidMount(){this.timeoutId=window.setTimeout(()=>this.setState({ignoreUpdates:!1}),e)}componentWillUnmount(){window.clearTimeout(this.timeoutId)}render(){const e=this.state.ignoreUpdates?this.initialProps:this.props;return Object(i.createElement)(t,Object.assign({},e))}}}(Mi,300):Mi;return Object(i.createElement)(e,Object.assign({},t))};function Ri(t){const e={onPress:()=>t.onClick.execute(),accessible:!1},n=Object(i.createElement)(we.View,null,t.content);return"android"===we.Platform.OS?Object(i.createElement)(we.TouchableNativeFeedback,e,n):Object(i.createElement)(we.TouchableOpacity,e,n)}const Ni=t=>{const e=t.visible;return function(t,e){return!(t&&mx.session.isGuest())&&(void 0===e||e.some(t=>mx.session.getUserRoleNames().includes(t)))}(t.needsNamedUser,t.allowedRoles)&&(void 0===e||Boolean(e.value))?t.contents:null};function Vi(t,e,n){return function(r){return r.lift(new $i(t,e,n))}}var $i=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Fi(t,this.nextOrObserver,this.error,this.complete))},t}(),Fi=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=A,o._tapError=A,o._tapComplete=A,o._tapError=r||A,o._tapComplete=i||A,h(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||A,o._tapError=n.error||A,o._tapComplete=n.complete||A),o}return l(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(T);function Ui(t,e){return"function"==typeof e?function(n){return n.pipe(Ui(function(n,r){return ut(t(n,r)).pipe(pt(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new Bi(t))}}var Bi=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new Li(t,this.project))},t}(),Li=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return l(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new lt(this,void 0,void 0);this.destination.add(i),this.innerSubscription=ht(this,t,e,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(ft);function Gi(t){return function(e){return e.lift(new Wi(t))}}var Wi=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new qi(t,this.value))},t}(),qi=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return l(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(T);function Hi(t,e){return t(e).pipe(Ui(n=>n.status===Zr.Available&&0===n.value.items.length&&e.offset>0&&e.amount>0?t(Object.assign({},e,{offset:0})).pipe(Lt(t=>t.status!==Zr.Loading)):J(n)))}class Yi{constructor(t,e,n){this.store=e,this.widgetId=n,this.initiatedPageChange=!1;const r={offset:0,amount:t.defaultAmount||Number.POSITIVE_INFINITY};this.value$=xt(zi(n,"offset",e,r.offset),zi(n,"amount",e,r.amount)).pipe(pt(([t,e])=>({offset:t,amount:e}))),this.externalChange$=this.value$.pipe(Lt(()=>!this.hasInitiatedPageChange()),zt(),Gi(void 0))}updateFrom(t){ee(()=>{if(t.status===Zr.Available){const{totalCount:e,hasMoreItems:n,offset:r,items:i}=t.value;this.store.set(this.widgetId,"total",void 0!==e?ue(e):void 0),this.store.set(this.widgetId,"hasMoreItems",n),this.store.set(this.widgetId,"pageGuids",i.map(t=>t.id));const o=this.store.get(this.widgetId,"offset");void 0!==o&&o.eq(r)||(this.initiatedPageChange=!0,this.store.set(this.widgetId,"offset",ue(r)))}})}hasInitiatedPageChange(){const t=this.initiatedPageChange;return this.initiatedPageChange=!1,t}}function zi(t,e,n,r){return n.get$(t,e).pipe(pt(t=>{if(void 0!==t){const e=Number(t);if(isNaN(e))throw new o.AssertionError;return e}return r}),Kt())}function Ji(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];q(n)?t.pop():n=null;var r=t.length;return wt(1!==r||n?r>0?Y(t,n):W(n):z(t[0]),e)}}function Ki(){return{status:Zr.Loading}}function Xi(){return{status:Zr.Unavailable}}function Qi(t){return{status:Zr.Available,value:t}}function Zi(t){return e=>(function(t,e){return eo(t,t=>Qi(e(t)))})(e,t)}function to(t){return e=>eo(e,t)}function eo(t,e){return t.status===Zr.Available?e(t.value):t}function no(t){return ut(t).pipe(pt(Qi),Ji(Ki()))}function ro(t){return{status:t.status,value:t.status===Zr.Available?t.value:void 0}}function io(t){return class extends ie{constructor(t){super(),this.config=t}initialize(e,n){const r=t(this.config,n,e);this.resource=Ht("Wrapped property",r),this.freeSubscription=Object(c.autorun)(()=>this.resource.current())}uninitialize(){this.freeSubscription()}computeValue(){return this.resource.current()}}}const oo=io(function(t,e,n){let r=-1;const i=new Yi(t,e,n);return re(_t(i.value$.pipe(Yt(i.externalChange$),pt(t=>({page:t,forceReload:!1}))),i.value$.pipe(Yt(function(t){return qt({entity:t})}(t.entity)),pt(t=>({page:t,forceReload:!0}))))).pipe(function(t,e){return n=>new P(r=>{let i,o=e,s=!1,a=!1;return n.subscribe({next(e){if(a)return;let n;i&&(i.unsubscribe(),i=void 0);try{n=t(o,e)}catch(t){return r.error(t),void(a=!0)}i=n.subscribe({next(t){o=t,r.next(t)},error(t){r.error(t),a=!0},complete(){i=void 0,s&&r.complete()}})},error(t){r.error(t),i&&(i.unsubscribe(),i=void 0)},complete(){s=!0,i&&!i.closed||r.complete()}})})}((t,{page:e,forceReload:i})=>{if(i||t.status!==Zr.Available){const t=++r;return Hi(e=>o(e,t,n),e)}return Hi(e=>(function(t,e,n){const r={offset:t.offset,amount:t.items.length};if(function(t,e){return e.offset>=t.offset&&e.offset+e.amount<=t.offset+t.amount}(r,e))return J(Qi({totalCount:t.totalCount,hasMoreItems:e.offset+e.amount<t.totalCount,offset:Math.max(t.offset,e.offset),version:t.version,items:t.items.slice(e.offset-t.offset,e.offset-t.offset+e.amount)}));if(function(t,e){return e.offset===t.offset&&e.amount>t.amount||e.offset+e.amount===t.offset+t.amount&&e.offset<t.offset}(r,e)){const i=function(t,e){return{offset:t.offset===e.offset?e.offset+e.amount:t.offset,amount:t.amount-e.amount}}(e,r);return o(i,t.version,n).pipe(pt(Zi(n=>({totalCount:n.totalCount,hasMoreItems:e.offset+e.amount<n.totalCount,offset:e.offset,version:n.version,items:e.offset<r.offset?n.items.concat(t.items):t.items.concat(n.items)}))),Lt(t=>t.status!==Zr.Loading))}return o(e,t.version,n)})(t.value,e,n),e)},Ki()),pt(ro),Vi(t=>i.updateFrom(t)));function o({offset:e,amount:n},r,i){const o=t.sort?{sort:t.sort.map(t=>[t.attributePath,t.sortDirection])}:{},s=n!==Number.POSITIVE_INFINITY?{limit:n}:{};return no(new Promise((a,c)=>mx.data.getSlice(t.entity,[],Object.assign({offset:e},s,o),!0,(t,o)=>a({items:t.map(t=>(function(t,e){return{id:t.getGuid(),[ci]:{obj:t,scope:e}}})(t,i)),totalCount:o,hasMoreItems:e+n<o,offset:e,version:r}),c)))}});function so(t){return function(e){return e.lift(new co(t))}}var ao,co=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new uo(t,this.total))},t}(),uo=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return l(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(T);function lo(){return{access:ao.None}}!function(t){t[t.None=0]="None",t[t.Read=1]="Read",t[t.Write=2]="Write"}(ao||(ao={}));var ho=n(11);class fo{constructor(t){this.mxObject=t,this.attributes={},this.references={};const e="PluginWidget",n=qt({guid:t.getGuid(),tag:e});this.self$=n.pipe(Ji(void 0),pt(()=>t.isDeleted()?Xi():Qi(this)));const r=mx.meta.getEntity(t.getEntity());for(const i of r.getAttributes()){const o=_t(n,qt({guid:t.getGuid(),attr:i,tag:e})).pipe(Ji(void 0),pt(()=>po(t,i)),Kt());this.attributes[i]=o,r.isReference(i)&&(this.references[i]=o.pipe(Ui(t=>t.access===ao.None?J(Xi()):void 0===t.value?J(Xi()):no(mo(t.value)).pipe(pt(to(t=>null===t?Xi():Qi(fo.from(t)))))),Kt(),zt()))}}getGuid(){return this.mxObject.getGuid()}getEntity(){return this.mxObject.getEntity()}old(){return this.mxObject}get$(t){return Object.prototype.hasOwnProperty.call(this.attributes,t)?this.attributes[t]:Jt(lo())}set(t,e){if(this.mxObject.isDeleted())throw new o.AssertionError(`Cannot modify attribute ${t} of a deleted object.`);if(go(this.mxObject,t)!==ao.Write)throw new o.AssertionError(`No write access to attribute ${t}`);this.mxObject.set(t,Object(ho.c)(e))}getByPath$(t){const[e,,...n]=t.split("/"),r=n.length?n.join("/"):void 0;return Object.prototype.hasOwnProperty.call(this.references,e)?this.references[e].pipe(Ui(t=>t.status===Zr.Available?r?t.value.getByPath$(r):t.value.self$:J(t)),Kt()):Jt(Xi())}static from(t){return t.__cached_mxObj3||(t.__cached_mxObj3=new fo(t))}static fromState$(t,e){if(void 0===t)return Jt(Ki());if(t===fe)return Jt(Xi());const n=fo.from(t);return e?n.getByPath$(e):Jt(Qi(n))}}function po(t,e){const n=go(t,e);return n===ao.None?lo():function(t,e=ao.Write){return{access:e,value:t}}(Object(ho.e)(t.get(e),t.getAttributeType(e)),n)}function go(t,e){return t.has(e)?t.isReadonlyAttr(e)?ao.Read:ao.Write:ao.None}function mo(t){return new Promise((e,n)=>mx.data.get({guid:t,callback:e,error:n}))}class bo{constructor(t){this.defaultConfig=t}format(t,e){return!t||isNaN(t.getTime())?"":mx.parser.formatValue(t.getTime(),"DateTime",e||this.defaultConfig)}parse(t,e){const n=mx.parser.parseValue(t,"DateTime",e||this.defaultConfig);return null===n||n&&isNaN(n.getTime())?{valid:!1}:{valid:!0,value:""!==n?n:void 0}}getFormatPlaceholder(){return mx.parser.getDateFormatPlaceholder(this.defaultConfig)}}class yo{constructor(t){this.universe=t}format(t,e){const n=this.universe.find(e=>e.key===t);return n?n.caption:t?t.toString():""}parse(t,e){throw new Error("Enumeration values cannot be parsed")}getFormatPlaceholder(){}}class vo{constructor(t,e){this.attributeType=t,this.defaultConfig=e}format(t,e){return t?mx.parser.formatValue(t,this.attributeType,e||this.defaultConfig):""}parse(t,e){const n=mx.parser.parseValue(t,this.attributeType,e||this.defaultConfig);return null===n?{valid:!1}:{valid:!0,value:""!==n?n:void 0}}getFormatPlaceholder(){}}function wo(t,e,n){const r=mx.meta.getEntity(t),i=r.getAttributeType(e);return i?"Enum"===i?new yo(r.getEnumMap(e)):Oo(i,n):{format:()=>"",parse:()=>{throw new Error("Cannot parse values for unresolved attribute")},getFormatPlaceholder:()=>void 0}}function Oo(t,e){switch(t){case"DateTime":return new bo(e.dateFormat||{type:"date"});case"Float":case"Currency":case"Integer":case"Long":case"Decimal":return new vo(t,e.numberFormat||{groupDigits:!1});default:return{format:e=>void 0!==e?mx.parser.formatValue(Object(ho.c)(e),t):"",parse:e=>{const n=mx.parser.parseValue(e,t);return null!==n?{valid:!0,value:Object(ho.e)(n,t)}:{valid:!1}},getFormatPlaceholder:()=>void 0}}}var _o=n(25),jo=n(26),xo=n(28),Eo=n(27);var So=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new To(t,this.predicate))},t}(),To=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return l(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(T);class Co{constructor(t){this.baseConfig=t,this.initiatedValueChange=!1,this.customValidation$=new Tt(void 0)}onValueChangeInitiated(){this.initiatedValueChange=!0}setCustomValidation(t){this.customValidation$.next(t)}getValidation$(t,e){const n=t.pipe(function(t){return function(e){return e.lift(new So(t))}}(t=>t.status===Zr.Loading),pt(t=>{const e=this.initiatedValueChange;return this.initiatedValueChange=!1,Object.assign({internal:e},t)}),zt(),Kt(),so(1));return xt(t.pipe(Yt(_t(n.pipe(Lt(t=>t.internal)),e)),pt(t=>t.status===Zr.Available?this.validate(t.value):void 0),Ji(void 0),Xt(n.pipe(Lt(t=>!t.internal),Gi(void 0)))),t.pipe(pt(t=>t.status===Zr.Available?t.value.object:void 0),Ji(void 0),Ui(t=>(function(t,e){if(void 0===t)return J(void 0);return qt({val:!0,guid:t.getGuid(),attr:e.attribute,tag:`Validation of ${e.friendlyId}`})})(t,this.baseConfig)),Xt(_t(n,e).pipe(Gi(void 0)))),this.customValidation$).pipe(pt(t=>t.filter(t=>void 0!==t)),Kt())}isValid(t){return void 0===this.customValidation$.value&&void 0===this.validate(t)}}function Do(t){return{state:"parsed",value:t}}class Ao extends Co{constructor(t){super(t),this.config=t}validate(t){switch(t.attr.state){case"unparsed":return function(t,e){const n=mx.meta.getEntity(e.entity).getAttributeType(e.attribute);switch(n){case"Enum":case"Boolean":case"ObjectReference":case"ObjectReferenceSet":return vr("mendix.lib.Validations","invalid_attribute",t,e.attribute);case"DateTime":return vr("mendix.lib.Validations","invalid_date");case"Currency":return vr("mendix.lib.Validations","invalid_currency");case"Float":case"Integer":case"Long":case"Decimal":return vr("mendix.lib.Validations","invalid_number");default:throw new Error(`Attribute type ${n} is not supported.`)}}(t.attr.value,this.config);case"parsed":return function(t,e){return function(t,e){const n=er.validate(t,e);if(n!==er.validation.OK)return vr("mendix.lib.Validations",br[n])}(Object(ho.c)(t),mx.meta.getEntity(e.entity).getAttributeType(e.attribute))}(t.attr.value,this.config)||(this.config.validation?function(t,e,n){const r=new Eo.a({currentObject:()=>e.old(),value:()=>Object(ho.d)(t)});if(!ko.evaluate(n.expression,r))return n.message||vr("mendix.lib.Validations","required_field");return}(t.attr.value,t.object,this.config.validation):void 0)}}}const ko=new _o.a(jo.a,Object(xo.a)(()=>new Date));class Po extends ie{constructor(t){super(),this.config=t,this.id=ce("property"),this.invalidValue$=new $,this.validator=new Ao(t)}initialize(t,e){this.formatter=wo(this.config.entity,this.config.attribute,this.config),this.universe=function(t){const e=mx.meta.getEntity(t.entity);switch(e.getAttributeType(t.attribute)){case"Enum":return e.getEnumMap(t.attribute).map(t=>t.key);case"Boolean":return[!0,!1];default:return}}(this.config);const n=function(t,e){const n=t.get$(e.scope,"object").pipe(Ui(t=>fo.fromState$(t,e.path)),Ui(t=>t.status===Zr.Available?t.value.get$(e.attribute).pipe(pt(e=>Qi({object:t.value,attr:e}))):J(t))),r=t.get$(he,"subtreeReadonly").pipe(pt(Boolean));return xt(n,r).pipe(pt(([t,n])=>eo(t,t=>{if(t.attr.access===ao.None)return Xi();const r=t.attr.access===ao.Read||n||e.readOnly;return Qi({object:t.object,attr:t.attr.value,readOnly:r})})))}(e,this.config).pipe(zt()),r=function(t,e){const n=e.pipe(Ct(t),pt(([t,e])=>{if(e.status!==Zr.Available)throw new o.AssertionError;return Qi({object:e.value.object,attr:t})})),r=t.pipe(pt(Zi(t=>({object:t.object,attr:Do(t.attr)}))));return _t(n,r)}(n,this.invalidValue$),i=e.get$(he,"validationRequest").pipe(so(1),Gi(void 0)),s=this.validator.getValidation$(r,i).pipe(zt());this.value=Ht(`Value of ${this.config.friendlyId} (${this.config.attribute})`,xt(n,s)),this.subscription=s.subscribe(n=>{e.set(t,"isInvalid",n.length>0)})}uninitialize(t,e){e.set(t,"isInvalid",!1),this.subscription.unsubscribe()}computeValue(t){const e={id:this.id,universe:this.universe,formatter:this.formatter},[n,r]=this.value.current();switch(n.status){case Zr.Loading:case Zr.Unavailable:return Object.assign({loaded:n.status===Zr.Unavailable,value:void 0,readOnly:!0,errors:void 0},e);case Zr.Available:return Object.assign({loaded:!0,value:n.value.attr,readOnly:n.value.readOnly,errors:r.length?r.map(t=>({type:pi.Validation,message:t})):void 0},e)}}handleAction(t,e){if(t.payload.property!==this.id)return;const[n]=this.value.current();if(n.status!==Zr.Available)throw new o.AssertionError;switch(t.type){case"SET_VALIDATION_MESSAGE":this.validator.setCustomValidation(t.payload.message);break;case"CLEAR_VALIDATION_MESSAGE":this.validator.setCustomValidation(void 0);break;case"CHANGE_VALUE":if(n.value.readOnly)throw new o.AssertionError(function(t){return`Widget ${t.friendlyId} is attempting to change the value of attribute "${t.attribute}" of entity "${t.entity}" which is not writable.`}(this.config));this.validator.onValueChangeInitiated();const e=this.parse(t.payload.value);if(!e.valid){this.invalidValue$.next({state:"unparsed",value:`${t.payload.value}`});break}const r=Object(ho.a)(e.value,this.config.entity,this.config.attribute);this.validator.validate({object:n.value.object,attr:{state:"parsed",value:r}})||a(r,n.value.attr)?this.invalidValue$.next({state:"parsed",value:r}):n.value.object.set(this.config.attribute,r)}}parse(t){const e=mx.meta.getEntity(this.config.entity).getAttributeType(this.config.attribute);return"string"==typeof t&&"String"!==e&&"Enum"!==e?this.formatter.parse(t):{valid:!0,value:t}}}Po.PROPERTY_TYPE="AttributeProperty";var Mo=n(19);function Io(t,e){return 0===Object.keys(t).length?Jt({}):Qt(Object.keys(t).map(n=>{const r=t[n].source;return e.get$(t[n].widget,"allpages"===r?"allGuids":r).pipe(Ui(t=>(function(t,e){if("unavailable"===t)return J(void 0);if(void 0===t)return J("selection"===e?{objects:[]}:void 0);if(t instanceof Or.MxObject)return J({object:t});return wt(J([]),new Promise((e,n)=>{mx.data.get({guids:t,callback:e,error:n})})).pipe(pt(t=>({objects:t})))})(t,r)),pt(t=>({[n]:t})))})).pipe(pt(t=>Object.assign({},...t)))}async function Ro(t,e,n){const r=t.confirmation;if(r){if(!await new Promise(t=>mx.ui.confirmation({cancel:r.cancel,proceed:r.proceed,content:r.question,handler:()=>t(!0),onCancel:()=>t(!1)})))return}if(e.beforeExecuteAction&&e.beforeExecuteAction(),e.abortOnClientValidations)switch(t.validate){case"node":if(!e.widgetIsValid)throw new Mo.a({});break;case"view":await Object(Er.a)(e.currentForm,"publish","validate")}const i=t.progress?mx.ui.showProgress(t.progress.message,t.progress.modal):void 0;try{await Object(Er.a)(e.currentForm,"publish","submit");const r=e.abortOnServerValidations?e.currentForm.getSubmitObjects().map(t=>t.getGuid()):[];await mx.onlineData.executeMicroflow(t.name,function(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];r&&(e[n]="objects"in r?{guids:r.objects.map(t=>t.getGuid())}:"object"in r?{guid:r.object.getGuid()}:r)}),e}(n),e.currentForm,r,Boolean(t.async))}finally{void 0!==i&&mx.ui.hideProgress(i)}}var No=n(45);const Vo=new(n(46).NanoflowEngine)(No.executors);async function $o(t,e,n){let r;if(n)if("object"in n)r=[n.object];else{if(!("objects"in n))throw new o.AssertionError;r=n.objects}else r=void 0;if(e.abortOnClientValidations&&await Object(Er.a)(e.currentForm,"publish","validate"),e.abortOnServerValidations&&await Object(Er.a)(mx.data,"validate",e.currentForm.getSubmitObjects()),r){const t=await Promise.all(r.map(i));return"objects"in n?t:t[0]}return i();async function i(n){const r=n&&t.specializations&&t.specializations[n.getEntity()]||t;return mx.ui.openForm2(r.name,n&&n.getGuid(),r.title,e.currentForm,Object.assign({},r,{formParams:e.formParams}))}}async function Fo(t,e){const n="addressAttribute"in t?await Object(Er.a)(Object(s.b)(e),"fetch",t.addressAttribute):t.address,r=function(t,e){switch(t){case"email":return`mailto:${escape(e)}`;case"call":return`tel:${escape(e)}`;case"text":return`sms:${escape(e)}`;default:return e}}(t.schema,n);window.open(r,"web"===t.schema?"_blank":"_self")}async function Uo(t){const e=mx.ui.showProgress(void 0,!0);try{await async function(t){try{await Object(Er.a)(mx.data,"synchronizeOffline",{fast:t})}catch(t){if(t instanceof We)throw t;t instanceof Le.a?mx.ui.info(vr("mxui.sys.UI","sync_error"),!0):mx.ui.error(vr("mxui.sys.UI","non_connection_sync_error"),!0)}}(t.fast),t.reload&&await Object(Er.a)(mx.ui,"reload")}finally{mx.ui.hideProgress(e)}}function Bo(t,e,n,r,i){function a(t){i?i(t):t instanceof Mo.a||mx.onError(t)}mx.session.hasSomeRole(t.config.allowedRoles)?function(){switch(t.type){case"callMicroflow":return Ro(t.config,e,n);case"callNanoflow":return async function(t,e,n){e.beforeExecuteAction&&e.beforeExecuteAction(),e.abortOnClientValidations&&await Object(Er.a)(e.currentForm,"publish","validate"),await Object(Er.a)(e.currentForm,"publish","submit");const r=Object.keys(n).map(t=>{const e=n[t];return{name:t,value:"object"in e?e.object:Object(s.a)()}});await Vo.execute(t.nanoflow,r,e.currentForm)}(t.config,e,n);case"cancelChanges":return async function(t,{currentForm:e}){e.setSuspend(!0);try{await Object(Er.a)(e,"publish","rollback"),await function(t){return new Promise((e,n)=>{mx.data.rollback({mxobjs:t,callback:e,error:n})})}(e.getSubmitObjects()),t.closePage&&await Object(Er.a)(e,"close")}finally{e.setSuspend(!1)}}(t.config,e);case"closePage":return Object(Er.a)(e.currentForm,"close");case"doNothing":return Promise.resolve();case"openLink":const r="$object"in n?"object"in n.$object?n.$object.object:Object(s.a)():void 0;return Fo(t.config,r);case"openPage":return $o(t.config,e,n.$pageParameter).then(()=>void 0);case"saveChanges":return async function(t,{currentForm:e}){await Object(Er.a)(e,"publish","validate"),e.setSuspend(!0);try{await Object(Er.a)(e,"publish","submit"),await Object(Er.a)(e,"publish","commit"),await function(t){return new Promise((e,n)=>{mx.data.commit({mxobjs:t,callback:e,error:n})})}(e.getSubmitObjects()),t.syncAutomatically&&await Uo({fast:!0,reload:!1}),t.closePage&&await Object(Er.a)(e,"close")}finally{e.setSuspend(!1)}}(t.config,e);case"signOut":return async function(){mx.session.isGuest()||(mx.ui.showProgress(void 0,!0),mx.logout())}();case"synchronize":return Uo({fast:!1,reload:!0});case"deleteObject":return async function(t,{currentForm:e},n){let r;if("object"in n)r=[n.object];else{if(!("objects"in n))throw new o.AssertionError;r=n.objects}const i=vr(r.length>1?"mxui.widget.DataGrid":"mxui.sys.UI","confirm_delete",r.length.toString());if(await new Promise(t=>mx.ui.confirmation({content:i,handler:()=>{t(!0)},onCancel:()=>{t(!1)}}))){e.setSuspend(!0);try{await mx.onlineData.delete(r),t.closePage&&await Object(Er.a)(e,"close")}finally{e.setSuspend(!1)}}}(t.config,e,n.$object);case"createObject":const i="$object"in n?"object"in n.$object?n.$object.object:Object(s.a)():void 0;return async function(t,e,n){if("association"in t&&void 0===n)throw new o.AssertionError;const r=mx.ui.showProgress("",!1);try{const i=await new Promise((e,n)=>mx.data.create({entity:t.entity,callback:e,error:n}));t.association&&i.addReference(t.association,n.getGuid()),await $o(t.pageSettings,e,{object:i})}finally{mx.ui.hideProgress(r)}}(t.config,e,i);default:throw new o.AssertionError}}().then(r,a):mx.session.isGuest()?mx.ui.showLogin():a(new Ge.a("Unable to execute action because you do not have sufficient permissions."))}function Lo(t){mx.logger.debug(`Widget ${t.friendlyId} is attempting to change the value of attribute "${t.attribute}" of entity "${t.entity}" which is not available.`)}function Go(t){mx.logger.debug(`Widget ${t.friendlyId} is attempting to change the value of attribute "${t.attribute}" of entity "${t.entity}" which is not writable.`)}const Wo=io(function(t,e,n){const r=wo(t.entity,t.attribute,t),i=function(t){const e=mx.meta.getEntity(t.entity);switch(e.getAttributeType(t.attribute)){case"Enum":return e.getEnumMap(t.attribute).map(t=>t.key);case"Boolean":return[!0,!1];default:return}}(t),c=new Ao(t),u=new Tt(r.defaultConfig),l=new $;return function(t,e){return new P(function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?ut(i):G).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}(()=>({unsubscribe:function(){e.set(n,"isInvalid",!1)}}),()=>{const a=function(){const n=e.get$(t.scope,"object").pipe(Ui(e=>fo.fromState$(e,t.path)),Kt(),Ui(e=>e.status===Zr.Available?e.value.get$(t.attribute).pipe(pt(t=>Qi({object:e.value,attr:t}))):J(e))),r=e.get$(he,"subtreeReadonly").pipe(pt(Boolean)),i=xt(n,r).pipe(pt(([e,n])=>eo(e,({object:e,attr:r})=>{if(r.access===ao.None)return Xi();const i=r.access===ao.Read||n||t.readOnly;return Qi({object:e,readOnly:i,submitted:r.value,unsubmitted:void 0})})));return _t(i,l.pipe(Ct(i),pt(([t,e])=>e.status===Zr.Available?Qi(Object.assign({},e.value,{unsubmitted:t})):Object(s.a)())))}();return xt(a,function(t){const r=t.pipe(pt(Zi(t=>({object:t.object,attr:t.unsubmitted||Do(t.submitted)})))),i=e.get$(he,"validationRequest").pipe(so(1),Gi(void 0));return c.getValidation$(r,i).pipe(Vi(t=>{e.set(n,"isInvalid",t.length>0)}))}(a),u).pipe(pt(([e,n,s])=>{const a={status:e.status,formatter:r,validation:n,universe:i,setFormatting:ne(t=>u.next(t)),setValidation:ne(t=>c.setCustomValidation(t))};if(e.status!==Zr.Available)return Object.assign({},a,{value:void 0,displayValue:"",readOnly:!0,setValue:()=>Lo(t),setTextValue:()=>Lo(t)});const{submitted:f,unsubmitted:p,readOnly:d}=e.value;let g;if(void 0===p||"parsed"===p.state){const t=p?p.value:f;g={value:t,displayValue:r.format(t,s)}}else g={value:void 0,displayValue:p.value};return d?Object.assign({},a,g,{readOnly:!0,setValue:()=>Go(t),setTextValue:()=>Go(t)}):Object.assign({},a,g,{readOnly:!1,setValue:ne(t=>h(e.value,t)),setTextValue:ne(t=>(function(t,e,n){const i=r.parse(e,n);i.valid?h(t,i.value):(c.onValueChangeInitiated(),l.next({state:"unparsed",value:e}))})(e.value,t,s)),setValidation:ne(t=>(function(t,e){if(c.setCustomValidation(e),void 0!==t.unsubmitted&&c.isValid({object:t.object,attr:t.unsubmitted})){if("parsed"!==t.unsubmitted.state)throw new o.AssertionError;h(t,t.unsubmitted.value)}})(e.value,t))})}))});function h(n,r){const i=Object(ho.a)(r,t.entity,t.attribute),o=a(i,n.submitted);!c.isValid({object:n.object,attr:Do(i)})||void 0!==n.unsubmitted&&o?(c.onValueChangeInitiated(),l.next(Do(r))):o||(c.onValueChangeInitiated(),n.object.set(t.attribute,i),function(){const n={};for(const r of Object.keys(t.onChange.argMap)){const i=e.get(t.onChange.argMap[r].widget,"object");if(!i||"unavailable"===i)return;n[r]={object:i}}Bo(t.onChange,{abortOnClientValidations:!0,abortOnServerValidations:!1,widgetIsValid:!0,currentForm:Object(s.b)(e.get(he,"form"))[0]},n)}())}});const qo=io(function(t,e,n){const r=new Tt(0),i=r.pipe(pt(t=>t>0));return xt(Io(t.action.argMap,e),i).pipe(Kt(),pt(([i,o])=>{const a=Object.values(i).every(t=>void 0!==t);return{canExecute:a,isExecuting:o,execute:a?ne(()=>(function(i){if(Object.keys(i).some(e=>{const n=i[e];return"selection"===t.action.argMap[e].source&&"objects"in n&&0===n.objects.length}))return void mx.ui.info(vr("mxui.widget.DataGrid","no_selection"),!1);const o=e.get(n,"isInvalid"),a=Object(s.b)(e.get(he,"form"))[0];r.next(r.value+1),Bo(t.action,{abortOnClientValidations:!0,abortOnServerValidations:t.abortOnServerValidation,widgetIsValid:!o,currentForm:a},i,()=>{r.next(r.value-1)},t=>{r.next(r.value-1),t instanceof Mo.a||mx.onError(t)})})(i)):()=>mx.logger.debug(`Widget is attempting to execute a ${t.action.type} action which is not executable.`)}}))});function Ho(t,e){const n=t.parameters||{},r=t.formats||{};return e.pipe(Ui(e=>{return Qt(t.elements.map(t=>"string"==typeof t?J(Qi(t)):function(t,e,n){const{attribute:r,entityPath:i}=Object(s.h)(e);return(t?i?t.getByPath$(i):J(Qi(t)):J(Ki())).pipe(Ui(t=>t.status===Zr.Available?t.value.get$(r).pipe(pt(e=>e.access===ao.None?Xi():Qi(function(t,e,n,r){const i=mx.meta.getEntity(t),o=i.getAttributeType(e),s=Object(ho.c)(n);return"Enum"===o?i.getEnumCaption(e,s):mx.parser.formatValue(s,o,r)}(t.value.getEntity(),r,e.value,n)))):Jt(t)))}(e,n[t.toString()],r[t.toString()])))}),pt(t=>t.some(t=>t.status===Zr.Loading)?Ki():Qi(t.map(t=>t.status===Zr.Available?t.value:"").join(""))))}const Yo=io(function(t,e){const n=void 0!==t.scope?e.get$(t.scope,"object").pipe(pt(t=>t&&"unavailable"!==t?fo.from(t):void 0)):J(void 0);return Ho(t.template,n).pipe(pt(ro))});const zo=io(function({widgetId:t,slot:e,type:n,initialValue:r},i){void 0===i.get(t,e)&&void 0!==r&&i.set(t,e,"number"==typeof r?ue(r):r);const o=Oo(n,{}),s=i.get$(t,e).pipe(pt(t=>({type:"submitted",value:t}))),a=new $,c=new Tt(o.defaultConfig),u=new Tt(void 0);return xt(_t(s,a),c,u).pipe(pt(([t,e,r])=>({status:Zr.Available,validation:(void 0!==r?[r]:[]).concat("unparsed"===t.type?[function(t){switch(t){case"String":case"Boolean":case"ObjectReferenceSet":return vr("mendix.lib.Validations","invalid_value");case"Decimal":return vr("mendix.lib.Validations","invalid_number")}}(n)]:[]),universe:void 0,readOnly:!1,formatter:o,value:"unparsed"!==t.type?t.value:void 0,displayValue:"unparsed"!==t.type?o.format(t.value,e):t.value,setValue:ne(t=>l(t,Boolean(r))),setTextValue:ne(t=>(function(t,e,n){const r=o.parse(t,e);r.valid?l(r.value,n):a.next({type:"unparsed",value:t})})(t,e,Boolean(r))),setFormatting:ne(t=>c.next(t)),setValidation:ne(e=>(function(t,e){t!==u.value&&u.next(t),t||"unsubmitted"!==e.type||l(e.value,!1)})(e,t))})));function l(r,o){r=Object(ho.b)(r,n),o?a.next({type:"unsubmitted",value:r}):i.set(t,e,r)}});const Jo=io(function(t,e){return e.get$(t.scope,"object").pipe(Ui(t=>fo.fromState$(t)),Ui(e=>{if(e.status!==Zr.Available)return J(e);const n=(t.showAsThumbnail?kr:Ar)+e.value.getGuid();return ut(new Promise(t=>{(new ln).readAsDataURL(n).then(e=>t(Qi({uri:e}))).catch(()=>t(Xi()))})).pipe(Ji(Ki()))}),pt(ro))});function Ko(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Ko.prototype=Object.create(Error.prototype);var Xo=Ko;var Qo=function(){function t(t){if(this.total=t,this.total<0)throw new Xo}return t.prototype.call=function(t,e){return e.subscribe(new Zo(t,this.total))},t}(),Zo=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return l(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(T),ts=n(39),es=n(40);const ns=new _o.a(jo.a,Object(xo.a)(()=>new Date));class rs extends Error{constructor(){super(),Object.setPrototypeOf(this,rs.prototype)}}const is=io(function(t,e){return xt(e.get$(t.scope,"object"),e.get$(he,"form")).pipe(Ui(([e,n])=>(function t(e,n,r){const i=new Eo.a({pageTitle:()=>n.getTitle(),currentObject:()=>{if(!e||e===fe)throw new rs;return e}});try{const o=ns.evaluate(r,i),s=_t(...i.getDependencies().map(t=>qt(t)));return wt(J(Qi(o)),s.pipe(function(t){return function(e){return 0===t?W():e.lift(new Qo(t))}}(1),Ui(()=>t(e,n,r))))}catch(t){if(t instanceof es.a||t instanceof ts.a||t instanceof rs)return J(Ki());throw t}})(e,Object(s.b)(n)[0],t.expression)),Kt(),pt(ro))});n.d(e,"asPluginWidget",function(){return ye}),n.d(e,"NativeUI",function(){return Ve}),n.d(e,"startApp",function(){return ni}),n.d(e,"Text",function(){return ri}),n.d(e,"Button",function(){return ai}),n.d(e,"NativeList",function(){return li}),n.d(e,"Container",function(){return hi}),n.d(e,"Image",function(){return fi}),n.d(e,"DropDown",function(){return bi}),n.d(e,"CheckBox",function(){return vi}),n.d(e,"TextBox",function(){return Oi}),n.d(e,"TextArea",function(){return _i}),n.d(e,"ScrollContainer",function(){return ji}),n.d(e,"DatePicker",function(){return Ci}),n.d(e,"NativeDynamicImage",function(){return Ii}),n.d(e,"ClickableArea",function(){return Ri}),n.d(e,"ConditionalVisibilityWrapper",function(){return Ni}),n.d(e,"OfflineObjectListProperty",function(){return oo}),n.d(e,"AttributeProperty",function(){return Po}),n.d(e,"EditableAttributeProperty",function(){return Wo}),n.d(e,"ActionProperty",function(){return qo}),n.d(e,"DynamicTextProperty",function(){return Yo}),n.d(e,"WidgetVariableProperty",function(){return zo}),n.d(e,"NativeDynamicImageProperty",function(){return Jo}),n.d(e,"ExpressionProperty",function(){return is})}]);