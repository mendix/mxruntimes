module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=77)}([function(t,e){t.exports=require("react")},function(t,e){t.exports=require("react-native")},function(t,e,n){"use strict";(function(t,r){n.d(e,"g",function(){return _}),n.d(e,"d",function(){return C}),n.d(e,"h",function(){return q}),n.d(e,"e",function(){return J}),n.d(e,"i",function(){return Ht}),n.d(e,"c",function(){return Bt}),n.d(e,"j",function(){return Gt}),n.d(e,"f",function(){return Yt}),n.d(e,"b",function(){return jt}),n.d(e,"a",function(){return et});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}var c="An invariant failed, however the error is obfuscated because this is an production build.",u=[];Object.freeze(u);var l={};function h(){return++Ot.mobxGuid}function f(t){throw p(!1,t),"X"}function p(t,e){if(!t)throw new Error("[mobx] "+(e||c))}Object.freeze(l);function d(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var g=function(){};function m(t){return null!==t&&"object"==typeof t}function y(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function b(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function v(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return m(t)&&!0===t[n]}}function w(t){return t instanceof Map}function O(t){return t instanceof Set}function j(t){return null===t?null:"object"==typeof t?""+t:t}var x=Symbol("mobx administration"),E=function(){function t(t){void 0===t&&(t="Atom@"+h()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=nt.NOT_TRACKING}return t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(t){return t()})},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(t){return t()})},t.prototype.reportObserved=function(){return Dt(this)},t.prototype.reportChanged=function(){Ct(),function(t){if(t.lowestObserverState===nt.STALE)return;t.lowestObserverState=nt.STALE,t.observers.forEach(function(e){e.dependenciesState===nt.UP_TO_DATE&&(e.isTracing!==it.NONE&&kt(e,t),e.onBecomeStale()),e.dependenciesState=nt.STALE})}(this),Tt()},t.prototype.toString=function(){return this.name},t}(),S=v("Atom",E);function _(t,e,n){void 0===e&&(e=g),void 0===n&&(n=g);var r,i=new E(t);return e!==g&&zt("onBecomeObserved",i,e,r),n!==g&&function(t,e,n){zt("onBecomeUnobserved",t,e,n)}(i,n),i}var C={identity:function(t,e){return t===e},structural:function(t,e){return Ne(t,e)},default:function(t,e){return Object.is(t,e)}},T=Symbol("mobx did run lazy initializers"),D=Symbol("mobx pending decorators"),k={},A={};function P(t){if(!0!==t[T]){var e=t[D];if(e)for(var n in b(t,T,!0),e){var r=e[n];r.propertyCreator(t,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function M(t,e){return function(){var n,r,i=function(r,i,a,s){if(!0===s)return e(r,i,a,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,D)){var c=r[D];b(r,D,o({},c))}return r[D][i]={prop:i,propertyCreator:e,descriptor:a,decoratorTarget:r,decoratorArguments:n},function(t,e){var n=e?k:A;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return P(this),this[t]},set:function(e){P(this),this[t]=e}})}(i,t)};return(2===(r=arguments).length||3===r.length)&&"string"==typeof r[1]||4===r.length&&!0===r[3]?(n=u,i.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),i)}}function N(t,e,n){return te(t)?t:Array.isArray(t)?q.array(t,{name:n}):y(t)?q.object(t,void 0,{name:n}):w(t)?q.map(t,{name:n}):O(t)?q.set(t,{name:n}):t}function V(t){return t}function I(e){p(e);var n=M(!0,function(t,n,r,i,o){var a=r?r.initializer?r.initializer.call(t):r.value:void 0;Se(t).addObservableProp(n,a,e)}),r=(void 0!==t&&t.env,n);return r.enhancer=e,r}var R={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function $(t){return null==t?R:"string"==typeof t?{name:t,deep:!0,proxy:!0}:t}Object.freeze(R);var F=I(N),B=I(function(t,e,n){return null==t?t:ke(t)||ge(t)||we(t)||xe(t)?t:Array.isArray(t)?q.array(t,{name:n,deep:!1}):y(t)?q.object(t,void 0,{name:n,deep:!1}):w(t)?q.map(t,{name:n,deep:!1}):O(t)?q.set(t,{name:n,deep:!1}):f(!1)}),G=I(V),L=I(function(t,e,n){return Ne(t,e)?e:t});function U(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?V:N}var W={box:function(t,e){arguments.length>2&&H("box");var n=$(e);return new ot(t,U(n),n.name,!0,n.equals)},array:function(t,e){arguments.length>2&&H("array");var n=$(e);return function(t,e,n,r){void 0===n&&(n="ObservableArray@"+h());void 0===r&&(r=!1);var i=new he(n,e,r);o=i.values,a=x,s=i,Object.defineProperty(o,a,{enumerable:!1,writable:!1,configurable:!0,value:s});var o,a,s;var c=new Proxy(i.values,le);if(i.proxy=c,t&&t.length){var u=Z(!0);i.spliceWithArray(0,0,t),tt(u)}return c}(t,U(n),n.name)},map:function(t,e){arguments.length>2&&H("map");var n=$(e);return new ye(t,U(n),n.name)},set:function(t,e){arguments.length>2&&H("set");var n=$(e);return new je(t,U(n),n.name)},object:function(t,e,n){"string"==typeof arguments[1]&&H("object");var r=$(n);if(!1===r.proxy)return Jt({},t,e,r);var i=Kt(r),o=function(t){var e=new Proxy(t,re);return t[x].proxy=e,e}(Jt({},void 0,void 0,r));return Xt(o,t,e,i),o},ref:G,shallow:B,deep:F,struct:L},q=function(t,e,n){if("string"==typeof arguments[1])return F.apply(null,arguments);if(te(t))return t;var r=y(t)?q.object(t,e,n):Array.isArray(t)?q.array(t,e):w(t)?q.map(t,e):O(t)?q.set(t,e):t;if(r!==t)return r;f(!1)};function H(t){f("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(W).forEach(function(t){return q[t]=W[t]});var z=M(!1,function(t,e,n,r,i){var a=n.get,s=n.set,c=i[0]||{};Se(t).addComputedProp(t,e,o({get:a,set:s,context:t},c))}),Y=z({equals:C.structural}),J=function(t,e,n){if("string"==typeof e)return z.apply(null,arguments);if(null!==t&&"object"==typeof t&&1===arguments.length)return z.apply(null,arguments);var r="object"==typeof e?e:{};return r.get=t,r.set="function"==typeof e?e:r.set,r.name=r.name||t.name||"",new at(r)};function K(t,e,n){var r=function(){return X(t,e,n||this,arguments)};return r.isMobxAction=!0,r}function X(t,e,n,r){var i=function(t,e,n,r){var i=!1,o=0;var a=gt();Ct();var s=Z(!0);return{prevDerivation:a,prevAllowStateChanges:s,notifySpy:i,startTime:o}}(),o=!0;try{var a=e.apply(n,r);return o=!1,a}finally{o?(Ot.suppressReactionErrors=o,Q(i),Ot.suppressReactionErrors=!1):Q(i)}}function Q(t){tt(t.prevAllowStateChanges),Tt(),mt(t.prevDerivation),t.notifySpy}function Z(t){var e=Ot.allowStateChanges;return Ot.allowStateChanges=t,e}function tt(t){Ot.allowStateChanges=t}function et(t){var e,n=Ot.computationDepth;Ot.computationDepth=0;try{e=t()}finally{Ot.computationDepth=n}return e}J.struct=Y;var nt,rt,it,ot=function(t){function e(e,n,r,i,o){void 0===r&&(r="ObservableValue@"+h()),void 0===i&&(i=!0),void 0===o&&(o=C.default);var a=t.call(this,r)||this;return a.enhancer=n,a.name=r,a.equals=o,a.hasUnreportedChange=!1,a.value=n(e,void 0,r),a}return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){this.value;if((t=this.prepareNewValue(t))!==Ot.UNCHANGED){0,this.setNewValue(t)}},e.prototype.prepareNewValue=function(t){if(ht(this),ie(this)){var e=ae(this,{object:this,type:"update",newValue:t});if(!e)return Ot.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?Ot.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),se(this)&&ue(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return oe(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),ce(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return j(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(E),at=(v("ObservableValue",ot),function(){function t(t){this.dependenciesState=nt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=nt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+h(),this.value=new ct(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=it.NONE,this.derivation=t.get,this.name=t.name||"ComputedValue@"+h(),t.set&&(this.setter=K(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?C.structural:C.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){!function(t){if(t.lowestObserverState!==nt.UP_TO_DATE)return;t.lowestObserverState=nt.POSSIBLY_STALE,t.observers.forEach(function(e){e.dependenciesState===nt.UP_TO_DATE&&(e.dependenciesState=nt.POSSIBLY_STALE,e.isTracing!==it.NONE&&kt(e,t),e.onBecomeStale())})}(this)},t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(t){return t()})},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(t){return t()})},t.prototype.get=function(){this.isComputing&&f("Cycle detected in computation "+this.name+": "+this.derivation),0!==Ot.inBatch||0!==this.observers.size||this.keepAlive?(Dt(this),lt(this)&&this.trackAndCompute()&&function(t){if(t.lowestObserverState===nt.STALE)return;t.lowestObserverState=nt.STALE,t.observers.forEach(function(e){e.dependenciesState===nt.POSSIBLY_STALE?e.dependenciesState=nt.STALE:e.dependenciesState===nt.UP_TO_DATE&&(t.lowestObserverState=nt.UP_TO_DATE)})}(this)):lt(this)&&(this.warnAboutUntrackedRead(),Ct(),this.value=this.computeValue(!1),Tt());var t=this.value;if(ut(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(ut(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){p(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else p(!1,!1)},t.prototype.trackAndCompute=function(){var t=this.value,e=this.dependenciesState===nt.NOT_TRACKING,n=this.computeValue(!0),r=e||ut(t)||ut(n)||!this.equals(t,n);return r&&(this.value=n),r},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,Ot.computationDepth++,t)e=ft(this,this.derivation,this.scope);else if(!0===Ot.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(t){e=new ct(t)}return Ot.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(pt(this),this.value=void 0)},t.prototype.observe=function(t,e){var n=this,r=!0,i=void 0;return Ut(function(){var o=n.get();if(!r||e){var a=gt();t({type:"update",object:n,newValue:o,oldValue:i}),mt(a)}r=!1,i=o})},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return j(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}()),st=v("ComputedValue",at);(rt=nt||(nt={}))[rt.NOT_TRACKING=-1]="NOT_TRACKING",rt[rt.UP_TO_DATE=0]="UP_TO_DATE",rt[rt.POSSIBLY_STALE=1]="POSSIBLY_STALE",rt[rt.STALE=2]="STALE",function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(it||(it={}));var ct=function(){return function(t){this.cause=t}}();function ut(t){return t instanceof ct}function lt(t){switch(t.dependenciesState){case nt.UP_TO_DATE:return!1;case nt.NOT_TRACKING:case nt.STALE:return!0;case nt.POSSIBLY_STALE:for(var e=gt(),n=t.observing,r=n.length,i=0;i<r;i++){var o=n[i];if(st(o)){if(Ot.disableErrorBoundaries)o.get();else try{o.get()}catch(t){return mt(e),!0}if(t.dependenciesState===nt.STALE)return mt(e),!0}}return yt(t),mt(e),!1}}function ht(t){var e=t.observers.size>0;Ot.computationDepth>0&&e&&f(!1),Ot.allowStateChanges||!e&&"strict"!==Ot.enforceActions||f(!1)}function ft(t,e,n){yt(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++Ot.runId;var r,i=Ot.trackingDerivation;if(Ot.trackingDerivation=t,!0===Ot.disableErrorBoundaries)r=e.call(n);else try{r=e.call(n)}catch(t){r=new ct(t)}return Ot.trackingDerivation=i,function(t){for(var e=t.observing,n=t.observing=t.newObserving,r=nt.UP_TO_DATE,i=0,o=t.unboundDepsCount,a=0;a<o;a++){var s=n[a];0===s.diffValue&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState)}n.length=i,t.newObserving=null,o=e.length;for(;o--;){var s=e[o];0===s.diffValue&&St(s,t),s.diffValue=0}for(;i--;){var s=n[i];1===s.diffValue&&(s.diffValue=0,Et(s,t))}r!==nt.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}(t),r}function pt(t){var e=t.observing;t.observing=[];for(var n=e.length;n--;)St(e[n],t);t.dependenciesState=nt.NOT_TRACKING}function dt(t){var e=gt();try{return t()}finally{mt(e)}}function gt(){var t=Ot.trackingDerivation;return Ot.trackingDerivation=null,t}function mt(t){Ot.trackingDerivation=t}function yt(t){if(t.dependenciesState!==nt.UP_TO_DATE){t.dependenciesState=nt.UP_TO_DATE;for(var e=t.observing,n=e.length;n--;)e[n].lowestObserverState=nt.UP_TO_DATE}}var bt=function(){return function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}}(),vt=!0,wt=!1,Ot=function(){var t=xt();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(vt=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new bt).version&&(vt=!1),vt?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new bt):(setTimeout(function(){wt||f("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new bt)}();function jt(){return Ot}function xt(){return"undefined"!=typeof window?window:r}function Et(t,e){t.observers.add(e),t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function St(t,e){t.observers.delete(e),0===t.observers.size&&_t(t)}function _t(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Ot.pendingUnobservations.push(t))}function Ct(){Ot.inBatch++}function Tt(){if(0==--Ot.inBatch){Nt();for(var t=Ot.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof at&&n.suspend())}Ot.pendingUnobservations=[]}}function Dt(t){var e=Ot.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.size&&Ot.inBatch>0&&_t(t),!1)}function kt(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===it.BREAK){var n=[];!function t(e,n,r){if(n.length>=1e3)return void n.push("(and many more)");n.push(""+new Array(r).join("\t")+e.name);e.dependencies&&e.dependencies.forEach(function(e){return t(e,n,r+1)})}((r=t,Qt(Ae(r,i))),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof at?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r,i}var At=function(){function t(t,e,n){void 0===t&&(t="Reaction@"+h()),this.name=t,this.onInvalidate=e,this.errorHandler=n,this.observing=[],this.newObserving=[],this.dependenciesState=nt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+h(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=it.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Ot.pendingReactions.push(this),Nt())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(Ct(),this._isScheduled=!1,lt(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(t){this.reportExceptionInDerivation(t)}}Tt()}},t.prototype.track=function(t){this.isDisposed&&f("Reaction already disposed"),Ct();this._isRunning=!0;var e=ft(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&pt(this),ut(e)&&this.reportExceptionInDerivation(e.cause),Tt()},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(Ot.disableErrorBoundaries)throw t;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Ot.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,t),Ot.globalReactionErrorHandlers.forEach(function(n){return n(t,e)})}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ct(),pt(this),Tt()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t[x]=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"==typeof t[t.length-1]&&(n=t.pop());var r=function(t){switch(t.length){case 0:return Ot.trackingDerivation;case 1:return Ae(t[0]);case 2:return Ae(t[0],t[1])}}(t);if(!r)return f(!1);r.isTracing===it.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled");r.isTracing=n?it.BREAK:it.LOG}(this,t)},t}();var Pt=100,Mt=function(t){return t()};function Nt(){Ot.inBatch>0||Ot.isRunningReactions||Mt(Vt)}function Vt(){Ot.isRunningReactions=!0;for(var t=Ot.pendingReactions,e=0;t.length>0;){++e===Pt&&(console.error("Reaction doesn't converge to a stable state after "+Pt+" iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Ot.isRunningReactions=!1}var It=v("Reaction",At);function Rt(t){var e=Mt;Mt=function(n){return t(function(){return e(n)})}}function $t(){f(!1)}function Ft(t){return function(e,n,r){if(r){if(r.value)return{value:K(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return K(t,i.call(this))}}}return function(t){return function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(e){b(this,n,Bt(t,e))}})}}(t).apply(this,arguments)}}var Bt=function(t,e,n,r){return 1===arguments.length&&"function"==typeof t?K(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?K(t,e):1===arguments.length&&"string"==typeof t?Ft(t):!0!==r?Ft(e).apply(null,arguments):void b(t,e,K(t.name||e,n.value,this))};function Gt(t,e){"string"==typeof t||t.name;return X(0,"function"==typeof t?t:e,this,void 0)}function Lt(t,e,n){b(t,e,K(e,n.bind(t)))}function Ut(t,e){void 0===e&&(e=l);var n,r=e&&e.name||t.name||"Autorun@"+h();if(!e.scheduler&&!e.delay)n=new At(r,function(){this.track(a)},e.onError);else{var i=qt(e),o=!1;n=new At(r,function(){o||(o=!0,i(function(){o=!1,n.isDisposed||n.track(a)}))},e.onError)}function a(){t(n)}return n.schedule(),n.getDisposer()}Bt.bound=function(t,e,n,r){return!0===r?(Lt(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Lt(this,e,n.value||n.initializer.call(this)),this[e]},set:$t}:{enumerable:!1,configurable:!0,set:function(t){Lt(this,e,t)},get:function(){}}};var Wt=function(t){return t()};function qt(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Wt}function Ht(t,e,n){void 0===n&&(n=l);var r,i,o,a=n.name||"Reaction@"+h(),s=Bt(a,n.onError?(r=n.onError,i=e,function(){try{return i.apply(this,arguments)}catch(t){r.call(this,t)}}):e),c=!n.scheduler&&!n.delay,u=qt(n),f=!0,p=!1,d=n.compareStructural?C.structural:n.equals||C.default,g=new At(a,function(){f||c?m():p||(p=!0,u(m))},n.onError);function m(){if(p=!1,!g.isDisposed){var e=!1;g.track(function(){var n=t(g);e=f||!d(o,n),o=n}),f&&n.fireImmediately&&s(o,g),f||!0!==e||s(o,g),f&&(f=!1)}}return g.schedule(),g.getDisposer()}function zt(t,e,n,r){var i="string"==typeof n?Ae(e,n):Ae(e),o="string"==typeof n?r:n,a=t+"Listeners";return i[a]?i[a].add(o):i[a]=new Set([o]),"function"!=typeof i[t]?f(!1):function(){var t=i[a];t&&(t.delete(o),0===t.size&&delete i[a])}}function Yt(t){var e=t.enforceActions,n=t.computedRequiresReaction,r=t.disableErrorBoundaries,i=t.reactionScheduler;if(!0===t.isolateGlobalState&&((Ot.pendingReactions.length||Ot.inBatch||Ot.isRunningReactions)&&f("isolateGlobalState should be called before MobX is running any reactions"),wt=!0,vt&&(0==--xt().__mobxInstanceCount&&(xt().__mobxGlobals=void 0),Ot=new bt)),void 0!==e){var o=void 0;switch(e){case!0:case"observed":o=!0;break;case!1:case"never":o=!1;break;case"strict":case"always":o="strict";break;default:f("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}Ot.enforceActions=o,Ot.allowStateChanges=!0!==o&&"strict"!==o}void 0!==n&&(Ot.computedRequiresReaction=!!n),void 0!==r&&(!0===r&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Ot.disableErrorBoundaries=!!r),i&&Rt(i)}function Jt(t,e,n,r){var i=Kt(r=$(r));return P(t),Se(t,r.name,i.enhancer),e&&Xt(t,e,n,i),t}function Kt(t){return t.defaultDecorator||(!1===t.deep?G:F)}function Xt(t,e,n,r){Ct();try{for(var i in e){var o=Object.getOwnPropertyDescriptor(e,i);0;var a=(n&&i in n?n[i]:o.get?z:r)(t,i,o,!0);a&&Object.defineProperty(t,i,a)}}finally{Tt()}}function Qt(t){var e,n,r={name:t.name};return t.observing&&t.observing.length>0&&(r.dependencies=(e=t.observing,n=[],e.forEach(function(t){-1===n.indexOf(t)&&n.push(t)}),n).map(Qt)),r}function Zt(t,e){return null!=t&&(void 0!==e?!!ke(t)&&t[x].values.has(e):ke(t)||!!t[x]||S(t)||It(t)||st(t))}function te(t){return 1!==arguments.length&&f(!1),Zt(t)}function ee(t,e){void 0===e&&(e=void 0),Ct();try{return t.apply(e)}finally{Tt()}}function ne(t){return t[x]}var re={has:function(t,e){if(e===x||"constructor"===e||e===T)return!0;var n=ne(t);return"string"==typeof e?n.has(e):e in t},get:function(t,e){if(e===x||"constructor"===e||e===T)return t[e];var n=ne(t),r=n.values.get(e);if(r instanceof E){var i=r.get();return void 0===i&&n.has(e),i}return"string"==typeof e&&n.has(e),t[e]},set:function(t,e,n){return"string"==typeof e&&(function t(e,n,r){if(2!==arguments.length)if(ke(e)){var i=e[x];i.values.get(n)?i.write(n,r):i.addObservableProp(n,r,i.defaultEnhancer)}else if(we(e))e.set(n,r);else{if(!ge(e))return f(!1);"number"!=typeof n&&(n=parseInt(n,10)),p(n>=0,"Not a valid index: '"+n+"'"),Ct(),n>=e.length&&(e.length=n+1),e[n]=r,Tt()}else{Ct();var o=n;try{for(var a in o)t(e,a,o[a])}finally{Tt()}}}(t,e,n),!0)},deleteProperty:function(t,e){return"string"==typeof e&&(ne(t).remove(e),!0)},ownKeys:function(t){return ne(t).keysAtom.reportObserved(),Reflect.ownKeys(t)},preventExtensions:function(t){return f("Dynamic observable objects cannot be frozen"),!1}};function ie(t){return void 0!==t.interceptors&&t.interceptors.length>0}function oe(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),d(function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)})}function ae(t,e){var n=gt();try{var r=t.interceptors;if(r)for(var i=0,o=r.length;i<o&&(p(!(e=r[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{mt(n)}}function se(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function ce(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),d(function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)})}function ue(t,e){var n=gt(),r=t.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](e);mt(n)}}var le={get:function(t,e){return e===x?t[x]:"length"===e?t[x].getArrayLength():"number"==typeof e?fe.get.call(t,e):"string"!=typeof e||isNaN(e)?fe.hasOwnProperty(e)?fe[e]:t[e]:fe.get.call(t,parseInt(e))},set:function(t,e,n){return"length"===e?(t[x].setArrayLength(n),!0):"number"==typeof e?(fe.set.call(t,e,n),!0):!isNaN(e)&&(fe.set.call(t,parseInt(e),n),!0)},preventExtensions:function(t){return f("Observable arrays cannot be frozen"),!1}};var he=function(){function t(t,e,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new E(t||"ObservableArray@"+h()),this.enhancer=function(n,r){return e(n,r,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return oe(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ce(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var n=new Array(t-e),r=0;r<t-e;r++)n[r]=void 0;this.spliceWithArray(e,0,n)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=e},t.prototype.spliceWithArray=function(t,e,n){var r=this;ht(this.atom);var i=this.values.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:null==e?0:Math.max(0,Math.min(e,i-t)),void 0===n&&(n=u),ie(this)){var o=ae(this,{object:this.proxy,type:"splice",index:t,removedCount:e,added:n});if(!o)return u;e=o.removedCount,n=o.added}n=0===n.length?n:n.map(function(t){return r.enhancer(t,void 0)});var a=this.spliceItemsIntoValues(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice(t,n,a),this.dehanceValues(a)},t.prototype.spliceItemsIntoValues=function(t,e,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}([t,e],n));var i=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+e)),i},t.prototype.notifyArrayChildUpdate=function(t,e,n){var r=!this.owned&&!1,i=se(this),o=i||r?{object:this.proxy,type:"update",index:t,newValue:e,oldValue:n}:null;this.atom.reportChanged(),i&&ue(this,o)},t.prototype.notifyArraySplice=function(t,e,n){var r=!this.owned&&!1,i=se(this),o=i||r?{object:this.proxy,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;this.atom.reportChanged(),i&&ue(this,o)},t}(),fe={intercept:function(t){return this[x].intercept(t)},observe:function(t,e){return void 0===e&&(e=!1),this[x].observe(t,e)},clear:function(){return this.splice(0)},replace:function(t){var e=this[x];return e.spliceWithArray(0,e.values.length,t)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=this[x];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray(t);case 2:return i.spliceWithArray(t,e)}return i.spliceWithArray(t,e,n)},spliceWithArray:function(t,e,n){return this[x].spliceWithArray(t,e,n)},push:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this[x];return n.spliceWithArray(n.values.length,0,t),n.values.length},pop:function(){return this.splice(Math.max(this[x].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this[x];return n.spliceWithArray(0,0,t),n.values.length},reverse:function(){var t=this.slice();return t.reverse.apply(t,arguments)},sort:function(t){var e=this.slice();return e.sort.apply(e,arguments)},remove:function(t){var e=this[x],n=e.dehanceValues(e.values).indexOf(t);return n>-1&&(this.splice(n,1),!0)},get:function(t){var e=this[x];if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(t,e){var n=this[x],r=n.values;if(t<r.length){ht(n.atom);var i=r[t];if(ie(n)){var o=ae(n,{type:"update",object:this,index:t,newValue:e});if(!o)return;e=o.newValue}(e=n.enhancer(e,i))!==i&&(r[t]=e,n.notifyArrayChildUpdate(t,e,i))}else{if(t!==r.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+r.length);n.spliceWithArray(t,0,[e])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(t){fe[t]=function(){var e=this[x];e.atom.reportObserved();var n=e.dehanceValues(e.values);return n[t].apply(n,arguments)}});var pe,de=v("ObservableArrayAdministration",he);function ge(t){return m(t)&&de(t[x])}var me={},ye=function(){function t(t,e,n){if(void 0===e&&(e=N),void 0===n&&(n="ObservableMap@"+h()),this.enhancer=e,this.name=n,this[pe]=me,this._keysAtom=_(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){return this._hasMap.has(t)?this._hasMap.get(t).get():this._updateHasMapEntry(t,!1).get()},t.prototype.set=function(t,e){var n=this._has(t);if(ie(this)){var r=ae(this,{type:n?"update":"add",object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(ie(this)&&!(r=ae(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var n=se(this),r=n?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return ee(function(){e._keysAtom.reportChanged(),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)}),n&&ue(this,r),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var n=this._hasMap.get(t);return n?n.setNewValue(e):(n=new ot(e,V,this.name+"."+be(t)+"?",!1),this._hasMap.set(t,n)),n},t.prototype._updateValue=function(t,e){var n=this._data.get(t);if((e=n.prepareNewValue(e))!==Ot.UNCHANGED){var r=se(this),i=r?{type:"update",object:this,oldValue:n.value,name:t,newValue:e}:null;0,n.setNewValue(e),r&&ue(this,i)}},t.prototype._addValue=function(t,e){var n=this;ht(this._keysAtom),ee(function(){var r=new ot(e,n.enhancer,n.name+"."+be(t),!1);n._data.set(t,r),e=r.value,n._updateHasMapEntry(t,!0),n._keysAtom.reportChanged()});var r=se(this),i=r?{type:"add",object:this,name:t,newValue:e}:null;r&&ue(this,i)},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},t.prototype.values=function(){var t=this,e=0,n=Array.from(this.keys());return $e({next:function(){return e<n.length?{value:t.get(n[e++]),done:!1}:{done:!0}}})},t.prototype.entries=function(){var t=this,e=0,n=Array.from(this.keys());return $e({next:function(){if(e<n.length){var r=n[e++];return{value:[r,t.get(r)],done:!1}}return{done:!0}}})},t.prototype[(pe=x,Symbol.iterator)]=function(){return this.entries()},t.prototype.forEach=function(t,e){var n,r;try{for(var i=a(this),o=i.next();!o.done;o=i.next()){var c=s(o.value,2),u=c[0],l=c[1];t.call(e,l,u,this)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.merge=function(t){var e=this;return we(t)&&(t=t.toJS()),ee(function(){y(t)?Object.keys(t).forEach(function(n){return e.set(n,t[n])}):Array.isArray(t)?t.forEach(function(t){var n=s(t,2),r=n[0],i=n[1];return e.set(r,i)}):w(t)?(t.constructor!==Map&&f("Cannot initialize from classes that inherit from Map: "+t.constructor.name),t.forEach(function(t,n){return e.set(n,t)})):null!=t&&f("Cannot initialize map from "+t)}),this},t.prototype.clear=function(){var t=this;ee(function(){dt(function(){var e,n;try{for(var r=a(t.keys()),i=r.next();!i.done;i=r.next()){var o=i.value;t.delete(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}})})},t.prototype.replace=function(t){var e=this;return ee(function(){var n,r=y(n=t)?Object.keys(n):Array.isArray(n)?n.map(function(t){return s(t,1)[0]}):w(n)||we(n)?Array.from(n.keys()):f("Cannot get keys from '"+n+"'");Array.from(e.keys()).filter(function(t){return-1===r.indexOf(t)}).forEach(function(t){return e.delete(t)}),e.merge(t)}),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t,e,n={};try{for(var r=a(this),i=r.next();!i.done;i=r.next()){var o=s(i.value,2),c=o[0],u=o[1];n["symbol"==typeof c?c:be(c)]=u}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.toJS=function(){return new Map(this)},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+Array.from(this.keys()).map(function(e){return be(e)+": "+t.get(e)}).join(", ")+" }]"},t.prototype.observe=function(t,e){return ce(this,t)},t.prototype.intercept=function(t){return oe(this,t)},t}();function be(t){return t&&t.toString?t.toString():new String(t).toString()}var ve,we=v("ObservableMap",ye),Oe={},je=function(){function t(t,e,n){if(void 0===e&&(e=N),void 0===n&&(n="ObservableSet@"+h()),this.name=n,this[ve]=Oe,this._data=new Set,this._atom=_(this.name),this[Symbol.toStringTag]="Set","function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,r){return e(t,r,n)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;ee(function(){dt(function(){var e,n;try{for(var r=a(t._data.values()),i=r.next();!i.done;i=r.next()){var o=i.value;t.delete(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}})})},t.prototype.forEach=function(t,e){var n,r;try{for(var i=a(this),o=i.next();!o.done;o=i.next()){var s=o.value;t.call(e,s,s,this)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if((ht(this._atom),ie(this))&&!(r=ae(this,{type:"add",object:this,newValue:t})))return this;if(!this.has(t)){ee(function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()});var n=se(this),r=n?{type:"add",object:this,newValue:t}:null;0,n&&ue(this,r)}return this},t.prototype.delete=function(t){var e=this;if(ie(this)&&!(r=ae(this,{type:"delete",object:this,oldValue:t})))return!1;if(this.has(t)){var n=se(this),r=n?{type:"delete",object:this,oldValue:t}:null;return ee(function(){e._atom.reportChanged(),e._data.delete(t)}),n&&ue(this,r),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=Array.from(this.keys()),n=Array.from(this.values());return $e({next:function(){var r=t;return t+=1,r<n.length?{value:[e[r],n[r]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t=this,e=0,n=Array.from(this._data.values());return $e({next:function(){return e<n.length?{value:t.dehanceValue(n[e++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return xe(t)&&(t=t.toJS()),ee(function(){Array.isArray(t)?(e.clear(),t.forEach(function(t){return e.add(t)})):O(t)?(e.clear(),t.forEach(function(t){return e.add(t)})):null!=t&&f("Cannot initialize set from "+t)}),this},t.prototype.observe=function(t,e){return ce(this,t)},t.prototype.intercept=function(t){return oe(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},t.prototype[(ve=x,Symbol.iterator)]=function(){return this.values()},t}(),xe=v("ObservableSet",je),Ee=function(){function t(t,e,n,r){void 0===e&&(e=new Map),this.target=t,this.values=e,this.name=n,this.defaultEnhancer=r,this.keysAtom=new E(n+".keys")}return t.prototype.read=function(t){return this.values.get(t).get()},t.prototype.write=function(t,e){var n=this.target,r=this.values.get(t);if(r instanceof at)r.set(e);else{if(ie(this)){if(!(o=ae(this,{type:"update",object:this.proxy||n,name:t,newValue:e})))return;e=o.newValue}if((e=r.prepareNewValue(e))!==Ot.UNCHANGED){var i=se(this),o=i?{type:"update",object:this.proxy||n,oldValue:r.value,name:t,newValue:e}:null;0,r.setNewValue(e),i&&ue(this,o)}}},t.prototype.has=function(t){var e=this.pendingKeys||(this.pendingKeys=new Map),n=e.get(t);if(n)return n.get();var r=!!this.values.get(t);return n=new ot(r,V,this.name+"."+t.toString()+"?",!1),e.set(t,n),n.get()},t.prototype.addObservableProp=function(t,e,n){void 0===n&&(n=this.defaultEnhancer);var r=this.target;if(ie(this)){var i=ae(this,{object:this.proxy||r,name:t,type:"add",newValue:e});if(!i)return;e=i.newValue}var o=new ot(e,n,this.name+"."+t,!1);this.values.set(t,o),e=o.value,Object.defineProperty(r,t,function(t){return _e[t]||(_e[t]={configurable:!0,enumerable:!0,get:function(){return this[x].read(t)},set:function(e){this[x].write(t,e)}})}(t)),this.notifyPropertyAddition(t,e)},t.prototype.addComputedProp=function(t,e,n){var r,i,o,a=this.target;n.name=n.name||this.name+"."+e,this.values.set(e,new at(n)),(t===a||(r=t,i=e,!(o=Object.getOwnPropertyDescriptor(r,i))||!1!==o.configurable&&!1!==o.writable))&&Object.defineProperty(t,e,function(t){return Ce[t]||(Ce[t]={configurable:!1,enumerable:!1,get:function(){return Te(this).read(t)},set:function(e){Te(this).write(t,e)}})}(e))},t.prototype.remove=function(t){if(this.values.has(t)){var e=this.target;if(ie(this))if(!(a=ae(this,{object:this.proxy||e,name:t,type:"remove"})))return;try{Ct();var n=se(this),r=this.values.get(t),i=r&&r.get();if(r&&r.set(void 0),this.keysAtom.reportChanged(),this.values.delete(t),this.pendingKeys){var o=this.pendingKeys.get(t);o&&o.set(!1)}delete this.target[t];var a=n?{type:"remove",object:this.proxy||e,oldValue:i,name:t}:null;0,n&&ue(this,a)}finally{Tt()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return ce(this,t)},t.prototype.intercept=function(t){return oe(this,t)},t.prototype.notifyPropertyAddition=function(t,e){var n=se(this),r=n?{type:"add",object:this.proxy||this.target,name:t,newValue:e}:null;if(n&&ue(this,r),this.pendingKeys){var i=this.pendingKeys.get(t);i&&i.set(!0)}this.keysAtom.reportChanged()},t.prototype.getKeys=function(){var t,e;this.keysAtom.reportObserved();var n=[];try{for(var r=a(this.values),i=r.next();!i.done;i=r.next()){var o=s(i.value,2),c=o[0];o[1]instanceof ot&&n.push(c)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t}();function Se(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n=N),Object.prototype.hasOwnProperty.call(t,x))return t[x];y(t)||(e=(t.constructor.name||"ObservableObject")+"@"+h()),e||(e="ObservableObject@"+h());var r=new Ee(t,new Map,e,n);return b(t,x,r),r}var _e=Object.create(null),Ce=Object.create(null);function Te(t){var e=t[x];return e||(P(t),t[x])}var De=v("ObservableObjectAdministration",Ee);function ke(t){return!!m(t)&&(P(t),De(t[x]))}function Ae(t,e){if("object"==typeof t&&null!==t){if(ge(t))return void 0!==e&&f(!1),t[x].atom;if(xe(t))return t[x];if(we(t)){var n=t;return void 0===e?n._keysAtom:((r=n._data.get(e)||n._hasMap.get(e))||f(!1),r)}var r;if(P(t),e&&!t[x]&&t[e],ke(t))return e?((r=t[x].values.get(e))||f(!1),r):f(!1);if(S(t)||st(t)||It(t))return t}else if("function"==typeof t&&It(t[x]))return t[x];return f(!1)}function Pe(t,e){return t||f("Expecting some object"),void 0!==e?Pe(Ae(t,e)):S(t)||st(t)||It(t)?t:we(t)||xe(t)?t:(P(t),t[x]?t[x]:void f(!1))}var Me=Object.prototype.toString;function Ne(t,e){return Ve(t,e)}function Ve(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&function(t,e,n,r){t=Ie(t),e=Ie(e);var i=Me.call(t);if(i!==Me.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e)}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!("function"==typeof a&&a instanceof a&&"function"==typeof s&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];var c=(n=n||[]).length;for(;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),o){if((c=t.length)!==e.length)return!1;for(;c--;)if(!Ve(t[c],e[c],n,r))return!1}else{var u=Object.keys(t),l=void 0;if(c=u.length,Object.keys(e).length!==c)return!1;for(;c--;)if(l=u[c],!Re(e,l)||!Ve(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0}(t,e,n,r)}function Ie(t){return ge(t)?t.slice():w(t)||we(t)?Array.from(t.entries()):O(t)||xe(t)?Array.from(t.entries()):t}function Re(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $e(t){return t[Symbol.iterator]=Fe,t}function Fe(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:function(t,e){return(void 0!==e?Ae(t,e):ke(t)||we(t)||xe(t)?Pe(t):Ae(t)).name}},$mobx:x})}).call(this,n(71),n(72))},function(t,e,n){"use strict";(function(t){n.d(e,"i",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return a}),n.d(e,"f",function(){return c}),n.d(e,"a",function(){return u}),n.d(e,"j",function(){return l}),n.d(e,"h",function(){return h}),n.d(e,"l",function(){return f}),n.d(e,"c",function(){return p}),n.d(e,"b",function(){return d}),n.d(e,"k",function(){return g}),n.d(e,"m",function(){return m}),n.d(e,"g",function(){return y});n(13);var r=0;function i(t,e,n=null){return Object.keys(t).reduce(function(r,i){return r[i]=e.call(n,t[i],i),r},{})}function o(t){return s(t.length,[],t)}function a(t,e){return s(t,[],e)}function s(t,e,n){return function(...r){const i=e.concat(r);return i.length>=t?n.apply(this,i.slice(0,t)):s(t,i,n)}}function c(t){const e=[];return t.forEach(t=>{e.push.apply(e,t)}),e}function u(t){return Object.keys(t).map(function(e){return[e,t[e]]})}function l(t){return t.reduce(function(t,e){return t[e[0]]=e[1],t},{})}function h(t,e){return t.map(t=>[e(t),t]).reduce((t,[e,n])=>(t[e]||(t[e]=[]),t[e].push(n),t),{})}function f(t,e){for(var n=[],r=[],i=0;i<e.length;++i)t(e[i])?n.push(e[i]):r.push(e[i]);return[n,r]}function p(t){return JSON.parse(JSON.stringify(t))}function d(t,e){for(var n=0;n<e.length;n++)for(var r=t.length-1;0<=r;r--)t[r].toString()===e[n].toString()&&t.splice(r,1);return t}function g(t){for(var e in t)return!1;return!0}function m(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function y(){return+new Date+"-"+r++}}).call(this,n(76)(t))},function(t,e){t.exports="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")()},function(t,e){t.exports=require("react-native-navigation")},function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r extends Error{constructor(t){super(t),Object.setPrototypeOf(this,r.prototype)}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var a,s,c,u=r(e),l=r(n);if(u&&l){if((s=e.length)!=n.length)return!1;for(a=s;0!=a--;)if(!t(e[a],n[a]))return!1;return!0}if(u!=l)return!1;var h=e instanceof Date,f=n instanceof Date;if(h!=f)return!1;if(h&&f)return e.getTime()==n.getTime();var p=e instanceof RegExp,d=n instanceof RegExp;if(p!=d)return!1;if(p&&d)return e.toString()==n.toString();var g=i(e);if((s=g.length)!==i(n).length)return!1;for(a=s;0!=a--;)if(!o.call(n,g[a]))return!1;for(a=s;0!=a--;)if(!t(e[c=g[a]],n[c]))return!1;return!0}return e!=e&&n!=n}},function(t,e,n){t.exports=!n(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(29),i=n(26);t.exports=n(10)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(6);class i extends r.a{constructor(t){super(t),Object.setPrototypeOf(this,i.prototype)}}},,function(t,e,n){var r=n(40),i=n(16);t.exports=function(t){return r(i(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(7);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(4),i=n(12);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(4),i=n(18),o=r["__core-js_shared__"]||i("__core-js_shared__",{});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.0.1",mode:n(44)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=require("react-native-tab-view")},,,function(t,e,n){var r=n(4),i=n(25).f,o=n(12),a=n(43),s=n(18),c=n(49),u=n(57);t.exports=function(t,e){var n,l,h,f,p,d=t.target,g=t.global,m=t.stat;if(n=g?r:m?r[d]||s(d,{}):(r[d]||{}).prototype)for(l in e){if(f=e[l],h=t.noTargetGet?(p=i(n,l))&&p.value:n[l],!u(g?l:d+(m?".":"#")+l,t.forced)&&void 0!==h){if(typeof f==typeof h)continue;c(f,h)}(t.sham||h&&h.sham)&&o(f,"sham",!0),a(n,l,f,t)}}},function(t,e,n){var r=n(10),i=n(39),o=n(26),a=n(15),s=n(27),c=n(8),u=n(28),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(c(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(7);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=!n(10)&&!n(11)(function(){return 7!=Object.defineProperty(n(42)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(10),i=n(28),o=n(17),a=n(27),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=n(19)("native-function-to-string",Function.toString)},function(t,e){t.exports={}},function(t,e,n){var r=n(20),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){"use strict";var r=n(73),i=n(74),o=n(75);function a(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function s(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function c(t,e){var n=function(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return function(t,n,r){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e=i({arrayFormat:"none"},e)),r=Object.create(null);return"string"!=typeof t?r:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),i=e.shift(),a=e.length>0?e.join("="):void 0;a=void 0===a?null:o(a),n(o(i),a,r)}),Object.keys(r).sort().reduce(function(t,e){var n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(n):t[e]=n,t},Object.create(null))):r}e.extract=s,e.parse=c,e.stringify=function(t,e){!1===(e=i({encode:!0,strict:!0,arrayFormat:"none"},e)).sort&&(e.sort=function(){});var n=function(t){switch(t.arrayFormat){case"index":return function(e,n,r){return null===n?[a(e,t),"[",r,"]"].join(""):[a(e,t),"[",a(r,t),"]=",a(n,t)].join("")};case"bracket":return function(e,n){return null===n?a(e,t):[a(e,t),"[]=",a(n,t)].join("")};default:return function(e,n){return null===n?a(e,t):[a(e,t),"=",a(n,t)].join("")}}}(e);return t?Object.keys(t).sort(e.sort).map(function(r){var i=t[r];if(void 0===i)return"";if(null===i)return a(r,e);if(Array.isArray(i)){var o=[];return i.slice().forEach(function(t){void 0!==t&&o.push(n(r,t,o.length))}),o.join("&")}return a(r,e)+"="+a(i,e)}).filter(function(t){return t.length>0}).join("&"):""},e.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:c(s(t),e)}}},function(t,e){t.exports=require("react-native-vector-icons")},function(t,e){t.exports=require("react-native-sqlite-storage")},function(t,e,n){t.exports=n(37)},function(t,e,n){n(38),t.exports=n(60).Object.setPrototypeOf},function(t,e,n){n(24)({target:"Object",stat:!0},{setPrototypeOf:n(58)})},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(11),i=n(41),o="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(7),i=n(4).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(4),i=n(12),o=n(8),a=n(18),s=n(30),c=n(45),u=c.get,l=c.enforce,h=String(s).split("toString");n(19)("inspectSource",function(t){return s.call(t)}),(t.exports=function(t,e,n,s){var c=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),l(n).source=h.join("string"==typeof e?e:"")),t!==r?(c?!f&&t[e]&&(u=!0):delete t[e],u?t[e]=n:i(t,e,n)):u?t[e]=n:a(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&u(this).source||s.call(this)})},function(t,e){t.exports=!1},function(t,e,n){var r,i,o,a=n(46),s=n(7),c=n(12),u=n(8),l=n(47),h=n(31),f=n(4).WeakMap;if(a){var p=new f,d=p.get,g=p.has,m=p.set;r=function(t,e){return m.call(p,t,e),e},i=function(t){return d.call(p,t)||{}},o=function(t){return g.call(p,t)}}else{var y=l("state");h[y]=!0,r=function(t,e){return c(t,y,e),e},i=function(t){return u(t,y)?t[y]:{}},o=function(t){return u(t,y)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!s(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(30),i=n(4).WeakMap;t.exports="function"==typeof i&&/native code/.test(r.call(i))},function(t,e,n){var r=n(19)("keys"),i=n(48);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(8),i=n(50),o=n(25),a=n(29);t.exports=function(t,e){for(var n=i(e),s=a.f,c=o.f,u=0;u<n.length;u++){var l=n[u];r(t,l)||s(t,l,c(e,l))}}},function(t,e,n){var r=n(51),i=n(56),o=n(17),a=n(4).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(52),i=n(55).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(8),i=n(15),o=n(53)(!1),a=n(31);t.exports=function(t,e){var n,s=i(t),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~o(u,n)||u.push(n));return u}},function(t,e,n){var r=n(15),i=n(32),o=n(54);t.exports=function(t){return function(e,n,a){var s,c=r(e),u=i(c.length),l=o(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(20),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(11),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==u||n!=c&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(59);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n,i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},function(t,e,n){var r=n(7),i=n(17);t.exports=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}},function(t,e,n){t.exports=n(4)},function(t,e,n){t.exports=n(62)},function(t,e,n){n(63),t.exports=n(68)("String","padEnd")},function(t,e,n){"use strict";var r=n(64),i=n(66);n(24)({target:"String",proto:!0,forced:i},{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){var r=n(32),i=n(65),o=n(16);t.exports=function(t,e,n,a){var s,c,u=String(o(t)),l=u.length,h=void 0===n?" ":String(n),f=r(e);return f<=l||""==h?u:(s=f-l,(c=i.call(h,Math.ceil(s/h.length))).length>s&&(c=c.slice(0,s)),a?c+u:u+c)}},function(t,e,n){"use strict";var r=n(20),i=n(16);t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){var r=n(67);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},function(t,e,n){var r=n(4).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var r=n(4),i=n(69),o=Function.call;t.exports=function(t,e,n){return i(o,r[t].prototype[e],n)}},function(t,e,n){var r=n(70);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,s=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))i.call(n,u)&&(s[u]=n[u]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},function(t,e,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function o(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],o(n),o(r))}function a(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(r),n=1;n<e.length;n++)e=(t=o(e,n).join("")).match(r);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"","%FF%FE":""},n=i.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=a(n[0]);r!==n[0]&&(e[n[0]]=r)}n=i.exec(t)}e["%C2"]="";for(var o=Object.keys(e),s=0;s<o.length;s++){var c=o[s];t=t.replace(new RegExp(c,"g"),e[c])}return t}(t)}}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";n.r(e);n(36),n(61);var r=n(1),i=n(2),o=n(0);class a extends Error{constructor(t="Unexpected error occurred, please contact your system administrator."){super(t),Object.setPrototypeOf(this,a.prototype)}}function s(t){if(null==t)throw new Error("Did not expect an argument to be undefined");return t}function c(){throw new a}function u(t){return t.displayName||t.name||"<component>"}function l(t){return null!=t&&"object"==typeof t&&t.constructor==={}.constructor}function h(t){const e=[];return t.forEach(t=>{-1===e.indexOf(t)&&e.push(t)}),e}function f(...t){return t}function p(t,e){const n={};return Object.keys(t).forEach(r=>n[r]=e(t[r])),n}function d(t){return[].concat(...t)}function g(t,e){return class extends e{componentDidUpdate(n,r,i){if(this.props[t]!==n[t])throw new a(`Parent of component ${u(e)} did not correctly assign keys.`);super.componentDidUpdate&&super.componentDidUpdate(n,r,i)}}}Symbol("isProperty");const m=Symbol("compute");function y(t){return e=>({[m]:(n,r)=>()=>t(e,n,r)})}function b(t){return e=>({[m]:(n,r)=>t(e,n,r)})}const{Provider:v,Consumer:w}=Object(o.createContext)(void 0),O=t=>Object(o.createElement)(v,{value:s(t.store)},t.children);function j(t){const e=g("$store",t);return t=>Object(o.createElement)(w,null,n=>Object(o.createElement)(e,Object.assign({},t,{$store:s(n)}),t.children))}const x=new Map;function E(t){const e=x.get(t);if(void 0!==e)return e;const n=u(t),r=j(g("$widgetId",class extends o.Component{constructor(t){super(t),this.reactionDisposers=[],this.childProps={};const e=(n,r)=>{const a=n[r];if(function(t){return"object"==typeof t&&null!=t&&t[m]}(a)){let e=!0;this.reactionDisposers.push(Object(i.i)(function(t,e,n){return t[m](e,n)}(a,t.$store,t.$widgetId),t=>{n[r]=t,e?e=!1:this.forceUpdate()},{fireImmediately:!0})),e=!1}else Array.isArray(a)?a.forEach((t,n)=>e(a,n)):!Object(o.isValidElement)(a)&&l(a)&&Object.keys(a).forEach(t=>e(a,t))};Object.keys(t).filter(t=>!t.startsWith("$")).forEach(n=>{this.childProps[n]=t[n],e(this.childProps,n)})}shouldComponentUpdate(t){if(t.$widgetId!==this.props.$widgetId)throw new a(`Parent of widget '${this.props.$widgetId}' (${n}) did not correctly assign keys.`);return!1}componentWillUnmount(){this.reactionDisposers.forEach(t=>t())}render(){return Object(o.createElement)(t,this.childProps,this.childProps.children)}}));return r.displayName=`pluginWidget(${n})`,x.set(t,r),r}function S(t){const e={};return Object.keys(t).forEach(n=>{e["$"+n]=E(t[n])}),e}var _=n(5);const C=100,T=t=>"ios"===r.Platform.OS?Object(o.createElement)(D,Object.assign({},t)):t.children;class D extends o.Component{constructor(t){super(t),this.frame={x:0,y:0,width:0,height:0},this.onKeyboardWillShowHandler=this.onKeyboardWillShow.bind(this),this.onKeyboardWillHideHandler=this.onKeyboardWillHide.bind(this),this.onLayoutHandler=this.onLayout.bind(this),this.state={y:new r.Animated.Value(0)},r.Keyboard.addListener("keyboardWillShow",this.onKeyboardWillShowHandler),r.Keyboard.addListener("keyboardWillHide",this.onKeyboardWillHideHandler)}async onLayout(t){this.frame=t.nativeEvent.layout}componentWillUnmount(){r.Keyboard.removeListener("keyboardWillShow",this.onKeyboardWillShowHandler),r.Keyboard.removeListener("keyboardWillHide",this.onKeyboardWillHideHandler)}render(){return Object(o.createElement)(r.Animated.View,{onLayout:this.onLayoutHandler,style:{flex:1,bottom:this.state.y}},this.props.children)}async onKeyboardWillShow(t){const e=r.TextInput.State.currentlyFocusedField();if(!e)return;const n=t.endCoordinates,i=await this.measureTarget(e),o=i.visible?i.height:i.height-(i.pageY+i.height-(this.frame.y+this.frame.height));n.screenY<=i.y+i.height&&r.Animated.timing(this.state.y,{toValue:i.y+o-n.screenY,duration:t.duration||C}).start()}onKeyboardWillHide(t){r.Animated.timing(this.state.y,{toValue:0,duration:t&&t.duration||C}).start()}measureTarget(t){return new Promise(e=>{r.UIManager.measure(t,(n,i,o,a,s,c)=>r.UIManager.measureInWindow(t,(t,n,r,i)=>e({x:t,y:n,pageX:s,pageY:c,width:r,height:i,visible:this.frame.y+this.frame.height>=c+i})))})}}var k=20,A=1,P=1e6,M=-7,N=21,V="[big.js] ",I=V+"Invalid ",R=I+"decimal places",$=I+"rounding mode",F={},B=void 0,G=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function L(t,e,n,r){var i=t.c,o=t.e+e+1;if(o<i.length){if(1===n)r=i[o]>=5;else if(2===n)r=i[o]>5||5==i[o]&&(r||o<0||i[o+1]!==B||1&i[o-1]);else if(3===n)r=r||!!i[0];else if(r=!1,0!==n)throw Error($);if(o<1)i.length=1,r?(t.e=-e,i[0]=1):i[0]=t.e=0;else{if(i.length=o--,r)for(;++i[o]>9;)i[o]=0,o--||(++t.e,i.unshift(1));for(o=i.length;!i[--o];)i.pop()}}else if(n<0||n>3||n!==~~n)throw Error($);return t}function U(t,e,n,r){var i,o,a=t.constructor,s=!t.c[0];if(n!==B){if(n!==~~n||n<(3==e)||n>P)throw Error(3==e?I+"precision":R);for(n=r-(t=new a(t)).e,t.c.length>++r&&L(t,n,a.RM),2==e&&(r=t.e+n+1);t.c.length<r;)t.c.push(0)}if(i=t.e,n=(o=t.c.join("")).length,2!=e&&(1==e||3==e&&r<=i||i<=a.NE||i>=a.PE))o=o.charAt(0)+(n>1?"."+o.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)o="0"+o;o="0."+o}else if(i>0)if(++i>n)for(i-=n;i--;)o+="0";else i<n&&(o=o.slice(0,i)+"."+o.slice(i));else n>1&&(o=o.charAt(0)+"."+o.slice(1));return t.s<0&&(!s||4==e)?"-"+o:o}F.abs=function(){var t=new this.constructor(this);return t.s=1,t},F.cmp=function(t){var e,n=this,r=n.c,i=(t=new n.constructor(t)).c,o=n.s,a=t.s,s=n.e,c=t.e;if(!r[0]||!i[0])return r[0]?o:i[0]?-a:0;if(o!=a)return o;if(e=o<0,s!=c)return s>c^e?1:-1;for(a=(s=r.length)<(c=i.length)?s:c,o=-1;++o<a;)if(r[o]!=i[o])return r[o]>i[o]^e?1:-1;return s==c?0:s>c^e?1:-1},F.div=function(t){var e=this,n=e.constructor,r=e.c,i=(t=new n(t)).c,o=e.s==t.s?1:-1,a=n.DP;if(a!==~~a||a<0||a>P)throw Error(R);if(!i[0])throw Error("[big.js] Division by zero");if(!r[0])return new n(0*o);var s,c,u,l,h,f=i.slice(),p=s=i.length,d=r.length,g=r.slice(0,s),m=g.length,y=t,b=y.c=[],v=0,w=a+(y.e=e.e-t.e)+1;for(y.s=o,o=w<0?0:w,f.unshift(0);m++<s;)g.push(0);do{for(u=0;u<10;u++){if(s!=(m=g.length))l=s>m?1:-1;else for(h=-1,l=0;++h<s;)if(i[h]!=g[h]){l=i[h]>g[h]?1:-1;break}if(!(l<0))break;for(c=m==s?i:f;m;){if(g[--m]<c[m]){for(h=m;h&&!g[--h];)g[h]=9;--g[h],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}b[v++]=l?u:++u,g[0]&&l?g[m]=r[p]||0:g=[r[p]]}while((p++<d||g[0]!==B)&&o--);return b[0]||1==v||(b.shift(),y.e--),v>w&&L(y,a,n.RM,g[0]!==B),y},F.eq=function(t){return!this.cmp(t)},F.gt=function(t){return this.cmp(t)>0},F.gte=function(t){return this.cmp(t)>-1},F.lt=function(t){return this.cmp(t)<0},F.lte=function(t){return this.cmp(t)<1},F.minus=F.sub=function(t){var e,n,r,i,o=this,a=o.constructor,s=o.s,c=(t=new a(t)).s;if(s!=c)return t.s=-c,o.plus(t);var u=o.c.slice(),l=o.e,h=t.c,f=t.e;if(!u[0]||!h[0])return h[0]?(t.s=-c,t):new a(u[0]?o:0);if(s=l-f){for((i=s<0)?(s=-s,r=u):(f=l,r=h),r.reverse(),c=s;c--;)r.push(0);r.reverse()}else for(n=((i=u.length<h.length)?u:h).length,s=c=0;c<n;c++)if(u[c]!=h[c]){i=u[c]<h[c];break}if(i&&(r=u,u=h,h=r,t.s=-t.s),(c=(n=h.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;n>s;){if(u[--n]<h[n]){for(e=n;e&&!u[--e];)u[e]=9;--u[e],u[n]+=10}u[n]-=h[n]}for(;0===u[--c];)u.pop();for(;0===u[0];)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t},F.mod=function(t){var e,n=this,r=n.constructor,i=n.s,o=(t=new r(t)).s;if(!t.c[0])throw Error("[big.js] Division by zero");return n.s=t.s=1,e=1==t.cmp(n),n.s=i,t.s=o,e?new r(n):(i=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=i,r.RM=o,this.minus(n.times(t)))},F.plus=F.add=function(t){var e,n=this,r=n.constructor,i=n.s,o=(t=new r(t)).s;if(i!=o)return t.s=-o,n.minus(t);var a=n.e,s=n.c,c=t.e,u=t.c;if(!s[0]||!u[0])return u[0]?t:new r(s[0]?n:0*i);if(s=s.slice(),i=a-c){for(i>0?(c=a,e=u):(i=-i,e=s),e.reverse();i--;)e.push(0);e.reverse()}for(s.length-u.length<0&&(e=u,u=s,s=e),i=u.length,o=0;i;s[i]%=10)o=(s[--i]=s[i]+u[i]+o)/10|0;for(o&&(s.unshift(o),++c),i=s.length;0===s[--i];)s.pop();return t.c=s,t.e=c,t},F.pow=function(t){var e=this,n=new e.constructor(1),r=n,i=t<0;if(t!==~~t||t<-1e6||t>1e6)throw Error(I+"exponent");for(i&&(t=-t);1&t&&(r=r.times(e)),t>>=1;)e=e.times(e);return i?n.div(r):r},F.round=function(t,e){var n=this.constructor;if(t===B)t=0;else if(t!==~~t||t<-P||t>P)throw Error(R);return L(new n(this),t,e===B?n.RM:e)},F.sqrt=function(){var t,e,n,r=this,i=r.constructor,o=r.s,a=r.e,s=new i(.5);if(!r.c[0])return new i(r);if(o<0)throw Error(V+"No square root");0===(o=Math.sqrt(r+""))||o===1/0?((e=r.c.join("")).length+a&1||(e+="0"),a=((a+1)/2|0)-(a<0||1&a),t=new i(((o=Math.sqrt(e))==1/0?"1e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+a)):t=new i(o),a=t.e+(i.DP+=4);do{n=t,t=s.times(n.plus(r.div(n)))}while(n.c.slice(0,a).join("")!==t.c.slice(0,a).join(""));return L(t,i.DP-=4,i.RM)},F.times=F.mul=function(t){var e,n=this,r=n.constructor,i=n.c,o=(t=new r(t)).c,a=i.length,s=o.length,c=n.e,u=t.e;if(t.s=n.s==t.s?1:-1,!i[0]||!o[0])return new r(0*t.s);for(t.e=c+u,a<s&&(e=i,i=o,o=e,u=a,a=s,s=u),e=new Array(u=a+s);u--;)e[u]=0;for(c=s;c--;){for(s=0,u=a+c;u>c;)s=e[u]+o[c]*i[u-c-1]+s,e[u--]=s%10,s=s/10|0;e[u]=(e[u]+s)%10}for(s?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},F.toExponential=function(t){return U(this,1,t,t)},F.toFixed=function(t){return U(this,2,t,this.e+t)},F.toPrecision=function(t){return U(this,3,t,t-1)},F.toString=function(){return U(this)},F.valueOf=F.toJSON=function(){return U(this,4)};var W=function t(){function e(n){var r=this;if(!(r instanceof e))return n===B?t():new e(n);n instanceof e?(r.s=n.s,r.e=n.e,r.c=n.c.slice()):function(t,e){var n,r,i;if(0===e&&1/e<0)e="-0";else if(!G.test(e+=""))throw Error(I+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),i=e.length,r=0;r<i&&"0"==e.charAt(r);)++r;if(r==i)t.c=[t.e=0];else{for(;i>0&&"0"==e.charAt(--i););for(t.e=n-r-1,t.c=[],n=0;r<=i;)t.c[n++]=+e.charAt(r++)}}(r,n),r.constructor=e}return e.prototype=F,e.DP=k,e.RM=A,e.NE=M,e.PE=N,e.version="5.2.2",e}(),q=W,H=new q("1e20"),z=new q(2).pow(31).times(-1),Y=new q(2).pow(31).minus(1),J=new q(2).pow(63).times(-1),K=new q(2).pow(63).minus(1),X=new q(2).pow(53);function Q(t,e,n){return t.gte(e)&&t.lte(n)}const Z={OK:0,NOT_INTEGER:1,RANGE_INTEGER:2,RANGE_LONG:3,RANGE_DECIMAL:4,RANGE_NUMBER:5};function tt(t,e){if(/^(Integer|Long|Decimal|Float|Currency)$/.test(e)){if(""===t)return Z.OK;if(t instanceof q||(t=new q(t)),("Integer"===e||"Long"===e)&&function(t){return!t.mod(1).eq(0)}(t))return Z.NOT_INTEGER;if("Integer"===e&&!Q(t,z,Y))return Z.RANGE_INTEGER;if("Long"===e&&!Q(t,J,K))return Z.RANGE_LONG;if("Decimal"===e&&t.abs().gte(H))return Z.RANGE_DECIMAL;if("Decimal"===e&&!t.mod(1e-8).eq(0))return Z.RANGE_DECIMAL;if(/^(Float|Currency)$/.test(e)&&t.abs().gt(X))return Z.RANGE_NUMBER}return Z.OK}var et,nt,rt,it,ot;!function(t){t.Month="months",t.DayOfWeek="days"}(et||(et={})),function(t){t.Long="wide",t.Short="abbr",t.Narrow="narrow"}(nt||(nt={})),function(t){t.Date="date",t.Time="time",t.DateTime="datetime"}(rt||(rt={})),function(t){t.Short="short",t.Medium="medium",t.Long="long",t.Full="full"}(it||(it={})),function(t){t.Gregorian="gregorian",t.ThaiBuddhist="thai-buddhist"}(ot||(ot={}));class at{constructor(t,e,n,r){this.year=t,this.monthOfYear=e,this.dayOfMonth=n,this.chronology=r}isSameDate(t){return this.chronology===t.chronology&&this.getYear()===t.getYear()&&this.getMonthOfYear()===t.getMonthOfYear()&&this.getDayOfMonth()===t.getDayOfMonth()}getChronology(){return this.chronology}getYear(){return this.year}getMonthOfYear(){return this.monthOfYear}getDayOfMonth(){return this.dayOfMonth}getDayOfWeek(){return this.chronology.getDayOfWeek(this)}lengthOfYearInMonths(){return this.chronology.lengthOfYearInMonths(this.year)}plusYears(t){return this.chronology.plusYears(this,t)}plusMonths(t){return this.chronology.plusMonths(this,t)}plusDays(t){return this.chronology.plusDays(this,t)}minusYears(t){return this.chronology.minusYears(this,t)}minusMonths(t){return this.chronology.minusMonths(this,t)}minusDays(t){return this.chronology.minusDays(this,t)}withDayOfMonth(t){return this.chronology.withDayOfMonth(this,t)}withMonthOfYear(t){return this.chronology.withMonthOfYear(this,t)}withYear(t){return this.chronology.withYear(this,t)}toJsDate(){return this.chronology.toJsDate(this)}toString(){const t=st(this.monthOfYear,2),e=st(this.dayOfMonth,2),n=ct[this.getDayOfWeek()],r=this.getChronology().getCalendarSystem();return`${this.year}-${t}-${e} ${n} (${r})`}}function st(t,e){const n=t.toString();return new Array(e-n.length+1).join("0")+n}const ct=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];class ut{constructor(t=0,e=0,n=0,r=0){this.hour=t,this.minute=e,this.second=n,this.millisecond=r}getHour(){return this.hour}getMinute(){return this.minute}getSecond(){return this.second}getMillisecond(){return this.millisecond}isSameTime(t){return this.hour===t.hour&&this.minute===t.minute&&this.second===t.second&&this.millisecond===t.millisecond}toString(){return lt(this.hour,2)+":"+lt(this.minute,2)+":"+lt(this.second,2)+"."+lt(this.millisecond,3)}}function lt(t,e){const n=t.toString();return new Array(e-n.length+1).join("0")+n}class ht{constructor(t){this.calendarSystem=t}getCalendarSystem(){return this.calendarSystem}convertInput(t){if(t.getChronology()!==this)throw new Error(`Incompatible chronology: LocalDate should be ${this.getCalendarSystem()} but was ${t.getChronology().getCalendarSystem()}`);return{localDate:t instanceof at?t:t.getDate(),localTime:t instanceof at?new ut:t.getTime()}}static getInstance(){return this.instance}}function ft(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fpAk2"),console.warn((new Error).stack)),new Date(NaN))}function pt(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t),n=e.getFullYear(),r=e.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function dt(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function gt(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=ft(t),r=dt(e),i=n.getMonth()+r,o=new Date(0);o.setFullYear(n.getFullYear(),i,1),o.setHours(0,0,0,0);var a=pt(o);return n.setMonth(i,Math.min(a,n.getDate())),n}function mt(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return gt(t,12*dt(e))}function yt(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=ft(t),r=dt(e);return n.setDate(n.getDate()+r),n}class bt{constructor(t,e=new ut){this.date=t,this.time=e}getDate(){return this.date}getTime(){return this.time}withDate(t){return new bt(t,this.time)}withTime(t){return new bt(this.date,t)}toJsDate(){return this.date.getChronology().toJsDate(this)}isSameDateTime(t){return this.date.isSameDate(t.date)&&this.time.isSameTime(t.time)}getChronology(){return this.date.getChronology()}toString(){return this.date.toString()+" "+this.time.toString()}}class vt extends ht{constructor(t=ot.Gregorian,e=0){super(t),this.yearOffset=e}getDayOfWeek(t){return function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return ft(t).getDay()}(this.toJsDate(t))}lengthOfMonthInDays(t,e){return pt(new Date(t,e-1,1))}lengthOfYearInMonths(t){return 12}plusYears(t,e){return wt(this.fromJsDate(mt(this.toJsDate(t),e)),t)}minusYears(t,e){return wt(this.fromJsDate(function(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return mt(t,-dt(e))}(this.toJsDate(t),e)),t)}plusMonths(t,e){return wt(this.fromJsDate(gt(this.toJsDate(t),e)),t)}minusMonths(t,e){return wt(this.fromJsDate(function(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return gt(t,-dt(e))}(this.toJsDate(t),e)),t)}plusDays(t,e){return wt(this.fromJsDate(yt(this.toJsDate(t),e)),t)}minusDays(t,e){return wt(this.fromJsDate(function(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return yt(t,-dt(e))}(this.toJsDate(t),e)),t)}withDayOfMonth(t,e){return wt(this.fromJsDate(function(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=ft(t),r=dt(e);return n.setDate(r),n}(this.toJsDate(t),e)),t)}withMonthOfYear(t,e){return wt(this.fromJsDate(function(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=ft(t),r=dt(e),i=n.getFullYear(),o=n.getDate(),a=new Date(0);a.setFullYear(i,r,15),a.setHours(0,0,0,0);var s=pt(a);return n.setMonth(r,Math.min(o,s)),n}(this.toJsDate(t),e-1)),t)}withYear(t,e){return wt(this.fromJsDate(function(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=ft(t),r=dt(e);return isNaN(n)?new Date(NaN):(n.setFullYear(r),n)}(this.toJsDate(t),e)),t)}fromJsDate(t){const e=new at(t.getFullYear()+this.yearOffset,t.getMonth()+1,t.getDate(),this),n=new ut(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());return new bt(e,n)}toJsDate(t){const{localDate:e,localTime:n}=this.convertInput(t);return new Date(e.getYear()-this.yearOffset,e.getMonthOfYear()-1,e.getDayOfMonth(),n.getHour(),n.getMinute(),n.getSecond(),n.getMillisecond())}}function wt(t,e){return e instanceof at?t.getDate():t}vt.instance=new vt;class Ot extends vt{}Ot.instance=new Ot(ot.ThaiBuddhist,543);var jt=n(33);class xt extends Error{constructor(t){super(t),Object.setPrototypeOf(this,xt.prototype)}}var Et=n(13);class St extends Error{constructor(t,e){super(e),this.status=t,Object.setPrototypeOf(this,St.prototype)}}class _t extends St{constructor(t){super(t),Object.setPrototypeOf(this,_t.prototype)}}class Ct extends Error{constructor(t){super(),this.original=t,Object.setPrototypeOf(this,Ct.prototype)}}const Tt=[];function Dt(t){Tt.push(t)}function kt(t,e){return function t(n,r){if(n===Tt.length)return e(r);return Tt[n](r,e=>t(n+1,e))}(0,t)}async function At(t,e){const n={url:t,init:{method:"get",headers:new Headers,cache:"force-cache",credentials:"include"}},r=await kt(n,Mt);if(!r.ok)throw new St(r.status,r.statusText);switch(e){case"text":return r.text();case"json":return r.json();case"blob":return r.blob()}}async function Pt(t,e){const n={url:t,body:e,init:{method:"post",headers:new Headers(Object.assign({Accept:"application/json"},l(e)?{"Content-Type":"application/json"}:{})),redirect:"error",credentials:"include"}};return(await kt(n,Mt)).json()}async function Mt(t){if(t.init.body)throw new a;let e;t.init.body=l(t.body)?JSON.stringify(t.body):t.body;try{e=await window.fetch(t.url,t.init)}catch(t){throw new xt(t.message)}switch(e.status){case 200:return e;case 400:case 401:case 402:case 403:case 460:throw new _t(e.status);case 502:case 504:throw new St(e.status,e.statusText);case 551:throw new Ct(await e.json());case 560:const t=await Nt(e);throw t?new Et.a(t):new St(e.status);case 12029:throw new xt("No connection");default:throw new St(e.status,await Nt(e))}}async function Nt(t){const e=await t.json();return e&&"description"in e?e.description:void 0}function Vt(t){return Pt($t(),{action:"get_session_data",params:t})}function It(){return Pt($t(),{action:"keepalive",params:{}})}function Rt(t,e,n,r,i,o){const a=mx.remoteUrl+"file?"+Object(jt.stringify)(Object.assign({},n,{guid:t})),s=new FormData;return s.append("data",JSON.stringify({changes:i,objects:o})),e?s.append("blob",r,e):s.append("blob",r),Pt(a,s)}function $t(){return mx.remoteUrl+"xas/"}var Ft;!function(t){t[t.Sunday=0]="Sunday",t[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday"}(Ft||(Ft={}));const Bt={[Z.NOT_INTEGER]:"invalid_number",[Z.RANGE_INTEGER]:"range_integer",[Z.RANGE_LONG]:"range_long",[Z.RANGE_DECIMAL]:"range_decimal",[Z.RANGE_NUMBER]:"range_number"},Gt="[No translation]";function Lt(t,e,...n){if(!mx.session.isValid())return Gt;return(mx.session.getConfig("uiconfig.translations")[`${t}.${e}`]||Gt).replace(/\{(\d+)\}/g,(t,e)=>n.length>=e?n[e-1]:t)}class Ut extends Error{constructor(t=""){super("Not implemented"+(""!==t?": "+t:"")),Object.setPrototypeOf(this,Ut.prototype)}}var Wt=n(34);const qt=Object(Wt.createIconSet)({"glyphicon-asterisk":42,"glyphicon-plus":43,"glyphicon-euro":8364,"glyphicon-eur":8364,"glyphicon-minus":8722,"glyphicon-cloud":9729,"glyphicon-envelope":9993,"glyphicon-pencil":9999,"glyphicon-glass":57345,"glyphicon-music":57346,"glyphicon-search":57347,"glyphicon-heart":57349,"glyphicon-star":57350,"glyphicon-star-empty":57351,"glyphicon-user":57352,"glyphicon-film":57353,"glyphicon-th-large":57360,"glyphicon-th":57361,"glyphicon-th-list":57362,"glyphicon-ok":57363,"glyphicon-remove":57364,"glyphicon-zoom-in":57365,"glyphicon-zoom-out":57366,"glyphicon-off":57367,"glyphicon-signal":57368,"glyphicon-cog":57369,"glyphicon-trash":57376,"glyphicon-home":57377,"glyphicon-file":57378,"glyphicon-time":57379,"glyphicon-road":57380,"glyphicon-download-alt":57381,"glyphicon-download":57382,"glyphicon-upload":57383,"glyphicon-inbox":57384,"glyphicon-play-circle":57385,"glyphicon-repeat":57392,"glyphicon-refresh":57393,"glyphicon-list-alt":57394,"glyphicon-lock":57395,"glyphicon-flag":57396,"glyphicon-headphones":57397,"glyphicon-volume-off":57398,"glyphicon-volume-down":57399,"glyphicon-volume-up":57400,"glyphicon-qrcode":57401,"glyphicon-barcode":57408,"glyphicon-tag":57409,"glyphicon-tags":57410,"glyphicon-book":57411,"glyphicon-bookmark":57412,"glyphicon-print":57413,"glyphicon-camera":57414,"glyphicon-font":57415,"glyphicon-bold":57416,"glyphicon-italic":57417,"glyphicon-text-height":57424,"glyphicon-text-width":57425,"glyphicon-align-left":57426,"glyphicon-align-center":57427,"glyphicon-align-right":57428,"glyphicon-align-justify":57429,"glyphicon-list":57430,"glyphicon-indent-left":57431,"glyphicon-indent-right":57432,"glyphicon-facetime-video":57433,"glyphicon-picture":57440,"glyphicon-map-marker":57442,"glyphicon-adjust":57443,"glyphicon-tint":57444,"glyphicon-edit":57445,"glyphicon-share":57446,"glyphicon-check":57447,"glyphicon-move":57448,"glyphicon-step-backward":57449,"glyphicon-fast-backward":57456,"glyphicon-backward":57457,"glyphicon-play":57458,"glyphicon-pause":57459,"glyphicon-stop":57460,"glyphicon-forward":57461,"glyphicon-fast-forward":57462,"glyphicon-step-forward":57463,"glyphicon-eject":57464,"glyphicon-chevron-left":57465,"glyphicon-chevron-right":57472,"glyphicon-plus-sign":57473,"glyphicon-minus-sign":57474,"glyphicon-remove-sign":57475,"glyphicon-ok-sign":57476,"glyphicon-question-sign":57477,"glyphicon-info-sign":57478,"glyphicon-screenshot":57479,"glyphicon-remove-circle":57480,"glyphicon-ok-circle":57481,"glyphicon-ban-circle":57488,"glyphicon-arrow-left":57489,"glyphicon-arrow-right":57490,"glyphicon-arrow-up":57491,"glyphicon-arrow-down":57492,"glyphicon-share-alt":57493,"glyphicon-resize-full":57494,"glyphicon-resize-small":57495,"glyphicon-exclamation-sign":57601,"glyphicon-gift":57602,"glyphicon-leaf":57603,"glyphicon-fire":57604,"glyphicon-eye-open":57605,"glyphicon-eye-close":57606,"glyphicon-warning-sign":57607,"glyphicon-plane":57608,"glyphicon-calendar":57609,"glyphicon-random":57616,"glyphicon-comment":57617,"glyphicon-magnet":57618,"glyphicon-chevron-up":57619,"glyphicon-chevron-down":57620,"glyphicon-retweet":57621,"glyphicon-shopping-cart":57622,"glyphicon-folder-close":57623,"glyphicon-folder-open":57624,"glyphicon-resize-vertical":57625,"glyphicon-resize-horizontal":57632,"glyphicon-hdd":57633,"glyphicon-bullhorn":57634,"glyphicon-bell":57635,"glyphicon-certificate":57636,"glyphicon-thumbs-up":57637,"glyphicon-thumbs-down":57638,"glyphicon-hand-right":57639,"glyphicon-hand-left":57640,"glyphicon-hand-up":57641,"glyphicon-hand-down":57648,"glyphicon-circle-arrow-right":57649,"glyphicon-circle-arrow-left":57650,"glyphicon-circle-arrow-up":57651,"glyphicon-circle-arrow-down":57652,"glyphicon-globe":57653,"glyphicon-wrench":57654,"glyphicon-tasks":57655,"glyphicon-filter":57656,"glyphicon-briefcase":57657,"glyphicon-fullscreen":57664,"glyphicon-dashboard":57665,"glyphicon-paperclip":57666,"glyphicon-heart-empty":57667,"glyphicon-link":57668,"glyphicon-phone":57669,"glyphicon-pushpin":57670,"glyphicon-usd":57672,"glyphicon-gbp":57673,"glyphicon-sort":57680,"glyphicon-sort-by-alphabet":57681,"glyphicon-sort-by-alphabet-alt":57682,"glyphicon-sort-by-order":57683,"glyphicon-sort-by-order-alt":57684,"glyphicon-sort-by-attributes":57685,"glyphicon-sort-by-attributes-alt":57686,"glyphicon-unchecked":57687,"glyphicon-expand":57688,"glyphicon-collapse-down":57689,"glyphicon-collapse-up":57696,"glyphicon-log-in":57697,"glyphicon-flash":57698,"glyphicon-log-out":57699,"glyphicon-new-window":57700,"glyphicon-record":57701,"glyphicon-save":57702,"glyphicon-open":57703,"glyphicon-saved":57704,"glyphicon-import":57705,"glyphicon-export":57712,"glyphicon-send":57713,"glyphicon-floppy-disk":57714,"glyphicon-floppy-saved":57715,"glyphicon-floppy-remove":57716,"glyphicon-floppy-save":57717,"glyphicon-floppy-open":57718,"glyphicon-credit-card":57719,"glyphicon-transfer":57720,"glyphicon-cutlery":57721,"glyphicon-header":57728,"glyphicon-compressed":57729,"glyphicon-earphone":57730,"glyphicon-phone-alt":57731,"glyphicon-tower":57732,"glyphicon-stats":57733,"glyphicon-sd-video":57734,"glyphicon-hd-video":57735,"glyphicon-subtitles":57736,"glyphicon-sound-stereo":57737,"glyphicon-sound-dolby":57744,"glyphicon-sound-5-1":57745,"glyphicon-sound-6-1":57746,"glyphicon-sound-7-1":57747,"glyphicon-copyright-mark":57748,"glyphicon-registration-mark":57749,"glyphicon-cloud-download":57751,"glyphicon-cloud-upload":57752,"glyphicon-tree-conifer":57753,"glyphicon-tree-deciduous":57856,"glyphicon-cd":57857,"glyphicon-save-file":57858,"glyphicon-open-file":57859,"glyphicon-level-up":57860,"glyphicon-copy":57861,"glyphicon-paste":57862,"glyphicon-alert":57865,"glyphicon-equalizer":57872,"glyphicon-king":57873,"glyphicon-queen":57874,"glyphicon-pawn":57875,"glyphicon-bishop":57876,"glyphicon-knight":57877,"glyphicon-baby-formula":57878,"glyphicon-tent":9978,"glyphicon-blackboard":57880,"glyphicon-bed":57881,"glyphicon-apple":63743,"glyphicon-erase":57889,"glyphicon-hourglass":8987,"glyphicon-lamp":57891,"glyphicon-duplicate":57892,"glyphicon-piggy-bank":57893,"glyphicon-scissors":57894,"glyphicon-bitcoin":57895,"glyphicon-btc":57895,"glyphicon-xbt":57895,"glyphicon-yen":165,"glyphicon-jpy":165,"glyphicon-ruble":8381,"glyphicon-rub":8381,"glyphicon-scale":57904,"glyphicon-ice-lolly":57905,"glyphicon-ice-lolly-tasted":57906,"glyphicon-education":57907,"glyphicon-option-horizontal":57908,"glyphicon-option-vertical":57909,"glyphicon-menu-hamburger":57910,"glyphicon-modal-window":57911,"glyphicon-oil":57912,"glyphicon-grain":57913,"glyphicon-sunglasses":57920,"glyphicon-text-size":57921,"glyphicon-text-color":57922,"glyphicon-text-background":57923,"glyphicon-object-align-top":57924,"glyphicon-object-align-bottom":57925,"glyphicon-object-align-horizontal":57926,"glyphicon-object-align-left":57927,"glyphicon-object-align-vertical":57928,"glyphicon-object-align-right":57929,"glyphicon-triangle-right":57936,"glyphicon-triangle-left":57937,"glyphicon-triangle-bottom":57938,"glyphicon-triangle-top":57939,"glyphicon-console":57940,"glyphicon-superscript":57941,"glyphicon-subscript":57942,"glyphicon-menu-left":57943,"glyphicon-menu-right":57944,"glyphicon-menu-down":57945,"glyphicon-menu-up":57952},"GLYPHICONS Halflings","glyphicons-halflings-regular.ttf"),Ht=async t=>Promise.all(t.map(t=>(async t=>qt.getImageSource(t,20,"black"))(t))).then(e=>t.reduce(zt(e),{})),zt=t=>(e,n,r)=>(e[n]=t[r],e),Yt=Array(3).fill(null).map(()=>Math.floor(Math.random()*"abcdefghijklmnopqrst".length)).map(t=>"abcdefghijklmnopqrst"[t]).join("");let Jt=0;function Kt(t="id"){return`${t}_${Yt}_${Jt++}`}class Xt{constructor(t){this.key=t}get(){return new Promise((t,e)=>r.AsyncStorage.getItem(this.key,(n,r)=>{n?e(n):t(r)}))}set(t){return new Promise((e,n)=>r.AsyncStorage.setItem(this.key,t,t=>{t?n(t):e()}))}remove(){return new Promise((t,e)=>r.AsyncStorage.removeItem(this.key,n=>{n?e(n):t()}))}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Qt=function(t,e){return(Qt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Zt(t,e){function n(){this.constructor=t}Qt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function te(t){return"function"==typeof t}var ee=!1,ne={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;ee=t},get useDeprecatedSynchronousErrorHandling(){return ee}};function re(t){setTimeout(function(){throw t})}var ie={closed:!0,next:function(t){},error:function(t){if(ne.useDeprecatedSynchronousErrorHandling)throw t;re(t)},complete:function(){}},oe=Array.isArray||function(t){return t&&"number"==typeof t.length};function ae(t){return null!==t&&"object"==typeof t}function se(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}se.prototype=Object.create(Error.prototype);var ce=se,ue=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=r?r.length:0;n;)n.remove(this),n=++a<s&&r[a]||null;if(te(i))try{i.call(this)}catch(n){e=!0,t=n instanceof ce?le(n.errors):[n]}if(oe(o))for(a=-1,s=o.length;++a<s;){var c=o[a];if(ae(c))try{c.unsubscribe()}catch(n){e=!0,t=t||[],n instanceof ce?t=t.concat(le(n.errors)):t.push(n)}}if(e)throw new ce(t)}},t.prototype.add=function(e){var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){var i=this._subscriptions;i?i.push(n):this._subscriptions=[n]}return n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=((e=new t).closed=!0,e),t}();function le(t){return t.reduce(function(t,e){return t.concat(e instanceof ce?e.errors:e)},[])}var he="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),fe=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=ie;break;case 1:if(!n){o.destination=ie;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new pe(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new pe(o,n,r,i)}return o}return Zt(e,t),e.prototype[he]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(ue),pe=function(t){function e(e,n,r,i){var o,a=t.call(this)||this;a._parentSubscriber=e;var s=a;return te(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==ie&&(te((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=o,a._error=r,a._complete=i,a}return Zt(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;ne.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=ne.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):re(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;re(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};ne.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),ne.useDeprecatedSynchronousErrorHandling)throw t;re(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!ne.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return ne.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(re(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(fe);var de="function"==typeof Symbol&&Symbol.observable||"@@observable";function ge(){}function me(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:ge}var ye=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof fe)return t;if(t[he])return t[he]()}return t||e||n?new fe(t,e,n):new fe(ie)}(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||ne.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),ne.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){ne.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof fe?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=be(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[de]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:me(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=be(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function be(t){if(t||(t=ne.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function ve(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}ve.prototype=Object.create(Error.prototype);var we=ve,Oe=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return Zt(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(ue),je=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return Zt(e,t),e}(fe),xe=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Zt(e,t),e.prototype[he]=function(){return new je(this)},e.prototype.lift=function(t){var e=new Ee(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new we;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new we;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new we;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new we;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new we;return this.hasError?(t.error(this.thrownError),ue.EMPTY):this.isStopped?(t.complete(),ue.EMPTY):(this.observers.push(t),new Oe(this,t))},e.prototype.asObservable=function(){var t=new ye;return t.source=this,t},e.create=function(t,e){return new Ee(t,e)},e}(ye),Ee=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return Zt(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):ue.EMPTY},e}(xe),Se=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return Zt(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new we;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(xe),_e=n(9);var Ce;Ce||(Ce={});function Te(){return function(t){return t.lift(new De(t))}}var De=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new ke(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),ke=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return Zt(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(fe),Ae=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return Zt(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new ue).add(this.source.subscribe(new Pe(this.getSubject(),this))),t.closed?(this._connection=null,t=ue.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return Te()(this)},e}(ye).prototype,Pe=(Ae._subscribe,Ae._isComplete,Ae.getSubject,Ae.connect,Ae.refCount,function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return Zt(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(je));let Me=!1;const Ne=new Se(0);function Ve(t){return Ie(t)()}function Ie(t){return t=Object(i.c)(t),(...e)=>{if(Me)return t(...e);Me=!0;try{return t(...e)}finally{Me=!1,Ne.next(Ne.value+1)}}}const Re=["amount","offset","selection"],$e="$pageParameter",Fe="unavailable";class Be{constructor(t){this.parentStore=t,this.stateMap={}}set(t,e,n){const r=this.getState(t,e,!1);i.d.structural(r.subject.value,n)||Ve(()=>{r.box.set(n),r.subject.next(n)})}get(t,e){return this.getState(t,e,!0).box.get()}get$(t,e){return this.getState(t,e,!0).subject}dehydrate(){return Object.keys(this.stateMap).map(t=>JSON.parse(t)).filter(({slot:t})=>Re.includes(t)).map(({widgetId:t,slot:e})=>({widgetId:t,slot:e,value:this.get(t,e)}))}hydrate(t){t.forEach(({widgetId:t,slot:e,value:n})=>{if(!Re.includes(e))throw new a(`Invalid slot for restoring the state: ${e}`);switch(e){case"amount":case"offset":this.set(t,e,n instanceof W?n:W(n.toString()));break;default:this.set(t,e,n)}})}getState(t,e,n){const r=JSON.stringify({widgetId:t,slot:e});if(r in this.stateMap)return this.stateMap[r];if(n&&this.parentStore){const t=this.parentStore.findState(r);if(t)return t}const o=i.h.box(void 0,{deep:!1}),a=new Se(void 0);return this.stateMap[r]={box:o,subject:a},this.stateMap[r]}findState(t){return t in this.stateMap?this.stateMap[t]:this.parentStore?this.parentStore.findState(t):void 0}}class Ge{constructor(t,e,n,r){this.componentId=t,this.name=e,this.title=n,this.formParameterGuid=r,this.isClosedExplicitly=!1,this.store=new Be,this.place="content",this.store.set($e,"form",[this,""]),this.store.set($e,"applyContextCount",0),r&&mx.data.get({guid:r,callback:this.setFormParameter.bind(this),error:mx.onError})}setFormParameter(t){this.pageObject=t,this.store.set($e,"object",t)}getComponentId(){return this.componentId}getTitle(){return this.title}getName(){return this.name}getGuid(){return this.formParameterGuid}getSubmitObjects(){return void 0!==this.pageObject?[this.pageObject]:[]}setSuspend(t){}close(t){this.isClosedExplicitly=!0,_.Navigation.pop(this.componentId,{}).then(t,mx.onError)}publish(t,e){e()}onClose(){this.isClosedExplicitly||mx.data.rollback({mxobjs:this.getSubmitObjects(),callback:()=>{},error:mx.onError})}}const Le=new Xt("pageState"),Ue=[],We={},qe={},He={},ze={},Ye={push:{waitForRender:!0}};let Je,Ke,Xe={};class Qe{async openForm2(t,e,n,r,i){const o=Ze(t,n,e);return await _.Navigation.push(r.getComponentId(),o),s(Je)}reload(){}confirmation(t){t.handler()}showLogin(){throw new Ut("showLogin")}showProgress(){return 0}hideProgress(){}downloadFile(){}showMessage(t,e,n){const i=Lt("mxui.widget.DialogMessage",t),o=Lt("mxui.widget.DialogMessage","ok");r.Alert.alert(i,e,[{text:o}])}getJavaScriptAction(t){return Promise.resolve(ze[t]())}static registerJavaScriptAction(t,e){ze[t]=e}static savePageState(){if(!Je)return Promise.resolve();const t={name:Je.getName(),title:Je.getTitle(),formParameterGuid:Je.getGuid(),cache:mx.data.dehydrateCache(),selectedTabIndex:Ke};return Le.set(JSON.stringify(t))}static async loadPageState(){const t=await Le.get();let e=null;try{e=JSON.parse(t)}catch(t){}return e}static registerPage(t,e,n){We[t]={title:e.$$title,navigation:n},n&&_.Navigation.registerComponent(`${t}:header`,()=>(function(t){return class extends o.Component{componentWillMount(){const t=this.props.pageUuid||He[this.props.componentId];He[this.props.componentId]=t;const e=qe[t];this.setState({form:e})}render(){return Object(o.createElement)(O,{store:this.state.form.store},t())}}})(e[n.header])),_.Navigation.registerComponent(t,()=>(function(t){return class extends o.Component{constructor(t){super(t),_.Navigation.events().bindComponent(this)}componentWillMount(){let t=qe[this.props.pageUuid];t||(t=new Ge(this.props.componentId,this.props.pageName,this.props.title,this.props.formParameterGuid),qe[this.props.pageUuid]=t),this.setState({form:t})}componentWillUnmount(){this.state.form.onClose(),delete qe[this.props.pageUuid]}componentDidAppear(){Je=this.state.form}render(){return Object(o.createElement)(r.SafeAreaView,{style:{flex:1,backgroundColor:"white"}},Object(o.createElement)(T,{},Object(o.createElement)(O,{store:this.state.form.store},Object(o.createElement)(r.View,{onStartShouldSetResponderCapture:t=>{const e=r.TextInput.State.currentlyFocusedField();return e!==t.target&&r.Keyboard.dismiss(),!1},style:{flex:1}},t()))))}}})(e.$$page))}static setDefaultStyling(t={}){const e=t.topBar?t.topBar:{},n=t.bottomBar?t.bottomBar:{};Xe=Object.assign({},Xe,{bottomTab:{fontFamily:n.fontFamily,fontSize:n.fontSize,iconColor:n.iconColor,selectedIconColor:n.selectedIconColor,selectedTextColor:n.selectedTextColor,textColor:n.textColor},bottomTabs:{backgroundColor:n.backgroundColor},layout:{orientation:"portrait"},topBar:{backButton:{color:e.backButtonColor},background:{color:e.backgroundColor},title:{color:e.titleColor,fontFamily:e.titleFontFamily,fontSize:e.titleFontSize,component:{alignment:e.titleAlignment}}}})}static async startApp(t=[]){Qe.configureYellowBox(),_.Navigation.setDefaultOptions(Xe),_.Navigation.events().registerBottomTabSelectedListener(t=>Ke=t.selectedTabIndex);const e=mx.session.getConfig("instructions")[0];if("open_form"!==e.type)throw new a;let n;const r=t.filter(t=>void 0===t.visibleForRoles||mx.session.hasSomeRole(t.visibleForRoles)).slice(0,5);if(r.length>0){Qe.registerPage("Blank",{$$title:"",$$page:()=>()=>null});const t=await Ht(r.filter(t=>t.icon).map(t=>t.icon));n={bottomTabs:{children:r.map((e,n)=>{return Ue.push(e.pageName),{stack:{children:[Ze(e.pageName,e.title)],options:{bottomTab:{text:e.caption,icon:e.icon?t[e.icon]:void 0,testID:`bottomTab$item${n}`}}}}})}}}else{const t=e.args.FormPath.replace("/",".").replace(".page.xml","");Ue.push(t),n={stack:{children:[Ze(t,e.args.FormTitle)]}}}const i=await Qe.restorePreviousPageState(n);return _.Navigation.setRoot({root:i})}static configureYellowBox(){const t=r.NativeModules.MxConfiguration.WARNINGS_FILTER_LEVEL;console.disableYellowBox=t===tn.none,t===tn.partial&&r.YellowBox.ignoreWarnings(["RCTBridge","Attempted to invoke"])}static async restorePreviousPageState(t){const e=await this.loadPageState();if(e&&e.name){if(void 0!==We[e.name]){mx.data.hydrateCache(e.cache);const n=Ze(e.name,e.title,e.formParameterGuid);if(t.bottomTabs){const r=e.selectedTabIndex<t.bottomTabs.children.length?e.selectedTabIndex:0;Ue[r]!==e.name&&t.bottomTabs.children[r].stack.children.push(n),t.bottomTabs.currentTabIndex=r}else t.stack&&Ue[0]!==e.name&&t.stack.children.push(n)}await Le.remove()}return t}}function Ze(t,e,n){const r=Kt("page"),i=We[t],o=function(t,e,n,r){if(e.navigation&&e.navigation.header){const i=`${t}:header`;return{topBar:{visible:!0,title:{text:r||e.title},rightButtons:[{id:i,component:{name:i,passProps:{pageUuid:n}}}]}}}return{topBar:{height:0,visible:!1}}}(t,i,r,e);return{component:{name:t,passProps:{pageName:t,title:e||i.title,formParameterGuid:n,pageUuid:r},options:Object.assign({},o,{animations:Ye})}}}var tn;!function(t){t[t.all=0]="all",t[t.partial=1]="partial",t[t.none=2]="none"}(tn||(tn={}));var en=n(35);class nn{constructor(){this.__labels=[],this.__labelMap={},this.__graph=[]}addEdge(t,e){const n=this._getOrCreateLabelIndex(t),r=this._getOrCreateLabelIndex(e),i=this.__graph[n];i.includes(r)||i.push(r)}neighborsOf(t){const e=this._getOrCreateLabelIndex(t);return this.__graph[e].map(this._indexToLabel,this)}reachableLabels(t){const e=t.map(this._getOrCreateLabelIndex,this);var n,r,i;return(n=this.__graph,r=e,i=new Array(n.length),function t(e){for(var r=0;r<e.length;++r){var o=e[r];if(o<0||o>=i.length)throw new Error("graph: index "+o+" out of bounds in graph of size "+n.length);i[o]||(i[o]=!0,t(n[o]))}}(r),function(){for(var t=[],e=0;e<i.length;++e)i[e]&&t.push(e);return t}()).map(this._indexToLabel,this)}_indexToLabel(t){return this.__labels[t]}_getOrCreateLabelIndex(t){let e=t in this.__labelMap?this.__labelMap[t]:-1;return-1===e&&(this.__labels.push(t),this.__graph.push([]),e=this.__labels.length-1,this.__labelMap[t]=e),e}}function rn(t,e){return function(t,e){const n=cn(t=t.filter(t=>!t.isPersistable()||t.hasChanges()||t.isNew()));return sn(on(t).filter(({from:t,to:e})=>r(t)&&r(e)));function r(t){return e.includes(t)||t in n}}(t,e).reachableLabels(e)}function on(t){const e=[];return t.forEach(t=>{t.getReferenceAttributes().filter(t=>!function(t){return"System.owner"===t||"System.changedBy"===t}(t)).forEach(n=>{an(t,n).forEach(n=>e.push({from:n,to:t.getGuid()},{from:t.getGuid(),to:n}))})}),e}function an(t,e){return t.getReferences(e).concat(t.getOriginalReferences(e))}function sn(t){const e=new nn;return t.forEach(({from:t,to:n})=>e.addEdge(t,n)),e}function cn(t){const e={};return t.forEach(t=>{e[t.getGuid()]=t}),e}var un=n(3);const ln=new Map;function hn(t){const e=Kt();return ln.set(e,t),{unsubscribe:()=>ln.delete(e)}}async function fn(...t){const e=Array.from(ln.values()),n=[];for(const r of t)if("topic"in r)n.push(...e.filter(t=>"topic"in t&&t.topic===r.topic));else if("entity"in r){const t=[r.entity].concat(mx.meta.getEntity(r.entity).getSuperEntities());n.push(...e.filter(e=>"entity"in e&&t.includes(e.entity)))}else"attr"in r?n.push(...e.filter(t=>"attr"in t&&t.attr===r.attr&&t.guid===r.guid)):n.push(...e.filter(t=>"guid"in t&&!("attr"in t)&&t.guid===r.guid));const r=Ve(()=>n.map(t=>void 0!==t.callback?t.callback():void 0));await Promise.all(r)}function pn(t){return Array.from(ln.values()).filter(e=>"guid"in e&&e.guid===t).map(t=>t.tag).filter(t=>t)}function dn(){return Array.from(ln.values()).filter(t=>"guid"in t).map(t=>t.guid)}const gn=Symbol("snapshot");class mn{constructor(t){if(this._guid="0",this._unavailable=!1,this.metaData=null,this.jsonData=null,this.id="mendix.lib.MxObject",!(t.meta&&t.json&&t.json.objectType)){var e=this.metaData&&this.metaData.getEntity();throw new Error("new MxObject(): cannot create Mendix object.  Check entity access"+(e?" for entity "+e:""))}this.metaData=t.meta,this._setJsonData(t.json),this.id+="("+this.jsonData.objectType+":"+this._guid+")"}resetFromJSON(t){this._setJsonData(t)}markAsUnavailable(){this._setJsonData({guid:this._guid,attributes:{}}),this._unavailable=!0}_setJsonData(t){for(var e in this.jsonData=t,this._guid=t.guid,t.attributes)this._setAttributeValue(e,this._getAttributeValue(e))}getGuid(){return this._guid}hasChanges(){return!Object(un.k)(window.mx.data.getChanges(this._guid))}snapshot(){return this[gn]||(this[gn]=new bn(this))}isUnavailable(){return this._unavailable}set(t,e){this._setContent(t,e)}isReadonlyAttr(t){return this.has(t)?!!this.jsonData.attributes[t].readonly:!this.metaData.has(t)}fetch(t,e,n){let r;r=t?t instanceof Array?t.slice():t.split("/"):[],this.isA(r[0])&&r.shift();let i=this;const o=()=>{if(0===r.length)e(i);else if(1===r.length)e(i.get(r[0]));else{const t=r.shift(),n=r.shift();i._fetchReference(t,n,t=>{void 0===t?e(null):Array.isArray(t)?0===r.length?e(t):s(new a(this.id+".fetch : "+i+" reference set should be last reference in path")):(i=t,o())},s)}};function s(t){n?n(t):window.mx.onError(t)}o()}_fetchReference(t,e,n,r){const i=this.getReferences(t);0!==i.length?window.mx.data.get({guids:i,callback:r=>{if(this.isObjectReferenceSet(t))0===r.length||r[0].isA(e)?n(r):n(void 0);else{const t=r[0];t&&t.isA(e)?n(t):n(void 0)}},error:r}):n(void 0)}get(t){if("string"!=typeof t)throw new a("parameter attr "+t+" is not of type String");return this.has(t)?this._convertToClientValue(t,this._getRawValue(t)):null}getOriginalValue(t){if("string"!=typeof t)throw new a("parameter attr "+t+" is not of type String");return this.has(t)?this._convertToClientValue(t,this._getRawOriginalValue(t)):null}has(t){if("string"!=typeof t)throw new a("attribute parameter is not a string");return Object.prototype.hasOwnProperty.call(this.jsonData.attributes,t)}getReferences(t){if("string"!=typeof t)throw new a("parameter attr "+t+" is not of type String.");if(!this.has(t))return[];if(!this.isReference(t))throw new a("attribute "+t+" is not an ObjectReference(Set).");const e=this._getRawValue(t);return this.isObjectReference(t)?null==e?[]:[e]:null==e?[]:e.slice()}getOriginalReferences(t){if("string"!=typeof t)throw new a("parameter attr "+t+" is not of type String.");if(!this.has(t))return[];if(!this.isReference(t))throw new a("attribute "+t+" is not an ObjectReference(Set).");const e=this._getRawOriginalValue(t);return this.isObjectReference(t)?null==e?[]:[e]:null==e?[]:e.slice()}getReference(t){return this.get(t)}isEnum(t){return this.metaData.isEnum(t)}isNumeric(t){return this.metaData.isNumeric(t)}isCurrency(t){return this.metaData.isCurrency(t)}isPassword(t){return this.metaData.isPassword(t)}isDate(t){return this.metaData.isDate(t)}isLocalizedDate(t){return this.metaData.isLocalizedDate(t)}isBoolean(t){return this.metaData.isBoolean(t)}isReference(t){return this.metaData.isReference(t)}isObjectReference(t){return this.metaData.isObjectReference(t)}isObjectReferenceSet(t){return this.metaData.isObjectReferenceSet(t)}getOptions(t){return this.metaData.getOptions(t)}getEnumMap(t){return this.metaData.getEnumMap(t)}getEnumKVPairs(t){return this.metaData.getEnumKVPairs(t)}getEnumCaption(t){return this.metaData.getEnumCaption(t,this.get(t))}hasChildren(t){if("string"!=typeof t)throw new a("parameter attr ("+t+") is not of type String.");return!this._attributeChanged(t)&&this._hasChildren(t)}getChildren(t){if("string"!=typeof t)throw new a("parameter attr ("+t+") is not of type String.");if(!this.has(t))return[];if(!this.isReference(t))throw new a("attribute "+t+" is not an ObjectReference(Set).");return this._attributeChanged(t)?[]:this._hasChildren(t)?this._getChildren(t):[]}getChild(t){if("string"!=typeof t)throw new a("parameter attr("+t+") is not of type String.");if(!this.has(t))return;if(!this.isObjectReference(t))throw new a("attribute "+t+" is not an ObjectReference.");const e=this.getChildren(t);return 0===e.length?null:e[0]}removeReferences(t,e){if("string"!=typeof t)throw new a("parameter attr is not of type String.");if(!this.has(t))return!1;if(!this.isReference(t))throw new a("attempt to remove Reference from non-Reference attribute : "+t);if(Array.isArray(e)||(e=[e]),this._attributeChanged(t)||!this._hasChildren(t))this.isObjectReference(t)?this._setContent(t,null):this._setContent(t,Object(un.b)(this.getReferences(t),e));else{if(!this.isObjectReference(t)){for(var n=0;n<e.length;n++)delete this.jsonData.attributes[t].value[e[n]];var r=Object(un.b)(this.getReferences(t),e);return this._makeChange(t,r)}this._setContent(t,null)}return!0}addReference(t,e){if("string"!=typeof t)throw new a("parameter attr is not of type String.");if(!e)throw new a("parameter guid is not set.");if(!this.has(t))return!1;if(!this.isReference(t))throw new a("attempt to add Reference to non-Reference attribute : "+t);if(this.isObjectReference(t))this._setContent(t,e);else{var n=this.getReferences(t);n.join(";").match(e)||(n.push(e),this._setContent(t,n))}return!0}addReferences(t,e){if("string"!=typeof t)throw new a("parameter attr is not of type String.");if(!Array.isArray(e))throw new a("parameter guids is not an Array.");if(!this.has(t))return!1;if(!this.isObjectReferenceSet(t))throw new a("attempt to add References to non-ReferenceSet attribute : "+t);const n=this.getReferences(t),r=e.filter(t=>!n.includes(t));return r.length>0&&this._setContent(t,n.concat(r)),!0}getReferenceAttributes(){return this.metaData.getReferenceAttributes().filter(t=>this.has(t))}getAttributes(){return this.metaData.getAttributes().filter(t=>this.has(t))}getPrimitives(){return this.metaData.getAttributesWithoutReferences().filter(t=>this.has(t))}getAttributeType(t){return!!this.has(t)&&this.metaData.getAttributeType(t)}getSelectorEntity(t){return this.has(t)?this.metaData.getSelectorEntity(t):null}getEntity(){return this.metaData.getEntity()}isPersistable(){return this.metaData.isPersistable()}isNew(){return window.mx.data.isNew(this._guid)}isA(t){return this.metaData.isA(t)}hasSuperEntities(){return this.metaData.hasSuperEntities()}getSuperEntities(){return this.metaData.getSuperEntities()}hasSubEntities(){return this.metaData.hasSubEntities()}getSubEntities(){return this.metaData.getSubEntities()}inheritsFrom(t){return this.metaData.inheritsFrom(t)}toJSON(){return this.jsonData}toString(){return this.getGuid()}_getRawValue(t){if(this._attributeChanged(t)){return window.mx.data.getChanges(this._guid)[t].value}return this._getRawOriginalValue(t)}_getRawOriginalValue(t){return this._hasChildren(t)?this._getChildValue(t):this._getAttributeValue(t)}_attributeChanged(t){const e=window.mx.data.getChanges(this._guid);return Object.prototype.hasOwnProperty.call(e,t)}_getChildren(t){return(this.isObjectReference(t)?[this._getAttributeValue(t)]:Object.values(this._getAttributeValue(t))).map(t=>mn.fromJson(t))}_getChildValue(t){const e=this._getChildren(t).map(t=>t.getGuid());return this.isObjectReference(t)?0===e.length?null:e[0]:e}_convertToRuntimeValue(t,e){if("String"!==this.getAttributeType(t)&&""===e)return this.isObjectReferenceSet(t)?[]:null;if(null==e)return null;if(this.isNumeric(t)){const n=q(e);if(tt(n,this.metaData.getAttributeType(t))!==Z.OK)throw new Error(`Cannot set invalid value '${n}' to MxObject attribute '${t}'`);return String(n)}if(this.isDate(t))return this.isLocalizedDate(t)?Number(e):window.mx.parser.delocalizeEpoch(Number(e));if(this.isPassword(t))return e.replace(/[\s\t]+$/,"").replace(/^[\s\t]+/,"");if(this.isBoolean(t))return Boolean(e);if(this.isObjectReference(t)){if(Array.isArray(e))throw new Error("Trying to set single object reference to multiple values");return e}if(this.isObjectReferenceSet(t)){if(!Array.isArray(e))throw new Error("Trying to set object reference set to single value");return e}return String(e)}_convertToClientValue(t,e){return null==e?"":this.isNumeric(t)?q(e):this.isDate(t)?this.isLocalizedDate(t)?e:window.mx.parser.localizeEpoch(e):this.isBoolean(t)?e:this.isObjectReferenceSet(t)?0===e.length?"":e:String(e)}_setContent(t,e){if("string"!=typeof t)throw new a("parameter attr ("+t+") is not of type String.");if(!this.metaData.has(t))return;const n=this._convertToRuntimeValue(t,e),r=this._getRawValue(t);n!==r&&(this._makeChange(t,n),this.metaData.isBidirectionalReference(t)&&(yn(this.isObjectReference(t)?[r]:Object(un.b)(r,n)).filter(e=>!e.isReadonlyAttr(t)&&e.getReferences(t).includes(this._guid)).forEach(e=>e.removeReferences(t,[this._guid])),yn(this.isObjectReference(t)?[n]:Object(un.b)(n,r)).filter(e=>!e.isReadonlyAttr(t)&&!e.getReferences(t).includes(this._guid)).forEach(e=>e.addReference(t,this._guid))))}_hasChildren(t){if(!this.isReference(t))return!1;const e=this._getAttributeValue(t);return e&&"object"==typeof e&&null==e.length}_getAttributeValue(t){var e=this.jsonData.attributes[t];return void 0===e&&(e=null),e&&"object"==typeof e&&"value"in e?e.value:e}_setAttributeValue(t,e){var n=this.jsonData.attributes[t];void 0===e&&(e=null),n&&"object"==typeof n&&"value"in n?n.value=e:this.jsonData.attributes[t]=e}_makeChange(t,e){if(this.isUnavailable())throw new a(`Cannot modify attribute ${t} of an unavailable object.`);window.mx.data.makeChange(this._guid,t,e),fn({guid:this._guid,attr:t}).catch(window.mx.onError)}static fromJson(t){return new mn({json:t,meta:window.mx.meta.getEntity(t.objectType)})}}function yn(t){return t.map(t=>window.mx.data.getCachedObject(t)).filter(t=>null!=t)}class bn extends mn{constructor(t){super({meta:t.metaData,json:{guid:t.getGuid(),objectType:t.getEntity()}}),this._mxObject=t}resetFromJSON(t){super.resetFromJSON(t),this._mxObject.resetFromJSON(t)}markAsUnavailable(){super.markAsUnavailable(),this._mxObject.markAsUnavailable()}hasChanges(){return!1}snapshot(){return this}isReadonlyAttr(t){return!0}_fetchReference(t,e,n,r){super._fetchReference(t,e,t=>{t instanceof mn?n(t.snapshot()):Array.isArray(t)?n(t.map(t=>t.snapshot())):n(t)},r)}has(t){return this._mxObject.has(t)}toJSON(){return this._mxObject.toJSON()}_attributeChanged(t){return!1}_getAttributeValue(t){return this._mxObject._getAttributeValue(t)}_makeChange(t,e){throw new a(`Cannot modify attribute ${t} of a read-only object.`)}_getChildren(t){return this._mxObject._getChildren(t).map(t=>t.snapshot())}convertToEditable(){return window.mx.data.removeChanges(this.getGuid()),this._mxObject}}let vn=0;class wn{constructor(t){this.id=this.ident=++vn,this.trackId="",this.trackEntity="",this.trackObject=null,this.localParams={},this.constraintby=[],this._entityToGuid={},this._mxidToObject={},t&&(t.mxcontext&&this.dupFrom(t.mxcontext),t.classname&&t.mendixguid?this.setContext(t.classname,t.mendixguid):t.entity&&t.guid&&this.setContext(t.entity,t.guid))}hasTrackEntity(){return""!==this.trackEntity}hasTrackId(){return!!this.trackId}hasTrackObject(){return!!this.trackObject}getTrackEntity(){return this.trackEntity}getTrackId(){return this.trackId}getTrackObject(){return this.trackObject}setTrackObject(t){t&&this.setContext(t.getEntity(),t.getGuid()),this.trackObject=t}getObject(){return this.trackObject}setConstraints(t){null!=t&&""!==t&&0!==t.length&&(this.constraintby="string"==typeof t?t.split(","):t)}getConstraints(){for(var t=[],e=0;e<this.constraintby.length;e++)t.push(this.constraintby[e]);return t}hasBacktrack(){return 0!==this.constraintby.length}getEntities(){return Object.keys(this._entityToGuid).filter(t=>void 0!==t&&""!==this._entityToGuid[t])}setContext(t,e){if(1===arguments.length&&arguments[0]instanceof mn){var n=arguments[0];t=n.getEntity(),e=n.getGuid()}this.trackEntity=null==t?"":t,this.trackId=null==e?"":e,this.trackObject=null,this._entityToGuid[this.trackEntity]=this.trackId}unsetContext(t){if("string"!=typeof t)throw new Error("mendix/lib/MxContext.unsetContext: parameter entity is not of type String");delete this._entityToGuid[t]}getContext(t){if("string"!=typeof t)throw new Error("mendix/lib/MxContext.getContext: parameter entity is not of type String");if(t in this._entityToGuid)return this._entityToGuid[t];var e=window.mx.meta.getEntity(t),n=null;return e.getSubEntities().some(t=>t in this._entityToGuid&&(n=this._entityToGuid[t],!0)),n}hasContext(t){if("string"!=typeof t)throw new Error("mendix/lib/MxContext.hasContext: parameter entity is not of type String");return null!=this.getContext(t)}reset(){this._entityToGuid={},this._mxidToObject={},this.trackId=null,this.trackEntity="",this.trackObject=null}dupFrom(t){this.reset(),this.mixin(t)}mixin(t){if(t)t.getEntities().forEach(e=>this.setContext(e,t.getContext(e))),t.getWidgetIds().forEach(e=>this.setWidgetObject(e,t.getWidgetObject(e))),this.setParams(t.getParams()),this.setConstraints(t.getConstraints()),this.setContext(t.getTrackEntity(),t.getTrackId()),this.setTrackObject(t.getTrackObject());else{const t=this.getTrackEntity();t&&this.unsetContext(t),this.setContext(null,null)}}hasParam(t){return t in this.localParams}getParam(t){return this.hasParam(t)?this.localParams[t]:null}getParams(){return this.localParams}setParam(t,e){if(null==t)throw new Error("mendix/lib/MxContext["+this.ident+"].setParam key is null");this.localParams[t]=e}setParams(t){if("object"!=typeof t)throw new Error("mendix/lib/MxContext["+this.ident+"].setParams requires an Object.");for(var e in t)this.localParams[e]=t[e]}unsetParam(t){delete this.localParams[t]}resetParams(){this.localParams={}}isEmpty(){for(var t in this._entityToGuid)return!0;return!1}getGuids(){for(var t=this.getEntities(),e=this.getTrackId(),n=e?[e]:[],r=0,i=t.length;r<i;r++){var o=t[r];if("System.owner"!==o&&"System.changedBy"!==o){var a=this.getContext(o);a!==e&&n.push(a)}}return n}getWidgetIds(){return Object.keys(this._mxidToObject)}getWidgetObject(t){return this._mxidToObject[t]}setWidgetObject(t,e){this.setTrackObject(e),this._mxidToObject[t]=e}getWidgetObjectMap(){return Object(un.c)(this._mxidToObject)}freeze(){this.setTrackObject=this.setConstraints=this.setContext=this.unsetContext=this.reset=this.dupFrom=this.setParam=this.setParams=this.unsetParam=this.setWidgetObject=this.resetParams=function(){return window.mx.logger.error("mendix/lib/MxContext["+this.ident+"].freeze: context is readonly"),!1}}}function On(t=0){return new Promise(e=>{setTimeout(()=>{e()},t)})}function jn(t,e,n){const r=Array.from(arguments).slice(2);return new Promise((n,i)=>t[e](...r,n,i))}class xn{constructor(t,e){this.currentForm=t,this.executeNanoflow=e,this.map={},this.subscriptions=[]}set(t,e){this.map[t]=e,e instanceof mn?this.subscriptions.push(hn({guid:e.getGuid()})):Array.isArray(e)&&this.subscriptions.push(...e.map(t=>hn({guid:t.getGuid()})))}get(t){if(!(t in this.map))throw new a;const e=this.map[t];return e instanceof mn&&e.isUnavailable()?void 0:Array.isArray(e)?e.filter(t=>!t.isUnavailable()):e}all(){return Object.keys(this.map)}mapGuidsToObjects(t){const e={};return this.all().map(t=>this.get(t)).map(t=>t instanceof mn?[t]:Array.isArray(t)?t:[]).reduce((t,e)=>t.concat(e),[]).forEach(t=>{e[t.getGuid()]=t}),t.filter(t=>t in e).map(t=>e[t])}destroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions.splice(0)}}class En{constructor(t){this.executors=t}async execute(t,e,n){await On(0);const r=new xn(n,t=>this.executeWithScope(t,r));try{return e.forEach(({name:t,value:e})=>r.set(t,e)),await this.executeWithScope(t,r)}finally{r.destroy()}}async executeWithScope(t,e){let n=0;for(;n<t.length;){const i=t[n],o=this.executors.find(t=>t.instructionType===i.type);if(void 0===o)throw new a;const s=await o.execute(i,e);if(void 0!==(r=s)&&"object"==typeof r&&"goto"in r){if(-1===(n=t.findIndex(t=>t.label===s.goto)))throw new a}else{if(Sn(s))return s.result;n++}}var r;throw new a}}function Sn(t){return void 0!==t&&"object"==typeof t&&"result"in t}class _n{constructor(t,e){this._guid=t,this._fields=e}getGuid(){return this._guid}getAttributes(){return Object.keys(this._fields).map(t=>({name:t,reason:this._fields[t]}))}getFields(){return this.getAttributes()}static describe(t){const e=[];for(let n=0;void 0!==t[n];n++){const r=t[n].getFields();for(let t=0;void 0!==r[t];t++)e.push(r[t].reason)}return e.join("\n")}addAttribute(t,e){return!(t in this._fields)&&(this._fields[t]=e,!0)}addField(...t){return this.addAttribute(...t)}removeAttribute(t){return t in this._fields&&(delete this._fields[t],!0)}removeField(...t){return this.removeAttribute(...t)}getErrorReason(t){return this._fields[t]}getReasonByAttribute(...t){return this.getErrorReason(...t)}clone(){return new _n(this._guid,Object.assign({},this._fields))}toString(){return Object.keys(this._fields).map(t=>`${t} ${this._fields[t]}`).join("; ")}}function Cn(t){for(var e in this.__values={},t)this.__values[e+""]=!0}_n.fromResponse=function(t){return t.map(({guid:t,errorFields:e})=>{const n={};return e.forEach(({name:t,message:e})=>{n[t]=e}),new _n(t,n)})},Cn.of=Cn.prototype.of=function(t){return Cn.fromArray([t])},Cn.fromArray=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=!0;return new Cn(e)},Cn.empty=Cn.prototype.empty=function(){return Cn.fromArray([])},Cn.prototype.contains=function(t){return this.__values[t]||!1},Cn.prototype.union=Cn.prototype.concat=function(t){var e={};for(var n in this.__values)e[n]=!0;for(var r in t.__values)e[r]=!0;return new Cn(e)},Cn.prototype.intersection=function(t){var e={};for(var n in this.__values)t.contains(n)&&(e[n]=!0);return new Cn(e)},Cn.prototype.difference=function(t){var e={};for(var n in this.__values)t.contains(n)||(e[n]=!0);return new Cn(e)},Cn.prototype.length=function(){return this.values().length},Cn.prototype.reduce=function(t,e){return this.values().reduce(t,e)},Cn.prototype.chain=function(t){return this.reduce(function(e,n){return e.concat(t(n))},this.empty())},Cn.prototype.map=function(t){return this.chain(function(e){return this.of(t(e))}.bind(this))},Cn.prototype.values=function(){return Object.keys(this.__values)},Cn.prototype.toString=function(){return"StringSet("+this.values()+")"};class Tn extends Error{constructor(t="Could not synchronize data"){super(t),Object.setPrototypeOf(this,Tn.prototype)}}class Dn{constructor(t,e){this.expressionFunctions=t,this.expressionTokens=e}evaluate(t,e){switch(t.type){case"function":if(!this.expressionFunctions[t.name])throw new Error(`Function ${t.name} is not known`);const n=t.parameters.map(t=>this.evaluate(t,e));return this.expressionFunctions[t.name].apply(null,n);case"literal":return"number"==typeof t.value?new W(t.value):null===t.value?void 0:t.value;case"variable":return void 0!==t.path?e.resolve(t.variable,t.path):e.resolve(t.variable);case"conditional":return this.evaluate(t.condition,e)?this.evaluate(t.then,e):this.evaluate(t.else,e);case"token":if(!this.expressionTokens[t.name])throw new Error(`Token ${t.name} is not known`);return this.expressionTokens[t.name]()}}}const kn={not:t=>!t,"=":(t,e)=>t instanceof W&&e instanceof W?t.eq(e):t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():"string"==typeof t||"string"==typeof e?(t||"")===(e||""):t instanceof Array&&e instanceof Array?t.length===e.length&&t.every(t=>e.indexOf(t)>-1):t instanceof Array&&void 0===e?0===t.length:void 0===t&&e instanceof Array?0===e.length:t===e,"!=":(t,e)=>!kn["="](t,e),">"(t,e){if(t instanceof W&&e instanceof W)return t.gt(e);if(t instanceof Date&&e instanceof Date)return t.getTime()>e.getTime();if(void 0===t||void 0===e)throw new Error(An(">",t,e));return t>e},">=":(t,e)=>kn["="](t,e)||kn[">"](t,e),"<"(t,e){if(t instanceof W&&e instanceof W)return t.lt(e);if(t instanceof Date&&e instanceof Date)return t.getTime()<e.getTime();if(void 0===t||void 0===e)throw new Error(An("<",t,e));return t<e},"<=":(t,e)=>kn["="](t,e)||kn["<"](t,e),"+"(t,e){if(t instanceof W&&e instanceof W)return t.plus(e);if("string"==typeof t)return t+(void 0!==e?e.toString():"");if("string"==typeof e)return(void 0!==t?t.toString():"")+e;throw new Error(An("+",t,e))},"-"(t,e){if(1===arguments.length&&void 0!==t)return t.times(-1);if(void 0!==t&&void 0!==e)return t.minus(e);throw new Error(An("-",t,e))},"*"(t,e){if(void 0!==t&&void 0!==e)return t.times(e);throw new Error(An("*",t,e))},div(t,e){if(void 0!==t&&void 0!==e)return t.div(e);throw new Error(An("div",t,e))},mod(t,e){if(void 0!==t&&void 0!==e)return t.mod(e);throw new Error(An("mod",t,e))},":":(t,e)=>kn.div(t,e),max(...t){if(t[0]instanceof W)return t.reduce((t,e)=>t.gt(e)?t:e);if(t[0]instanceof Date)return t.reduce((t,e)=>t.getTime()>e.getTime()?t:e);throw new Error(An("max",...t))},min(...t){if(t[0]instanceof W)return t.reduce((t,e)=>t.lt(e)?t:e);if(t[0]instanceof Date)return t.reduce((t,e)=>t.getTime()<e.getTime()?t:e);throw new Error(An("min",...t))},round(t,e){if(t instanceof W)return t.round(void 0===e?0:Number(e));throw new Error(An("round",t))},random:()=>new W(Math.random()),floor(t){if(t instanceof W){const e=t.mod(1);return e.eq(0)?t.eq(-0)?t.abs():t:t.minus(e).minus(t.lt(0)?1:0)}throw new Error(An("floor",t))},ceil(t){if(t instanceof W){const e=kn.floor(t.times(-1));return e.eq(0)?e:e.times(-1)}throw new Error(An("ceil",t))},pow(t,e){if(t instanceof W&&e instanceof W)return t.pow(Number(e));throw new Error(An("pow",t))},abs(t){if(t instanceof W)return t.abs();throw new Error(An("abs",t))},parseInteger(t,e){if("string"==typeof t){if(/^-?\d+$/.test(t)){const e=W(t);return e.eq(-0)?e.abs():e}if(void 0===e)throw new Error(`Not parsable to Integer: ${t}`);return e}throw new Error(An("parseInteger",t))},parseDecimal(t,e){if("string"==typeof t){const n=mx.parser.parseValue(t,"Decimal");if(null===n&&void 0===e)throw new Error(`Not parsable to Decimal: ${t}`);return null===n?e:n}throw new Error(An("parseDecimal",t))},formatDecimal(t){if(t instanceof W)return mx.parser.formatValue(Number(t),"Decimal");throw new Error(An("formatDecimal",t))},isNew:t=>void 0!==t&&mx.data.isNew(t),isSynced(t){if(void 0!==t)return!mx.data.isDirty(t);throw new Error(An("isSynced",t))},toString(t){if(t instanceof W)return t.toString();if(void 0===t)return"";if(t instanceof Date)throw new Error(An("toString",t));return String(t)},toUpperCase:t=>Pn(t).toUpperCase(),toLowerCase:t=>Pn(t).toLowerCase(),trim:t=>Pn(t).trim(),contains:(t,e)=>Pn(t).indexOf(Pn(e))>-1,startsWith:(t,e)=>(t=Pn(t),e=Pn(e),t.substr(0,e.length)===e),endsWith:(t,e)=>(t=Pn(t),e=Pn(e),t.substr(t.length-e.length)===e),substring(t,e,n){if(t=Pn(t),n=n,void 0!==(e=e)&&e.gte(0)){if(2===arguments.length)return t.substr(Number(e));if(void 0!==n&&n.gte(0))return t.substr(Number(e),Number(n))}throw new Error(An("substring",t,e,n))},find(t,e,n){if(t=Pn(t),e=Pn(e),2===arguments.length)return new W(t.indexOf(e));if(void 0!==n)return new W(t.indexOf(e,Number(n)));throw new Error(An("find",t,e,n))},findLast(t,e,n){if(t=Pn(t),e=Pn(e),2===arguments.length)return new W(t.lastIndexOf(e));if(void 0!==n)return new W(t.lastIndexOf(e,Number(n)));throw new Error(An("findLast",t,e,n))},length:t=>new W(Pn(t).length),urlEncode:t=>encodeURIComponent(Pn(t)).replace("%20","+"),urlDecode:t=>decodeURIComponent(Pn(t).replace("+","%20")),isMatch(t,e){if(void 0!==e)return new RegExp(`^(${e})$`).test(Pn(t));throw new Error(An("isMatch",t,e))},replaceFirst(t,e,n){if(void 0!==e&&void 0!==n){const r=n.replace(/\$/g,"$$$$");return Pn(t).replace(new RegExp(e),r)}throw new Error(An("replaceFirst",t,e))},replaceAll(t,e,n){if(void 0!==e&&void 0!==n){const r=n.replace(/\$/g,"$$$$");return Pn(t).replace(new RegExp(e,"g"),r)}throw new Error(An("replaceAll",t,e))},_newList:()=>[],_toList:t=>Mn(t,An("_toList",t)),_addToList(t,e){const n=Mn(t,An("_addToList",t,e)),r=Mn(e,An("_addToList",t,e));return n.concat(r.filter(t=>!n.includes(t)))},_removeFromList(t,e){const n=Mn(t,An("_removeFromList",t,e)),r=Mn(e,An("_removeFromList",t,e));return n.filter(t=>!r.includes(t))},_intersectLists(t,e){const n=Mn(t,An("_intersectLists",t,e)),r=Mn(e,An("_intersectLists",t,e));return n.filter(t=>r.includes(t))},_listContains(t,e){const n=Mn(t,An("_listContains",t,e)),r=Mn(e,An("_listContains",t,e));return r.length>0&&r.every(t=>n.includes(t))},_head(t){if(t instanceof Array)return t.length>0?t[0]:void 0;if(void 0!==t)throw new Error(An("_head",t))},_hasSomeRole:(...t)=>mx.session.hasSomeRole(t)};function An(t,...e){return`Operator ${t} not supported in expression ${t}(${e.join(", ")})`}function Pn(t){return void 0===t?"":t}function Mn(t,e){if(t instanceof Array)return t;if("string"==typeof t)return t.length>0?[t]:[];if(void 0===t)return[];throw new Error(e)}const Nn={beginOfCurrentMinute:function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t);return e.setSeconds(0,0),e},endOfCurrentMinute:function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t);return e.setSeconds(59,999),e},beginOfCurrentHour:function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t);return e.setMinutes(0,0,0),e},endOfCurrentHour:function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t);return e.setMinutes(59,59,999),e},beginOfCurrentDay:function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t);return e.setHours(0,0,0,0),e},endOfCurrentDay:function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t);return e.setHours(23,59,59,999),e},beginOfCurrentWeek:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:dt(i),a=null==n.weekStartsOn?o:dt(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=ft(t),c=s.getDay(),u=(c<a?7:0)+c-a;return s.setDate(s.getDate()-u),s.setHours(0,0,0,0),s},endOfCurrentWeek:function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:dt(i),a=null==n.weekStartsOn?o:dt(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=ft(t),c=s.getDay(),u=6+(c<a?-7:0)-(c-a);return s.setDate(s.getDate()+u),s.setHours(23,59,59,999),s},beginOfCurrentMonth:function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t);return e.setDate(1),e.setHours(0,0,0,0),e},endOfCurrentMonth:function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e},beginOfCurrentYear:function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n},endOfCurrentYear:function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}};function Vn(t){const e={currentUser:()=>mx.session.getUserId(),currentDateTime:t};return Object.keys(Nn).forEach(n=>{const r=Nn[n];e[n]=(()=>r(t(),{weekStartsOn:mx.session.getConfig("locale.firstDayOfWeek")})),e[n+"UTC"]=(()=>(function(t){const e=new Date(t.getTime());return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e})(r(function(t){const e=new Date(t.getTime());return e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),e}(t()))))}),e}function In(t,e){switch(e){case"DateTime":return""!==t?new Date(t):void 0;case"String":return t;default:return""!==t?t:void 0}}function Rn(t){return void 0===t?"":t instanceof Date?t.getTime():t}function $n(t,e){switch(e){case"String":case"ObjectReference":case"HashString":return n("string"==typeof t||void 0===t);case"ObjectReferenceSet":return n(Array.isArray(t)&&t.every(t=>"string"==typeof t));case"Boolean":return n("boolean"==typeof t);case"DateTime":return n(void 0===t||t instanceof Date&&!isNaN(t.getTime()));case"Float":case"Currency":case"Integer":case"Long":case"Decimal":return n(t instanceof W||void 0===t);default:throw new a(`Attribute type ${e} is not supported.`)}function n(n){if(!n)throw new a(`Value ${t} is not assignable to attribute of type ${e}.`)}}function Fn(t){return function(t){return t instanceof Array&&t.every(t=>void 0===t||"string"==typeof t)}(t)?t.map(t=>s(mx.data.getCachedObject(t))):t}class Bn extends Error{constructor(t,e,n){super(`Unable to get a member from variable $${t}, because you do not have sufficient permissions to "${e}.${n}".`),this.variableName=t,this.entityName=e,this.attributeName=n,Object.setPrototypeOf(this,Bn.prototype)}}class Gn extends Error{constructor(t){super(`Unable to get a member from an empty variable $${t}.`),this.variableName=t,Object.setPrototypeOf(this,Gn.prototype)}}class Ln{constructor(t){this.variables=t,this.dependencies=[]}resolve(t,e){return void 0!==e?this.resolveAttribute(t,e):this.resolveVariable(t)}getDependencies(){return this.dependencies.slice()}resolveVariable(t){if(!(t in this.variables))throw new a;const e=this.variables[t]();if(e instanceof mn)return this.addDependency({guid:e.getGuid()}),e.getGuid();if(function(t,e){return e instanceof Array&&e.every(e=>void 0===e||e instanceof t)}(mn,e)){const t=e.map(t=>t.getGuid());return t.forEach(t=>this.addDependency({guid:t})),t}return e}resolveAttribute(t,e){if(!(t in this.variables))throw new a;const n=this.variables[t]();if(void 0===n)throw new Gn(t);if(!(n instanceof mn))throw new a;if(!n.has(e))throw new Bn(t,n.getEntity(),e);return this.addDependency({guid:n.getGuid()}),this.addDependency({guid:n.getGuid(),attr:e}),In(n.get(e),n.getAttributeType(e))}addDependency(t){this.dependencies.find(e=>_e(e,t))||this.dependencies.push(t)}}const Un=new Dn(kn,Vn(()=>new Date)),Wn=(t,e,n)=>{const r={};e.all().forEach(t=>r[t]=(()=>e.get(t)));const i=Un.evaluate(t,new Ln(r));switch(n){case"primitive":return i;case"list":return Array.isArray(i)?e.mapGuidsToObjects(i):void 0===i?[]:c();case"object":return"string"==typeof i?e.mapGuidsToObjects([i])[0]:void 0===i?void 0:c()}};var qn;!function(t){t.Sum="Sum",t.Average="Average",t.Count="Count",t.Minimum="Minimum",t.Maximum="Maximum"}(qn||(qn={}));function Hn(t){return t.reduce((t,e)=>t.plus(e),new W(0))}class zn extends Error{constructor(t){super(t),Object.setPrototypeOf(this,zn.prototype)}}function Yn(t){return new Promise((e,n)=>mx.data.commit({mxobjs:t,callback:e,error:n}))}const Jn=Vn(()=>new Date);function Kn(t,e){if(null!=t){if("string"==typeof t||"boolean"==typeof t||t instanceof Date||t instanceof W)return t;if("number"==typeof t)return W(t);if(t instanceof mn){if(void 0!==e){return In(t.get(e),t.getAttributeType(e))}return t.getGuid()}throw new a(`Cannot use value '${t}' in query filter`)}}function Xn(t){switch(t.type){case"attribute":return t.attribute;case"value":const n=t.value;if(void 0===n)return"empty";if("string"==typeof n)return`'${e=n,e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}'`;if("boolean"==typeof n)return n?"true()":"false()";if(n instanceof W)return n.toString();if(n instanceof Date)return n.getDate().toString();throw new a;case"function":return/^(\W+|and|or)$/.test(t.name)?"("+t.parameters.map(Xn).join(` ${t.name} `)+")":`${t.name}(`+t.parameters.map(Xn).join(", ")+")"}var e}function Qn(t){return new Promise((e,n)=>mx.data.rollback({mxobjs:t,callback:e,error:n}))}const Zn=Symbol("validations");const tr=[new class{constructor(){this.instructionType="jump"}async execute(t,e){return{goto:t.target}}},new class{constructor(t){this.exprEvaluator=t,this.instructionType="switch"}async execute(t,e){const n=this.exprEvaluator(t.condition,e,"primitive"),r=void 0!==n?n.toString():"";if(!(r in t.targets))throw new a;return{goto:t.targets[r]}}}(Wn),new class{constructor(){this.instructionType="loop"}async execute(t,e){const n=e.get(t.listVar);if(!Array.isArray(n))throw new a;for(const r of n)if(e.set(t.iteratorVar,r),await e.executeNanoflow(t.body))break}},new class{constructor(t){this.evaluateExp=t,this.instructionType="return"}async execute(t,e){return{result:this.evaluateExp(t.result,e,t.resultKind)}}}(Wn),new class{constructor(){this.instructionType="createObject"}async execute(t,e){const n=await new Promise((e,n)=>mx.data.create({entity:t.objectType,callback:e,error:n}));e.set(t.outputVar,n)}},new class{constructor(t){this.evaluateExp=t,this.instructionType="changeObject"}async execute(t,e){const n=e.get(t.inputVar);if(void 0===n)throw new zn(`Cannot change $${t.inputVar} as it is empty`);if(!(n instanceof mn))throw new a;let r=Rn(this.evaluateExp(t.value,e,"primitive"));r instanceof W&&(r=r.round(8)),n.set(t.member,r)}}(Wn),new class{constructor(){this.instructionType="commitObjects"}async execute(t,e){const n=e.get(t.inputVar);if(n instanceof mn)await Yn([n]);else{if(!Array.isArray(n))throw void 0===n?new zn(`Cannot commit $${t.inputVar} as it is empty`):new a;await Yn(n)}}},new class{constructor(){this.instructionType="rollbackObjects"}async execute(t,e){const n=e.get(t.inputVar);if(n instanceof mn)await Qn([n]);else{if(!Array.isArray(n))throw void 0===n?new zn(`Cannot rollback $${t.inputVar} as it is empty`):new a;await Qn(n)}}},new class{constructor(t){this.evaluateExp=t,this.instructionType="setVariable"}async execute(t,e){e.set(t.outputVar,this.evaluateExp(t.value,e,t.outputKind))}}(Wn),new class{constructor(){this.instructionType="openForm"}async execute(t,e){const n=t.inputVar?e.get(t.inputVar):void 0;await mx.ui.openForm2(t.path,n?n.getGuid():void 0,t.title,e.currentForm,t.params)}},new class{constructor(){this.instructionType="closeForm"}async execute(t,e){e.currentForm.close(()=>{},t=>mx.onError(t))}},new class{constructor(t){this.evaluateExp=t,this.instructionType="showValidation"}async execute(t,e){const n=e.get(t.inputVar);if(void 0===n)throw new zn(`Cannot refresh $${t.inputVar} as it is empty`);if(!(n instanceof mn))throw new a;const r=this.evaluateExp(t.text,e,"primitive"),i=void 0===r?"":r,o=function(t,e){const n=t[Zn]||(t[Zn]={});return n[e]||(n[e]={})}(e,n.getGuid());o[t.member]=i;const s=new _n(n.getGuid(),o);mx.data.sendValidationUpdates([s])}}(Wn),new class{constructor(t){this.evaluateExp=t,this.instructionType="databaseRetrieve"}async execute(t,e){const{entity:n,constraints:r,limitExpr:i,offsetExpr:o,takeFirst:a,sort:s,outputVar:c}=t,u=i?this.evaluateExp(i,e,"primitive"):void 0,l=o?this.evaluateExp(o,e,"primitive"):void 0,h=r?function t(e,n){switch(e.type){case"attribute":return e;case"function":return{type:"function",name:e.name,parameters:e.parameters.map(e=>t(e,n))};case"literal":return{type:"value",value:Kn(e.value)};case"token":return{type:"value",value:Jn[e.name]()};case"variable":return{type:"value",value:Kn(n.get(e.name),e.attribute)}}}(r,e):void 0,f=Object.assign({},l?{offset:Number(l)}:{},u?{amount:Number(u)}:{},s?{sort:s}:{}),{mxobjs:p}=mx.isOffline()?await mx.offlineData.getByQuery(n,h,f):await mx.onlineData.getByXPath(`//${n}`+(h?`[${Xn(h)}]`:""),f);e.set(c,a?p[0]:p)}}(Wn),new class{constructor(){this.instructionType="associationRetrieve"}async execute(t,e){const{inputVar:n,association:r,entity:i,retrieveSingleObject:o,direction:s,outputVar:c}=t,u=e.get(n);if(void 0===u)return void e.set(c,o?void 0:[]);if(!(u instanceof mn))throw new a;const l=await function(t,e,n,r){return new Promise((i,o)=>{mx.data.get({guid:t.getGuid(),path:e,entity:n,direction:r,callback:i,error:o})})}(u,r,i,s);e.set(c,o?l[0]:l)}},new class{constructor(t){this.evaluateExp=t,this.instructionType="writeLog"}async execute(t,e){const n=this.evaluateExp(t.message,e,"primitive");mx.logger.log(t.level,n)}}(Wn),new class{constructor(t){this.evaluateExp=t,this.instructionType="javaScriptActionCall"}async execute(t,e){const n=t.parameters.map(({kind:t,value:n})=>this.evaluateExp(n,e,t)),r=await mx.ui.getJavaScriptAction(t.name),i=await r(...n);t.outputVar&&e.set(t.outputVar,function(t){switch(typeof t){case"undefined":case"string":case"boolean":return t;case"number":return W(t);default:if(t instanceof W||t instanceof Date||t instanceof mn)return t;if(null===t)return;if(Array.isArray(t)){if(t.every(t=>t instanceof mn))return t;throw new a(`Array ${t.join(", ")} cannot be used as Nanoflow variable, `+"because it contains something else then MxObjects.")}throw new a(`Value ${t} cannot be used as Nanoflow variable.`)}}(i))}}(Wn),new class{constructor(){this.instructionType="synchronize"}async execute(t,e){await jn(mx.data,"synchronizeOffline",{})}},new class{constructor(t){this.evaluateExp=t,this.instructionType="filterList"}async execute(t,e){const n=e.get(t.inputVar),r=this.evaluateExp(t.expectedValue,e,"primitive"),i=Array.isArray(n)?n.filter(function(e){const n=e.get(t.attribute),i=e.getAttributeType(t.attribute);return kn["="](In(n,i),r)}):[];e.set(t.outputVar,t.retrieveSingleObject?i.length>0?i[0]:void 0:i)}}(Wn),new class{constructor(){this.instructionType="aggregate"}async execute(t,e){const n=e.get(t.inputVar);Array.isArray(n)&&(t.operation===qn.Count?e.set(t.outputVar,new W(n.length)):e.set(t.outputVar,function(t,e,n){const r=t.map(t=>t.get(n)).filter(t=>t instanceof W);switch(e){case qn.Minimum:return 0===r.length?void 0:r.reduce((t,e)=>e.lt(t)?e:t,r[0]);case qn.Maximum:return 0===r.length?void 0:r.reduce((t,e)=>e.gt(t)?e:t,r[0]);case qn.Average:return 0===r.length?void 0:Hn(r).div(r.length);case qn.Sum:return Hn(r)}}(n,t.operation,t.member)))}},new class{constructor(t){this.evaluateExp=t,this.instructionType="showMessage"}async execute(t,e){const n=this.evaluateExp(t.message,e,"primitive"),r=void 0===n?"":n;mx.ui.showMessage(t.messageType,r,t.blocking)}}(Wn)];function er(t,e,n,r,i,o,a,s){var c,u,l,h;if(n.length+r.length===0)a(null==e?null:i?ir(e,i):e);else if(0===n.length&&r.length>0)c=r[0],u=r[1],e.isObjectReferenceSet(c)?rr(e,c,u,a,s):nr(t,e,n,r.slice(2),i,o,c,u,o.schema,a,s);else if(c=n[0],u=n[1],e.isObjectReferenceSet(c))n.length>2||r.length>2?s&&s(new Error("reference set should be at end of path")):rr(e,c,u,a,s);else if(e.isObjectReference(c))if(l=e.getChild(c))l.isA(u)?er(t,l,n.slice(2),r,i,o,a,s):a&&a(null);else if(h=e.getReference(c))if(t.has(h)){var f=t.getObject(h);f.isA(u)?er(t,f,n.slice(2),r,i,o,a,s):a&&a(null)}else o.usexpath&&n.length>2?function(t,e,n,r,i,o,a,s,c,u){var l=[`//${s}[id=${a}]`].concat(n).join("/");new Promise((t,e)=>{window.mx.data.get({xpath:l,callback:t,error:e})}).then(e=>{0===e.length?c(null):i&&1===e.length?c(ir(e[0],i)):i?u&&u(new Error(i+" is not a reference type")):!function(t,e){const n=[t].concat(e);if(e.length<2)return!1;const r=window.mx.meta.getEntity(n.slice(-3)[0]),i=e.slice(-2)[0];return r.isObjectReferenceSet(i)}(s,n)?er(t,e[0],[],r,i,o,c,u):c(e)},u)}(t,0,n.slice(2),r,i,o,h,u,a,s):nr(t,e,n.slice(2),r,i,o,c,u,null,a,s);else a(null);else s&&s(new Error("attribute "+c+" is not a reference type"))}function nr(t,e,n,r,i,o,a,s,c,u,l){const h=e.getReference(a);h?new Promise((t,e)=>{window.mx.data.get({guid:h,filter:{id:c},callback:t,error:e})}).then(e=>{e&&e.isA(s)?er(t,e,n,r,i,o,u,l):u(null)},l):u(null)}function rr(t,e,n,r,i){0===t.getReferences(e).length?r([]):t.hasChildren(e)?r(t.getChildren(e).filter(t=>t.isA(n))):new Promise((n,r)=>{window.mx.data.get({guids:t.getReferences(e),callback:n,error:r})}).then(t=>{const e=t.reduce((t,e)=>(e.isA(n)?t.matching.push(e):t.releasing.push(e),t),{matching:[],releasing:[]});r(e.matching)},i)}function ir(t,e){return t.isObjectReference(e)?t.getReference(e):t.isObjectReferenceSet(e)?t.getReferences(e):t.get(e)}async function or(t){for(const e of t.instructions||[])switch(e.type){case"logout":mx.logout();break;case"show_login":mx.ui.showLogin();break;case"download_file":const t=await new Promise((t,n)=>mx.data.get({guid:e.args.FileDocumentGuid,callback:t,error:n}));mx.ui.downloadFile({mxobject:s(t),target:e.args.Target});break;case"text_message":mx.ui.showMessage(e.args.MessageType,e.args.MessageContent,e.args.MessageBlock)}}function ar(t,e){const n=Object.entries(e.changes||{}).map(([t,e])=>Object.keys(e).map(e=>({guid:t,attr:e}))),r=Object.entries(e.resets||{}).map(([t,e])=>e.map(e=>({guid:t,attr:e}))),i=(e.objects||[]).map(e=>{const n=t.getObject(e.guid);return null!==n?function(t,e){const n=mx.meta.getEntity(e.objectType),r=mn.fromJson(e);return n.getAttributes().filter(e=>!function(t,e,n){if(t.isReadonlyAttr(n)!==e.isReadonlyAttr(n))return!1;if(t.isReference(n)){if("System.changedBy"===n||"System.owner"===n)return!0;const r=t.getOriginalReferences(n).sort().join(","),i=e.getOriginalReferences(n).sort().join(",");return r===i}const r=t.getOriginalValue(n),i=e.getOriginalValue(n);return r===i||null!==r&&null!==i&&r.valueOf&&i.valueOf&&r.valueOf()===i.valueOf()}(t,r,e))}(n,e).map(t=>({guid:e.guid,attr:t})):[]}),o=h(d((e.instructions||[]).map(sr)).concat(e.deletes||[]));return[...function(t,e){const n=[],r={};return t.forEach(t=>{const i=e(t);Object.prototype.hasOwnProperty.call(r,i)||(r[i]=!0,n.push(t))}),n}(d([...n,...r,...i]),t=>`${t.guid}:${t.attr}`).map(({guid:t,attr:e})=>({guid:t,attr:e})).filter(({guid:e})=>!o.includes(e)&&t.has(e)),...o.filter(e=>t.has(e)).map(t=>({guid:t})),...h(d((e.instructions||[]).map(t=>"refresh_class"===t.type?t.args.classnames:[]))).map(t=>({entity:t}))]}function sr(t){return"refresh_object_list"===t.type?t.args.ObjectIds:[]}function cr(t,e){const n=_n.fromResponse(t.datavalidation||[]);mx.data.sendValidationUpdates(n),n.length>0&&e&&e(n)}function ur(t,e,n){const{commits:r=[],rollbacks:i=[],deletes:o=[]}=n;e.forEach(e=>{const n=e.getGuid();if(r.includes(n)||i.indexOf(n)>=0){const r=t.getObject(n);if(!r)throw new Error("inconsistent response: committed or rolled back object is missing from response and cache");e.resetFromJSON(r.jsonData)}else o.includes(n)&&e.markAsUnavailable()})}async function lr(t,e,n,r){for(let i=0;i<=r;i++)try{return await Rt(t,e,{},n,{},[])}catch(t){if(!(i<r))throw t;{const t=Math.pow(2,i);await On(t)}}throw new a}(new Date).getTime();function hr(t,e){t=t||{};var n=this;const r=[],i=new En(tr);let o,s;const c=Object(un.e)(3,p),u=Object(un.d)(d);function l(t){if("object"!=typeof t)throw new a("args is not an object");if("function"!=typeof t.callback)throw new a("callback is not a function");if(t.mxobj&&!(t.mxobj instanceof mn))throw new a("mxobj is not a MxObject");if(t.mxobjs&&!(t.mxobjs instanceof Array))throw new a("mxobjs is not an Array");if(!t.mxobj&&!t.mxobjs||t.mxobj&&t.mxobjs)throw new a("one of mxobj or mxobjs should be passed");return t.mxobj?[t.mxobj]:t.mxobjs}function h(){const n=e.getAllObjects(),i=Cn.fromArray(n.map(t=>t.getGuid())),o=i.difference(Cn.fromArray(function(){const t=window.mx.session.getUserId(),e=window.mx.session.getSessionObjectId(),i=Object(un.m)(dn().concat(r.map(t=>t.guid)).concat([t,e]));return rn(n,i)}())).values();t.logCleanupStatistics&&window.mx.logger.debug(function(){const t=Object(un.h)(o,t=>e.getObject(t).getEntity()),n=Object(un.a)(t).map(([t,e])=>t+": "+e.join(", ")).join("\n");return`Garbage collecting ${o.length} of ${i.length()}\n${n}`}()),e.removeObjects(o)}function f(t,e){return function(){p(t,e)}}function p(t,e,...n){try{t&&t.apply(e,n)}catch(t){window.mx.onError(t)}}function d(t,e,n){t?t.call(e,n):window.mx.onError(n)}function g(t){return e.has(t.getGuid())}function m(t){return t.getGuid()}function y(t){return t.getEntity()}this.getBacktrack=function(t,e,r,i,o){if("function"!=typeof i&&(o=i,i=null),e&&0!==e.length){var s=null,c=[],l=0,h=!0,f=function(){var t=e[l++];t?function(t,e,r,i){var o=e.split("/"),s=function(t){var e,n=o.shift(),i=o.shift();if(null!=t&&null!=t.length&&0!==t.length){for(var a=[],s=0;s<t.length;s++)null!=t[s]&&a.push("id='"+t[s].getGuid()+"'");a.length?(e="["+i+"/"+n+"["+a.join(" or ")+"]]",1===o.length?r(e):(n=o.shift(),i=o.shift(),r("["+i+"/"+n+e+"]"))):r(null)}else r(null)};!function(){var e=o.shift(),c=o.shift();if(1===o.length){var u="["+c+"='"+t.getGuid()+"']";return void r(u)}const l=window.mx.meta.getEntity(e);null!=l?t.isA(e)?l.isReference(c)?""!==t.get(c)?n.get({guids:t.getReferences(c),callback:s,error:i}):r(null):d(i,null,new Error(`Reference ${c} not found in entity ${e}`)):d(i,null,new a(`Entity ${t.getEntity()} is not a ${e} or one of its subclasses`)):d(i,null,new Error(`Entity ${e} does not exist`))}()}(s,t,function(t){t?c.push(t):h=!1,f()},u(i,o)):r.call(o,c.join(""),h)};t?n.get({guid:t,callback:function(t){t?(s=t,f()):r.call(o,"",!1)},error:u(i,o)}):r.call(o,"",!1)}else r.call(o,"",!0)},this.toString=function(){return"mendix.sys.Data"},this.startup=function(e){o=e;const n=null!=t.garbageCollectionInterval?Number(t.garbageCollectionInterval):1e4;0!==n&&(s=window.setInterval(h,n))},this.subscribe=function(t,n){if(!t.val)return hn(Object.assign({},t,{callback(){if(t.callback){if(t.entity)return t.callback.apply(n,[t.entity]);if(t.attr){const r=e.getObject(t.guid),i=null!=r?r.get(t.attr):null;return t.callback.apply(n,[t.guid,t.attr,null!=i?i:""])}return t.callback.apply(n,[t.guid])}}}));const i=Object.assign({},t,{callback(...e){t.callback&&t.callback.apply(n,e)}});return r.push(i),{unsubscribe:()=>{const t=r.indexOf(i);-1!==t&&r.splice(t,1)}}},this.unsubscribe=function(t){if(!("unsubscribe"in t))throw new a("Trying to unsubscribe using an invalid subscription handle");t.unsubscribe()},this.sendValidationUpdates=Ie(function(t){const e=[];if(t.forEach(t=>{const n=t.clone(),i=t.getAttributes().map(t=>t.name);r.filter(({val:e,guid:n,attr:r})=>e&&null!=r&&n===t.getGuid()&&i.includes(r)).forEach(({attr:e,callback:r})=>{r(t.getErrorReason(e)),n.removeAttribute(e)}),r.filter(({val:e,guid:n,attr:r})=>e&&null==r&&n===t.getGuid()).forEach(({callback:e})=>{const r=t.clone();e([r]);const i=r.getAttributes().map(t=>t.name);n.getAttributes().forEach(({name:t})=>{i.includes(t)||n.removeAttribute(t)})}),n.getAttributes().length>0&&e.push(n)}),e.length){const t=_n.describe(e);window.mx.ui.showMessage("error",t,!1)}}),this.updateInCache=function(t){return e.removeAllChanges([t.guid]),e.setMxObjects([t]),e.getObject(t.guid)},this.removeChanges=function(t){e.removeAllChanges([t])},this.action=function(t){o.action(t.params,t.context||new wn,t.origin,!!t.async,t.onValidation).then(t.callback,u(t.error,null))},this.callNanoflow=function({nanoflow:{nanoflow:t,paramsSpec:e},context:r,origin:o,callback:a,error:s}){(async function(){const a=Object.keys(e).map(t=>({name:t,guid:r.getContext(e[t])||void 0})),s=a.map(t=>t.guid).filter(t=>Boolean(t)),c=await(l=s,new Promise((t,e)=>{n.get({guids:l,callback:t,error:e})})),u=a.map(({name:t,guid:e})=>({name:t,value:c.find(t=>t.getGuid()===e)}));var l;try{return i.execute(t,u,o)}catch(t){throw await async function(t,e,n){if(e instanceof Ct){const r=e.original,i=ar(t,r).filter(t=>!("attr"in t));await fn(...i),await or(r),cr(r,n)}}(this._objectCache,t),t}})().then(c(a,null),u(s,null))},this.get=function(t,r){var i=t.xpath,s=t.path,l=t.guid,h="guids"in t||!l?""===t.guids?[]:t.guids:[l],f=t.entity,d=t.direction||"reverse",g=t.callback,m=t.error,y=!!t.count,b=t.filter,v=t.context||new wn,w=t.microflow;if("guid"in t&&null==l)p(g,r,null);else{if(!(i||h||w||f))throw new a("xpath, guid|guids and microflow arguments are undefined");if(s&&1!==h.length)throw new a("path can only be used with a single guid");if("function"!=typeof g)throw new a("callback is not a function");if(m&&"function"!=typeof m)throw new a("error is not a function");b&&b.limit&&(b.amount=b.limit,delete b.limit);var O=function(t,e,n){if(!e)return t;for(var r in n)r in e&&null!=e[r]&&(t[r]=e[r]);return t}({},b,l?{id:null}:{id:null,attributes:null,offset:null,sort:null,amount:null,distinct:null,references:null}),j=u(m,r);if(O.id&&h&&!l&&delete O.id,O.id&&(delete O.attributes,delete O.distinct),w){var x=h?"selection":i?"set":"none",E={actionname:w,applyto:x};"selection"===x?E.guids=h:"set"===x&&(E.xpath=i,O.sort&&(E.sort=O.sort)),n.action({params:E,context:v,callback:c(g,r),error:j})}else if(s&&h)o.getByPath(h[0],s,f,d).then(({mxobjs:t,count:e})=>{p(g,r,t,{count:e})},u(m,r));else if(h){if(0===h.length)return void p(g,r,l?null:[],{count:0});(h.every(t=>e.has(t))?Promise.resolve(function(t,n){n=n||{};let r=t.map(t=>e.getObject(t)).filter(t=>null!=t);n.sort&&n.sort.forEach(t=>{var e=t[0],n=t[1];r=r.sort((t,r)=>(t=t.get(e),r=r.get(e),t<r?"asc"===n?-1:1:t>r?"asc"===n?1:-1:0))});const i=n.offset;if(i){const t=n.amount;r=t?r.slice(i,i+t):r.slice(i)}return{mxobjs:r,count:r.length}}(h,O)):o.getByGuid(h,O)).then(({mxobjs:t,count:e})=>{var n;n=l?O.id?t.find(t=>t.getGuid()===l)||null:t[0]||null:t,p(g,r,n,{count:e})},j)}else if(f)if(window.mx.isOffline()){const{amount:t,offset:e,sort:n}=O;o.getSlice(f,[],{limit:t,offset:e,sort:n},!1).then(({mxobjs:t,count:e})=>{p(g,r,t,{count:e})})}else{const{amount:t,offset:e,sort:n}=O;o.getByXPath(`//${f}`,{amount:t,offset:e,sort:n},y).then(({mxobjs:t,count:e})=>{p(g,r,t,{count:e})},j)}else o.getByXPath(i,O,y).then(({mxobjs:t,count:e,aggregates:n})=>{p(g,r,t,{count:e,aggregates:n})},j)}},this.getOffline=function(t,e,n,r,i){return this.getSlice(t,e,n,!1,r,i)},this.getSlice=function(t,e,n,r,i,a){o.getSlice(t,e,n,r).then(({mxobjs:t,count:e})=>{p(i,null,t,e)}).catch(u(a,null))},this.fetch=function(t,n,r,i,o){var a,s;"function"==typeof r&&(o=i,i=r),a=n?n instanceof Array?n.slice():n.split("/"):[],t&&t.isA(a[0])&&a.shift(),s=a.length%2==1?a.pop():"",function(t,e,n,r,i,o,a){let s;s=(i=i||{}).schema?n.splice(-2,n.length):[],er(t,e,n,s,r,i,o,a)}(e,t,a,s,r,i,u(o,null))},this.create=function(t,e){if("function"!=typeof t.callback)throw new a("callback is not a function");if(t.error&&"function"!=typeof t.error)throw new a("error is not a function");if("string"!=typeof t.entity)throw new a("entity is not a string");o.create(t.entity).then(function(r){t.context&&n.setObjectToContext(r,t.context);p(t.callback,e,r)},u(t.error,e))},this.remove=function(t){const e="guid"in t?[t.guid]:""===t.guids?[]:t.guids;if("guids"in t&&!(t.guids instanceof Array))throw new a("parameter guids set but not of type Array");if(t.error&&"function"!=typeof t.error)throw new a("parameter error set but not of type Function");if(t.callback&&"function"!=typeof t.callback)throw new a("parameter callback set but not of type Function");o.remove(e).then(f(t.callback),u(t.error,null))},this.validate=function(t,e,n){0!==t.length?o.validate(t.map(m)).then(f(e),u(n,null)):p(e)},this.commit=function(t,n){const r=f(t.callback,n),i=u(t.error,n),a=l(t);if(0===a.length&&t.callback)return void r();const s=a.map(t=>t.getGuid());o.commit(s,t.context||new wn,t.store,t.onValidation).then(function(t){ur(e,a,t);const n=Object(un.m)(a.filter(g).map(y)).map(t=>({entity:t})),o=Object(un.m)(a.map(m)).map(t=>({guid:t}));fn(...n.concat(o)).then(r,i)},i)},this.rollback=function(t,n){const r=u(t.error,n),i=l(t);if(0===i.length)return void p(t.callback,n);const a=Object(un.m)(i.map(y)).map(t=>({entity:t})),s=i.map(t=>t.getGuid());o.rollback(s).then(function(o){ur(e,i,o);const s=Object(un.m)(i.filter(g).map(m)).map(t=>({guid:t}));fn(...a.concat(s)).then(c(t.callback,n),r)},r)},this.uploadOffline=async function(){try{await o.upload()}catch(t){throw t instanceof Tn&&await o.cleanupDirtyObjects(),t}},this.downloadOffline=async function(){const t=window.mx.session.getConfig("sync_config.fetch")||[];await o.download(t)},this.synchronizeOffline=function(t,e,n){this.uploadOffline().then(()=>this.downloadOffline()).then(f(e),u(n,null))},this.saveDocument=function(t,e,n,r,i,a){const s=u(a,null);o.saveDocument(t,e,n,r).then(function(){fn({guid:t}).then(i,s)},s)},this.generateReport=function(t,e,n,r,i,a){o.generateReport(t,e,n,r).then(i,u(a,null))},this.generateExcelReport=function(t,e,n,r){o.generateExcelReport(t,e).then(n,u(r,null))},this.getReportParameters=function(t,e,n){o.getReportParameters(t).then(e,u(n,null))},this.setObjectToContext=function(t,e){if("object"!=typeof t)throw new a("parameter mxObj is not of type Object");if("object"!=typeof e)throw new a("parameter context is not of type Object");for(var n=t.getAttributes(),r=0;r<n.length;r++)if(t.isReference(n[r])){var i=t.getSelectorEntity(n[r]);if("System.owner"===n[r]||"System.changedBy"===n[r])continue;e.hasContext(i)&&t.addReference(n[r],e.getContext(i));var o=window.mx.meta.getEntity(i);if(o&&o.hasSubEntities())for(var s=o.getSubEntities(),c=0;c<s.length;c++)e.hasContext(s[c])&&t.addReference(n[r],e.getContext(s[c]))}},this.getObjectFromContext=function(t,e){var n=t.getObject(),r=t.getTrackId();n?e(n):r?window.mx.data.get({guid:r,callback:function(t){t||window.mx.onError("Error while fetching object with guid "+r),e(t)},error:function(t){window.mx.onError(t),e(null)}},this):e(null)},this.isDirty=function(t){return o.isDirty(t)},this.isNew=function(t){return e.isNew(t)},this.makeChange=function(t,n,r){e.makeChange(t,n,r)},this.getChanges=function(t){return e.getChanges(t)},this.getCachedObject=function(t){return e.getObject(t)},this.dehydrateCache=function(){return e.dehydrate()},this.hydrateCache=function(t){return e.hydrate(t)},this.getDocumentUrl=function(t,e,n){return o.getDocumentUrl(t,e,n)},this.getImageUrl=function(t,e,n){o.getImageUrl(t).then(e,n)},this.clear=function(t){e.clear(),o.cleanup().then(t)},this.uninitialize=function(){s&&window.clearInterval(s)},this.getObjectsStatistics=function(){return e.getAllObjects().map(t=>({object:t,changes:e.getChanges(t.getGuid()),uncommitted:e.isNew(t.getGuid()),subscriptions:pn(t.getGuid()).concat(r.filter(e=>e.guid===t.getGuid()).map(t=>t.tag))}))}}class fr{constructor(t){this.url=t,this.reloadHandlers=[],this.connectHandlers=[]}isConnected(){return void 0!==this.socket&&this.socket.readyState===WebSocket.OPEN}onConnect(t){this.isConnected()?t():this.connectHandlers.push(t)}onReloadMessage(t){this.reloadHandlers.push(t)}sendLog(t,e){if(this.isConnected()){const n=6e4;for(let r=0;r<e.length;r+=n){const i=e.substr(r,n);s(this.socket).send(`log:${t}:${i}`)}}}connect(){try{this.socket=new WebSocket(this.url),this.socket.onopen=(()=>{this.connectHandlers.forEach(t=>t()),this.connectHandlers.splice(0)}),this.socket.onmessage=(t=>{if("MENDIX_RELOAD"!==t.data)throw new a(`Unexpected command received from the runtime: ${t.data}`);this.reloadHandlers.forEach(t=>t())}),this.socket.onclose=(()=>this.reconnect())}catch(t){this.reconnect()}}reconnect(){this.socket=void 0,setTimeout(()=>this.connect(),1e3)}}class pr{constructor(t){this.connection=new fr(t.replace(/^http/,"ws")+"reload/")}connect(){this.connection.connect()}addOnReload(t){this.connection.onReloadMessage(t)}log(t,...e){const n=e.map(dr);this.connection.onConnect(()=>this.connection.sendLog(t,n.join("\n")))}}function dr(t){if("string"==typeof t)return t;if(t instanceof Error)return`${t.message} ${t.stack}`;if(t&&void 0!==t.outerHTML)return t.outerHTML;try{return JSON.stringify(t)}catch(t){return"[Unserializable data. See browser console for the details]"}}class gr{constructor({handleErrors:t=!0,isQuiet:e=!1}={}){this.logHandlers=[],e||this.addHandler(this.createConsoleLogHandler()),t&&"function"==typeof window.addEventListener&&(window.addEventListener("error",t=>this.error(t.error)),window.addEventListener("unhandledrejection",t=>this.error(t.reason)))}addHandler(t){this.logHandlers.push(t)}trace(...t){this.log("trace",...t)}debug(...t){this.log("debug",...t)}info(...t){this.log("info",...t)}warn(...t){this.log("warning",...t)}error(...t){this.log("error",...t)}critical(...t){this.log("critical",...t)}log(t,...e){this.logHandlers.forEach(n=>n(t,...e))}createConsoleLogHandler(){const t={};return["debug","info","log","warn","error"].forEach(e=>{t[e]=console[e];const n=function(t){switch(t){case"warn":return"warning";case"log":return"debug";default:return t}}(e);console[e]=((...t)=>this.log(n,...t))}),(e,...n)=>{const r=function(t){switch(t){case"trace":return;case"critical":return"error";case"warning":return"warn";default:return t}}(e);void 0!==r&&t[r].call(console,...n)}}}function mr(t){var e=t.json;if(!(e&&e.attributes&&e.objectType&&e.properties))throw new Error("MxMetaObject: invalid initialization");this.has=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.has: parameter attr is not of type String.");return Object.prototype.hasOwnProperty.call(e.attributes,t)},this.isEnum=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isEnum : parameter attr is not of type String.");return/^(Enum|EnumSet)$/.test(this.getAttributeType(t))},this.isNumeric=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isNumeric : parameter attr is not of type String.");return/^(Integer|Long|Decimal|Float|Currency)$/.test(this.getAttributeType(t))},this.isPassword=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isDate : parameter attr is not of type String.");return"HashString"===this.getAttributeType(t)},this.isCurrency=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isCurrency : parameter attr is not of type String.");return"Currency"===this.getAttributeType(t)},this.isDate=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isDate : parameter attr is not of type String.");return/^(Date|DateTime)$/.test(this.getAttributeType(t))},this.isLocalizedDate=function(t){return this.isDate(t)?/true/.test(e.attributes[t].localize):null},this.isBoolean=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isBoolean : parameter attr is not of type String.");return"Boolean"===this.getAttributeType(t)},this.isReference=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isReference : parameter attr is not of type String.");return/^(ObjectReference|ObjectReferenceSet)$/.test(this.getAttributeType(t))},this.isObjectReference=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isObjectReference : parameter attr is not of type String.");return"ObjectReference"===this.getAttributeType(t)},this.isObjectReferenceSet=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isObjectReferenceSet : parameter attr is not of type String.");return"ObjectReferenceSet"===this.getAttributeType(t)},this.isBidirectionalReference=function(t){return this.isReference(t)&&Boolean(e.attributes[t].both)},this.getOptions=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.getOptions : parameter attr is not of type String.");if(!this.isEnum(t))throw new Error("mendix/lib/MxMetaObject.getOptions : attribute '"+t+"' is not an Enumeration.");try{var n=[];if(this.has(t)){var r=e.attributes[t].options;if(r&&r.length){n=[];for(var i=0;i<r.length;i++)for(var o in r[i])n.push(r[i][o])}}return n}catch(t){return[]}},this.getEnumMap=function(t){if(!this.isEnum(t))return null;for(var n=[],r=e.attributes[t].options,i=0;i<r.length;i++)for(var o in r[i]){n.push({key:o,caption:r[i][o]});break}return n},this.getEnumKVPairs=function(t){if(!this.isEnum(t))return null;for(var n={},r=e.attributes[t].options,i=0;i<r.length;i++)for(var o in r[i])n[o]=r[i][o];return n},this.getEnumCaption=function(t,n){if(!this.isEnum(t))return null;for(var r=e.attributes[t].options,i=0;i<r.length;i++){var o=r[i];for(var a in o)if(a===n)return o[a]}return n},this.getReferenceAttributes=function(){var t=[];for(var n in e.attributes)this.isReference(n)&&t.push(n);return t},this.getAttributes=function(){var t=[];for(var n in e.attributes)t.push(n);return t},this.getAttributesWithoutReferences=function(){var t=[];for(var n in e.attributes)this.isReference(n)||t.push(n);return t},this.getAttributeType=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.getAttributeType : parameter attr is not of type String.");return!!this.has(t)&&e.attributes[t].type},this.getSelectorEntity=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.getSelectorEntity : parameter attr is not of type String.");return!!this.has(t)&&e.attributes[t].klass},this.getEntity=function(){return e.objectType},this.isPersistable=function(){return e.persistable},this.needsReachableState=function(t){return!(t in e.needsReachableState)||e.needsReachableState[t]},this.isA=function(t){return this.getEntity()===t||this.inheritsFrom(t)},this.hasSuperEntities=function(){return 0!==e.properties.superclasses.length},this.getSuperEntities=function(){var t=e.properties.superclasses;return"string"==typeof t?[t]:t},this.hasSubEntities=function(){return 0!==e.properties.subclasses.length},this.getSubEntities=function(){var t=e.properties.subclasses;return"string"==typeof t?[t]:t},this.inheritsFrom=function(t){return(this.getSuperEntities()||[]).includes(t)},this.isSyncable=function(t){if("string"!=typeof t)throw new Error("mendix/lib/MxMetaObject.isObjectReferenceSet : parameter attr is not of type String.");return!!this.has(t)&&(void 0===e.attributes[t].sync||e.attributes[t].sync)}}function yr(){const t={},e={};this.startup=function(){window.mx.session.getConfig("metadata").forEach(function(e){const n=new mr({json:e});t[n.getEntity()]=n})},this.getMap=function(){return t},this.getEntity=function(e){const n=t[e];return n||window.mx.logger.error("No permission to read or write entity "+e+", check security!"),n},this.getAttributeOwner=function(t,n){const r=t+"."+n,i=e[r];if(null!=i)return i;const o=this.getEntity(t);if(!o||!o.has(n))return null;const[a]=[t].concat(o.getSuperEntities()).filter(t=>this.getEntity(t).has(n)).slice(-1);return e[r]=a,a}}function br(){this._objectCache={},this._newGuids={},this._changes={}}br.prototype.getAllObjects=function(){return Object.values(this._objectCache)},br.prototype.dehydrate=function(){return Object(un.c)({data:this.getAllObjects(),newGuids:this._newGuids,changes:this._changes})},br.prototype.hydrate=function({data:t,newGuids:e,changes:n}){this._objectCache={},t.map(t=>mn.fromJson(t)).forEach(t=>{this._objectCache[t.getGuid()]=t}),this._newGuids=Object(un.c)(e),this._changes=Object(un.c)(n)},br.prototype.getObject=function(t){return this._objectCache[t]||null},br.prototype.removeObjectKeepChanges=function(t){delete this._objectCache[t],delete this._newGuids[t]},br.prototype.setMxObjects=function(t){t.forEach(function(t){var e=t.guid,n=this._objectCache[e];n?n.resetFromJSON(t):this._objectCache[e]=new mn({json:t,meta:window.mx.meta.getEntity(t.objectType)})},this)},br.prototype.has=function(t){return!!this.getObject(t)},br.prototype.isNew=function(t){return this.has(t)&&Boolean(this._newGuids[t])},br.prototype.clear=function(){this._objectCache={},this._newGuids={},this._changes={}},br.prototype.hasChanges=function(t){return t in this._changes},br.prototype.getChanges=function(t){return Object(un.c)(this._changes[t]||{})},br.prototype.makeChange=function(t,e,n){this._changes[t]=this._changes[t]||{},this._changes[t][e]={value:n}},br.prototype.removeAllChanges=function(t){t.forEach(function(t){delete this._changes[t]},this)},br.prototype.removeChanges=function(t){Object.keys(t).forEach(e=>{const n=this._changes[e];n&&(t[e].forEach(t=>delete n[t]),0===Object.keys(n).length&&delete this._changes[e])})},br.prototype.onCreate=function(t){t.forEach(t=>{this._newGuids[t]=!0})},br.prototype.onCommit=function(t){t.forEach(t=>delete this._newGuids[t])},br.prototype.onDelete=function(t){for(const e of t)e in this._objectCache&&this._objectCache[e].markAsUnavailable();this.removeObjects(t)},br.prototype.addChanges=function(t){for(const e in t){const n=t[e];null==this._changes[e]&&(this._changes[e]={});const r=this._changes[e];for(const t in n)r[t]=n[t]}},br.prototype.removeObjects=function(t){t.forEach(t=>{delete this._objectCache[t],delete this._newGuids[t],delete this._changes[t]})};const vr=r.NativeModules.NativeFsModule.DocumentDirectoryPath;FormData.prototype.append=function(t,e,n){"blob"===t&&e.nativePayload&&(e=e.nativePayload,n&&(e.name=n)),this._parts.push([t,e])};class wr{listDir(t){return r.NativeModules.NativeFsModule.list(Or(t))}removeDir(t){return r.NativeModules.NativeFsModule.remove(Or(t))}async readFile(t){const e=new Blob;return e.nativePayload={uri:`file://${Or(t)}`,name:t.substring(t.lastIndexOf("/")+1),type:"*/*"},e}async storeFile(t,e){await r.NativeModules.NativeFsModule.save(t.data,Or(e)),t.close()}moveFile(t,e){return r.NativeModules.NativeFsModule.move(Or(t),Or(e))}removeFile(t){return r.NativeModules.NativeFsModule.remove(Or(t))}async downloadFile(t,e){const n=await At(t,"blob");await r.NativeModules.NativeFsModule.save(n.data,Or(e)),n.close()}static readAsDataURL(t){return r.NativeModules.NativeFsModule.readAsDataURL(Or(t))}}function Or(t){return t.indexOf(vr)>-1?t:[vr,t].join("/")}var jr=6e4;var xr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Er(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var Sr={date:Er({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Er({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Er({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},_r={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Cr(t){return function(e,n){var r=n||{},i=r.width?String(r.width):t.defaultWidth;return("formatting"===(r.context?String(r.context):"standalone")&&t.formattingValues?t.formattingValues[i]||t.formattingValues[t.defaultFormattingWidth]:t.values[i]||t.values[t.defaultWidth])[t.argumentCallback?t.argumentCallback(e):e]}}function Tr(t){return function(e,n){var r=String(e),i=n||{},o=i.width,a=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],s=r.match(a);if(!s)return null;var c,u=s[0],l=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth];return c="[object Array]"===Object.prototype.toString.call(l)?l.findIndex(function(t){return t.test(r)}):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}(l,function(t){return t.test(r)}),c=t.valueCallback?t.valueCallback(c):c,{value:c=i.valueCallback?i.valueCallback(c):c,rest:r.slice(u.length)}}}var Dr,kr={formatDistance:function(t,e,n){var r;return n=n||{},r="string"==typeof xr[t]?xr[t]:1===e?xr[t].one:xr[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:Sr,formatRelative:function(t,e,n,r){return _r[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Cr({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Cr({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Cr({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Cr({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Cr({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Dr={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t,e){var n=String(t),r=e||{},i=n.match(Dr.matchPattern);if(!i)return null;var o=i[0],a=n.match(Dr.parsePattern);if(!a)return null;var s=Dr.valueCallback?Dr.valueCallback(a[0]):a[0];return{value:s=r.valueCallback?r.valueCallback(s):s,rest:n.slice(o.length)}}),era:Tr({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Tr({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Tr({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Tr({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Tr({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ar(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Pr={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return Ar("yy"===e?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):Ar(n+1,2)},d:function(t,e){return Ar(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.toUpperCase();case"aaaaa":return n[0];case"aaaa":default:return"am"===n?"a.m.":"p.m."}},h:function(t,e){return Ar(t.getUTCHours()%12||12,e.length)},H:function(t,e){return Ar(t.getUTCHours(),e.length)},m:function(t,e){return Ar(t.getUTCMinutes(),e.length)},s:function(t,e){return Ar(t.getUTCSeconds(),e.length)}},Mr=864e5;function Nr(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t),n=e.getUTCDay(),r=(n<1?7:0)+n-1;return e.setUTCDate(e.getUTCDate()-r),e.setUTCHours(0,0,0,0),e}function Vr(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Nr(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=Nr(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}var Ir=6048e5;function Rr(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t),n=Nr(e).getTime()-function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=Vr(t),n=new Date(0);return n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0),Nr(n)}(e).getTime();return Math.round(n/Ir)+1}function $r(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:dt(i),a=null==n.weekStartsOn?o:dt(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=ft(t),c=s.getUTCDay(),u=(c<a?7:0)+c-a;return s.setUTCDate(s.getUTCDate()-u),s.setUTCHours(0,0,0,0),s}function Fr(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=ft(t,e),r=n.getUTCFullYear(),i=e||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:dt(a),c=null==i.firstWeekContainsDate?s:dt(i.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,c),u.setUTCHours(0,0,0,0);var l=$r(u,e),h=new Date(0);h.setUTCFullYear(r,0,c),h.setUTCHours(0,0,0,0);var f=$r(h,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}var Br=6048e5;function Gr(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=ft(t),r=$r(n,e).getTime()-function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:dt(i),a=null==n.firstWeekContainsDate?o:dt(n.firstWeekContainsDate),s=Fr(t,e),c=new Date(0);return c.setUTCFullYear(s,0,a),c.setUTCHours(0,0,0,0),$r(c,e)}(n,e).getTime();return Math.round(r/Br)+1}var Lr="midnight",Ur="noon",Wr="morning",qr="afternoon",Hr="evening",zr="night";function Yr(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=e||"";return n+String(i)+a+Ar(o,2)}function Jr(t,e){return t%60==0?(t>0?"-":"+")+Ar(Math.abs(t)/60,2):Kr(t,e)}function Kr(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+Ar(Math.floor(i/60),2)+n+Ar(i%60,2)}var Xr={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Pr.y(t,e)},Y:function(t,e,n,r){var i=Fr(t,r),o=i>0?i:1-i;return"YY"===e?Ar(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):Ar(o,e.length)},R:function(t,e){return Ar(Vr(t),e.length)},u:function(t,e){return Ar(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ar(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ar(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return Pr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return Ar(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=Gr(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):Ar(i,e.length)},I:function(t,e,n){var r=Rr(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):Ar(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Pr.d(t,e)},D:function(t,e,n){var r=function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=n-e.getTime();return Math.floor(r/Mr)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):Ar(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Ar(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Ar(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return Ar(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?Ur:0===i?Lr:i/12>=1?"pm":"am",e){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?Hr:i>=12?qr:i>=4?Wr:zr,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Pr.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Pr.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):Ar(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):Ar(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Pr.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Pr.s(t,e)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds();return Ar(Math.floor(r*Math.pow(10,n-3)),n)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return Jr(i);case"XXXX":case"XX":return Kr(i);case"XXXXX":case"XXX":default:return Kr(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return Jr(i);case"xxxx":case"xx":return Kr(i);case"xxxxx":case"xxx":default:return Kr(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Yr(i,":");case"OOOO":default:return"GMT"+Kr(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Yr(i,":");case"zzzz":default:return"GMT"+Kr(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return Ar(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return Ar((r._originalDate||t).getTime(),e.length)}};function Qr(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function Zr(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}var ti={p:Zr,P:function(t,e){var n,r=t.match(/(P+)(p+)?/),i=r[1],o=r[2];if(!o)return Qr(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",Qr(i,e)).replace("{{time}}",Zr(o,e))}};function ei(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return function(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=ft(t).getTime(),r=dt(e);return new Date(n+r)}(t,-dt(e))}var ni=["D","DD","YY","YYYY"];var ri=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ii=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oi=/^'(.*?)'?$/,ai=/''/g;function si(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(e),i=n||{},o=i.locale||kr,a=o.options&&o.options.firstWeekContainsDate,s=null==a?1:dt(a),c=null==i.firstWeekContainsDate?s:dt(i.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=o.options&&o.options.weekStartsOn,l=null==u?0:dt(u),h=null==i.weekStartsOn?l:dt(i.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=ft(t);if(!function(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=ft(t);return!isNaN(e)}(f))throw new RangeError("Invalid time value");var p=ei(f,function(t){var e=new Date(t.getTime()),n=e.getTimezoneOffset();e.setSeconds(0,0);var r=e.getTime()%jr;return n*jr+r}(f)),d={firstWeekContainsDate:c,weekStartsOn:h,locale:o,_originalDate:f};return r.match(ii).map(function(t){var e=t[0];return"p"===e||"P"===e?(0,ti[e])(t,o.formatLong,d):t}).join("").match(ri).map(function(t){if("''"===t)return"'";var e=t[0];if("'"===e)return t.match(oi)[1].replace(ai,"'");var n,r=Xr[e];return r?(i.awareOfUnicodeTokens||(n=t,-1===ni.indexOf(n))||function(t){throw new RangeError("`options.awareOfUnicodeTokens` must be set to `true` to use `"+t+"` token; see: https://git.io/fxCyr")}(t),r(p,t,o.localize,d)):t}).join("")}class ci{constructor(t){this.defaultPatterns=t}formatValue(t,e,n){if(""===t||null===t)return"";switch(e){case"Decimal":case"Float":case"Currency":case"Integer":case"Long":if(!(t instanceof W))throw new Error(`Value '${t}' cannot be formatted as a numeric value.`);const r=n&&n,i=r&&r.groupDigits,o=r&&r.decimalPrecision,a="Decimal"===e||"Float"===e?void 0:"Currency"===e?2:0;return function(t,e,n){const r=t.lt(0),i=void 0!==n&&n<0?void 0:n;let[o,a=""]=t.toFixed(i).split(".");r&&(o=o.slice(1));e&&(o=function(t,e=3){const n=[];let r=t;for(;r.length>e;){const t=r.length-e;n.unshift(r.substring(t)),r=r.substring(0,t)}r&&n.unshift(r);return n.join(",")}(o));a&&(a="."+a);return(r?"-":"")+o+a}(t,i,void 0!==o?o:a);case"DateTime":if("number"!=typeof t)throw new Error(`Value '${t}' cannot be formatted as Date.`);const s=n,c=function(t){return"custom"===t.type}(s)?s.pattern:this.defaultPatterns[s.type];return si(new Date(t),function(t,e){const n=t.match(/(.)\1*/g)||[];return e.reduce((t,{existing:e,replacement:n})=>t.map(t=>t===e?n:t),n).join("")}(c,[{existing:"yyy",replacement:"yyyy"},{existing:"E",replacement:"e"},{existing:"EE",replacement:"ee"},{existing:"YYY",replacement:"YYYY"}]));case"Boolean":if("boolean"!=typeof t)throw new Error(`Value '${t}' cannot be formatted as boolean.`);return Lt("mxui.common",t.toString());default:if("string"!=typeof t)throw new Error(`Value '${t}' cannot be formatted as ${e}.`);return t}}parseValue(t,e,n){if(""===t)return"";switch(e.toLowerCase()){case"float":case"currency":case"integer":case"long":case"decimal":return function(t,e){let n;try{n=new W(t.replace(",",""))}catch(t){return null}return e&&e>=0?n.round(e):n}(t,n.decimalPrecision);case"enum":return t;case"boolean":return t===Lt("mxui.common","true");default:return t}}getDateFormatPlaceholder(t){return""}getI18nBundle(){}getDecimalSeparator(){return""}}function ui(t){const e=["get_session_data","login","logout"];let n,r=0;return async(i,o)=>{const a=r;try{return await o(i)}catch(s){const c=l(i.body)?i.body.action:void 0;if(!(s instanceof _t)||void 0!==c&&e.includes(c))throw s;if(a!==r)return o(i);if(n)return await n,o(i);n=t();try{await n}finally{n=void 0}return++r,o(i)}}}const li=t=>{if(null===t||"object"!=typeof t)return t;const e=Array.isArray(t)?[]:{};return Object.keys(t).forEach(n=>e[n]=li(t[n])),e};function hi(t){if(t.startsWith("data:"))return t;var e;/^\w+:\/\//.test(t)||(t=(e=t).startsWith("data:")?e:mx.appUrl+e);const n=mx.session.getConfig("cachebust");return t.startsWith(mx.appUrl)&&!t.endsWith(n)&&(t+=(/\?/.test(t)?"&":"?")+n),t}function fi(t,e,n){return mx.remoteUrl+function(t,e,n){let r="file?"+["guid="+t,"changedDate="+e].join("&");return n&&(r+="&thumb=true"),r}(t,e,n)}class pi{constructor(t,e,n){this.sessionStore=t,this.tokenStore=e,this.config=n,this.clientMetadata={}}isValid(){return void 0!==this.sessionData}getConfig(t){if(void 0===this.sessionData)throw new Error("Session is not available");if(!t)return li(this.sessionData);const e=t.split(".");let n=this.sessionData;for(let t=0;t<e.length&&n;t++)n=n[e[t]];return li(n)}getUserObject(){return this.userObject||(this.userObject=mn.fromJson(this.getConfig("user"))),this.userObject}isGuest(){return this.getUserObject().get("IsAnonymous")}getSessionObjectId(){return this.getConfig("sessionObjectId")}getUserId(){return this.getUserObject().getGuid()}getUserRoleNames(){return this.getConfig("roles")}hasSomeRole(t){if(void 0===t)return!0;const e=this.getUserRoleNames();return t.some(t=>e.indexOf(t)>-1)}getMicroflowInfo(t){return this.clientMetadata[t]}async login(t){const e=await(n=t.username,r=t.password,i=this.config.shouldGenerateToken,Pt($t(),{action:"login",params:{username:n,password:r,shouldgeneratetoken:i}}));var n,r,i;await this.sessionStore.remove(),e.authtoken&&await this.tokenStore.set(e.authtoken)}destroySession(t){t()}async logout(){try{const e=await this.tokenStore.get();await(t=e,Pt($t(),{action:"logout",params:t?{authtoken:t}:{}}))}catch(t){if(!(t instanceof xt))throw t}finally{await this.tokenStore.remove(),await this.sessionStore.remove()}var t}async startup(t){const e=await this.tokenStore.get();this.sessionParams=e?Object.assign({authtoken:e},t):t;const{sessionData:n,fromCache:r}=await this.loadSessionData();this.sessionData=n;const i=Boolean(n.sync_config);var o,a;return i&&await this.sessionStore.set(JSON.stringify(n)),Dt(e&&i?ui(this.restoreSessionOnUnauthorized.bind(this)):e?ui(async()=>mx.reload()):(o=this.failOnUnauthorized.bind(this),async(t,e)=>{try{return await e(t)}catch(e){const n=l(t.body)&&t.body.action;if(e instanceof _t&&"login"!==n)return await o(e);throw e}})),!n.sync_config&&n.keepalive&&setInterval(It,n.keepalive),Dt((a=(()=>s(this.sessionData).csrftoken),(t,e)=>{const n={url:t.url,init:Object.assign({},t.init,{headers:new Headers(t.init.headers)}),body:t.body};return n.init.headers.append("X-Csrf-Token",a()),e(n)})),await this.loadClientMetadata(),!r}onUnauthorized(t){return t}async loadSessionData(){const t=await this.sessionStore.get(),e=void 0!==t?JSON.parse(t):void 0;if(e&&e.cachebust===this.config.currentCacheBust)return{fromCache:!0,sessionData:e};try{return{fromCache:!1,sessionData:await Vt(s(this.sessionParams))}}catch(t){if(401===t.status)throw await this.sessionStore.remove(),await this.tokenStore.remove(),t;if(460!==t.status&&e)return{fromCache:!0,sessionData:e};throw t}}async loadClientMetadata(){const t=await At(hi("metamodel.json"),"json");Object.keys(t).forEach(e=>{const n=t[e];this.clientMetadata[e]={parameters:n.p},n.a&&(this.clientMetadata[e].followedAssociations=n.a.map(([t,e])=>({association:t,fromEntity:e})))})}async restoreSessionOnUnauthorized(){try{const{csrftoken:t}=await Vt(s(this.sessionParams));s(this.sessionData).csrftoken=t,await this.sessionStore.set(JSON.stringify(this.sessionData))}catch(t){if(!(t instanceof _t))throw t;await this.failOnUnauthorized(t)}}async failOnUnauthorized(t){return await this.sessionStore.remove(),await this.tokenStore.remove(),this.onUnauthorized(t.status),new Promise(()=>{})}}function di(t,e){return gi.inside((n,r,i)=>n.executeSql(t,e,(t,e)=>r(e.rows),(t,e)=>(i(e),!0))).chain(t=>{const e=[];for(let n=0;n<t.length;++n)e.push(t.item(n));return e})}class gi{constructor(){this.work=[]}chain(t){const e=new gi;return e.work.push(...this.work,{action:!1,item:t}),e}read(t){return this.execute((e,n)=>t.readTransaction(e,n))}execute(t){return new Promise((e,n)=>t(t=>{const r=Array.from(this.work);!function i(o){o instanceof gi&&(r.unshift(...o.work),o=void 0);const a=r.shift();if(!a)return void e(o);if(a.action)a.item(t,i,n);else try{const t=a.item(o);i(t)}catch(t){n(t)}}(t)},n))}static inside(t){const e=new gi;return e.work.push({action:!0,item:t}),e}}const mi=20,yi="_guidToTable",bi="guid",vi="readonlyAttrs",wi=[bi,vi],Oi="%",ji="_";function xi(t){return t.replace(".","$")}function Ei(t){if(void 0===t)return null;if(t instanceof W)return function(t){const e=mi-Math.max(0,t.e)-1,n=t.s<0?"-":"",r=new Array(e+1).join("0"),i=t.abs().toFixed();return n+r+i}(t);if(t instanceof Date)return Number(t);if("boolean"==typeof t)return function(t){return t?1:0}(t);if(Array.isArray(t))throw new a;return t}function Si(t,e){switch(e){case"DateTime":return t;case"Boolean":return Boolean(t);case"Decimal":case"Integer":case"Float":case"Long":return function(t){const e=t.startsWith("-")?"-":"",n=t.replace(/^-?0*/,"");return e+(""!==n?n:"0")}(t);default:return null!==t?String(t):null}}class _i{constructor(t){this.tableName=xi(t),this.fromClause=`FROM ${this.tableName} AS ${this.tableName}`}filtered(t){const{type:e,expr:n,params:r}=function t(e,n){switch(e.type){case"attribute":return{type:"Boolean"===e.attributeType||"DateTime"===e.attributeType?"int":"string",expr:`${n}.[${"id"!==e.attribute?xi(e.attribute):"guid"}]`,params:[]};case"value":const i=Ei(e.value);return null===i?{type:"null",expr:"NULL",params:[]}:{type:"number"==typeof i?"int":"string",expr:"?",params:[i]};case"function":const o=e.parameters.map(e=>t(e,n));switch(e.name){case"true":return Ci;case"false":return Ti;case"not":{const t=Di(o[0]);return{type:"int",expr:`(not ${t.expr})`,params:t.params}}case"or":case"and":{const t=o.map(Di);return{type:"int",expr:"("+t.map(t=>t.expr).join(` ${e.name} `)+")",params:Ai(...t)}}case"=":case"!=":case">":case">=":case"<":case"<=":{const[t,n]=o.some(t=>"int"===t.type)?o.map(ki):o,r="="===e.name?"is":"!="===e.name?"is not":e.name;return{type:"int",expr:`(${t.expr} ${r} ${n.expr})`,params:Ai(t,n)}}case"contains":case"starts-with":case"ends-with":{if("null"===o[1].type)return Ci;if("null"===o[0].type)return Ti;const t=`replace(${`replace(${`replace(${o[1].expr}, "${r="~"}", "${r+r}")`}, "${Oi}", "${r+Oi}")`}, "${ji}", "${r+ji}")`,n="starts-with"===e.name?`${t} || '${Oi}'`:"ends-with"===e.name?`'${Oi}' || ${t}`:`'${Oi}' || ${t} || '${Oi}'`;return{type:"int",expr:`(${o[0].expr} like ${n} escape '~')`,params:o[0].params.concat(o[1].params)}}case"length":case"string-length":return"null"===o[0].type?Ti:{type:"int",expr:`length(${o[0].expr})`,params:o[0].params};default:throw new a(`Operator ${e.name} is not yet supported`)}}var r}(t,this.tableName);"null"!==e&&(this.whereClause=`WHERE ${n}`,this.bindParameters=r||[])}sorted(t){const e=t.map(([t,e])=>`${this.tableName}.[${xi(t)}] ${e}`).join(", ");this.orderClause=e?`ORDER BY ${e}`:""}paged(t,e){this.limitClause=`LIMIT ${void 0!==e?e:-1} OFFSET ${t||0}`}selectWithMeta(t){return[["SELECT",t.map(t=>`${this.tableName}.[${xi(t)}] as "${xi(t)}"`).concat(wi.map(t=>`${yi}.[${t}] as "${yi}.${t}"`)).join(", "),this.fromClause,`JOIN ${yi} AS ${yi} USING (${bi})`,this.whereClause,this.orderClause,this.limitClause].filter(t=>t).join(" "),this.bindParameters||[]]}totalCount(){return[["SELECT count(*) AS count",this.fromClause,this.whereClause].filter(t=>t).join(" "),this.bindParameters||[]]}}const Ci={type:"int",expr:"1",params:[]},Ti={type:"int",expr:"0",params:[]};function Di(t){return"null"===t.type?{type:"int",expr:"0",params:[]}:t}function ki(t){return"string"===t.type?{type:"int",expr:`cast(${t.expr} as integer)`,params:t.params}:t}function Ai(...t){return[].concat(...t.map(t=>t.params))}class Pi{constructor(t,e){this.objectCache=t,this.database=e}async getByQuery(t,e,n){const r=mx.meta.getEntity(t),i=new _i(t);void 0!==e&&i.filtered(e),void 0===n.offset&&void 0===n.amount||i.paged(n.offset,n.amount),void 0!==n.sort&&i.sorted(n.sort);const{rows:o,count:a}=await di(...i.selectWithMeta(r.getAttributes())).chain(t=>di(...i.totalCount()).chain(e=>({rows:t,count:e[0].count}))).read(this.database),c=o.map(t=>(function(t,e){const n={guid:e[`${yi}.${bi}`],objectType:t.getEntity(),attributes:{}},r=JSON.parse(e[`${yi}.${vi}`]);return Object.keys(e).filter(t=>!t.startsWith(yi)).forEach(i=>{const o=function(t){return t.replace("$",".")}(i),a=t.getAttributeType(o);n.attributes[o]=Object.assign({value:Si(e[i],a)},r.includes(o)?{readonly:!0}:{})}),n})(r,t));return this.objectCache.setMxObjects(c),{mxobjs:c.map(t=>s(this.objectCache.getObject(t.guid))),count:a}}}const Mi="files/documents/",Ni="files/thumbnails/";function Vi(t,e){return t.replace(/:/g,"_")+"@"+(null!=e&&""!==e?e.toString():"local")}const Ii="GUID:",Ri=new RegExp("^"+Ii);function $i(t){return!Ri.test(t)}function Fi(t){return"guid"===t||"$"===t[0]}function Bi(t,e){return t.$readonlyAttrs.includes(e)}function Gi(t){const e=Object.keys(t).filter(t=>!Fi(t)).reduce((e,n)=>(e[n]={value:t[n]},Bi(t,n)&&(e[n].readonly=!0),e),{});return{guid:t.guid,objectType:t.$objectType,attributes:e}}function Li(t){const e={guid:t.guid,$objectType:t.objectType,$readonlyAttrs:[]};for(const n in t.attributes)e[n]=t.attributes[n].value,t.attributes[n].readonly&&e.$readonlyAttrs.push(n);return e}var Ui=n(6);class Wi{getByGuid(t,e){return Promise.reject(new Ut("getByGuid"))}getByPath(t,e,n,r){return Promise.reject(new Ut("getByPath"))}getByXPath(t,e,n){return Promise.reject(new Ut("getByXPath"))}getSlice(t,e,n,r){return Promise.reject(new Ut("getSlice"))}action(t,e,n,r,i){return Promise.reject(new Ut("action"))}create(t){return Promise.reject(new Ut("create"))}commit(t,e,n,r){return Promise.reject(new Ut("commit"))}rollback(t){return Promise.reject(new Ut("rollback"))}remove(t){return Promise.reject(new Ut("remove"))}validate(t){return Promise.reject(new Ut("validate"))}saveDocument(t,e,n,r){return Promise.reject(new Ut("saveDocument"))}generateReport(t,e,n,r){return Promise.reject(new Ut("generateReport"))}generateExcelReport(t,e){return Promise.reject(new Ut("generateExcelReport"))}getReportParameters(t){return Promise.reject(new Ut("getReportParameters"))}getDocumentUrl(t,e,n){throw new Ut("getDocumentUrl")}getImageUrl(t){return Promise.reject(new Ut("getImageUrl"))}upload(){return Promise.reject(new Ut("upload"))}download(t){return Promise.reject(new Ut("download"))}cleanupDirtyObjects(){return Promise.reject(new Ut("cleanupDirtyObjects"))}isDirty(t){throw new Ut("isDirty")}cleanup(){return Promise.reject(new Ut("cleanup"))}}const qi={String:null,Integer:"0",Long:"0",Decimal:"0",Float:"0",Currency:"0",Enum:null,HashString:null,ObjectReference:null,DateTime:null,Boolean:!1,AutoNumber:"0",Binary:null};class Hi extends Wi{constructor(t,e,n,r,i){super(),this._store=e,this._getDocumentUrl=i||Ji,this._objectCache=t,this._fileBackend=n,this._synchronizer=r,this._dirtyGuids=[]}async initialize(){const t=await this._store.fetchDirty();this._dirtyGuids=t.map(t=>t.guid)}async getByGuid(t,e){const n=(await Promise.all(t.map(t=>this._getByGuid(t)))).filter(t=>null!=t).map(t=>Gi(t));return this._objectCache.setMxObjects(n),{mxobjs:n.map(({guid:t})=>this._objectCache.getObject(t)),count:n.length}}async getByPath(t,e,n,r){if("reverse"===r){const r=this._objectCache.getAllObjects().filter(n=>n.getReferences(e).includes(t)),{mxobjs:i}=await this.getSlice(n,[{attribute:e,operator:"equals",value:t}]),o=i.filter(n=>n.getReferences(e).includes(t)).filter(t=>!r.some(e=>e.guid===t.getGuid()));this._objectCache.setMxObjects(o.map(t=>t.jsonData));const a=r.concat(o);return{mxobjs:a,count:a.length}}{let n=this._objectCache.getObject(t);if(!n){const{mxobjs:[e]}=await this.getByGuid([t]);e&&(n=e)}if(!n)return{mxobjs:[],count:0};const r=n.getReferences(e),i=r.map(t=>this._objectCache.getObject(t)).filter(t=>null!==t),o=r.filter(t=>!this._objectCache.has(t)),{mxobjs:a}=await this.getByGuid(o),s=a.concat(i);return this._objectCache.setMxObjects(a.map(t=>t.jsonData)),{mxobjs:s,count:s.length}}}async getSlice(t,e,n,r){const i=window.mx.meta.getEntity(t),o=(e||[]).map(t=>(t.attribute&&i.isReference(t.attribute)&&(t.value=this._synchronizer.getInternalGuid(t.value)),t)),[a,s]=await this._store.getSlice(t,o,n),c=a.map(this._synchronizer.makeObjectExternal,this._synchronizer).map(Gi);let u=[];return r?(this._objectCache.setMxObjects(c),u=c.map(t=>this._objectCache.getObject(t.guid))):u=c.map(mn.fromJson),{mxobjs:u,count:s}}create(t){const e=Ii+Object(un.g)();return this._objectCache.onCreate([e]),this._objectCache.setMxObjects([Yi(e,t)]),Promise.resolve(this._objectCache.getObject(e))}async commit(t,e){const n=Object(un.j)(t.map(t=>[t,this._objectCache.getChanges(t)])),[r,i]=Object(un.l)(t=>this._objectCache.has(t),t),o=r.map(t=>this._objectCache.getObject(t)),[a,s]=Object(un.l)(t=>t.isPersistable(),o),c=a.map(zi),u=(await Promise.all(i.map(t=>this._getByGuid(t)))).concat(c).map(h);u.length>0&&(await this._store.insertOrReplace(u.map(this._synchronizer.makeObjectInternal,this._synchronizer)),this._dirtyGuids.push(...u.map(t=>t.guid)),this._objectCache.setMxObjects(u.map(t=>Gi(t))));const l=s.map(zi).map(h);return this._objectCache.setMxObjects(l.map(t=>Gi(t))),this._objectCache.onCommit(t),this._objectCache.removeChanges(function(t){const e={};return Object.keys(t).forEach(n=>{e[n]=Object.keys(t[n])}),e}(n)),{};function h(t){return Object.assign({},t,Object(un.i)(n[t.guid],t=>t.value))}}rollback(t){this._objectCache.removeAllChanges(t);const e=t.filter(t=>this._objectCache.isNew(t));return this._objectCache.removeObjects(e),Promise.resolve({})}validate(t){return Promise.resolve({})}async saveDocument(t,e,n,r){if(r.size/1048576>n.maxFileSize)throw new Ui.a("File too large");const i=await this._getByGuid(t),o=Vi(this._synchronizer.getInternalGuid(t),i?i.changedDate:void 0);await this._fileBackend.storeFile(r,Mi+o),this._objectCache.makeChange(t,"HasContents",!0),await this.commit([t],null)}getDocumentUrl(t,e,n){return this._getDocumentUrl(Vi(this._synchronizer.getInternalGuid(t),e),e,n)}getImageUrl(t){return Promise.resolve(t)}upload(){return this._synchronizer.upload()}async download(t){await this._synchronizer.download(t),this._dirtyGuids=[]}cleanupDirtyObjects(){return this._store.cleanupDirtyObjects()}isDirty(t){return this._dirtyGuids.includes(t)}async cleanup(){await this._store.cleanDatabase(),await this._fileBackend.removeDir(Mi),await this._fileBackend.removeDir(Ni),this._dirtyGuids=[]}_getByGuid(t){return this._store.getByGuid(this._synchronizer.getInternalGuid(t)).then(t=>this._synchronizer.makeObjectExternal(t))}}function zi(t){return Li(t.jsonData)}function Yi(t,e){const n={guid:t,objectType:e,attributes:{}},r=window.mx.meta.getEntity(e);return r.getAttributes().forEach(t=>{n.attributes[t]={value:qi[r.getAttributeType(t)]}}),n}function Ji(t,e,n){var r=n?"thumbnails":"documents";return"filesystem:"+window.mx.appUrl+"temporary/files/"+r+"/"+t+"?"+ +new Date}const Ki="~",Xi='"';class Qi{constructor(t,e){this._select=e&&e.select||t&&t._select||null,this._from=e&&e.from||t&&t._from||null,this._join=e&&e.join||t&&t._join||null,this._constraints=e&&e.constraints||t&&t._constraints||[],this._orderBy=e&&e.orderBy||t&&t._orderBy||[],this._limit=e&&e.limit||t&&t._limit||null,this._offset=e&&e.offset||t&&t._offset||null}from(t){return new Qi(this,{from:t})}join(t,e,n){return new Qi(this,{join:{tableName:t,joinOnColumn:e,selectedColumns:n}})}where(t){return new Qi(this,{constraints:this._constraints.concat(t)})}order(t,e){return new Qi(this,{orderBy:this._orderBy.concat([[t,e]])})}limit(t){return new Qi(this,{limit:t})}offset(t){return new Qi(this,{offset:t})}selectDistinct(t){return Array.isArray(t)&&(t=t.join(", ")),`SELECT DISTINCT ${t} ${this._buildSql()}`}selectCount(t){return`SELECT COUNT(*) AS ${t}`+this._buildSql()}select(){let t=`SELECT ${this._from}.*`;return this._join&&this._join.selectedColumns.forEach(e=>{t+=`, ${this._join.tableName}.[${e}] as "${this._join.tableName}.${e}"`}),t+this._buildSql()}_buildSql(){let t=` FROM ${this._from} AS ${this._from}`;return this._join&&(t+=` JOIN ${this._join.tableName} AS ${this._join.tableName} USING (${this._join.joinOnColumn})`),this._constraints.length>0&&(t+=" WHERE "+this._constraints.map(t=>t.build(this._from)).join(" AND ")),this._orderBy.length>0&&(t+=" ORDER BY "+this._orderBy.map(t=>`${this._from}.[${t[0]}] ${t[1]}`).join(", ")),this._limit&&(t+=" LIMIT "+this._limit),this._offset&&(t+=" OFFSET "+this._offset),t}}const Zi={equals:io("="),lessThan:io("<"),lessThanOrEquals:io("<="),greaterThan:io(">"),greaterThanOrEquals:io(">="),contains:function(t){let e="";return e+=t,e+=" LIKE '%' || ? || '%'",e+=" ESCAPE '"+Ki+"'"}};class to{constructor(t,e,n){this._column=t,this._operator=e,this._negate=!!n}build(t){const e=Zi[this._operator],n=this._column.indexOf(".")>-1?this._column:`${t}.[${this._column}]`;return(this._negate?"NOT ":"")+e(n)}}class eo{constructor(t,e){this._column=t,this._negate=!!e}build(t){return(this._column.indexOf(".")>-1?this._column:`${t}.[${this._column}]`)+" IS "+(this._negate?"NOT ":"")+"NULL"}}class no{constructor(t,e){this.group=t,this.constraints=e||[]}add(t){this.constraints.push(t)}build(t){return"("+this.constraints.map(e=>e.build(t)).join(` ${this.group} `)+")"}}const ro={and:t=>new no("and",t),or:t=>new no("or",t),equals:(t,e)=>new to(t,"equals",e),isNull:(t,e)=>new eo(t,e),lessThan:(t,e)=>new to(t,"lessThan",e),lessThanOrEquals:(t,e)=>new to(t,"lessThanOrEquals",e),greaterThan:(t,e)=>new to(t,"greaterThan",e),greaterThanOrEquals:(t,e)=>new to(t,"greaterThanOrEquals",e),contains:(t,e)=>new to(t,"contains",e)};function io(t){return function(e){return e+" "+t+" ?"}}function oo(t,e){this._tableName=e&&e.tableName||t&&t._tableName||null,this._columns=e&&e.columns||t&&t._columns||[]}function ao(t){return Xi+t+Xi}function so(t,e){if(!(this instanceof so))return new so;this._tableName=e&&e.tableName||t&&t._tableName||null,this._columnNames=e&&e.columnNames||t&&t._columnNames||[]}function co(t){return Xi+t+Xi}function uo(t){this.fork=t}oo.prototype.table=function(t){return new oo(this,{tableName:t})},oo.prototype.column=function(t,e){return new oo(this,{columns:this._columns.concat({columnName:t,columnType:e,isPrimary:!1})})},oo.prototype.primaryKeyColumn=function(t,e){return new oo(this,{columns:this._columns.concat({columnName:t,columnType:e,isPrimary:!0})})},oo.prototype.createIfNotExists=function(){var t="";return t+="CREATE TABLE IF NOT EXISTS "+ao(this._tableName),t+=this._buildSql()},oo.prototype._buildSql=function(){var t="";return this._columns.length>0&&(t+=" (",t+=this._columns.map(function(t){return[ao(t.columnName),t.columnType,"text"===t.columnType?" COLLATE NOCASE ":"",t.isPrimary?"PRIMARY KEY ":""].join(" ").slice(0,-1)},this).join(", "),t+=")"),t},so.prototype.into=function(t){return new so(this,{tableName:t})},so.prototype.column=function(t){return new so(this,{columnNames:this._columnNames.concat(t)})},so.prototype.insert=function(){var t="";return t+="INSERT INTO "+co(this._tableName),t+=this._buildSql()},so.prototype.insertOrReplace=function(){var t="";return t+="INSERT OR REPLACE INTO "+co(this._tableName),t+=this._buildSql()},so.prototype._buildSql=function(){var t="";return this._columnNames.length>0&&(t+=" (",t+=this._columnNames.map(co).join(", "),t+=")"),t+=" VALUES (",t+="?"+new Array(this._columnNames.length).join(", ?"),t+=")"},uo.of=function(t){return new uo(function(e,n){n(t)})},uo.prototype.chain=function(t){var e=this;return new uo(function(n,r){e.fork(n,function(e){t(e).fork(n,r)})})},uo.prototype.orElse=function(t){var e=this;return new uo(function(n,r){e.fork(function(e){t(e).fork(n,r)},r)})},uo.prototype.ap=function(t){var e,n,r,i=this,o=2;return new uo(function(a,s){function c(){0==--o&&s(e(n))}function u(t){void 0===r&&a(r=t)}i.fork(u,function(t){e=t,c()}),t.fork(u,function(t){n=t,c()})})},uo.prototype.map=function(t){return this.chain(function(e){return uo.of(t(e))})},uo.rejected=uo.prototype.rejected=function(t){return new uo(function(e,n){e(t)})},uo.parallel=function(t){return new uo(function(e,n){var r,i=t.length,o=new Array(t.length);0!==t.length?t.forEach(function(t,a){t.fork(function(t){void 0===r&&(r=t,e(t))},function(t){return function(e){o[t]=e,void 0===r&&0==--i&&n(o)}}(a))}):n(o)})},uo.sequence=function(t){return t.reduce(function(t,e){return t.chain(function(t){return e})},uo.of(null))};const lo=new function(t){function e(t){this.run=t}return e.prototype.chain=function(t){return new e(function(e){return this.run(e).chain(function(n){return t(n).run(e)})}.bind(this))},e.prototype.ap=function(t){return new e(function(e){return this.run(e).ap(t.run(e))}.bind(this))},e.prototype.map=function(t){return this.chain(function(n){return e.of(t(n))})},e.of=function(n){return new e(function(e){return t.of(n)})},e.ask=function(){return new e(t.of)},e}(uo);lo.rejected=function(t){return new lo(function(e){return uo.rejected(t)})},lo.parallel=function(t){return new lo(e=>new uo((n,r)=>{if(0===t.length)return void r([]);const i=new Array(t.length);let o=t.length,a=!1;t.forEach((t,s)=>{t.run(e).fork(t=>{a||(a=!0,n(t))},t=>{i[s]=t,a||0!=--o||r(i)})})}))},lo.sequence=function(t){return t.reduce((t,e)=>t.chain(t=>e.map(e=>t.concat([e]))),lo.of([]))};const ho="_guidToTable",fo={String:"text",Integer:"text",Long:"text",Decimal:"text",Float:"text",Currency:"text",Enum:"text",HashString:"text",ObjectReference:"text",DateTime:"integer",Boolean:"integer",AutoNumber:"integer",Binary:"blob"},po={String:Eo,Integer:xo,Long:xo,Decimal:xo,Float:xo,Currency:xo,Enum:Eo,HashString:Eo,ObjectReference:Eo,DateTime:function(t){return null!=t?Number(t):null},Boolean:Number,AutoNumber:Eo,Binary:Eo},go={String:Eo,Integer:Eo,Long:Eo,Decimal:Eo,Float:Eo,Currency:Eo,Enum:Eo,HashString:Eo,ObjectReference:Eo,DateTime:So,Boolean:Boolean,AutoNumber:Eo,Binary:Eo},mo={String:So,Integer:So,Long:So,Decimal:So,Float:So,Currency:So,Enum:So,HashString:So,ObjectReference:So,DateTime:function(t){return t?Number(t):null},Boolean:function(t){return"false"!==t},AutoNumber:So,Binary:So};function yo(t,e,n,r,i){e=e||[],i=i||[];const o=window.mx.meta.getEntity(t),a=function(t,e){const n=[];return{builder:(new Qi).where(e.map(function e(r){if(r.constraints)return ro[r.operator](r.constraints.map(e).filter(t=>null!==t));if(null==r.value)switch(r.operator){case"contains":return null;case"equals":return ro.isNull(Co(r.attribute),r.negate)}const i=t.getAttributeType(r.attribute);const o=mo[i];const a=po[i];const s=a(o(r.value));n.push("contains"===r.operator?(c=s,u=Ki,c.replace(new RegExp(u,"g"),u+u).replace(/%/g,u+"%").replace(/_/g,u+"_")):s);var c,u;return ro[r.operator](Co(r.attribute),r.negate)}).filter(t=>null!==t)),args:n}}(o,e),s=a.builder.from(Co(t)),c=a.args;let u=s.offset(n).limit(r).join(ho,"guid",["dirty","readonlyAttrs"]);var l=Ao((u=i.reduce(function(t,e){return t.order(e[0],e[1])},u)).select(),c).map(function(t){const e=[];for(let n=0;n<t.rows.length;++n){const r=t.rows.item(n),i=Boolean(r[`${ho}.dirty`]),a=ko(r,"readonlyAttrs");e.push(Do(o,i,a,r))}return e}),h=Ao(s.selectCount("cnt"),c).map(function(t){return t.rows.item(0).cnt});return lo.parallel([l,h])}function bo(t,e){const n=function(t){var e=[ho].concat(t).map(Co).map(function(t){return"DROP TABLE IF EXISTS '"+t+"'"}).map(function(t){return Ao(t,[])});return lo.sequence([lo.parallel(e),vo(t)])}(t),r=t.map(t=>{const n=e.filter(e=>e.$objectType===t);return function(t,e){var n=e.reduce(function(e,n){var r=Oo(),i=jo(t,n);return e.concat([Ao(r.insert(),[n.guid,t,0,JSON.stringify(n.$readonlyAttrs)]),Ao(i.builder.insert(),i.values)])},[]);return lo.parallel(n).map(t=>void 0)}(t,n)});return lo.sequence([n,lo.parallel(r)]).map(t=>void 0)}function vo(t){var e,n=[(e=(new oo).table(ho).primaryKeyColumn("guid","text").column("tableName","text").column("dirty","boolean").column("readonlyAttrs","text").createIfNotExists(),Ao(e,[]))].concat(t.map(function(t){return Ao(function(t){var e=window.mx.meta.getEntity(t);return e.getAttributes().map(function(t){var n=e.getAttributeType(t);return{attr:t,type:fo[n]}})}(t).reduce(function(t,e){return t.column(Co(e.attr),e.type)},(new oo).table(Co(t)).primaryKeyColumn("guid","text")).createIfNotExists(),[])}));return lo.parallel(n).map(t=>void 0)}function wo(){return Ao((new Qi).from(ho).where(ro.equals("dirty")).selectDistinct("tableName"),[1])}function Oo(){return(new so).into(ho).column("guid").column("tableName").column("dirty").column("readonlyAttrs")}function jo(t,e){var n=window.mx.meta.getEntity(t),r=n.getAttributes().reduce(function(t,r){var i=n.getAttributeType(r),o=po[i];if(!o)return t;var a=o(e[r]);return{attrs:t.attrs.concat([r]),values:t.values.concat([a])}},{attrs:["guid"],values:[e.guid]});return{builder:r.attrs.reduce(function(t,e){return t.column(Co(e))},(new so).into(Co(t))),values:r.values}}function xo(t){if(null==t)return null;var e=new q(t),n=20-Math.max(0,e.e)-1;return(e.s<0?"-":"")+new Array(n+1).join("0")+e.abs().toFixed()}function Eo(t){return null!=t?String(t):null}function So(t){return t}function _o(t){for(var e=[],n=0;n<t.length;++n)e.push(t.item(n));return e}function Co(t){return t.replace(".","$")}function To(t){return t.replace("$",".")}function Do(t,e,n,r){const i={guid:r.guid,$objectType:t.getEntity(),$dirty:e,$readonlyAttrs:JSON.parse(n)};for(const e in r){if("guid"===(o=e)||o.indexOf(".")>-1)continue;const n=To(e),a=t.getAttributeType(n),s=go[a];s&&(i[n]=s(r[e]))}var o;return i}function ko(t,e){return t[`${ho}.${e}`]}function Ao(t,e){return e=e||[],new lo(function(n){return new uo(function(r,i){n.executeSql(t,e,(t,e)=>i(e),(t,e)=>r(e))})})}const Po=No("readTransaction"),Mo=No("transaction");function No(t){return function(e,n){return new uo(function(r,i){var o,a=2;e[t](function(t){n.run(t).fork(r,function(t){o=t,0==--a&&i(o)})},r,function(){0==--a&&i(o)})})}}function Vo(t){return new Promise(function(e,n){t.fork(n,e)})}class Io{constructor(t,e){this._tableNames=t;const n=vo(this._tableNames);this._databasePromise=Vo(Mo(e,n)).then(()=>e)}async getByGuid(t){const e=await this._databasePromise,n=function(t){return Ao((new Qi).from(ho).where(ro.equals("guid")).select(),[t]).chain(function(e){if(0===e.rows.length)return lo.of(null);if(1!==e.rows.length)return lo.rejected(new Error("db consistency error"));const n=e.rows.item(0),r=n.tableName,i=Boolean(n.dirty),o=n.readonlyAttrs;return Ao((new Qi).from(Co(r)).where(ro.equals("guid")).select(),[t]).chain(function(t){return 0===t.rows.length?lo.rejected(new Error("entity not found")):1!==t.rows.length?lo.rejected(new Error("db consistency error")):lo.of(Do(window.mx.meta.getEntity(r),i,o,t.rows.item(0)))})})}(t);return Vo(Po(e,n))}async getSlice(t,e,n={}){const r=await this._databasePromise,i=yo(t,e,n.offset,n.limit,n.sort);return Vo(Po(r,i))}async rebuildDatabase(t){const e=await this._databasePromise,n=bo(this._tableNames,t);return Vo(Mo(e,n))}async insertOrReplace(t){const e=await this._databasePromise,n=function(t){return lo.parallel(t.map(t=>{const e=t.$objectType,n=Oo(),r=jo(e,t);return[Ao(n.insertOrReplace(),[t.guid,e,1,JSON.stringify(t.$readonlyAttrs)]),Ao(r.builder.insertOrReplace(),r.values)]}).reduce((t,e)=>t.concat(e),[])).map(t=>void 0)}(t);return Vo(Mo(e,n))}async cleanDatabase(){const t=await this._databasePromise,e=(n=this._tableNames,r=[ho].concat(n).map(Co).map(t=>`DELETE FROM '${t}'`).map(t=>Ao(t,[])),lo.parallel(r).map(t=>void 0));var n,r;return Vo(Mo(t,e))}async fetchDirty(){const t=await this._databasePromise,e=wo().chain(function(t){const e=_o(t.rows).map(({tableName:t})=>{const e=(new Qi).from(Co(t)).join(ho,"guid",["dirty","readonlyAttrs"]).where(ro.equals(`${ho}.dirty`)).select(),n=window.mx.meta.getEntity(t);return Ao(e,[1]).map(t=>_o(t.rows).map(t=>Do(n,!0,ko(t,"readonlyAttrs"),t)))});return lo.parallel(e)}).map(t=>t.reduce((t,e)=>t.concat(e),[]));return Vo(Po(t,e))}async makeClean(t){const e=await this._databasePromise,n=function(t){var e=t.map(t=>Ao(`UPDATE ${ho} set dirty = 0 where guid = ?`,[t.guid]));return lo.parallel(e).map(t=>void 0)}(t);return Vo(Mo(e,n))}async cleanupDirtyObjects(){const t=await this._databasePromise,e=wo().chain(function(t){var e=_o(t.rows).map(function(t){var e=t.tableName;return Ao(`DELETE FROM ${Co(e)} WHERE guid IN (\n                            SELECT guid FROM ${ho} WHERE tableName = ? AND dirty = 1)`,[e])});return lo.sequence([lo.parallel(e),Ao(`DELETE FROM ${ho} WHERE dirty = 1`)]).map(t=>void 0)});return Vo(Mo(t,e))}}class Ro extends Ui.a{constructor(t){super(t),Object.setPrototypeOf(this,Ro.prototype)}}class $o extends Error{constructor(t="Could temporarily not synchronize data. Please try again later."){super(t),Object.setPrototypeOf(this,$o.prototype)}}class Fo{constructor(t,e,n){this._store=t,this._fileBackend=e,this._objectCache=n,this._internalToExternal={}}async upload(){try{await this._upload()}catch(t){throw window.mx.logger.warn(t),t instanceof xt?new $o:t instanceof Ro?t:new Tn}}async download(t){try{await this._download(t)}catch(t){throw window.mx.logger.warn(t),t instanceof xt?new $o:new Tn}}async _upload(){const t=this._fileBackend,e=await this._store.fetchDirty();if(0===e.length)return{};!function(t){const e=t.map(t=>t.guid),n=Object(un.m)(t.map(t=>y(t).map(([t,e])=>e)).reduce((t,e)=>t.concat(e),[])).filter(t=>!$i(t)).filter(t=>!e.includes(t));if(n.length>0){const e=Object(un.m)(t.map(t=>y(t).filter(([t,e])=>n.includes(e)).map(([e,n])=>`object of type ${t.$objectType} (reference ${e})`)).reduce((t,e)=>t.concat(e),[])).join(", "),r=`Sync has failed due to a modeling error. Your database contains objects that reference uncommitted objects:\n${e}.`;throw new Ro(r)}}(e);const[n,r]=Object(un.l)(t=>$i(t.guid),e),i=e.filter(function(t){return window.mx.meta.getEntity(t.$objectType).isA("System.FileDocument")&&t.HasContents}),[o,a]=await Promise.all([Promise.all(i.map(async function(e){const n=Mi+Vi(e.guid,e.changedDate),r=await t.readFile(n);return{tempGuid:(await lr("__sync__","",r,2)).commits[0],fileObjGuid:e.guid}})),Promise.all(r.map(function(t){return(e=t.$objectType,Pt($t(),{action:"instantiate",params:{objecttype:e},changes:n,objects:r})).then(e=>{const n=e.objects.find(t=>t.guid===e.actionResult);return{internalObj:t,remoteJson:n}});var e,n,r}))]),s=Object(un.j)(a.map(({internalObj:t,remoteJson:e})=>[t.guid,e.guid])),c=Object(un.j)(o.map(({tempGuid:t,fileObjGuid:e})=>$i(e)?[t,e]:[t,s[e]])),u=n.map(t=>t.guid).concat(a.map(({remoteJson:t})=>t.guid)),l=a.map(({remoteJson:t})=>t),h=Object(un.j)(e.map(t=>(function(t,e){const n=window.mx.meta.getEntity(t.$objectType),r=Object.keys(t).filter(function(e){return!Fi(e)&&n.isSyncable(e)&&!Bi(t,e)}).map(r=>{const i=t[r],o=n.isObjectReference(r)&&null!=i&&!$i(i)?e[i]:i;return[r,{value:o}]});return[$i(t.guid)?t.guid:e[t.guid],Object(un.j)(r)]})(t,s))),f=await(p=u,d=c,g=h,m=l,Pt($t(),{action:"synchronize",params:{guids:p,fileGuidMapping:d},changes:g,objects:m}));var p,d,g,m;return await this._store.makeClean(e),await Promise.all(i.map(async e=>{const n=s[e.guid]||e.guid,r=f.objects.find(t=>t.guid===n).attributes.changedDate.value,i=Mi+Vi(e.guid,e.changedDate),o=Mi+Vi(n,r);await t.moveFile(i,o)})),Object(un.a)(s).forEach(([t,e])=>this._mapInternalGuid(t,e)),{};function y(t){const e=window.mx.meta.getEntity(t.$objectType);return Object(un.a)(t).filter(([t,n])=>"guid"===t||!Fi(t)&&e.isReference(t))}}async _download(t){const e=Object(un.f)(await Promise.all(t.map(({store:t,xpath:e})=>(async function(t,e,n){const r=await function(t,e={},n=!1){return Pt($t(),{action:"retrieve_by_xpath",params:{xpath:t,schema:e,count:n}})}(n);return r.resultGuids.map(t=>r.objects.find(e=>e.guid===t)).map(Li).map(t=>Object.assign({},t,{$objectType:e}))})(this._objectCache,t,e)))),[n,r]=await l(this._fileBackend,e,!1),[i,o]=await l(this._fileBackend,e,!0);await Promise.all(n.concat(i).map(({source:t,destination:e})=>this._fileBackend.downloadFile(t,e))),await this._store.rebuildDatabase(e),Promise.all(r.concat(o).map(t=>this._fileBackend.removeFile(t))).catch(window.mx.onError);const a=e.map(this.makeObjectExternal,this),s=this._objectCache.getAllObjects().filter(t=>t.isPersistable()&&!this._objectCache.isNew(t.getGuid())).map(t=>[a.find(e=>e.guid===t.getGuid()),t]),[c,u]=Object(un.l)(([t])=>void 0!==t,s);return this._objectCache.setMxObjects(c.map(([t])=>Gi(t))),this._objectCache.onDelete(u.map(([t,e])=>e.getGuid())),await fn(...t.map(({store:t})=>({entity:t})),...c.map(([{guid:t}])=>({guid:t})),...u.map(([t,e])=>({guid:e.getGuid()}))),{};async function l(t,e,n){const r=n?Ni:Mi,i=e.filter(t=>window.mx.meta.getEntity(t.$objectType).isA(n?"System.Image":"System.FileDocument")).filter(t=>t.HasContents).map(t=>({source:fi(t.guid,t.changedDate,n),destination:r+Vi(t.guid,t.changedDate)})),o=(await t.listDir(r)).map(t=>r+t);return[i.filter(t=>!o.includes(t.destination)),o.filter(t=>!i.find(e=>e.destination===t))]}}getExternalGuid(t){return this._internalToExternal[t]||t}getInternalGuid(t){for(const e in this._internalToExternal)if(this._internalToExternal[e]===t)return e;return t}makeObjectExternal(t){return Bo(t,this.getExternalGuid.bind(this))}makeObjectInternal(t){return Bo(t,this.getInternalGuid.bind(this))}_mapInternalGuid(t,e){this._internalToExternal[e]=t}}function Bo(t,e){if(null===t)return null;const n=window.mx.meta.getEntity(t.$objectType);return Object(un.i)(t,(t,r)=>{return("guid"===r||!Fi(r)&&n.isReference(r))&&null!=t?e(t):t})}var Go="<unknown>";function Lo(t){return t.split("\n").reduce(function(t,e){var n=function(t){var e=Uo.exec(t);if(!e)return null;var n=e[2]&&0===e[2].indexOf("native"),r=e[2]&&0===e[2].indexOf("eval"),i=Wo.exec(e[2]);r&&null!=i&&(e[2]=i[1],e[3]=i[2],e[4]=i[3]);return{file:n?null:e[2],methodName:e[1]||Go,arguments:n?[e[2]]:[],lineNumber:e[3]?+e[3]:null,column:e[4]?+e[4]:null}}(e)||function(t){var e=qo.exec(t);if(!e)return null;return{file:e[2],methodName:e[1]||Go,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}}(e)||function(t){var e=Ho.exec(t);if(!e)return null;var n=e[3]&&e[3].indexOf(" > eval")>-1,r=zo.exec(e[3]);n&&null!=r&&(e[3]=r[1],e[4]=r[2],e[5]=null);return{file:e[3],methodName:e[1]||Go,arguments:e[2]?e[2].split(","):[],lineNumber:e[4]?+e[4]:null,column:e[5]?+e[5]:null}}(e)||function(t){var e=Yo.exec(t);if(!e)return null;return{file:e[2],methodName:e[1]||Go,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}}(e);return n&&t.push(n),t},[])}var Uo=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Wo=/\((\S*)(?::(\d+))(?::(\d+))\)/;var qo=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var Ho=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,zo=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;var Yo=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;const Jo=r.NativeModules.NativeFsModule.DocumentDirectoryPath;async function Ko(t,e,n,i,o){const a=new br,s=new pi(new Xt("session"),new Xt("token"),{currentCacheBust:e,shouldGenerateToken:!0}),c=new yr,u=new hr({garbageCollectionInterval:1e4,logCleanupStatistics:!1},a),l=new ci(i),h=new gr;window.mx={appUrl:"resources://",data:u,homeUrl:"not-supported",isOffline:()=>!0,logger:h,login:Xo,logout:Qo,meta:c,onError:t=>r.NativeModules.NativeErrorHandler.handle(t.message,Lo(t.stack)),parser:l,reload:()=>r.NativeModules.NativeReloadHandler.reload(),remoteUrl:t,session:s,ui:new Qe,version:"{{mendix-version}}"},function(t){Dt((e,n)=>{if(!e.url.startsWith(window.mx.appUrl))return n(e);let r;if((r=-1===e.url.indexOf("?")?e.url.substring(window.mx.appUrl.length):e.url.substring(window.mx.appUrl.length,e.url.indexOf("?")))in t){const e=t[r]();return Promise.resolve(new Response(JSON.stringify(e),{status:200,statusText:"OK"}))}return Promise.reject(new Error(`Failed to locate resource ${r}`))})}(n);const f=await s.startup({hybrid:!0,offline:!0,profile:o?"HybridPhoneOffline":"NativePhone",timezoneoffset:(new Date).getTimezoneOffset()});if(s.getConfig("isDevModeEnabled")){const e=new pr(t);e.connect(),e.addOnReload(Zo),h.addHandler((t,...n)=>{e.log(t,...n)}),new r.NativeEventEmitter(r.NativeModules.NativeReloadHandler).addListener("reloadWithState",Zo)}c.startup();const p=en.openDatabase("MendixDatabase","1","Mendix Database",-1),d=new wr,{offlineData:g,dataBackend:m}=await async function(t,e,n,r){const i=new Io(window.mx.session.getConfig("sync_config.schema"),e),o=new Fo(i,n,t),a=new Hi(t,i,n,o,r);return await a.initialize(),{dataBackend:a,offlineData:new Pi(t,e)}}(a,p,d,function(t,e,n){return Jo+"/files/"+(n?"thumbnails":"documents")+"/"+t});window.mx.offlineData=g,u.startup(m),f&&(await u.uploadOffline(),await u.downloadOffline())}function Xo(t,e,n,r){window.mx.session.login({username:t,password:e}).then(()=>{n&&n(),window.mx.reload()},r)}function Qo(){window.mx.session.logout().then(()=>window.mx.data.clear(window.mx.reload))}async function Zo(){await Qe.savePageState(),window.mx.reload()}async function ta({cacheBust:t,resourcesMap:e,defaultPatterns:n,legacyProfile:i,tabs:o}){try{const a=r.NativeModules.MxConfiguration.RUNTIME_URL;await Ko(a,t,e,n,i),await Qe.startApp(o)}catch(t){r.NativeModules.NativeErrorHandler.handle(t.message,Lo(t.stack))}}const ea=t=>t.content;var na;function ra(t,e){return Object.keys(t).filter(t=>!e.includes(t)).reduce((e,n)=>Object.assign({},e,{[n]:t[n]}),{})}function ia(t,e){return e.filter(e=>void 0!==t[e]).reduce((e,n)=>Object.assign({},e,{[n]:t[n]}),{})}function oa(t,e){return t.filter(t=>void 0!==t&&void 0!==t[e]).map(t=>t[e])}function aa(t,e){const n=oa(t,e);return n.length>0?n[n.length-1]:void 0}!function(t){t.Loading="loading",t.Unavailable="unavailable",t.Available="available"}(na||(na={}));const sa=t=>t.text.status===na.Available?Object(o.createElement)(r.View,{style:oa(t.style,"container")},Object(o.createElement)(r.Text,{testID:t.name,style:oa(t.style,"text")},t.text.value)):null,ca=20;function ua(t){if(!t.icon)return null;const e=t.size||ca;switch(t.icon.type){case"glyph":return Object(o.createElement)(qt,{name:String(t.icon&&t.icon.iconClass),color:t.color,size:e});case"image":return Object(o.createElement)(r.Image,{testID:`${t.name}`,style:[{resizeMode:"contain",width:e,height:e}],source:t.icon.iconUrl,fadeDuration:0})}}const la=t=>Object(o.createElement)(r.View,{testID:t.name},Object(o.createElement)(ua,Object.assign({},t))),ha=45,fa=12,pa="rgba(0, 0, 0, 0.2)";function da(t){const{containerStyles:e,captionStyles:n,iconStyle:i,iconContainerStyle:a,rippleStyle:s,internalButtonContainerStyle:c}=function(t){const e=oa(t.style,"container"),n=oa(t.style,"caption"),r=oa(t.style,"icon"),i={size:r&&Number(aa(r,"size")||fa),color:r&&aa(r,"color")},o=[{marginRight:t.caption.value?10:0,width:i.size,height:i.size},...r],a={color:e&&aa(e,"rippleColor")||pa},s=aa(e,"justifyContent"),c=aa(e,"alignItems"),u={};s&&(u.justifyContent=s);c&&(u.alignItems=c);return{containerStyles:e,captionStyles:n,iconStyle:i,iconContainerStyle:o,rippleStyle:a,internalButtonContainerStyle:u}}(t);return Object(o.createElement)(ga,{testID:t.name,onPress:()=>t.onClick.execute(),disabled:!t.onClick||!t.onClick.canExecute,accessible:!1,rippleStyle:s},Object(o.createElement)(r.View,{style:[{height:ha},...e,{overflow:"hidden",alignItems:"stretch"}]},Object(o.createElement)(r.View,{style:[{flex:1,flexDirection:"row"},c],pointerEvents:"none"},t.icon?Object(o.createElement)(r.View,{testID:`${t.name}$iconWrapper`,style:a,pointerEvents:"none"},Object(o.createElement)(la,{icon:t.icon.value,name:`${t.name}$icon`,color:i.color,size:i.size})):null,function(){const e=t.caption.value||"";return Object(o.createElement)(r.Text,{testID:`${t.name}$caption`,style:n},e)}())))}const ga=t=>"android"===r.Platform.OS?Object(o.createElement)(r.TouchableNativeFeedback,Object.assign({},t,{useForeground:r.TouchableNativeFeedback.canUseNativeForeground(),background:r.TouchableNativeFeedback.Ripple(t.rippleStyle.color,!1)}),t.children):Object(o.createElement)(r.TouchableOpacity,Object.assign({},t),t.children);const ma=Symbol("mxObject");function ya(t,e){return{id:t.getGuid(),[ma]:{obj:t,scope:e}}}function ba(t){const e=t[ma];if(void 0===e)throw new Error("Arbitrary object is used as a ListItem. This is not allowed.");return e}const va=j(class extends o.Component{constructor(t){super(t),this.store=new Be(t.$store);const{obj:e,scope:n}=ba(t.scope);this.store.set(n,"object",e)}render(){return Object(o.createElement)(O,{store:this.store},this.props.children)}});function wa(t){const{containerStyles:e,containerExtraStyleProps:n,listItemStyle:i}=function(t){const e=oa(t.style,"container").map(t=>ra(t,ja)),n=oa(t.style,"container").map(t=>ia(t,ja)).reduce((t,e)=>Object.assign({},t,e),{numColumns:t.numberOfColumns||1}),r=oa(t.style,"listItem");return r.unshift({flex:1/(n.numColumns||1)}),{containerStyles:e,containerExtraStyleProps:n,listItemStyle:r}}(t),a=Object.assign({testID:t.name,refreshing:Oa(t.listInfo.status,t.onPullDown),style:e,data:t.listInfo.value?t.listInfo.value.items:[],horizontal:"horizontal"===t.scrollDirection,listKey:t.id,onRefresh:t.onPullDown?()=>t.onPullDown.canExecute&&t.onPullDown.execute():void 0,keyExtractor:t=>t.id,renderItem:({item:e,index:n})=>Object(o.createElement)(va,{scope:e},Object(o.createElement)(r.View,{testID:`${t.name}$item${n}`,style:i},t.itemTemplate())),onEndReached:()=>{const e=s(t.amount.value).plus(t.pageSize);t.amount.setValue(e)}},n);return Object(o.createElement)(r.FlatList,Object.assign({},a))}function Oa(t,e){return e&&e.canExecute&&e.isExecuting||t===na.Loading}const ja=["numColumns"];function xa(t){const e={testID:t.name,style:oa(t.style,"container")};return Object(o.createElement)(r.View,e,t.content)}class Ea{constructor(t){this.defaultConfig=t}format(t,e){return!t||isNaN(t.getTime())?"":mx.parser.formatValue(t.getTime(),"DateTime",e||this.defaultConfig)}parse(t,e){const n=mx.parser.parseValue(t,"DateTime",e||this.defaultConfig);return null===n||n&&isNaN(n.getTime())?{valid:!1}:{valid:!0,value:""!==n?n:void 0}}getFormatPlaceholder(){return mx.parser.getDateFormatPlaceholder(this.defaultConfig)}}class Sa{constructor(t){this.universe=t}format(t,e){const n=this.universe.find(e=>e.key===t);return n?n.caption:t?t.toString():""}parse(t,e){throw new Error("Enumeration values cannot be parsed")}getFormatPlaceholder(){}}class _a{constructor(t,e){this.attributeType=t,this.defaultConfig=e}format(t,e){return t?mx.parser.formatValue(t,this.attributeType,e||this.defaultConfig):""}parse(t,e){const n=mx.parser.parseValue(t,this.attributeType,e||this.defaultConfig);return null===n?{valid:!1}:{valid:!0,value:""!==n?n:void 0}}getFormatPlaceholder(){}}function Ca(t,e,n){const r=mx.meta.getEntity(t),i=r.getAttributeType(e);return i?"Enum"===i?new Sa(r.getEnumMap(e)):Ta(i,n):{format:()=>"",parse:()=>{throw new Error("Cannot parse values for unresolved attribute")},getFormatPlaceholder:()=>void 0}}function Ta(t,e){switch(t){case"DateTime":return new Ea(e.dateFormat||{type:"date"});case"Float":case"Currency":case"Integer":case"Long":case"Decimal":return new _a(t,e.numberFormat||{groupDigits:!1});default:return{format:e=>void 0!==e?mx.parser.formatValue(Rn(e),t):"",parse:e=>{const n=mx.parser.parseValue(e,t);return null!==n?{valid:!0,value:In(n,t)}:{valid:!1}},getFormatPlaceholder:()=>void 0}}}var Da=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};const ka=t=>{const{error:e}=t,n=Da(t,["error"]);return e?Object(o.createElement)(r.Text,n,e):null};class Aa extends o.Component{constructor(t){super(t),this.onValueChange=this.onValueChange.bind(this)}render(){const{name:t,inline:e,style:n,items:i,disabled:a,selectedValue:s}=this.props,c=e?"dropdown":"dialog";return Object(o.createElement)(r.Picker,{testID:t,selectedValue:s,mode:c,style:n,onValueChange:this.onValueChange,key:`${t}$picker`,enabled:!a},i.map(Aa.renderItem))}onValueChange(t){this.props.onValueChange&&this.props.onValueChange(t)}static renderItem(t,e){const{value:n,label:i}=t;return Object(o.createElement)(r.Picker.Item,{label:i,value:n,key:n,testID:`dropDownItem${e}`})}}class Pa extends o.Component{constructor(t){super(t),this.state={pickerVisible:!1},this.togglePicker=this.togglePicker.bind(this)}render(){const{selectedValue:t,valueStyle:e,style:n,disabled:i}=this.props,{pickerVisible:a}=this.state,s=Object.assign({},this.props,{onClose:this.props.onClose||this.togglePicker}),c=this.props.inline?Object(o.createElement)(Ma,Object.assign({},s)):Na(Ma,s);return Object(o.createElement)(r.View,{style:n},Object(o.createElement)(r.TouchableOpacity,{onPress:()=>this.togglePicker(),key:"button",disabled:i,testID:`${this.props.name}$openButton`,accessible:!1},Object(o.createElement)(r.Text,{style:e},this.getSelectedLabel(t))),a?c:null)}togglePicker(){this.setState({pickerVisible:!this.state.pickerVisible})}getSelectedLabel(t){if(0===this.props.items.length)return"";const e=this.props.items.find(e=>e.value===t);return e?e.label:this.props.items[0].label}}class Ma extends o.Component{constructor(t){super(t),this.state={selectedValue:this.props.selectedValue},this.onValueChange=this.onValueChange.bind(this)}render(){const{valueStyle:t,items:e,pickerStyle:n,name:i}=this.props,{selectedValue:a}=this.state;return Object(o.createElement)(r.PickerIOS,{selectedValue:a,itemStyle:t,onValueChange:this.onValueChange,style:n,key:`picker${i}`},e.map(Ma.renderItem))}onValueChange(t){this.setState({selectedValue:t}),this.props.onValueChange&&this.props.onValueChange(t)}static renderItem(t){const{value:e,label:n}=t;return Object(o.createElement)(r.PickerIOS.Item,{label:n,value:e,key:e})}}const Na=(t,e)=>Object(o.createElement)(r.Modal,{animationType:"fade",key:"modal",transparent:!0},Object(o.createElement)(r.TouchableWithoutFeedback,{accessible:!1,onPress:e.onClose},Object(o.createElement)(r.View,{style:Va.modalWrapper},Object(o.createElement)(r.View,{style:[...e.backdropStyle||[],{position:"absolute",height:"100%",width:"100%"}]}),Object(o.createElement)(r.View,{style:Va.container},Object(o.createElement)(r.View,{style:[Va.topWrapper,...e.topStyle||[]]},Object(o.createElement)(r.Button,{testID:`${e.name}$closeButton`,title:Lt("mxui.widget.native","ModalDialog.close"),onPress:e.onClose})),Object(o.createElement)(t,Object.assign({},e)))))),Va=r.StyleSheet.create({modalWrapper:{backgroundColor:"rgba(0, 0, 0, 0.3)",flex:1,flexDirection:"row",alignItems:"flex-end"},container:{backgroundColor:"#FFFFFF",flex:1},topWrapper:{alignItems:"flex-end"}}),Ia=({name:t,label:e,style:n,props:i})=>e?Object(o.createElement)(r.Text,Object.assign({testID:t,style:n},i),e.value):null;class Ra extends o.Component{constructor(t){super(t),this.state={pickerVisible:!1},this.onValueChange=this.onValueChange.bind(this)}render(){const{name:t,inline:e,disabled:n,selectedValue:i,items:a,style:s,label:c,validation:u,validationMessageStyles:l}=this.props,{labelStyles:h,labelStyleProps:f,containerStyle:p,inputContainerStyle:d}=this.processStyles(),g={name:t,inline:e,disabled:n,key:t,items:a,selectedValue:i,onValueChange:this.onValueChange};return Object(o.createElement)(r.View,{key:"container",style:p},Object(o.createElement)(Ia,{name:`${t}$label`,key:`${t}$label`,label:c,style:h,props:f}),Object(o.createElement)(r.View,{style:d},"android"===r.Platform.OS?Object(o.createElement)(Aa,Object.assign({},g,{style:[...oa(s,"value")||[]]})):Object(o.createElement)(Pa,Object.assign({},g,{pickerStyle:oa(this.props.style,"pickerIOS"),topStyle:oa(s,"pickerTopIOS"),backdropStyle:oa(s,"pickerBackdropIOS"),valueStyle:oa(s,"value")||[]})),Object(o.createElement)(ka,{key:"error",testID:`${t}$alert`,error:u,style:l})))}onValueChange(t){t!==this.props.selectedValue&&this.props.onValueChange(t)}processStyles(){const t=["numberOfLines"],e="horizontal"===this.props.formOrientation,n=[...oa(this.props.style,"container"),e?{flexDirection:"row",alignItems:"center"}:void 0],r=Object.assign({flexDirection:"column"},e?{flex:12-this.props.labelWidth}:void 0),i=e?{flex:this.props.labelWidth}:void 0;return{labelStyles:[...oa(this.props.style,"label").map(e=>ra(e,t)),i],labelStyleProps:oa(this.props.style,"label").map(e=>ia(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),containerStyle:n,inputContainerStyle:r}}}function $a(t){const{name:e,value:n,valueOptions:r,formOrientation:i,labelWidth:a,label:s,style:c,attribute:u,entity:l}=t,h=Ca(l,u,t.formatting),f={value:"",label:t.emptyOptionCaption.value||""},p=r.status===na.Available?[f,...r.value.items.map(ba).map(({obj:t})=>({value:t.getGuid(),label:h.format(In(t.get(u),t.getAttributeType(u)))}))]:[],d=n.status===na.Available&&!n.readOnly&&r.status===na.Available,g=oa(c,"validationMessage");return Object(o.createElement)(Ra,{name:e,style:c,label:s,labelWidth:a,formOrientation:i,inline:!1,disabled:!d,items:p,selectedValue:n.value||"",onValueChange:e=>{t.value.setValue(e)},validation:n.validation,validationMessageStyles:g})}var Fa=n(21);class Ba extends o.Component{constructor(){super(...arguments),this.state={tabViewState:{index:(t=>-1===t?0:t)(this.props.pages.findIndex(t=>t.isDefault)),routes:this.props.pages.map((t,e)=>({key:`${e}`,title:t.caption.value,testID:`${this.props.name}$page${e}`}))},processedStyles:this.processStyles()},this.renderScene=(({route:t})=>Object(o.createElement)(o.Fragment,null,Object(o.createElement)(r.View,{style:{flex:1},testID:`${this.props.name}$sceneView`},this.props.pages[parseInt(t.key,10)].page))),this.renderTabBar=(t=>{const{tabBarStyles:e,tabBarStyleProps:n,tabStyles:r,labelStyles:i,indicatorStyles:a}=this.state.processedStyles;return Object(o.createElement)(Fa.TabBar,Object.assign({},t,{tabStyle:r,indicatorStyle:a,labelStyle:i,style:e},n,{getTestID:({route:t})=>`${t.testID}$tabHeader`}))})}render(){const{containerStyles:t,containerStyleProps:e}=this.state.processedStyles;return Object(o.createElement)(Fa.TabView,Object.assign({navigationState:this.state.tabViewState,renderScene:this.renderScene,renderTabBar:this.renderTabBar,onIndexChange:t=>this.setState({tabViewState:Object.assign({},this.state.tabViewState,{index:t})}),style:t},e))}processStyles(){const t=["scrollEnabled","bounces","pressColor","pressOpacity"],e=["tabBarPosition"];return{tabBarStyles:oa(this.props.style,"tabBar").map(n=>{const r=ra(n,t);return ra(r,e)}),tabBarStyleProps:oa(this.props.style,"tabBar").map(e=>ia(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),containerStyles:oa(this.props.style,"container"),containerStyleProps:oa(this.props.style,"tabBar").map(t=>ia(t,e)).reduce((t,e)=>Object.assign({},t,e),{}),indicatorStyles:oa(this.props.style,"indicator"),tabStyles:oa(this.props.style,"tab"),labelStyles:oa(this.props.style,"label")}}}class Ga extends o.Component{constructor(){super(...arguments),this.onPressHandler=this.onPress.bind(this)}onPress(){this.props.onClick&&this.props.onClick.canExecute&&this.props.onClick.execute()}render(){const{containerStyle:t,imageStyle:e}=this.processStyles();return this.props.source.value&&Object(o.createElement)(r.TouchableWithoutFeedback,{testID:this.props.name,onPress:this.onPressHandler},Object(o.createElement)(r.View,{style:t},Object(o.createElement)(r.Image,{source:this.props.source.value,style:e,fadeDuration:0})))}processStyles(){return{containerStyle:oa(this.props.style,"container"),imageStyle:oa(this.props.style,"image")}}}class La extends o.Component{constructor(t){super(t),this.state={pickerVisible:!1},this.onValueChange=this.onValueChange.bind(this)}render(){const{name:t,inline:e,inputValue:n,style:r,label:i,labelWidth:a,formOrientation:s}=this.props,c=oa(this.props.style,"validationMessage"),u={name:t,style:r,label:i,labelWidth:a,formOrientation:s,inline:e,disabled:n.readOnly||n.status!==na.Available,key:t,items:n.status===na.Available?this.makeItems():[],selectedValue:n.value||"",onValueChange:this.onValueChange,validation:this.props.inputValue.validation,validationMessageStyles:c};return Object(o.createElement)(Ra,Object.assign({},u))}onValueChange(t){const e=t!==this.props.emptyOptionCaption.value?String(t):void 0;e!==this.props.inputValue.value&&this.props.inputValue.setValue(e)}makeItems(){const{inputValue:{universe:t,formatter:e},emptyOptionCaption:n}=this.props;return[n.value,...t||[]].map(t=>({value:t||"",label:e.format(t)}))}}class Ua extends o.Component{constructor(t){super(t),this.onChange=this.onChange.bind(this)}onChange(t){this.props.value.status!==na.Available||this.props.value.readOnly||this.props.value.setValue(t)}render(){const{inputStyles:t,inputErrorStyles:e,labelStyles:n,labelStyleProps:i,validationMessageStyles:a,inputSwitchStyleProps:s,inputErrorSwitchStyleProps:c,containerStyle:u,inputContainerStyle:l}=this.processStyles(),h=!!this.props.value.validation,f=this.props.caption?Object(o.createElement)(r.Text,Object.assign({testID:`${this.props.name}$label`,key:"label",style:n},i),this.props.caption.value):null,p=h?{true:c.trackColorOn||"",false:c.trackColorOff||""}:{true:s.trackColorOn||"",false:s.trackColorOff||""},d=h?this.props.value.value?c.thumbColorOn:c.thumbColorOff:this.props.value.value?s.thumbColorOn:s.thumbColorOff,g={testID:this.props.name,style:h?e:t,onValueChange:this.onChange,value:this.props.value.value||!1,disabled:this.props.value.readOnly,trackColor:p,thumbColor:d};return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(r.View,{key:"container",style:u},f,Object(o.createElement)(r.View,{style:l},Object(o.createElement)(r.Switch,Object.assign({key:"input"},g)),Object(o.createElement)(ka,{key:"alert",testID:`${this.props.name}$alert`,error:this.props.value.validation,style:[...a]}))))}processStyles(){const t=["thumbColorOn","thumbColorOff","trackColorOn","trackColorOff"],e=["numberOfLines"],n="horizontal"===this.props.formOrientation,r=oa(this.props.style,"input").map(n=>{const r=ra(n,t);return ra(r,e)}),i=oa(this.props.style,"inputError").map(n=>{const r=ra(n,t);return ra(r,e)}),o=oa(this.props.style,"input").map(e=>ia(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),a=oa(this.props.style,"inputError").map(e=>ia(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),s=n?{flex:this.props.labelWidth}:void 0,c=[...oa(this.props.style,"label").map(n=>{const r=ra(n,t);return ra(r,e)}),s],u=oa(this.props.style,"label").map(t=>ia(t,e)).reduce((t,e)=>Object.assign({},t,e),{}),l=oa(this.props.style,"validationMessage"),h=12-this.props.labelWidth;return{inputStyles:r,inputErrorStyles:i,labelStyles:c,labelStyleProps:u,validationMessageStyles:l,inputSwitchStyleProps:o,inputErrorSwitchStyleProps:a,containerStyle:[...oa(this.props.style,"container"),n?{flexDirection:"row",alignItems:"center"}:void 0],inputContainerStyle:n?{flex:h,alignItems:"flex-end"}:{alignItems:"flex-end"}}}}const Wa={default:{android:"default",iOS:"default"},"number-pad":{android:"numeric",iOS:"number-pad"},"decimal-pad":{android:"numeric",iOS:"decimal-pad"},"phone-pad":{android:"phone-pad",iOS:"phone-pad"},url:{android:"default",iOS:"url"},"email-address":{android:"email-address",iOS:"email-address"}};class qa extends o.Component{constructor(t){super(t),this.state={focused:!1,displayValue:t.inputValue.displayValue},this.onChangeText=this.onChangeText.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}componentDidUpdate(){this.state.focused||this.props.inputValue.displayValue===this.state.displayValue||this.setState({displayValue:this.props.inputValue.displayValue})}render(){const{inputStyles:t,inputErrorStyles:e,labelStyles:n,labelStyleProps:i,validationMessageStyles:a,inputTextInputStyleProps:s,inputErrorTextInputStyleProps:c,containerStyle:u,inputDirectionStyle:l,inputContainerStyle:h}=this.processStyles(),f=this.props.inputValue.validation,p=Object.assign({maxLength:this.props.maxLength,testID:this.props.name,style:[...f?[t,e]:[t],l],editable:!this.props.inputValue.readOnly&&this.props.inputValue.status===na.Available,onChangeText:this.onChangeText,onFocus:this.onFocus,onBlur:this.onBlur,placeholder:this.props.placeholder.value||void 0,value:this.state.displayValue,keyboardType:qa.getPlatformKeyboardType(this.props.keyboardType),clearButtonMode:"while-editing",secureTextEntry:this.props.isPassword},f?c:s);return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(r.View,{key:"container",style:u},this.props.label&&Object(o.createElement)(r.Text,Object.assign({testID:`${this.props.name}$label`,key:"label",style:n},i),this.props.label.value),Object(o.createElement)(r.View,{style:h},Object(o.createElement)(r.TextInput,Object.assign({key:"input"},p)),Object(o.createElement)(ka,{key:"alert",testID:`${this.props.name}$alert`,style:a,error:f}))))}onChangeText(t){this.setState({displayValue:t})}onFocus(){this.setState({focused:!0,displayValue:this.props.inputValue.displayValue}),this.dispatchAction("onEnter")}onBlur(){this.submitValue(),this.dispatchAction("onLeave"),this.setState({focused:!1})}submitValue(){this.state.displayValue!==this.props.inputValue.displayValue&&this.props.inputValue.setTextValue(this.state.displayValue)}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===na.Available&&e&&e.execute()}static getPlatformKeyboardType(t){const e=Wa[t];return"android"===r.Platform.OS?e.android:e.iOS}processStyles(){const t=["autoCapitalize","placeholderTextColor","selectionColor","underlineColorAndroid"],e=["numberOfLines"],n="horizontal"===this.props.formOrientation,r=oa(this.props.style,"input").map(n=>{const r=ra(n,t);return ra(r,e)}),i=oa(this.props.style,"inputError").map(n=>{const r=ra(n,t);return ra(r,e)}),o=oa(this.props.style,"input").map(e=>ia(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),a=oa(this.props.style,"inputError").map(e=>ia(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),s=oa(this.props.style,"validationMessage"),c=[...oa(this.props.style,"container"),n?{flexDirection:"row",alignItems:"center"}:void 0],u=n?{flex:12-this.props.labelWidth}:void 0,l=n?{flex:this.props.labelWidth}:void 0,h=Object.assign({flexDirection:"column"},n?{flex:12-this.props.labelWidth}:void 0);return{inputStyles:r,inputErrorStyles:i,labelStyles:[...oa(this.props.style,"label").map(n=>{const r=ra(n,t);return ra(r,e)}),l],labelStyleProps:oa(this.props.style,"label").map(t=>ia(t,e)).reduce((t,e)=>Object.assign({},t,e),{}),validationMessageStyles:s,inputTextInputStyleProps:o,inputErrorTextInputStyleProps:a,containerStyle:c,inputDirectionStyle:u,inputContainerStyle:h}}}class Ha extends o.Component{constructor(){super(...arguments),this.state={internalValue:this.props.inputValue.displayValue||""},this.onChangeTextHandler=this.onChangeText.bind(this),this.onFocusHandler=this.onFocus.bind(this),this.onBlurHandler=this.onBlur.bind(this)}componentDidUpdate(t){this.props.inputValue.displayValue!==t.inputValue.displayValue&&this.setState({internalValue:this.props.inputValue.displayValue})}onChangeText(t){this.setState({internalValue:t})}onFocus(){this.dispatchAction("onEnter")}onBlur(){this.state.internalValue!==this.props.inputValue.displayValue&&this.props.inputValue.setValue(this.state.internalValue),this.dispatchAction("onLeave")}render(){const{inputStyles:t,inputErrorStyles:e,labelStyles:n,labelStyleProps:i,validationMessageStyles:a,inputTextInputStyleProps:s,inputErrorTextInputStyleProps:c,containerStyle:u,inputContainerStyle:l}=this.processStyles(),h=this.props.inputValue.validation,f=this.props.label?Object(o.createElement)(r.Text,Object.assign({testID:`${this.props.name}$label`,key:"label",style:n},i),this.props.label.value):null,p=Object.assign({multiline:!0,numberOfLines:this.props.numberOfLines,testID:this.props.name,style:[...h?[t,e]:t],editable:!this.props.inputValue.readOnly&&this.props.inputValue.status===na.Available,onChangeText:this.onChangeTextHandler,onFocus:this.onFocusHandler,onBlur:this.onBlurHandler,maxLength:this.props.maxLength,placeholder:this.props.placeholder.value||void 0,value:this.state.internalValue},h?c:s);return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(r.View,{key:"container",style:u},f,Object(o.createElement)(r.View,{style:l},Object(o.createElement)(r.TextInput,Object.assign({key:"input"},p)),Object(o.createElement)(ka,{key:"alert",testID:`${this.props.name}$alert`,style:a,error:h}))))}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===na.Available&&e&&e.execute()}processStyles(){const t=["autoCapitalize","placeholderTextColor","selectionColor","underlineColorAndroid"],e=["numberOfLines"],n="horizontal"===this.props.formOrientation,r=oa(this.props.style,"input").map(n=>{const r=ra(n,t);return ra(r,e)}),i=oa(this.props.style,"inputError").map(e=>ra(e,t)),o=oa(this.props.style,"input").map(e=>ia(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),a=oa(this.props.style,"inputError").map(e=>ia(e,t)).reduce((t,e)=>Object.assign({},t,e),{}),s=n?{flex:this.props.labelWidth}:void 0;return{inputStyles:r,inputErrorStyles:i,labelStyles:[...oa(this.props.style,"label").map(n=>{const r=ra(n,t);return ra(r,e)}),s],labelStyleProps:oa(this.props.style,"label").map(t=>ia(t,e)).reduce((t,e)=>Object.assign({},t,e),{}),validationMessageStyles:oa(this.props.style,"validationMessage"),inputTextInputStyleProps:o,inputErrorTextInputStyleProps:a,containerStyle:[...oa(this.props.style,"container"),n?{flexDirection:"row",alignItems:"center"}:void 0],inputContainerStyle:Object.assign({flexDirection:"column"},n?{flex:12-this.props.labelWidth}:void 0)}}}const za=t=>Object(o.createElement)(r.ScrollView,{style:oa(t.style,"container")},t.content);class Ya extends o.Component{constructor(){super(...arguments),this.onDatePressHandler=this.onDatePress.bind(this)}async onDatePress(){if(this.props.inputValue.readOnly)return;this.dispatchAction("onEnter");const t=this.props.inputValue.status===na.Available&&void 0===this.props.inputValue.value?new Date:this.props.inputValue.value;try{const e=await this.selectDate(t).then(this.selectTime.bind(this));this.props.inputValue.setValue(e)}catch(t){}finally{this.dispatchAction("onLeave")}}render(){const t=ns(this.props.style,this.props);return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(r.View,{key:"container",style:t.containerStyle},Object(o.createElement)(Za,{key:"label",name:this.props.name,label:this.props.label,style:t.label,props:t.labelProps}),Object(o.createElement)(ts,{key:"value",name:this.props.name,inputValue:this.props.inputValue,placeholder:this.props.placeholder,onPress:this.onDatePressHandler,style:t.inputContainerStyle,textStyle:t.value,placeholderStyle:t.placeholder,validationMessageStyle:t.validationMessage})))}async selectDate(t){if("date"===this.props.mode||"datetime"===this.props.mode){const e=await r.DatePickerAndroid.open({date:t});return e.action===r.DatePickerAndroid.dateSetAction&&e.year&&void 0!==e.month&&e.day?new Date(e.year,e.month,e.day):Promise.reject()}return t}async selectTime(t){if("time"===this.props.mode||"datetime"===this.props.mode){const e=await r.TimePickerAndroid.open({hour:t.getHours(),minute:t.getMinutes()});if(e.action===r.TimePickerAndroid.timeSetAction){const n=new Date(t);return n.setHours(e.hour,e.minute),n}return Promise.reject()}return t}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===na.Available&&e&&e.execute()}}class Ja extends o.Component{constructor(t){super(t),this.onDateChangeHandler=this.onDateChange.bind(this),this.onDatePressHandler=this.onDatePress.bind(this),this.onToggleHandler=this.toggleVisibility.bind(this,!0),this.state={visible:!1}}onDateChange(t){const e=this.props.inputValue;e.status!==na.Available||e.readOnly||this.props.inputValue.setValue(t)}onDatePress(){this.props.inputValue.readOnly||(this.props.inputValue.status===na.Available&&void 0===this.props.inputValue.value?(this.dispatchAction("onEnter"),this.onDateChange(new Date),this.toggleVisibility(!1)):this.toggleVisibility())}toggleVisibility(t=!0){this.setState({visible:!this.state.visible},()=>t&&this.dispatchAction(this.state.visible?"onEnter":"onLeave"))}render(){const t=ns(this.props.style,this.props);return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(r.View,{key:"container",style:t.containerStyle},Object(o.createElement)(Za,{key:"label",name:this.props.name,label:this.props.label,style:t.label,props:t.labelProps}),Object(o.createElement)(ts,{key:"value",name:this.props.name,inputValue:this.props.inputValue,placeholder:this.props.placeholder,onPress:this.onDatePressHandler,style:t.inputContainerStyle,textStyle:t.value,placeholderStyle:t.placeholder,validationMessageStyle:t.validationMessage})),this.renderDatePicker())}renderDatePicker(){if(!this.state.visible)return null;const t=Object(o.createElement)(r.DatePickerIOS,{key:"datePicker",date:this.props.inputValue.value,onDateChange:this.onDateChangeHandler,mode:this.props.mode});return this.props.inline?t:this.renderModal(t)}renderModal(t){return Object(o.createElement)(r.Modal,{key:"modal",transparent:!0,onRequestClose:()=>{}},Object(o.createElement)(r.TouchableWithoutFeedback,{accessible:!1,onPress:this.onToggleHandler},Object(o.createElement)(r.View,{style:Ka.backdropWrapper},Object(o.createElement)(r.View,{style:Ka.container},Object(o.createElement)(r.View,{style:Ka.topWrapper},Object(o.createElement)(r.Button,{testID:`${this.props.name}$closeButton`,title:Lt("mxui.widget.native","ModalDialog.close"),onPress:this.onToggleHandler})),t))))}dispatchAction(t){const e=this.props[t];this.props.inputValue.status===na.Available&&e&&e.execute()}}const Ka=r.StyleSheet.create({backdropWrapper:{backgroundColor:"rgba(0, 0, 0, 0.3)",flex:1,flexDirection:"row",alignItems:"flex-end"},container:{backgroundColor:"#FFFFFF",flex:1},topWrapper:{alignItems:"flex-end"}});var Xa=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};const Qa=t=>Object(o.createElement)("android"===r.Platform.OS?Ya:Ja,t),Za=({name:t,label:e,style:n,props:i})=>e&&void 0!==e.value?Object(o.createElement)(r.Text,Object.assign({testID:`${t}$label`,style:n},i),e.value):null,ts=t=>{const e="android"===r.Platform.OS?r.TouchableNativeFeedback:r.TouchableOpacity,n=es(t.inputValue,t.placeholder);let i="android"===r.Platform.OS?[...t.style,...t.textStyle]:t.textStyle;t.inputValue.value||(i=[...i,...t.placeholderStyle]);const a=t.inputValue.validation;return Object(o.createElement)(r.View,{style:t.style},Object(o.createElement)(n=>{var{children:r}=n,i=Xa(n,["children"]);return t.inputValue.readOnly?o.Children.only(r):Object(o.createElement)(e,Object.assign({onPress:()=>t.onPress()},i),r)},{key:"touchable",testID:`${t.name}$value`,accessible:!0,accessibilityLabel:n},Object(o.createElement)(r.Text,{key:"value",testID:`${t.name}$value`,style:i},n)),Object(o.createElement)(ka,{key:"error",testID:`${t.name}$alert`,error:a,style:t.validationMessageStyle}))},es=(t,e)=>t.value?t.displayValue:e.value||" ",ns=(t,e)=>{const n=["numberOfLines"],r="horizontal"===e.formOrientation;return{label:[...oa(t,"label").map(t=>ra(t,n)),r?{flex:e.labelWidth}:void 0],labelProps:oa(t,"label").map(t=>ia(t,n)).reduce((t,e)=>Object.assign({},t,e),{}),value:oa(t,"value").filter(t=>!!t),inputContainerStyle:[{flexDirection:"column"},r?{flex:12-e.labelWidth}:void 0],placeholder:oa(t,"placeholder").filter(t=>!!t),validationMessage:oa(t,"validationMessage").filter(t=>!!t),containerStyle:[...oa(t,"container"),r?{flexDirection:"row",alignItems:"center"}:void 0]}};var rs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};const is=t=>{const e={testID:t.name,style:[{width:t.width||100,height:t.height||100},...t.style||[]]},n=t.placeholder?Object(o.createElement)(r.Image,Object.assign({source:t.placeholder},e,{fadeDuration:0})):null;return t.source.value?t.source.value(e):n},os=t=>{const e="android"===r.Platform.OS?r.TouchableNativeFeedback:r.TouchableOpacity,{onClick:n}=t,i=rs(t,["onClick"]);return n?Object(o.createElement)(e,{useForeground:!0,accessible:!1,onPress:()=>n.canExecute&&n.execute()},Object(o.createElement)(r.View,null,Object(o.createElement)(is,Object.assign({},i)))):Object(o.createElement)(is,Object.assign({},i))},as=t=>t.caption.status===na.Available?Object(o.createElement)(r.View,{style:oa(t.style,"container")},Object(o.createElement)(r.Text,{testID:t.name,style:oa(t.style,"text")},t.caption.value)):null,ss=t=>t.content;function cs(t){const e=Object(o.createElement)(r.View,null,t.content),n="android"===r.Platform.OS?r.TouchableNativeFeedback:r.TouchableOpacity,i={onPress:()=>t.onClick.canExecute&&t.onClick.execute(),accessible:!1};return t.onClick?Object(o.createElement)(n,i,e):e}const us=t=>{return!(void 0===t.visible||Boolean(t.visible.value))||t.needsNamedUser&&mx.session.isGuest()?null:t.contents};const ls={status:na.Loading};function hs(){return ls}const fs={status:na.Unavailable};function ps(){return fs}function ds(t){return{status:na.Available,value:t}}function gs(t,e){return t.status===na.Available?t.value:e}function ms(t){return t.status===na.Available?t.value:c()}function ys(t){return e=>bs(e,t)}function bs(t,e){return vs(t,t=>ds(e(t)))}function vs(t,e){return t.status===na.Available?e(t.value):t}function ws(t){return{status:t.status,value:t.status===na.Available?t.value:void 0}}var Os;function js(t,e){let n;const r=Object(i.g)(t,()=>{n=hn(Object.assign({tag:t},e,{callback:()=>r.reportChanged()}))},()=>{s(n).unsubscribe(),n=void 0});return{reportObserved:()=>{r.reportObserved()}}}function xs(t,e,n=hs()){const r=Object(i.g)(t,a);let o;function a(){const t=e();t instanceof Promise?(o=n,t.then(t=>{o=t,r.reportChanged()},t=>mx.onError(t))):o=t}return Object(i.e)(()=>(r.reportObserved()||a(),o))}function Es(t,e,n){const r=i.h.box(Object(i.e)(()=>hs()),{deep:!1});return Ss(()=>[Object(i.i)(e,e=>r.set(xs(t,()=>n(e))),{fireImmediately:!0})],()=>r.get().get())}function Ss(t,e){let n;const r=Object(i.g)("Resources tracker",()=>{n=t()},()=>n.forEach(t=>t()));return Object(i.e)(()=>{const t=e();return r.reportObserved(),t})}function _s(t){let e,n=!0;const r=Object(i.g)(`Inline reaction on ${t}`,void 0,()=>n=!0);return{runIfChanged(i){if(!r.reportObserved())throw new a;const o=t();(n||e!==o)&&(n=!1,e=o,Cs(()=>i(o)))}}}function Cs(t){Object(i.a)(()=>Object(i.j)(t))}function Ts(t,e=Os.Write){return{access:e,value:t}}function Ds(){return{access:Os.None}}Object(i.f)({enforceActions:"always"}),function(t){t[t.None=0]="None",t[t.Read=1]="Read",t[t.Write=2]="Write"}(Os||(Os={}));class ks{constructor(t){this.mxObject=t,this.attributeDependencies={},this.objectDependency=js(`Object ${t.getGuid()}`,{guid:t.getGuid()});const e=mx.meta.getEntity(t.getEntity());for(const n of e.getAttributes())this.attributeDependencies[n]=js(`Attribute ${n} of object ${t.getGuid()}`,{guid:t.getGuid(),attr:n})}getGuid(){return this.mxObject.getGuid()}getEntity(){return this.mxObject.getEntity()}old(){return this.mxObject}get(t){return this.objectDependency.reportObserved(),Object.prototype.hasOwnProperty.call(this.attributeDependencies,t)?(this.attributeDependencies[t].reportObserved(),function(t,e){const n=As(t,e);if(n===Os.None)return Ds();return Ts(In(t.get(e),t.getAttributeType(e)),n)}(this.mxObject,t)):Ds()}set(t,e){if(As(this.mxObject,t)!==Os.Write)throw new a(`No write access to attribute ${t}`);this.mxObject.set(t,Rn(e))}getByPath(t){const[e,,...n]=t.split("/"),r=n.length?n.join("/"):void 0,i=this.get(e);return i.access===Os.None||void 0===i.value?ps():vs((o=i.value,vs(Is(Ps,o,()=>xs(`fetching object '${o}'`,()=>new Promise((t,e)=>mx.data.get({guid:o,callback(e){t(e?ds(e):ps())},error:e})))).get(),ks.from)),t=>r?t.getByPath(r):ds(t));var o}static from(t){if(t.isUnavailable())return ps();const e=t.__cached_mxObj1||(t.__cached_mxObj1=new ks(t));return e.objectDependency.reportObserved(),ds(e)}static fromState(t){return void 0===t?hs():t===Fe?ps():ks.from(t)}}function As(t,e){return t.has(e)?t.isReadonlyAttr(e)?Os.Read:Os.Write:Os.None}const Ps=new Map;const Ms=new Map;function Ns(t){return t.sort(),bs(Is(Ms,t,()=>xs(`fetching objects ${t.join(", ")}`,()=>t.length>0?new Promise((e,n)=>mx.data.get({guids:t,callback:t=>e(ds(t)),error:n})):ds([]))).get(),t=>(function(t){return t.reduce((t,e)=>t.concat(e.status===na.Available?[e.value]:[]),[])})(t.map(ks.from)))}const Vs=new Map;function Is(t,e,n){const r=JSON.stringify(e),i=t.get(r);if(void 0!==i)return i;const o=n(),a=Ss(()=>(t.set(r,a),[()=>t.delete(r)]),()=>o.get());return a}function Rs(t,e){return p(t,({source:t,widget:n})=>{return function(t,e){if(void 0===t)return"selection"===e?ds({objects:[]}):hs();if(Array.isArray(t)){const e=bs(Ns(t),t=>t.map(t=>t.old()));return ds({objects:gs(e,[])})}return bs(ks.fromState(t),t=>({object:t.old()}))}(e.get(n,"allpages"===t?"allGuids":t),t)})}function $s(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];e.push({name:n,value:void 0!==r?"object"in r?r.object:c():void 0})}),e}function Fs(t){return t.get($e,"applyContextCount")}function Bs(t,e,n){const r=js(`Data source of ${t.friendlyId}`,{entity:t.entity}),o=t.refreshTime?function(t,e){let n;const r=Object(i.g)(t,()=>{n=setInterval(()=>r.reportChanged(),e)},()=>{clearInterval(s(n)),n=void 0});return{reportObserved:()=>{r.reportObserved()}}}(`Data source of ${t.friendlyId}`,t.refreshTime):void 0;let a=0;return Object(i.e)(()=>(r.reportObserved(),o&&o.reportObserved(),void 0!==Fs(e)?{load:!0,parameters:n(),version:a++}:{load:!1}))}function Gs(t,e,n){const r=e.get(n,"offset"),i=e.get(n,"amount");return{offset:void 0!==r?Number(r):0,amount:void 0!==i?Number(i):t.defaultAmount||Number.POSITIVE_INFINITY}}function Ls(t,e,n){return Ss(()=>[Object(i.i)(()=>t(),ys(({items:t,hasMoreItems:r,totalCount:i})=>{e.set(n,"total",void 0!==i?W(i):void 0),e.set(n,"hasMoreItems",r),e.set(n,"pageGuids",t.map(t=>t.id)),e.set(n,"count",W(t.length))}),{fireImmediately:!0}),Object(i.c)(()=>{e.set(n,"total",void 0),e.set(n,"hasMoreItems",void 0),e.set(n,"pageGuids",void 0),e.set(n,"count",void 0)})],()=>ws(t()))}const Us=new En(tr),Ws=b((t,e,n)=>{const r=t.source.allowedRoles;if(void 0!==r&&!mx.session.hasSomeRole(r))return mx.logger.debug("Unable to execute nanoflow because you do not have sufficient permissions."),()=>ws(ps());const o=function(t,e,n,r,o){const a=Bs(t,e,r),s=Es(`Execute data source of ${t.friendlyId}`,()=>a.get(),async t=>t.load?bs(await o(t.parameters),e=>f(e,t.version)):hs()),c=Ss(()=>[Object(i.i)(()=>bs(s.get(),([e])=>e.forEach(e=>js(t.friendlyId,{guid:e.getGuid()}).reportObserved())),()=>{}),Object(i.i)(()=>s.get(),ys(([t])=>e.set(n,"allGuids",t.map(t=>t.getGuid())))),()=>e.set(n,"allGuids",void 0)],()=>bs(s.get(),([t,e])=>({items:t.map(t=>ya(t,n)),offset:0,totalCount:t.length,hasMoreItems:!1,version:e}))),u=Ss(()=>[Object(i.i)(()=>Fs(e),t=>{void 0!==t&&t>0&&e.set(n,"offset",W(0))})],()=>ws(bs(c.get(),r=>{const{amount:i,offset:o}=Gs(t,e,n),a=o>=r.totalCount?0:o;return o!==a&&Cs(()=>e.set(n,"offset",W(a))),{items:r.items.slice(a,a+i),offset:a,totalCount:r.totalCount,hasMoreItems:a+i<r.totalCount,version:r.version}})));return Ls(()=>u.get(),e,n)}(t,e,n,()=>Rs(t.argMap,e),async function(n){if(Object.values(n).some(t=>t.status===na.Loading))return hs();const r=s(e.get($e,"form"))[0],i=await Us.execute(t.source.nanoflow,$s(p(n,t=>gs(t,void 0))),r);return ds(void 0===i?[]:Array.isArray(i)?i:c())});return()=>o.get()}),qs=b((t,e,n)=>{const r=Bs(t,e,()=>{if(void 0===t.reference)return ds(void 0);return bs(ks.fromState(e.get(t.scope,"object")),e=>({attribute:t.reference,operator:"equals",value:e.getGuid()}))}),o=_s(()=>Fs(e)),a=Object(i.e)(()=>(o.runIfChanged(t=>{void 0!==t&&t>0&&e.set(n,"offset",W(0))}),Gs(t,e,n)));let s=!1;const c=i.h.box(Object(i.e)(()=>hs()),{deep:!1}),u=Ss(()=>[Object(i.i)(()=>({trigger:r.get(),page:a.get()}),({trigger:e,page:n})=>{if(s)return void(s=!1);if(!e.load)return;const r=e.parameters;if(r.status!==na.Available)return void c.set(Object(i.e)(()=>hs()));const o=c.get().get(),{sliceToKeep:a,pageToFetch:u,loadAtEnd:l}=function(t,e){if(t.status!==na.Available)return{};const[n,r]=[t.value.offset,t.value.offset+t.value.items.length],[i,o]=[e.offset,e.offset+e.amount],[a,s]=[Math.max(n,i),Math.min(r,o)];if(a>=s)return{};if(i<a&&o>s)return{};const c=o>r,u={offset:c?s:i,amount:o-i-(s-a)};return{sliceToKeep:[a-n,s-n],loadAtEnd:c,pageToFetch:u.amount>0?u:void 0}}(o,n);if(o.status!==na.Available||o.value.version!==e.version||void 0===a)c.set(xs(`Load data for ${t.friendlyId}`,()=>h(n,e.version,r.value).then(t=>f(t,r.value))));else if(void 0===u){const t=Object.assign({},o.value,{offset:n.offset,items:o.value.items.slice(...a)});c.set(Object(i.e)(()=>ds(t)))}else c.set(xs(`Extend page for ${t.friendlyId}`,async()=>{const t=o.value.items.slice(...a),e=await h(u,o.value.version,r.value);return f(Object.assign({},o.value,{offset:n.offset,items:l?t.concat(e.items):e.items.concat(t),hasMoreItems:l?e.hasMoreItems:o.value.hasMoreItems}),r.value)},o))},{fireImmediately:!0,equals:i.d.structural})],()=>c.get().get()),l=Ls(()=>u.get(),e,n);return()=>l.get();function h({offset:e,amount:r},i,o){const a=Object.assign({offset:e},r!==Number.POSITIVE_INFINITY?{limit:r}:{},t.sort?{sort:t.sort}:{}),s=void 0===o?t.constraints:[...t.constraints,o];return new Promise((o,c)=>mx.data.getSlice(t.entity,s,a,!0,(t,a)=>o({items:t.map(t=>ya(t,n)),totalCount:a,hasMoreItems:e+r<a,offset:e,version:i}),c))}function f(t,r){return 0===t.items.length&&t.offset>0?(s=!0,e.set(n,"offset",W(0)),h(a.get(),t.version,r).then(ds)):ds(t)}});function Hs(t,e,n){const r=Ss(()=>[Object(i.i)(()=>t(),t=>{const r=t.status===na.Available?t.value.old():t.status===na.Unavailable?Fe:void 0;e.set(n,"object",r)},{fireImmediately:!0}),()=>e.set(n,"object",Fe)],()=>ws(bs(t(),t=>ya(t.old(),n))));return()=>r.get()}const zs=b(({scope:t,path:e},n,r)=>Hs(()=>{const r=ks.fromState(n.get(t,"object"));return void 0!==e?vs(r,t=>t.getByPath(e)):r},n,r)),Ys=new En(tr),Js=b((t,e,n)=>{const r=t.source.allowedRoles;if(void 0!==r&&!mx.session.hasSomeRole(r))return mx.logger.warn("Unable to execute nanoflow because you do not have sufficient permissions."),()=>ws(ps());const i=Es(`Execute data source nanoflow of ${t.friendlyId}`,()=>Rs(t.argMap,e),async n=>{if(Object.values(n).some(t=>t.status===na.Loading))return hs();const r=s(e.get($e,"form"))[0],i=await Ys.execute(t.source.nanoflow,$s(p(n,t=>gs(t,void 0))),r);if(i instanceof mn)return ks.from(i);if(void 0===i)return ps();throw new a});return Hs(()=>i.get(),e,n)});async function Ks(t,e,n){const r=t.confirmation;if(r){if(!await new Promise(t=>mx.ui.confirmation({cancel:r.cancel,proceed:r.proceed,content:r.question,handler:()=>t(!0),onCancel:()=>t(!1)})))return}if(e.beforeExecuteAction&&e.beforeExecuteAction(),e.abortOnClientValidations)switch(t.validate){case"node":if(!e.widgetIsValid)throw new Ct({});break;case"view":await jn(e.currentForm,"publish","validate")}const i=t.progress?mx.ui.showProgress(t.progress.message,t.progress.modal):void 0;try{await jn(e.currentForm,"publish","submit");const r=e.abortOnServerValidations?e.currentForm.getSubmitObjects().map(t=>t.getGuid()):[];await mx.onlineData.executeMicroflow(t.name,function(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];r&&(e[n]="objects"in r?{guids:r.objects.map(t=>t.getGuid())}:"object"in r?{guid:r.object.getGuid()}:r)}),e}(n),e.currentForm,r,Boolean(t.async))}finally{void 0!==i&&mx.ui.hideProgress(i)}}const Xs=new En(tr);async function Qs(t,e,n){let r;if(n)if("object"in n)r=[n.object];else{if(!("objects"in n))throw new a;r=n.objects}else r=void 0;if(e.abortOnClientValidations&&await jn(e.currentForm,"publish","validate"),e.abortOnServerValidations&&await jn(mx.data,"validate",e.currentForm.getSubmitObjects()),r){const t=await Promise.all(r.map(i));return"objects"in n?t:t[0]}return i();async function i(n){const r=n&&t.specializations&&t.specializations[n.getEntity()]||t;return mx.ui.openForm2(r.name,n&&n.getGuid(),r.title,e.currentForm,Object.assign({},r,{formParams:e.formParams}))}}async function Zs(t,e){const n="addressAttribute"in t?await jn(s(e),"fetch",t.addressAttribute):t.address,r=function(t,e){switch(t){case"email":return`mailto:${escape(e)}`;case"call":return`tel:${escape(e)}`;case"text":return`sms:${escape(e)}`;default:return e}}(t.schema,n);window.open(r,"web"===t.schema?"_blank":"_self")}async function tc(){const t=mx.ui.showProgress(void 0,!0);try{await jn(mx.data,"synchronizeOffline",{})}finally{mx.ui.hideProgress(t)}}function ec(t,e,n,r,i){function o(t){i?i(t):t instanceof Ct||mx.onError(t)}mx.session.hasSomeRole(t.config.allowedRoles)?function(){switch(t.type){case"callMicroflow":return Ks(t.config,e,n);case"callNanoflow":return async function(t,e,n){e.beforeExecuteAction&&e.beforeExecuteAction(),e.abortOnClientValidations&&await jn(e.currentForm,"publish","validate"),await jn(e.currentForm,"publish","submit"),await Xs.execute(t.nanoflow,$s(n),e.currentForm)}(t.config,e,n);case"cancelChanges":return async function(t,{currentForm:e}){e.setSuspend(!0);try{await jn(e,"publish","rollback"),await(n=e.getSubmitObjects(),new Promise((t,e)=>{mx.data.rollback({mxobjs:n,callback:t,error:e})})),t.closePage&&await jn(e,"close")}finally{e.setSuspend(!1)}var n}(t.config,e);case"closePage":return jn(e.currentForm,"close");case"doNothing":return Promise.resolve();case"openLink":const r="$object"in n&&n.$object?"object"in n.$object?n.$object.object:c():void 0;return Zs(t.config,r);case"openPage":return Qs(t.config,e,n.$pageParameter).then(()=>void 0);case"saveChanges":return async function(t,{currentForm:e}){await jn(e,"publish","validate"),e.setSuspend(!0);try{await jn(e,"publish","submit"),await jn(e,"publish","commit"),await(n=e.getSubmitObjects(),new Promise((t,e)=>{mx.data.commit({mxobjs:n,callback:t,error:e})}));let r=t.closePage;try{t.syncAutomatically&&await tc()}catch(t){throw t instanceof Ro&&(r=!1),t}finally{r&&await jn(e,"close")}}finally{e.setSuspend(!1)}var n}(t.config,e);case"signOut":return async function(){mx.session.isGuest()||(mx.ui.showProgress(void 0,!0),mx.logout())}();case"synchronize":return tc();case"deleteObject":return async function(t,{currentForm:e},n){let r;if(n)if("object"in n)r=[n.object];else{if(!("objects"in n))throw new a;r=n.objects}else r=[];const i=Lt(r.length>1?"mxui.widget.DataGrid":"mxui.sys.UI","confirm_delete",r.length.toString());if(await new Promise(t=>mx.ui.confirmation({content:i,handler:()=>{t(!0)},onCancel:()=>{t(!1)}}))){e.setSuspend(!0);try{await mx.onlineData.delete(r),t.closePage&&await jn(e,"close")}finally{e.setSuspend(!1)}}}(t.config,e,n.$object);case"createObject":const i="$object"in n&&n.$object?"object"in n.$object?n.$object.object:c():void 0;return async function(t,e,n){if("association"in t&&void 0===n)throw new a;const r=mx.ui.showProgress("",!1);try{const i=await new Promise((e,n)=>mx.data.create({entity:t.entity,callback:e,error:n}));t.association&&i.addReference(t.association,n.getGuid()),await Qs(t.pageSettings,e,{object:i})}finally{mx.ui.hideProgress(r)}}(t.config,e,i);default:throw new a}}().then(r,o):mx.session.isGuest()?mx.ui.showLogin():o(new Ui.a("Unable to execute action because you do not have sufficient permissions."))}function nc(t,e,n,r){return"unparsed"===t.state?function(t,e){const n=mx.meta.getEntity(e.entity).getAttributeType(e.attribute);switch(n){case"Enum":case"Boolean":case"ObjectReference":case"ObjectReferenceSet":return Lt("mendix.lib.Validations","invalid_attribute",t,e.attribute);case"DateTime":return Lt("mendix.lib.Validations","invalid_date");case"Currency":return Lt("mendix.lib.Validations","invalid_currency");case"Float":case"Integer":case"Long":case"Decimal":return Lt("mendix.lib.Validations","invalid_number");default:throw new Error(`Attribute type ${n} is not supported.`)}}(t.value,r):function(t,e){return function(t,e){const n=tt(t,e);if(n!==Z.OK)return Lt("mendix.lib.Validations",Bt[n])}(Rn(t),mx.meta.getEntity(e.entity).getAttributeType(e.attribute))}(t.value,r)||(n?n(t.value):void 0)||(r.validation?function(t,e,n){const r=new Ln({currentObject:()=>e.old(),value:()=>Fn(t)});if(!rc.evaluate(n.expression,r))return n.message||Lt("mendix.lib.Validations","required_field");return}(t.value,e,r.validation):void 0)}const rc=new Dn(kn,Vn(()=>new Date));const ic=b((t,e,n)=>{const r=Ca(t.entity,t.attribute,t),o=function(t){const e=mx.meta.getEntity(t.entity);switch(e.getAttributeType(t.attribute)){case"Enum":return e.getEnumMap(t.attribute).map(t=>t.key);case"Boolean":return[!0,!1];default:return}}(t),c=i.h.box(r.defaultConfig,{deep:!1}),u=i.h.box(void 0,{deep:!1,equals:i.d.structural}),l=i.h.box(void 0);let h;const f=Object(i.e)(()=>{const n=t.path,r=ks.fromState(e.get(t.scope,"object")),i=n?vs(r,t=>t.getByPath(n)):r;return vs(i,n=>{const r=n.get(t.attribute);if(r.access===Os.None)return ps();const i=Boolean(e.get($e,"subtreeReadonly")),o=r.access===Os.Read||i||t.readOnly;return ds({object:n,attribute:r.value,readOnly:o})})}),d=_s(()=>f.get()),g=_s(function(){const e=bs(f.get(),t=>t.object);return gs(bs(e,e=>(function(t,e,n){return Is(Vs,[e,n],()=>{const r=i.h.box(void 0,{deep:!1});return Ss(()=>[mx.data.subscribe({tag:t,guid:e,attr:n,val:!0,callback:t=>r.set([t,Kt()])}).unsubscribe],()=>r.get())}).get()})(`Validation of ${t.friendlyId}`,e.getGuid(),t.attribute)),void 0)}),m=Ss(()=>[Object(i.i)(()=>e.get($e,"validationRequest"),y),Object(i.i)(()=>l.get(),t=>e.set(n,"isInvalid",void 0!==t),{fireImmediately:!0}),()=>e.set(n,"isInvalid",!1)],()=>{g.runIfChanged(t=>{l.set(t?t[0]:void 0)}),d.runIfChanged(()=>{u.set(void 0),l.set(void 0)});const e=f.get(),n=u.get(),i=e.status!==na.Available?void 0:void 0!==n&&"unparsed"===n.state?void 0:void 0!==n?n.value:e.value.attribute,a=e.status!==na.Available?"":void 0!==n&&"unparsed"===n.state?n.value:r.format(void 0!==n?n.value:e.value.attribute,c.get());return{status:e.status,value:i,displayValue:a,readOnly:e.status!==na.Available||e.value.readOnly,validation:l.get(),formatter:r,universe:o,setFormatting:Ie(t=>c.set(t)),setValidator:t=>{h=t},setValue:Ie(n=>e.status!==na.Available?oc(t):e.value.readOnly?ac(t):b({state:"parsed",value:n},e.value.object)),setTextValue:Ie(n=>e.status!==na.Available?oc(t):e.value.readOnly?ac(t):b({state:"unparsed",value:n},e.value.object))}});return()=>m.get();function y(){const e=f.get();if(e.status!==na.Available)return;const n=u.get()||{state:"parsed",value:e.value.attribute};l.set(nc(n,e.value.object,h,t))}function b(n,o){if("unparsed"===n.state){const t=r.parse(n.value,c.get());n=t.valid?{state:"parsed",value:t.value}:n}else!function(t,e,n){const r=mx.meta.getEntity(e),i=r.getAttributeType(n);"Enum"===i?function(e){if(!e)throw new a(`Value ${t} is not assignable to attribute of type ${i}.`)}(void 0===t||!!r.getEnumMap(n).find(e=>e.key===t)):$n(t,i)}(n.value,t.entity,t.attribute);const f=nc(n,o,h,t);if(void 0!==f)l.set(f),u.set(n);else{const r=o.get(t.attribute);o.set(t.attribute,n.value),u.set(void 0),l.set(void 0),i.d.structural(r,Ts(n.value))||function(){const n=Rs(t.onChange.argMap,e);ec(t.onChange,{abortOnClientValidations:!0,abortOnServerValidations:!1,widgetIsValid:!0,currentForm:s(e.get($e,"form"))[0]},p(n,t=>gs(t,void 0)))}()}}});function oc(t){mx.logger.debug(`Widget ${t.friendlyId} is attempting to change the value of attribute "${t.attribute}" of entity "${t.entity}" which is not available.`)}function ac(t){mx.logger.debug(`Widget ${t.friendlyId} is attempting to change the value of attribute "${t.attribute}" of entity "${t.entity}" which is not writable.`)}const sc=b((t,e,n)=>{const r=i.h.box(0),o=Object(i.e)(()=>r.get()>0);return()=>{const i=Rs(t.action.argMap,e),a=Object.values(i).every(t=>t.status===na.Available);return{canExecute:a,isExecuting:o.get(),execute:a?Ie(()=>(function(i){if(Object.keys(i).some(e=>{const n=i[e];return"selection"===t.action.argMap[e].source&&void 0!==n&&"objects"in n&&0===n.objects.length}))return void mx.ui.showMessage("info",Lt("mxui.widget.DataGrid","no_selection"),!1);const o=e.get(n,"isInvalid"),a=s(e.get($e,"form"))[0];r.set(r.get()+1),ec(t.action,{abortOnClientValidations:!0,abortOnServerValidations:t.abortOnServerValidation,widgetIsValid:!o,currentForm:a},i,Ie(()=>{r.set(r.get()-1)}),Ie(t=>{r.set(r.get()-1),t instanceof Ct||mx.onError(t)}))})(p(i,ms))):()=>mx.logger.debug(`Widget is attempting to execute a ${t.action.type} action which is not executable.`)}}});function cc(t,e){const n=t.parameters||{},r=t.formats||{},i=t.elements.map(t=>"string"==typeof t?ds(t):function(t,e,n){const{attribute:r,entityPath:i}=function(t){const e=t.split("/");return e.length>1&&e.shift(),{attribute:e.pop(),entityPath:e.length?e.join("/"):void 0}}(e),o=i?vs(t,t=>t.getByPath(i)):t;if(o.status===na.Available){const t=o.value.get(r);return t.access===Os.None?ps():ds(function(t,e,n,r){const i=mx.meta.getEntity(t),o=i.getAttributeType(e),a=Rn(n);return"String"===o?a:"Enum"===o?i.getEnumCaption(e,a):mx.parser.formatValue(a,o,r)}(o.value.getEntity(),r,t.value,n))}return o}(e,n[t.toString()],r[t.toString()]));return i.some(t=>t.status===na.Loading)?hs():ds(i.map(t=>t.status===na.Available?t.value:"").join(""))}const uc=y((t,e)=>{const n=ks.fromState(void 0!==t.scope?e.get(t.scope,"object"):void 0);return ws(cc(t.template,n.status===na.Unavailable?hs():n))}),lc=b(({slot:t,type:e,initialValue:n,widgetId:r},o)=>{void 0===o.get(r,t)&&void 0!==n&&o.set(r,t,"number"==typeof n?W(n):n);const a=Ta(e,{}),s=Object(i.e)(()=>o.get(r,t)),c=i.h.box(void 0,{deep:!1}),u=i.h.box(a.defaultConfig,{deep:!1});let l;const h=_s(()=>s.get());return()=>{h.runIfChanged(()=>c.set(void 0));const t=s.get(),n=c.get(),r=void 0!==n&&"unparsed"===n.state?void 0:void 0!==n?n.value:t,i=void 0!==n&&"unparsed"===n.state?n.value:a.format(void 0!==n?n.value:t,u.get());return{status:na.Available,validation:void 0!==n?n.message:void 0,universe:void 0,readOnly:!1,formatter:a,value:r,displayValue:i,setValidator:t=>l=t,setFormatting:Ie(t=>u.set(t)),setTextValue:Ie(t=>(function(t){const n=a.parse(t,u.get());n.valid?f(n.value):c.set({state:"unparsed",value:t,message:hc(e)})})(t)),setValue:Ie(t=>f(t))}};function f(n){$n(n,e);const i=void 0!==l?l(n):void 0;void 0!==i?c.set({state:"parsed",value:n,message:i}):o.set(r,t,n)}});function hc(t){switch(t){case"String":case"Boolean":case"ObjectReferenceSet":return Lt("mendix.lib.Validations","invalid_value");case"Decimal":return Lt("mendix.lib.Validations","invalid_number")}}const fc=b((t,e)=>{const n=Object(i.e)(()=>vs(ks.fromState(e.get(t.scope,"object")),t=>{const e=t.get("changedDate"),n=t.get("HasContents");return e.access!==Os.None&&n.access!==Os.None&&n.value?ds(mx.data.getDocumentUrl(t.getGuid(),e.value?new Date(e.value).getTime():null,!1)):ps()})),a=Object(i.e)(()=>{const t=n.get();return xs("Fetching an image",async()=>t.status!==na.Available?t:ds(await wr.readAsDataURL(t.value)))}),s=Object(i.e)(()=>a.get().get());return()=>ws(bs(s.get(),t=>e=>Object(o.createElement)(r.Image,Object.assign({source:{uri:t}},e))))}),pc=y(t=>ws(ds(t.image))),dc=new Dn(kn,Vn(()=>new Date)),gc=y((t,e)=>{const n=s(e.get($e,"form")),r=new Ln({pageTitle:()=>n[0].getTitle(),currentObject:()=>{const n=e.get(t.scope,"object");return n!==Fe?n:void 0}});try{const e=dc.evaluate(t.expression,r);return r.getDependencies().map(t=>js(`${t.tag}`,t)).forEach(t=>t.reportObserved()),ws(ds(e))}catch(t){if(t instanceof Gn||t instanceof Bn)return ws(hs());throw t}}),mc=y(t=>ws(ds(t.icon))),yc=b((t,e)=>{const n=e.get(t.widgetId,"uniqueId");if(n)return()=>n;{const n=Kt(t.widgetId);return e.set(t.widgetId,"uniqueId",n),()=>n}});n.d(e,"asPluginWidget",function(){return E}),n.d(e,"asPluginWidgets",function(){return S}),n.d(e,"NativeUI",function(){return Qe}),n.d(e,"startApp",function(){return ta}),n.d(e,"Big",function(){return W}),n.d(e,"Placeholder",function(){return ea}),n.d(e,"Text",function(){return sa}),n.d(e,"Button",function(){return da}),n.d(e,"NativeList",function(){return wa}),n.d(e,"Container",function(){return xa}),n.d(e,"ReferenceSelector",function(){return $a}),n.d(e,"TabContainer",function(){return Ba}),n.d(e,"Image",function(){return Ga}),n.d(e,"DropDown",function(){return La}),n.d(e,"CheckBox",function(){return Ua}),n.d(e,"TextBox",function(){return qa}),n.d(e,"TextArea",function(){return Ha}),n.d(e,"ScrollContainer",function(){return za}),n.d(e,"DatePicker",function(){return Qa}),n.d(e,"NativeDynamicImage",function(){return os}),n.d(e,"Title",function(){return as}),n.d(e,"DataView",function(){return ss}),n.d(e,"ClickableArea",function(){return cs}),n.d(e,"ConditionalVisibilityWrapper",function(){return us}),n.d(e,"NanoflowObjectListProperty",function(){return Ws}),n.d(e,"OfflineObjectListProperty",function(){return qs}),n.d(e,"AssociationObjectProperty",function(){return zs}),n.d(e,"NanoflowObjectProperty",function(){return Js}),n.d(e,"AttributeProperty",function(){return ic}),n.d(e,"ActionProperty",function(){return sc}),n.d(e,"DynamicTextProperty",function(){return uc}),n.d(e,"WidgetVariableProperty",function(){return lc}),n.d(e,"NativeDynamicImageProperty",function(){return fc}),n.d(e,"StaticImageProperty",function(){return pc}),n.d(e,"ExpressionProperty",function(){return gc}),n.d(e,"IconProperty",function(){return mc}),n.d(e,"DerivedUniqueIdProperty",function(){return yc}),n.d(e,"Icon",function(){return la}),Object(i.f)({reactionScheduler:r.unstable_batchedUpdates})}]);