import"./5dda5eb7.js";import{n as splitAttributePath}from"./ddd19e5a.js";import{d as asPureProperty}from"./71d615f7.js";import"./3019ed1f.js";import"./967e2ac0.js";import"./d5eebceb.js";import"./eed44530.js";import"./aa3ddc5d.js";import"./2a30f3af.js";import{o as attributeToClientValue}from"./3c905f8d.js";import"./b26e8ded.js";import{d as available,a as loading,c as flatMapL,b as unavailable,i as asDynamicValue}from"./cf055752.js";import"./86e285ad.js";import{c as Access,b as MxObject1}from"./22b17a9f.js";function templateToText(template,rootObject){const parameters=template.parameters||{},formats=template.formats||{},elements=template.elements.map(element=>"string"==typeof element?available(element):function(rootObject,attributePath,format){const{attribute:attribute,entityPath:entityPath}=splitAttributePath(attributePath),object=entityPath?flatMapL(rootObject,obj=>obj.getByPath(entityPath)):rootObject;if("available"===object.status){const attr=object.value.get(attribute);return attr.access===Access.None?unavailable():available(function(entity,attribute,value,format){const metaObject=mx.meta.getEntity(entity),type=metaObject.getAttributeType(attribute),clientValue=attributeToClientValue(value);return"String"===type?clientValue:"Enum"===type?metaObject.getEnumCaption(attribute,clientValue):mx.parser.formatValue(clientValue,type,format)}(object.value.getEntity(),attribute,attr.value,format))}return object}(rootObject,parameters[element.toString()],formats[element.toString()]));return elements.some(e=>"loading"===e.status)?loading():available(elements.map(e=>"available"===e.status?e.value:"").join(""))}const DynamicTextProperty=asPureProperty((config,store)=>{const mxObject1=MxObject1.fromState(void 0!==config.scope?store.get(config.scope,"object"):void 0);return asDynamicValue(templateToText(config.template,"unavailable"===mxObject1.status?loading():mxObject1))});export{DynamicTextProperty};
