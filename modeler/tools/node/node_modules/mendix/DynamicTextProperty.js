import"./39c2a2fb.js";import{s as splitAttributePath}from"./546dec4f.js";import{b as asPureProperty}from"./d63ed225.js";import"./2bc24ff8.js";import"./e1d6c916.js";import"./2209f9e8.js";import"./fdd4c4ff.js";import{i as attributeToClientValue}from"./37fca272.js";import"./38d79760.js";import{a as available,l as loading,f as flatMapL,u as unavailable,d as asDynamicValue}from"./6dbf3b84.js";import"./b4041520.js";import{A as Access,M as MxObject1}from"./2a2a8df8.js";function templateToText(template,rootObject){const parameters=template.parameters||{},formats=template.formats||{},elements=template.elements.map(element=>"string"==typeof element?available(element):function(rootObject,attributePath,format){const{attribute:attribute,entityPath:entityPath}=splitAttributePath(attributePath),object=entityPath?flatMapL(rootObject,obj=>obj.getByPath(entityPath)):rootObject;if("available"===object.status){const attr=object.value.get(attribute);return attr.access===Access.None?unavailable():available(function(entity,attribute,value,format){const metaObject=mx.meta.getEntity(entity),type=metaObject.getAttributeType(attribute),clientValue=attributeToClientValue(value);return"String"===type?clientValue:"Enum"===type?metaObject.getEnumCaption(attribute,clientValue):mx.parser.formatValue(clientValue,type,format)}(object.value.getEntity(),attribute,attr.value,format))}return object}(rootObject,parameters[element.toString()],formats[element.toString()]));return elements.some(e=>"loading"===e.status)?loading():available(elements.map(e=>"available"===e.status?e.value:"").join(""))}const DynamicTextProperty=asPureProperty((config,store)=>{const mxObject1=MxObject1.fromState(void 0!==config.scope?store.get(config.scope,"object"):void 0);return asDynamicValue(templateToText(config.template,"unavailable"===mxObject1.status?loading():mxObject1))});export{DynamicTextProperty};
