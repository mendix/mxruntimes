import{v as validate,a as validation}from"./2209f9e8.js";import{g as getDay,a as getDaysInMonth,b as addYears,s as subYears,c as addMonths,d as subMonths,e as addDays,h as subDays,i as setDate,j as setMonth,k as setYear}from"./5b471fcd.js";import{p as post}from"./d2546a03.js";var DateField,DateFieldFormat,DateTimeFormatType,DateTimeFormatLength,CalendarSystem;!function(DateField){DateField.Month="months",DateField.DayOfWeek="days"}(DateField||(DateField={})),function(DateFieldFormat){DateFieldFormat.Long="wide",DateFieldFormat.Short="abbr",DateFieldFormat.Narrow="narrow"}(DateFieldFormat||(DateFieldFormat={})),function(DateTimeFormatType){DateTimeFormatType.Date="date",DateTimeFormatType.Time="time",DateTimeFormatType.DateTime="datetime"}(DateTimeFormatType||(DateTimeFormatType={})),function(DateTimeFormatLength){DateTimeFormatLength.Short="short",DateTimeFormatLength.Medium="medium",DateTimeFormatLength.Long="long",DateTimeFormatLength.Full="full"}(DateTimeFormatLength||(DateTimeFormatLength={})),function(CalendarSystem){CalendarSystem.Gregorian="gregorian",CalendarSystem.ThaiBuddhist="thai-buddhist"}(CalendarSystem||(CalendarSystem={}));class LocalDate{constructor(year,monthOfYear,dayOfMonth,chronology){this.year=year,this.monthOfYear=monthOfYear,this.dayOfMonth=dayOfMonth,this.chronology=chronology}isSameDate(date){return this.chronology===date.chronology&&this.getYear()===date.getYear()&&this.getMonthOfYear()===date.getMonthOfYear()&&this.getDayOfMonth()===date.getDayOfMonth()}getChronology(){return this.chronology}getYear(){return this.year}getMonthOfYear(){return this.monthOfYear}getDayOfMonth(){return this.dayOfMonth}getDayOfWeek(){return this.chronology.getDayOfWeek(this)}lengthOfYearInMonths(){return this.chronology.lengthOfYearInMonths(this.year)}plusYears(years){return this.chronology.plusYears(this,years)}plusMonths(months){return this.chronology.plusMonths(this,months)}plusDays(days){return this.chronology.plusDays(this,days)}minusYears(years){return this.chronology.minusYears(this,years)}minusMonths(months){return this.chronology.minusMonths(this,months)}minusDays(days){return this.chronology.minusDays(this,days)}withDayOfMonth(dayOfMonth){return this.chronology.withDayOfMonth(this,dayOfMonth)}withMonthOfYear(monthOfYear){return this.chronology.withMonthOfYear(this,monthOfYear)}withYear(year){return this.chronology.withYear(this,year)}toJsDate(){return this.chronology.toJsDate(this)}toString(){const month=zeroPadLeft(this.monthOfYear,2),day=zeroPadLeft(this.dayOfMonth,2),dayOfWeek=weekDays[this.getDayOfWeek()],calendarSystem=this.getChronology().getCalendarSystem();return`${this.year}-${month}-${day} ${dayOfWeek} (${calendarSystem})`}}function zeroPadLeft(n,len){const num=n.toString();return new Array(len-num.length+1).join("0")+num}const weekDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];class LocalTime{constructor(hour=0,minute=0,second=0,millisecond=0){this.hour=hour,this.minute=minute,this.second=second,this.millisecond=millisecond}getHour(){return this.hour}getMinute(){return this.minute}getSecond(){return this.second}getMillisecond(){return this.millisecond}isSameTime(time){return this.hour===time.hour&&this.minute===time.minute&&this.second===time.second&&this.millisecond===time.millisecond}toString(){return zeroPadLeft$1(this.hour,2)+":"+zeroPadLeft$1(this.minute,2)+":"+zeroPadLeft$1(this.second,2)+"."+zeroPadLeft$1(this.millisecond,3)}}function zeroPadLeft$1(n,len){const num=n.toString();return new Array(len-num.length+1).join("0")+num}class Chronology{constructor(calendarSystem){this.calendarSystem=calendarSystem}getCalendarSystem(){return this.calendarSystem}convertInput(date){if(date.getChronology()!==this)throw new Error(`Incompatible chronology: LocalDate should be ${this.getCalendarSystem()} but was ${date.getChronology().getCalendarSystem()}`);return{localDate:date instanceof LocalDate?date:date.getDate(),localTime:date instanceof LocalDate?new LocalTime:date.getTime()}}static getInstance(){return this.instance}}class LocalDateTime{constructor(date,time=new LocalTime){this.date=date,this.time=time}getDate(){return this.date}getTime(){return this.time}withDate(newDate){return new LocalDateTime(newDate,this.time)}withTime(newTime){return new LocalDateTime(this.date,newTime)}toJsDate(){return this.date.getChronology().toJsDate(this)}isSameDateTime(dateTime){return this.date.isSameDate(dateTime.date)&&this.time.isSameTime(dateTime.time)}getChronology(){return this.date.getChronology()}toString(){return this.date.toString()+" "+this.time.toString()}}class GregorianChronology extends Chronology{constructor(calendarSystem=CalendarSystem.Gregorian,yearOffset=0){super(calendarSystem),this.yearOffset=yearOffset}getDayOfWeek(date){return getDay(this.toJsDate(date))}lengthOfMonthInDays(year,month){return getDaysInMonth(new Date(year,month-1,1))}lengthOfYearInMonths(_year){return 12}plusYears(date,years){return convert(this.fromJsDate(addYears(this.toJsDate(date),years)),date)}minusYears(date,years){return convert(this.fromJsDate(subYears(this.toJsDate(date),years)),date)}plusMonths(date,months){return convert(this.fromJsDate(addMonths(this.toJsDate(date),months)),date)}minusMonths(date,months){return convert(this.fromJsDate(subMonths(this.toJsDate(date),months)),date)}plusDays(date,days){return convert(this.fromJsDate(addDays(this.toJsDate(date),days)),date)}minusDays(date,days){return convert(this.fromJsDate(subDays(this.toJsDate(date),days)),date)}withDayOfMonth(date,dayOfMonth){return convert(this.fromJsDate(setDate(this.toJsDate(date),dayOfMonth)),date)}withMonthOfYear(date,monthOfYear){return convert(this.fromJsDate(setMonth(this.toJsDate(date),monthOfYear-1)),date)}withYear(date,year){return convert(this.fromJsDate(setYear(this.toJsDate(date),year)),date)}fromJsDate(date){const localDate=new LocalDate(date.getFullYear()+this.yearOffset,date.getMonth()+1,date.getDate(),this),localTime=new LocalTime(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());return new LocalDateTime(localDate,localTime)}toJsDate(date){const{localDate:localDate,localTime:localTime}=this.convertInput(date);return new Date(localDate.getYear()-this.yearOffset,localDate.getMonthOfYear()-1,localDate.getDayOfMonth(),localTime.getHour(),localTime.getMinute(),localTime.getSecond(),localTime.getMillisecond())}}function convert(result,inputType){return inputType instanceof LocalDate?result.getDate():result}GregorianChronology.instance=new GregorianChronology;class ThaiBuddhistChronology extends GregorianChronology{}ThaiBuddhistChronology.instance=new ThaiBuddhistChronology(CalendarSystem.ThaiBuddhist,543);var strictUriEncode=function(str){return encodeURIComponent(str).replace(/[!'()*]/g,function(c){return"%"+c.charCodeAt(0).toString(16).toUpperCase()})},getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;var objectAssign=function(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map(function(n){return test2[n]}).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=function(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to};function encode(value,opts){return opts.encode?opts.strict?strictUriEncode(value):encodeURIComponent(value):value}var DayOfWeek,stringify=function(obj,opts){!1===(opts=objectAssign({encode:!0,strict:!0,arrayFormat:"none"},opts)).sort&&(opts.sort=function(){});var formatter=function(opts){switch(opts.arrayFormat){case"index":return function(key,value,index){return null===value?[encode(key,opts),"[",index,"]"].join(""):[encode(key,opts),"[",encode(index,opts),"]=",encode(value,opts)].join("")};case"bracket":return function(key,value){return null===value?encode(key,opts):[encode(key,opts),"[]=",encode(value,opts)].join("")};default:return function(key,value){return null===value?encode(key,opts):[encode(key,opts),"=",encode(value,opts)].join("")}}}(opts);return obj?Object.keys(obj).sort(opts.sort).map(function(key){var val=obj[key];if(void 0===val)return"";if(null===val)return encode(key,opts);if(Array.isArray(val)){var result=[];return val.slice().forEach(function(val2){void 0!==val2&&result.push(formatter(key,val2,result.length))}),result.join("&")}return encode(key,opts)+"="+encode(val,opts)}).filter(function(x){return x.length>0}).join("&"):""};function retrieveByXPath(xpath,schema={},wantCount=!1){return post(xasUrl(),{action:"retrieve_by_xpath",params:{xpath:xpath,schema:schema,count:wantCount}})}function instantiate(entity,changes,objects){return post(xasUrl(),{action:"instantiate",params:{objecttype:entity},changes:changes,objects:objects})}function login(username,password,shouldGenerateToken){return post(xasUrl(),{action:"login",params:{username:username,password:password,shouldgeneratetoken:shouldGenerateToken}})}function getSessionData(params){return post(xasUrl(),{action:"get_session_data",params:params})}function logout(authToken){return post(xasUrl(),{action:"logout",params:authToken?{authtoken:authToken}:{}})}function keepalive(){return post(xasUrl(),{action:"keepalive",params:{}})}function synchronize(guids,fileGuidMapping,changes,objects){return post(xasUrl(),{action:"synchronize",params:{guids:guids,fileGuidMapping:fileGuidMapping},changes:changes,objects:objects})}function upload(guid,name,params,blob,changes,objects){const url=mx.remoteUrl+"file?"+stringify(Object.assign({},params,{guid:guid})),formData=new FormData;return formData.append("data",JSON.stringify({changes:changes,objects:objects})),name?formData.append("blob",blob,name):formData.append("blob",blob),post(url,formData)}function xasUrl(){return mx.remoteUrl+"xas/"}!function(DayOfWeek){DayOfWeek[DayOfWeek.Sunday=0]="Sunday",DayOfWeek[DayOfWeek.Monday=1]="Monday",DayOfWeek[DayOfWeek.Tuesday=2]="Tuesday",DayOfWeek[DayOfWeek.Wednesday=3]="Wednesday",DayOfWeek[DayOfWeek.Thursday=4]="Thursday",DayOfWeek[DayOfWeek.Friday=5]="Friday",DayOfWeek[DayOfWeek.Saturday=6]="Saturday"}(DayOfWeek||(DayOfWeek={}));const validationCodeMap={[validation.NOT_INTEGER]:"invalid_number",[validation.RANGE_INTEGER]:"range_integer",[validation.RANGE_LONG]:"range_long",[validation.RANGE_DECIMAL]:"range_decimal",[validation.RANGE_NUMBER]:"range_number"},NO_TRANSLATION="[No translation]";function translate(namespace,messageKey,...args){if(!mx.session.isValid())return NO_TRANSLATION;return(mx.session.getConfig("uiconfig.translations")[`${namespace}.${messageKey}`]||NO_TRANSLATION).replace(/\{(\d+)\}/g,(match,n)=>args.length>=n?args[n-1]:match)}function getTypeValidation(value,attributeType){const validationResult=validate(value,attributeType);if(validationResult!==validation.OK)return translate("mendix.lib.Validations",validationCodeMap[validationResult])}export{logout as a,getTypeValidation as b,getSessionData as g,instantiate as i,keepalive as k,login as l,retrieveByXPath as r,synchronize as s,translate as t,upload as u};
