import{m as mapValues,b as crash}from"./546dec4f.js";import{a as available,l as loading,m as mapL,g as getOrElseL}from"./6dbf3b84.js";import{f as fetchObjects,M as MxObject1}from"./2a2a8df8.js";function getActionParameters(argMap,store){return mapValues(argMap,({source:source,widget:widget})=>{return function(state,source){if(void 0===state)return"selection"===source?available({objects:[]}):loading();if(Array.isArray(state)){const objects=mapL(fetchObjects(state),objs=>objs.map(o=>o.old()));return available({objects:getOrElseL(objects,[])})}return mapL(MxObject1.fromState(state),obj=>({object:obj.old()}))}(store.get(widget,"allpages"===source?"allGuids":source),source)})}function toMicroflowParameters(parameters){const result={};return Object.keys(parameters).forEach(name=>{const value=parameters[name];value&&(result[name]="objects"in value?{guids:value.objects.map(mxobj=>mxobj.getGuid())}:"object"in value?{guid:value.object.getGuid()}:value)}),result}function toNanoflowParameters(parameters){const result=[];return Object.keys(parameters).forEach(name=>{const value=parameters[name];result.push({name:name,value:void 0!==value?"object"in value?value.object:crash():void 0})}),result}export{toNanoflowParameters as a,getActionParameters as g,toMicroflowParameters as t};
