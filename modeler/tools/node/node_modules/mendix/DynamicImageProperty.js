import{Image}from"react-native";import{h as computed$$1}from"./5dda5eb7.js";import{createElement}from"react";import"./ddd19e5a.js";import{c as asProperty}from"./71d615f7.js";import"./3019ed1f.js";import"./967e2ac0.js";import"./33defb9b.js";import"./d5eebceb.js";import"./eed44530.js";import"./aa3ddc5d.js";import"./2a30f3af.js";import"./3c905f8d.js";import"./b26e8ded.js";import{a as NativeFileBackend}from"./47f8ecc1.js";import{c as flatMapL,b as unavailable,d as available,i as asDynamicValue,e as mapL}from"./cf055752.js";import{b as loadableResource}from"./86e285ad.js";import{c as Access,b as MxObject1}from"./22b17a9f.js";import{a as withObjectStoring}from"./06257d0e.js";const DynamicImageProperty=asProperty((config,store,widgetId)=>{const mxObject1Value=withObjectStoring(function(){const rootObject=MxObject1.fromState(store.get(config.scope,"object"));return void 0===config.path?rootObject:flatMapL(rootObject,obj=>obj.getByPath(config.path))},store,widgetId),pathValue=computed$$1(()=>{const refObject=mxObject1Value.get();return flatMapL(refObject,mxObject=>{const changedDate=mxObject.get("changedDate"),hasContents=mxObject.get("HasContents");return changedDate.access!==Access.None&&hasContents.access!==Access.None&&hasContents.value?available(mx.data.getDocumentUrl(mxObject.getGuid(),changedDate.value?new Date(changedDate.value).getTime():null,!1)):unavailable()})}),uriResourceValue=computed$$1(()=>{const path=pathValue.get();return loadableResource("Fetching an image",async()=>"available"!==path.status?path:available(await NativeFileBackend.readAsDataURL(path.value)))}),uriValue=computed$$1(()=>uriResourceValue.get().get());return()=>asDynamicValue(mapL(uriValue.get(),uri=>props=>createElement(Image,Object.assign({source:{uri:uri}},props))))});export{DynamicImageProperty};
